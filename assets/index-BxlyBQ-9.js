function y1(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in i)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(i,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function _1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function v1(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var a=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return i[r]}})}),t}var sg={exports:{}},ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function E1(){if(KE)return ou;KE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var QE;function w1(){return QE||(QE=1,sg.exports=E1()),sg.exports}var x=w1(),ag={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function b1(){if(YE)return Re;YE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function L(V,ne,le){this.props=V,this.context=ne,this.refs=A,this.updater=le||N}L.prototype.isReactComponent={},L.prototype.setState=function(V,ne){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ne,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function K(){}K.prototype=L.prototype;function G(V,ne,le){this.props=V,this.context=ne,this.refs=A,this.updater=le||N}var W=G.prototype=new K;W.constructor=G,P(W,L.prototype),W.isPureReactComponent=!0;var se=Array.isArray;function ue(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function O(V,ne,le){var he=le.ref;return{$$typeof:i,type:V,key:ne,ref:he!==void 0?he:null,props:le}}function U(V,ne){return O(V.type,ne,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function B(V){var ne={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return ne[le]})}var D=/\/+/g;function ot(V,ne){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):ne.toString(36)}function Mt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ue,ue):(V.status="pending",V.then(function(ne){V.status==="pending"&&(V.status="fulfilled",V.value=ne)},function(ne){V.status==="pending"&&(V.status="rejected",V.reason=ne)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Z(V,ne,le,he,Se){var Ne=typeof V;(Ne==="undefined"||Ne==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Ne){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case i:case e:ze=!0;break;case _:return ze=V._init,Z(ze(V._payload),ne,le,he,Se)}}if(ze)return Se=Se(V),ze=he===""?"."+ot(V,0):he,se(Se)?(le="",ze!=null&&(le=ze.replace(D,"$&/")+"/"),Z(Se,ne,le,"",function(Is){return Is})):Se!=null&&(M(Se)&&(Se=U(Se,le+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+ze)),ne.push(Se)),1;ze=0;var Ut=he===""?".":he+":";if(se(V))for(var lt=0;lt<V.length;lt++)he=V[lt],Ne=Ut+ot(he,lt),ze+=Z(he,ne,le,Ne,Se);else if(lt=T(V),typeof lt=="function")for(V=lt.call(V),lt=0;!(he=V.next()).done;)he=he.value,Ne=Ut+ot(he,lt++),ze+=Z(he,ne,le,Ne,Se);else if(Ne==="object"){if(typeof V.then=="function")return Z(Mt(V),ne,le,he,Se);throw ne=String(V),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ze}function oe(V,ne,le){if(V==null)return V;var he=[],Se=0;return Z(V,he,"","",function(Ne){return ne.call(le,Ne,Se++)}),he}function _e(V){if(V._status===-1){var ne=V._result;ne=ne(),ne.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=ne)}if(V._status===1)return V._result.default;throw V._result}var qe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Qe={map:oe,forEach:function(V,ne,le){oe(V,function(){ne.apply(this,arguments)},le)},count:function(V){var ne=0;return oe(V,function(){ne++}),ne},toArray:function(V){return oe(V,function(ne){return ne})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Re.Activity=E,Re.Children=Qe,Re.Component=L,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=G,Re.StrictMode=r,Re.Suspense=m,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Re.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Re.cache=function(V){return function(){return V.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(V,ne,le){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=P({},V.props),Se=V.key;if(ne!=null)for(Ne in ne.key!==void 0&&(Se=""+ne.key),ne)!C.call(ne,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ne.ref===void 0||(he[Ne]=ne[Ne]);var Ne=arguments.length-2;if(Ne===1)he.children=le;else if(1<Ne){for(var ze=Array(Ne),Ut=0;Ut<Ne;Ut++)ze[Ut]=arguments[Ut+2];he.children=ze}return O(V.type,Se,he)},Re.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Re.createElement=function(V,ne,le){var he,Se={},Ne=null;if(ne!=null)for(he in ne.key!==void 0&&(Ne=""+ne.key),ne)C.call(ne,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=ne[he]);var ze=arguments.length-2;if(ze===1)Se.children=le;else if(1<ze){for(var Ut=Array(ze),lt=0;lt<ze;lt++)Ut[lt]=arguments[lt+2];Se.children=Ut}if(V&&V.defaultProps)for(he in ze=V.defaultProps,ze)Se[he]===void 0&&(Se[he]=ze[he]);return O(V,Ne,Se)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(V){return{$$typeof:d,render:V}},Re.isValidElement=M,Re.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:_e}},Re.memo=function(V,ne){return{$$typeof:g,type:V,compare:ne===void 0?null:ne}},Re.startTransition=function(V){var ne=I.T,le={};I.T=le;try{var he=V(),Se=I.S;Se!==null&&Se(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,qe)}catch(Ne){qe(Ne)}finally{ne!==null&&le.types!==null&&(ne.types=le.types),I.T=ne}},Re.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Re.use=function(V){return I.H.use(V)},Re.useActionState=function(V,ne,le){return I.H.useActionState(V,ne,le)},Re.useCallback=function(V,ne){return I.H.useCallback(V,ne)},Re.useContext=function(V){return I.H.useContext(V)},Re.useDebugValue=function(){},Re.useDeferredValue=function(V,ne){return I.H.useDeferredValue(V,ne)},Re.useEffect=function(V,ne){return I.H.useEffect(V,ne)},Re.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Re.useId=function(){return I.H.useId()},Re.useImperativeHandle=function(V,ne,le){return I.H.useImperativeHandle(V,ne,le)},Re.useInsertionEffect=function(V,ne){return I.H.useInsertionEffect(V,ne)},Re.useLayoutEffect=function(V,ne){return I.H.useLayoutEffect(V,ne)},Re.useMemo=function(V,ne){return I.H.useMemo(V,ne)},Re.useOptimistic=function(V,ne){return I.H.useOptimistic(V,ne)},Re.useReducer=function(V,ne,le){return I.H.useReducer(V,ne,le)},Re.useRef=function(V){return I.H.useRef(V)},Re.useState=function(V){return I.H.useState(V)},Re.useSyncExternalStore=function(V,ne,le){return I.H.useSyncExternalStore(V,ne,le)},Re.useTransition=function(){return I.H.useTransition()},Re.version="19.2.0",Re}var JE;function Ep(){return JE||(JE=1,ag.exports=b1()),ag.exports}var q=Ep(),og={exports:{}},lu={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function T1(){return WE||(WE=1,(function(i){function e(Z,oe){var _e=Z.length;Z.push(oe);e:for(;0<_e;){var qe=_e-1>>>1,Qe=Z[qe];if(0<a(Qe,oe))Z[qe]=oe,Z[_e]=Qe,_e=qe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var oe=Z[0],_e=Z.pop();if(_e!==oe){Z[0]=_e;e:for(var qe=0,Qe=Z.length,V=Qe>>>1;qe<V;){var ne=2*(qe+1)-1,le=Z[ne],he=ne+1,Se=Z[he];if(0>a(le,_e))he<Qe&&0>a(Se,le)?(Z[qe]=Se,Z[he]=_e,qe=he):(Z[qe]=le,Z[ne]=_e,qe=ne);else if(he<Qe&&0>a(Se,_e))Z[qe]=Se,Z[he]=_e,qe=he;else break e}}return oe}function a(Z,oe){var _e=Z.sortIndex-oe.sortIndex;return _e!==0?_e:Z.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,E=null,b=3,T=!1,N=!1,P=!1,A=!1,L=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function W(Z){for(var oe=t(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=Z)r(g),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(g)}}function se(Z){if(P=!1,W(Z),!N)if(t(m)!==null)N=!0,ue||(ue=!0,B());else{var oe=t(g);oe!==null&&Mt(se,oe.startTime-Z)}}var ue=!1,I=-1,C=5,O=-1;function U(){return A?!0:!(i.unstable_now()-O<C)}function M(){if(A=!1,ue){var Z=i.unstable_now();O=Z;var oe=!0;try{e:{N=!1,P&&(P=!1,K(I),I=-1),T=!0;var _e=b;try{t:{for(W(Z),E=t(m);E!==null&&!(E.expirationTime>Z&&U());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,b=E.priorityLevel;var Qe=qe(E.expirationTime<=Z);if(Z=i.unstable_now(),typeof Qe=="function"){E.callback=Qe,W(Z),oe=!0;break t}E===t(m)&&r(m),W(Z)}else r(m);E=t(m)}if(E!==null)oe=!0;else{var V=t(g);V!==null&&Mt(se,V.startTime-Z),oe=!1}}break e}finally{E=null,b=_e,T=!1}oe=void 0}}finally{oe?B():ue=!1}}}var B;if(typeof G=="function")B=function(){G(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ot=D.port2;D.port1.onmessage=M,B=function(){ot.postMessage(null)}}else B=function(){L(M,0)};function Mt(Z,oe){I=L(function(){Z(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var _e=b;b=oe;try{return Z()}finally{b=_e}},i.unstable_requestPaint=function(){A=!0},i.unstable_runWithPriority=function(Z,oe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var _e=b;b=Z;try{return oe()}finally{b=_e}},i.unstable_scheduleCallback=function(Z,oe,_e){var qe=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?qe+_e:qe):_e=qe,Z){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=_e+Qe,Z={id:_++,callback:oe,priorityLevel:Z,startTime:_e,expirationTime:Qe,sortIndex:-1},_e>qe?(Z.sortIndex=_e,e(g,Z),t(m)===null&&Z===t(g)&&(P?(K(I),I=-1):P=!0,Mt(se,_e-qe))):(Z.sortIndex=Qe,e(m,Z),N||T||(N=!0,ue||(ue=!0,B()))),Z},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(Z){var oe=b;return function(){var _e=b;b=oe;try{return Z.apply(this,arguments)}finally{b=_e}}}})(ug)),ug}var XE;function S1(){return XE||(XE=1,lg.exports=T1()),lg.exports}var cg={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function A1(){if(ZE)return rn;ZE=1;var i=Ep();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},rn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},rn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},rn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},rn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:T}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},rn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},rn.requestFormReset=function(m){r.d.r(m)},rn.unstable_batchedUpdates=function(m,g){return m(g)},rn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var e0;function R1(){if(e0)return cg.exports;e0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cg.exports=A1(),cg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function C1(){if(t0)return lu;t0=1;var i=S1(),e=Ep(),t=R1();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),n;if(p===u)return m(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var v=!1,S=f.child;S;){if(S===o){v=!0,o=f,u=p;break}if(S===u){v=!0,u=f,o=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===o){v=!0,o=p,u=f;break}if(S===u){v=!0,u=p,o=f;break}S=S.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),G=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ot(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case L:return"Profiler";case A:return"StrictMode";case se:return"Suspense";case ue:return"SuspenseList";case O:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case G:return n.displayName||"Context";case K:return(n._context.displayName||"Context")+".Consumer";case W:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return s=n.displayName||null,s!==null?s:ot(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return ot(n(s))}catch{}}return null}var Mt=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},qe=[],Qe=-1;function V(n){return{current:n}}function ne(n){0>Qe||(n.current=qe[Qe],qe[Qe]=null,Qe--)}function le(n,s){Qe++,qe[Qe]=n.current,n.current=s}var he=V(null),Se=V(null),Ne=V(null),ze=V(null);function Ut(n,s){switch(le(Ne,s),le(Se,n),le(he,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?pE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=pE(s),n=yE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(he),le(he,n)}function lt(){ne(he),ne(Se),ne(Ne)}function Is(n){n.memoizedState!==null&&le(ze,n);var s=he.current,o=yE(s,n.type);s!==o&&(le(Se,n),le(he,o))}function Ca(n){Se.current===n&&(ne(he),ne(Se)),ze.current===n&&(ne(ze),ru._currentValue=_e)}var Ia,Oa;function yr(n){if(Ia===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ia=s&&s[1]||"",Oa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ia+n+Oa}var rl=!1;function Os(n,s){if(!n||rl)return"";rl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(J){var Q=J}Reflect.construct(n,[],te)}else{try{te.call()}catch(J){Q=J}n.call(te.prototype)}}else{try{throw Error()}catch(J){Q=J}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],S=p[1];if(v&&S){var k=v.split(`
`),$=S.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===$.length)for(u=k.length-1,f=$.length-1;1<=u&&0<=f&&k[u]!==$[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==$[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==$[f]){var X=`
`+k[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{rl=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?yr(o):""}function il(n,s){switch(n.tag){case 26:case 27:case 5:return yr(n.type);case 16:return yr("Lazy");case 13:return n.child!==s&&s!==null?yr("Suspense Fallback"):yr("Suspense");case 19:return yr("SuspenseList");case 0:case 15:return Os(n.type,!1);case 11:return Os(n.type.render,!1);case 1:return Os(n.type,!0);case 31:return yr("Activity");default:return""}}function sl(n){try{var s="",o=null;do s+=il(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,jt=i.unstable_scheduleCallback,Ai=i.unstable_cancelCallback,of=i.unstable_shouldYield,ic=i.unstable_requestPaint,hn=i.unstable_now,Ns=i.unstable_getCurrentPriorityLevel,al=i.unstable_ImmediatePriority,ol=i.unstable_UserBlockingPriority,Ri=i.unstable_NormalPriority,lf=i.unstable_LowPriority,sc=i.unstable_IdlePriority,ac=i.log,oc=i.unstable_setDisableYieldValue,Wn=null,Kt=null;function xn(n){if(typeof ac=="function"&&oc(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Wn,n)}catch{}}var yt=Math.clz32?Math.clz32:uc,lc=Math.log,Na=Math.LN2;function uc(n){return n>>>=0,n===0?32:31-(lc(n)/Na|0)|0}var _r=256,Ds=262144,St=4194304;function vr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Er(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?f=vr(u):(v&=S,v!==0?f=vr(v):o||(o=S&~n,o!==0&&(f=vr(o))))):(S=u&~p,S!==0?f=vr(S):v!==0?f=vr(v):o||(o=u&~n,o!==0&&(f=vr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Xn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function uf(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cc(){var n=St;return St<<=1,(St&62914560)===0&&(St=4194304),n}function wr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function ks(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function cf(n,s,o,u,f,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,k=n.expirationTimes,$=n.hiddenUpdates;for(o=v&~o;0<o;){var X=31-yt(o),te=1<<X;S[X]=0,k[X]=-1;var Q=$[X];if(Q!==null)for($[X]=null,X=0;X<Q.length;X++){var J=Q[X];J!==null&&(J.lane&=-536870913)}o&=~te}u!==0&&xs(n,u,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~s))}function xs(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-yt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function ll(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-yt(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function ul(n,s){var o=s&-s;return o=(o&42)!==0?1:Ps(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ps(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Yr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function hc(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:zE(n.type))}function Zn(n,s){var o=oe.p;try{return oe.p=n,s()}finally{oe.p=o}}var er=Math.random().toString(36).slice(2),At="__reactFiber$"+er,qt="__reactProps$"+er,br="__reactContainer$"+er,Da="__reactEvents$"+er,hf="__reactListeners$"+er,dc="__reactHandles$"+er,fc="__reactResources$"+er,Tr="__reactMarker$"+er;function ka(n){delete n[At],delete n[qt],delete n[Da],delete n[hf],delete n[dc]}function Sr(n){var s=n[At];if(s)return s;for(var o=n.parentNode;o;){if(s=o[br]||o[At]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=SE(n);n!==null;){if(o=n[At])return o;n=SE(n)}return s}n=o,o=n.parentNode}return null}function Pn(n){if(n=n[At]||n[br]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function bn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ar(n){var s=n[fc];return s||(s=n[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(n){n[Tr]=!0}var cl=new Set,hl={};function Rr(n,s){Cr(n,s),Cr(n+"Capture",s)}function Cr(n,s){for(hl[n]=s,n=0;n<s.length;n++)cl.add(s[n])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fl={},ml={};function mc(n){return Tt.call(ml,n)?!0:Tt.call(fl,n)?!1:dl.test(n)?ml[n]=!0:(fl[n]=!0,!1)}function xa(n,s,o){if(mc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Tn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Ct(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Ht(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ci(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ye(n){if(!n._valueTracker){var s=Ci(n)?"checked":"value";n._valueTracker=gl(n,s,""+n[s])}}function Ms(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ci(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Ir(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Us=/[\n"\\]/g;function mn(n){return n.replace(Us,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pa(n,s,o,u,f,p,v,S){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Ht(s)):n.value!==""+Ht(s)&&(n.value=""+Ht(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?pl(n,v,Ht(s)):o!=null?pl(n,v,Ht(o)):u!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Ht(S):n.removeAttribute("name")}function gc(n,s,o,u,f,p,v,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Ye(n);return}o=o!=null?""+Ht(o):"",s=s!=null?""+Ht(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ye(n)}function pl(n,s,o){s==="number"&&Ir(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ii(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ht(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function pc(n,s,o){if(s!=null&&(s=""+Ht(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Ht(o):""}function Oi(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Mt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ht(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ye(n)}function gn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||yc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function _l(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&yl(n,f,u)}else for(var p in s)s.hasOwnProperty(p)&&yl(n,p,s[p])}function Ma(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _c=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ni=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return Ni.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function tr(){}var vl=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Di=null,Or=null;function js(n){var s=Pn(n);if(s&&(n=s.stateNode)){var o=n[qt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[qt]||null;if(!f)throw Error(r(90));Pa(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Ms(u)}break e;case"textarea":pc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ii(n,!!o.multiple,s,!1)}}}var ja=!1;function ki(n,s,o){if(ja)return n(s,o);ja=!0;try{var u=n(s);return u}finally{if(ja=!1,(Di!==null||Or!==null)&&(hh(),Di&&(s=Di,n=Or,Or=Di=null,js(s),n)))for(s=0;s<n.length;s++)js(n[s])}}function nr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[qt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(Un)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Vs=!1}var Nr=null,El=null,Ls=null;function wl(){if(Ls)return Ls;var n,s=El,o=s.length,u,f="value"in Nr?Nr.value:Nr.textContent,p=f.length;for(n=0;n<o&&s[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===f[p-u];u++);return Ls=f.slice(n,1<u?1-u:void 0)}function zs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Jr(){return!0}function rr(){return!1}function Qt(n){function s(o,u,f,p,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jr:rr,this.isPropagationStopped=rr,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),s}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dr=Qt(Wr),xi=E({},Wr,{view:0,detail:0}),bl=Qt(xi),Pi,Va,kr,La=E({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kr&&(kr&&n.type==="mousemove"?(Pi=n.screenX-kr.screenX,Va=n.screenY-kr.screenY):Va=Pi=0,kr=n),Pi)},movementY:function(n){return"movementY"in n?n.movementY:Va}}),Tl=Qt(La),Bs=E({},La,{dataTransfer:0}),vc=Qt(Bs),Ec=E({},xi,{relatedTarget:0}),qs=Qt(Ec),Sl=E({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=Qt(Sl),za=E({},Wr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bc=Qt(za),Tc=E({},Wr,{data:0}),xr=Qt(Tc),Sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Rc[n])?!!s[n]:!1}function Mi(){return Cc}var dn=E({},xi,{key:function(n){if(n.key){var s=Sc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ac[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ic=Qt(dn),Oc=E({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=Qt(Oc),h=E({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi}),y=Qt(h),w=E({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Qt(w),H=E({},La,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Qt(H),ae=E({},Wr,{newState:0,oldState:0}),Ie=Qt(ae),_t=[9,13,27,32],$e=Un&&"CompositionEvent"in window,ut=null;Un&&"documentMode"in document&&(ut=document.documentMode);var jn=Un&&"TextEvent"in window&&!ut,Pr=Un&&(!$e||ut&&8<ut&&11>=ut),ir=" ",sr=!1;function Hs(n,s){switch(n){case"keyup":return _t.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qa=!1;function BA(n,s){switch(n){case"compositionend":return Ba(s);case"keypress":return s.which!==32?null:(sr=!0,ir);case"textInput":return n=s.data,n===ir&&sr?null:n;default:return null}}function qA(n,s){if(qa)return n==="compositionend"||!$e&&Hs(n,s)?(n=wl(),Ls=El=Nr=null,qa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pr&&s.locale!=="ko"?null:s.data;default:return null}}var HA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!HA[n.type]:s==="textarea"}function Iy(n,s,o,u){Di?Or?Or.push(u):Or=[u]:Di=u,s=_h(s,"onChange"),0<s.length&&(o=new Dr("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Al=null,Rl=null;function FA(n){cE(n,0)}function Nc(n){var s=bn(n);if(Ms(s))return n}function Oy(n,s){if(n==="change")return s}var Ny=!1;if(Un){var df;if(Un){var ff="oninput"in document;if(!ff){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),ff=typeof Dy.oninput=="function"}df=ff}else df=!1;Ny=df&&(!document.documentMode||9<document.documentMode)}function ky(){Al&&(Al.detachEvent("onpropertychange",xy),Rl=Al=null)}function xy(n){if(n.propertyName==="value"&&Nc(Rl)){var s=[];Iy(s,Rl,n,Mn(n)),ki(FA,s)}}function $A(n,s,o){n==="focusin"?(ky(),Al=s,Rl=o,Al.attachEvent("onpropertychange",xy)):n==="focusout"&&ky()}function GA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nc(Rl)}function KA(n,s){if(n==="click")return Nc(s)}function QA(n,s){if(n==="input"||n==="change")return Nc(s)}function YA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:YA;function Cl(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Tt.call(s,f)||!Sn(n[f],s[f]))return!1}return!0}function Py(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function My(n,s){var o=Py(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Py(o)}}function Uy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Uy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ir(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Ir(n.document)}return s}function mf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var JA=Un&&"documentMode"in document&&11>=document.documentMode,Ha=null,gf=null,Il=null,pf=!1;function Vy(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pf||Ha==null||Ha!==Ir(u)||(u=Ha,"selectionStart"in u&&mf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Il&&Cl(Il,u)||(Il=u,u=_h(gf,"onSelect"),0<u.length&&(s=new Dr("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ha)))}function Fs(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Fa={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},yf={},Ly={};Un&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function $s(n){if(yf[n])return yf[n];if(!Fa[n])return n;var s=Fa[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ly)return yf[n]=s[o];return n}var zy=$s("animationend"),By=$s("animationiteration"),qy=$s("animationstart"),WA=$s("transitionrun"),XA=$s("transitionstart"),ZA=$s("transitioncancel"),Hy=$s("transitionend"),Fy=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function ar(n,s){Fy.set(n,s),Rr(s,[n])}var Dc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Vn=[],$a=0,vf=0;function kc(){for(var n=$a,s=vf=$a=0;s<n;){var o=Vn[s];Vn[s++]=null;var u=Vn[s];Vn[s++]=null;var f=Vn[s];Vn[s++]=null;var p=Vn[s];if(Vn[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}p!==0&&$y(o,f,p)}}function xc(n,s,o,u){Vn[$a++]=n,Vn[$a++]=s,Vn[$a++]=o,Vn[$a++]=u,vf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ef(n,s,o,u){return xc(n,s,o,u),Pc(n)}function Gs(n,s){return xc(n,null,null,s),Pc(n)}function $y(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&s!==null&&(f=31-yt(o),n=p.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Pc(n){if(50<Jl)throw Jl=0,Om=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ga={};function eR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,s,o,u){return new eR(n,s,o,u)}function wf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zr(n,s){var o=n.alternate;return o===null?(o=An(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Gy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Mc(n,s,o,u,f,p){var v=0;if(u=n,typeof n=="function")wf(n)&&(v=1);else if(typeof n=="string")v=s1(n,o,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case O:return n=An(31,o,s,f),n.elementType=O,n.lanes=p,n;case P:return Ks(o.children,f,p,s);case A:v=8,f|=24;break;case L:return n=An(12,o,s,f|2),n.elementType=L,n.lanes=p,n;case se:return n=An(13,o,s,f),n.elementType=se,n.lanes=p,n;case ue:return n=An(19,o,s,f),n.elementType=ue,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:v=10;break e;case K:v=9;break e;case W:v=11;break e;case I:v=14;break e;case C:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=An(v,o,s,f),s.elementType=n,s.type=u,s.lanes=p,s}function Ks(n,s,o,u){return n=An(7,n,u,s),n.lanes=o,n}function bf(n,s,o){return n=An(6,n,null,s),n.lanes=o,n}function Ky(n){var s=An(18,null,null,0);return s.stateNode=n,s}function Tf(n,s,o){return s=An(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Qy=new WeakMap;function Ln(n,s){if(typeof n=="object"&&n!==null){var o=Qy.get(n);return o!==void 0?o:(s={value:n,source:s,stack:sl(s)},Qy.set(n,s),s)}return{value:n,source:s,stack:sl(s)}}var Ka=[],Qa=0,Uc=null,Ol=0,zn=[],Bn=0,Ui=null,Mr=1,Ur="";function ei(n,s){Ka[Qa++]=Ol,Ka[Qa++]=Uc,Uc=n,Ol=s}function Yy(n,s,o){zn[Bn++]=Mr,zn[Bn++]=Ur,zn[Bn++]=Ui,Ui=n;var u=Mr;n=Ur;var f=32-yt(u)-1;u&=~(1<<f),o+=1;var p=32-yt(s)+f;if(30<p){var v=f-f%5;p=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Mr=1<<32-yt(s)+f|o<<f|u,Ur=p+n}else Mr=1<<p|o<<f|u,Ur=n}function Sf(n){n.return!==null&&(ei(n,1),Yy(n,1,0))}function Af(n){for(;n===Uc;)Uc=Ka[--Qa],Ka[Qa]=null,Ol=Ka[--Qa],Ka[Qa]=null;for(;n===Ui;)Ui=zn[--Bn],zn[Bn]=null,Ur=zn[--Bn],zn[Bn]=null,Mr=zn[--Bn],zn[Bn]=null}function Jy(n,s){zn[Bn++]=Mr,zn[Bn++]=Ur,zn[Bn++]=Ui,Mr=s.id,Ur=s.overflow,Ui=n}var Yt=null,it=null,Le=!1,ji=null,qn=!1,Rf=Error(r(519));function Vi(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(Ln(s,n)),Rf}function Wy(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[At]=n,s[qt]=u,o){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(o=0;o<Xl.length;o++)xe(Xl[o],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":xe("invalid",s),gc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",s);break;case"textarea":xe("invalid",s),Oi(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||mE(s.textContent,o)?(u.popover!=null&&(xe("beforetoggle",s),xe("toggle",s)),u.onScroll!=null&&xe("scroll",s),u.onScrollEnd!=null&&xe("scrollend",s),u.onClick!=null&&(s.onclick=tr),s=!0):s=!1,s||Vi(n,!0)}function Xy(n){for(Yt=n.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Yt=Yt.return}}function Ya(n){if(n!==Yt)return!1;if(!Le)return Xy(n),Le=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Fm(n.type,n.memoizedProps)),o=!o),o&&it&&Vi(n),Xy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=TE(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=TE(n)}else s===27?(s=it,Xi(n.type)?(n=Ym,Ym=null,it=n):it=s):it=Yt?Fn(n.stateNode.nextSibling):null;return!0}function Qs(){it=Yt=null,Le=!1}function Cf(){var n=ji;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),ji=null),n}function Nl(n){ji===null?ji=[n]:ji.push(n)}var If=V(null),Ys=null,ti=null;function Li(n,s,o){le(If,s._currentValue),s._currentValue=o}function ni(n){n._currentValue=If.current,ne(If)}function Of(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Nf(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=f;for(var k=0;k<s.length;k++)if(S.context===s[k]){p.lanes|=o,S=p.alternate,S!==null&&(S.lanes|=o),Of(p.return,o,n),u||(v=null);break e}p=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Of(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Ja(n,s,o,u){n=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var S=f.type;Sn(f.pendingProps.value,v.value)||(n!==null?n.push(S):n=[S])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ru):n=[ru])}f=f.return}n!==null&&Nf(s,n,o,u),s.flags|=262144}function jc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Js(n){Ys=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return Zy(Ys,n)}function Vc(n,s){return Ys===null&&Js(n),Zy(n,s)}function Zy(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ti===null){if(n===null)throw Error(r(308));ti=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ti=ti.next=s;return o}var tR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},nR=i.unstable_scheduleCallback,rR=i.unstable_NormalPriority,It={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new tR,data:new Map,refCount:0}}function Dl(n){n.refCount--,n.refCount===0&&nR(rR,function(){n.controller.abort()})}var kl=null,kf=0,Wa=0,Xa=null;function iR(n,s){if(kl===null){var o=kl=[];kf=0,Wa=Mm(),Xa={status:"pending",value:void 0,then:function(u){o.push(u)}}}return kf++,s.then(e_,e_),s}function e_(){if(--kf===0&&kl!==null){Xa!==null&&(Xa.status="fulfilled");var n=kl;kl=null,Wa=0,Xa=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function sR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var t_=Z.S;Z.S=function(n,s){Vv=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&iR(n,s),t_!==null&&t_(n,s)};var Ws=V(null);function xf(){var n=Ws.current;return n!==null?n:nt.pooledCache}function Lc(n,s){s===null?le(Ws,Ws.current):le(Ws,s.pool)}function n_(){var n=xf();return n===null?null:{parent:It._currentValue,pool:n}}var Za=Error(r(460)),Pf=Error(r(474)),zc=Error(r(542)),Bc={then:function(){}};function r_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function i_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(tr,tr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,a_(n),n;default:if(typeof s.status=="string")s.then(tr,tr);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,a_(n),n}throw Zs=s,Za}}function Xs(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Zs=o,Za):o}}var Zs=null;function s_(){if(Zs===null)throw Error(r(459));var n=Zs;return Zs=null,n}function a_(n){if(n===Za||n===zc)throw Error(r(483))}var eo=null,xl=0;function qc(n){var s=xl;return xl+=1,eo===null&&(eo=[]),i_(eo,n,s)}function Pl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Hc(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function o_(n){function s(z,j){if(n){var F=z.deletions;F===null?(z.deletions=[j],z.flags|=16):F.push(j)}}function o(z,j){if(!n)return null;for(;j!==null;)s(z,j),j=j.sibling;return null}function u(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function f(z,j){return z=Zr(z,j),z.index=0,z.sibling=null,z}function p(z,j,F){return z.index=F,n?(F=z.alternate,F!==null?(F=F.index,F<j?(z.flags|=67108866,j):F):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function v(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function S(z,j,F,ee){return j===null||j.tag!==6?(j=bf(F,z.mode,ee),j.return=z,j):(j=f(j,F),j.return=z,j)}function k(z,j,F,ee){var ye=F.type;return ye===P?X(z,j,F.props.children,ee,F.key):j!==null&&(j.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&Xs(ye)===j.type)?(j=f(j,F.props),Pl(j,F),j.return=z,j):(j=Mc(F.type,F.key,F.props,null,z.mode,ee),Pl(j,F),j.return=z,j)}function $(z,j,F,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==F.containerInfo||j.stateNode.implementation!==F.implementation?(j=Tf(F,z.mode,ee),j.return=z,j):(j=f(j,F.children||[]),j.return=z,j)}function X(z,j,F,ee,ye){return j===null||j.tag!==7?(j=Ks(F,z.mode,ee,ye),j.return=z,j):(j=f(j,F),j.return=z,j)}function te(z,j,F){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=bf(""+j,z.mode,F),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return F=Mc(j.type,j.key,j.props,null,z.mode,F),Pl(F,j),F.return=z,F;case N:return j=Tf(j,z.mode,F),j.return=z,j;case C:return j=Xs(j),te(z,j,F)}if(Mt(j)||B(j))return j=Ks(j,z.mode,F,null),j.return=z,j;if(typeof j.then=="function")return te(z,qc(j),F);if(j.$$typeof===G)return te(z,Vc(z,j),F);Hc(z,j)}return null}function Q(z,j,F,ee){var ye=j!==null?j.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:S(z,j,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===ye?k(z,j,F,ee):null;case N:return F.key===ye?$(z,j,F,ee):null;case C:return F=Xs(F),Q(z,j,F,ee)}if(Mt(F)||B(F))return ye!==null?null:X(z,j,F,ee,null);if(typeof F.then=="function")return Q(z,j,qc(F),ee);if(F.$$typeof===G)return Q(z,j,Vc(z,F),ee);Hc(z,F)}return null}function J(z,j,F,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get(F)||null,S(j,z,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return z=z.get(ee.key===null?F:ee.key)||null,k(j,z,ee,ye);case N:return z=z.get(ee.key===null?F:ee.key)||null,$(j,z,ee,ye);case C:return ee=Xs(ee),J(z,j,F,ee,ye)}if(Mt(ee)||B(ee))return z=z.get(F)||null,X(j,z,ee,ye,null);if(typeof ee.then=="function")return J(z,j,F,qc(ee),ye);if(ee.$$typeof===G)return J(z,j,F,Vc(j,ee),ye);Hc(j,ee)}return null}function de(z,j,F,ee){for(var ye=null,He=null,fe=j,De=j=0,Me=null;fe!==null&&De<F.length;De++){fe.index>De?(Me=fe,fe=null):Me=fe.sibling;var Fe=Q(z,fe,F[De],ee);if(Fe===null){fe===null&&(fe=Me);break}n&&fe&&Fe.alternate===null&&s(z,fe),j=p(Fe,j,De),He===null?ye=Fe:He.sibling=Fe,He=Fe,fe=Me}if(De===F.length)return o(z,fe),Le&&ei(z,De),ye;if(fe===null){for(;De<F.length;De++)fe=te(z,F[De],ee),fe!==null&&(j=p(fe,j,De),He===null?ye=fe:He.sibling=fe,He=fe);return Le&&ei(z,De),ye}for(fe=u(fe);De<F.length;De++)Me=J(fe,z,De,F[De],ee),Me!==null&&(n&&Me.alternate!==null&&fe.delete(Me.key===null?De:Me.key),j=p(Me,j,De),He===null?ye=Me:He.sibling=Me,He=Me);return n&&fe.forEach(function(rs){return s(z,rs)}),Le&&ei(z,De),ye}function Ee(z,j,F,ee){if(F==null)throw Error(r(151));for(var ye=null,He=null,fe=j,De=j=0,Me=null,Fe=F.next();fe!==null&&!Fe.done;De++,Fe=F.next()){fe.index>De?(Me=fe,fe=null):Me=fe.sibling;var rs=Q(z,fe,Fe.value,ee);if(rs===null){fe===null&&(fe=Me);break}n&&fe&&rs.alternate===null&&s(z,fe),j=p(rs,j,De),He===null?ye=rs:He.sibling=rs,He=rs,fe=Me}if(Fe.done)return o(z,fe),Le&&ei(z,De),ye;if(fe===null){for(;!Fe.done;De++,Fe=F.next())Fe=te(z,Fe.value,ee),Fe!==null&&(j=p(Fe,j,De),He===null?ye=Fe:He.sibling=Fe,He=Fe);return Le&&ei(z,De),ye}for(fe=u(fe);!Fe.done;De++,Fe=F.next())Fe=J(fe,z,De,Fe.value,ee),Fe!==null&&(n&&Fe.alternate!==null&&fe.delete(Fe.key===null?De:Fe.key),j=p(Fe,j,De),He===null?ye=Fe:He.sibling=Fe,He=Fe);return n&&fe.forEach(function(p1){return s(z,p1)}),Le&&ei(z,De),ye}function tt(z,j,F,ee){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:e:{for(var ye=F.key;j!==null;){if(j.key===ye){if(ye=F.type,ye===P){if(j.tag===7){o(z,j.sibling),ee=f(j,F.props.children),ee.return=z,z=ee;break e}}else if(j.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&Xs(ye)===j.type){o(z,j.sibling),ee=f(j,F.props),Pl(ee,F),ee.return=z,z=ee;break e}o(z,j);break}else s(z,j);j=j.sibling}F.type===P?(ee=Ks(F.props.children,z.mode,ee,F.key),ee.return=z,z=ee):(ee=Mc(F.type,F.key,F.props,null,z.mode,ee),Pl(ee,F),ee.return=z,z=ee)}return v(z);case N:e:{for(ye=F.key;j!==null;){if(j.key===ye)if(j.tag===4&&j.stateNode.containerInfo===F.containerInfo&&j.stateNode.implementation===F.implementation){o(z,j.sibling),ee=f(j,F.children||[]),ee.return=z,z=ee;break e}else{o(z,j);break}else s(z,j);j=j.sibling}ee=Tf(F,z.mode,ee),ee.return=z,z=ee}return v(z);case C:return F=Xs(F),tt(z,j,F,ee)}if(Mt(F))return de(z,j,F,ee);if(B(F)){if(ye=B(F),typeof ye!="function")throw Error(r(150));return F=ye.call(F),Ee(z,j,F,ee)}if(typeof F.then=="function")return tt(z,j,qc(F),ee);if(F.$$typeof===G)return tt(z,j,Vc(z,F),ee);Hc(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,j!==null&&j.tag===6?(o(z,j.sibling),ee=f(j,F),ee.return=z,z=ee):(o(z,j),ee=bf(F,z.mode,ee),ee.return=z,z=ee),v(z)):o(z,j)}return function(z,j,F,ee){try{xl=0;var ye=tt(z,j,F,ee);return eo=null,ye}catch(fe){if(fe===Za||fe===zc)throw fe;var He=An(29,fe,null,z.mode);return He.lanes=ee,He.return=z,He}finally{}}}var ea=o_(!0),l_=o_(!1),zi=!1;function Mf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function qi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Pc(n),$y(n,null,o),s}return xc(n,u,s,o),Pc(n)}function Ml(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,ll(n,o)}}function jf(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Vf=!1;function Ul(){if(Vf){var n=Xa;if(n!==null)throw n}}function jl(n,s,o,u){Vf=!1;var f=n.updateQueue;zi=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,$=k.next;k.next=null,v===null?p=$:v.next=$,v=k;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==v&&(S===null?X.firstBaseUpdate=$:S.next=$,X.lastBaseUpdate=k))}if(p!==null){var te=f.baseState;v=0,X=$=k=null,S=p;do{var Q=S.lane&-536870913,J=Q!==S.lane;if(J?(Pe&Q)===Q:(u&Q)===Q){Q!==0&&Q===Wa&&(Vf=!0),X!==null&&(X=X.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var de=n,Ee=S;Q=s;var tt=o;switch(Ee.tag){case 1:if(de=Ee.payload,typeof de=="function"){te=de.call(tt,te,Q);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Ee.payload,Q=typeof de=="function"?de.call(tt,te,Q):de,Q==null)break e;te=E({},te,Q);break e;case 2:zi=!0}}Q=S.callback,Q!==null&&(n.flags|=64,J&&(n.flags|=8192),J=f.callbacks,J===null?f.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?($=X=J,k=te):X=X.next=J,v|=Q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;J=S,S=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);X===null&&(k=te),f.baseState=k,f.firstBaseUpdate=$,f.lastBaseUpdate=X,p===null&&(f.shared.lanes=0),Ki|=v,n.lanes=v,n.memoizedState=te}}function u_(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function c_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)u_(o[n],s)}var to=V(null),Fc=V(0);function h_(n,s){n=hi,le(Fc,n),le(to,s),hi=n|s.baseLanes}function Lf(){le(Fc,hi),le(to,to.current)}function zf(){hi=Fc.current,ne(to),ne(Fc)}var Rn=V(null),Hn=null;function Hi(n){var s=n.alternate;le(vt,vt.current&1),le(Rn,n),Hn===null&&(s===null||to.current!==null||s.memoizedState!==null)&&(Hn=n)}function Bf(n){le(vt,vt.current),le(Rn,n),Hn===null&&(Hn=n)}function d_(n){n.tag===22?(le(vt,vt.current),le(Rn,n),Hn===null&&(Hn=n)):Fi()}function Fi(){le(vt,vt.current),le(Rn,Rn.current)}function Cn(n){ne(Rn),Hn===n&&(Hn=null),ne(vt)}var vt=V(0);function $c(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Km(o)||Qm(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ri=0,Oe=null,Ze=null,Ot=null,Gc=!1,no=!1,ta=!1,Kc=0,Vl=0,ro=null,aR=0;function gt(){throw Error(r(321))}function qf(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Sn(n[o],s[o]))return!1;return!0}function Hf(n,s,o,u,f,p){return ri=p,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=n===null||n.memoizedState===null?Y_:im,ta=!1,p=o(u,f),ta=!1,no&&(p=m_(s,o,u,f)),f_(n),p}function f_(n){Z.H=Bl;var s=Ze!==null&&Ze.next!==null;if(ri=0,Ot=Ze=Oe=null,Gc=!1,Vl=0,ro=null,s)throw Error(r(300));n===null||Nt||(n=n.dependencies,n!==null&&jc(n)&&(Nt=!0))}function m_(n,s,o,u){Oe=n;var f=0;do{if(no&&(ro=null),Vl=0,no=!1,25<=f)throw Error(r(301));if(f+=1,Ot=Ze=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Z.H=J_,p=s(o,u)}while(no);return p}function oR(){var n=Z.H,s=n.useState()[0];return s=typeof s.then=="function"?Ll(s):s,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Ff(){var n=Kc!==0;return Kc=0,n}function $f(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Gf(n){if(Gc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Gc=!1}ri=0,Ot=Ze=Oe=null,no=!1,Vl=Kc=0,ro=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Oe.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Et(){if(Ze===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var s=Ot===null?Oe.memoizedState:Ot.next;if(s!==null)Ot=s,Ze=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ot===null?Oe.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function Qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(n){var s=Vl;return Vl+=1,ro===null&&(ro=[]),n=i_(ro,n,s),s=Oe,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?Y_:im),n}function Yc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ll(n);if(n.$$typeof===G)return Jt(n)}throw Error(r(438,String(n)))}function Kf(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Qc(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=U;return s.index++,o}function ii(n,s){return typeof s=="function"?s(n):s}function Jc(n){var s=Et();return Qf(s,Ze,n)}function Qf(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,p=u.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}s.baseQueue=f=p,u.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{s=f.next;var S=v=null,k=null,$=s,X=!1;do{var te=$.lane&-536870913;if(te!==$.lane?(Pe&te)===te:(ri&te)===te){var Q=$.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),te===Wa&&(X=!0);else if((ri&Q)===Q){$=$.next,Q===Wa&&(X=!0);continue}else te={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=te,v=p):k=k.next=te,Oe.lanes|=Q,Ki|=Q;te=$.action,ta&&o(p,te),p=$.hasEagerState?$.eagerState:o(p,te)}else Q={lane:te,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=Q,v=p):k=k.next=Q,Oe.lanes|=te,Ki|=te;$=$.next}while($!==null&&$!==s);if(k===null?v=p:k.next=S,!Sn(p,n.memoizedState)&&(Nt=!0,X&&(o=Xa,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=k,u.lastRenderedState=p}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Yf(n){var s=Et(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do p=n(p,v.action),v=v.next;while(v!==f);Sn(p,s.memoizedState)||(Nt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function g_(n,s,o){var u=Oe,f=Et(),p=Le;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!Sn((Ze||f).memoizedState,o);if(v&&(f.memoizedState=o,Nt=!0),f=f.queue,Xf(__.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,io(9,{destroy:void 0},y_.bind(null,u,f,o,s),null),nt===null)throw Error(r(349));p||(ri&127)!==0||p_(u,s,o)}return o}function p_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=Qc(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function y_(n,s,o,u){s.value=o,s.getSnapshot=u,v_(s)&&E_(n)}function __(n,s,o){return o(function(){v_(s)&&E_(n)})}function v_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Sn(n,o)}catch{return!0}}function E_(n){var s=Gs(n,2);s!==null&&En(s,n,2)}function Jf(n){var s=fn();if(typeof n=="function"){var o=n;if(n=o(),ta){xn(!0);try{o()}finally{xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:n},s}function w_(n,s,o,u){return n.baseState=o,Qf(n,Ze,typeof u=="function"?u:ii)}function lR(n,s,o,u,f){if(Zc(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};Z.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,b_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function b_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var p=Z.T,v={};Z.T=v;try{var S=o(f,u),k=Z.S;k!==null&&k(v,S),T_(n,s,S)}catch($){Wf(n,s,$)}finally{p!==null&&v.types!==null&&(p.types=v.types),Z.T=p}}else try{p=o(f,u),T_(n,s,p)}catch($){Wf(n,s,$)}}function T_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){S_(n,s,u)},function(u){return Wf(n,s,u)}):S_(n,s,o)}function S_(n,s,o){s.status="fulfilled",s.value=o,A_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,b_(n,o)))}function Wf(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,A_(s),s=s.next;while(s!==u)}n.action=null}function A_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function R_(n,s){return s}function C_(n,s){if(Le){var o=nt.formState;if(o!==null){e:{var u=Oe;if(Le){if(it){t:{for(var f=it,p=qn;f.nodeType!==8;){if(!p){f=null;break t}if(f=Fn(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){it=Fn(f.nextSibling),u=f.data==="F!";break e}}Vi(u)}u=!1}u&&(s=o[0])}}return o=fn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R_,lastRenderedState:s},o.queue=u,o=G_.bind(null,Oe,u),u.dispatch=o,u=Jf(!1),p=rm.bind(null,Oe,!1,u.queue),u=fn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=lR.bind(null,Oe,f,p,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function I_(n){var s=Et();return O_(s,Ze,n)}function O_(n,s,o){if(s=Qf(n,s,R_)[0],n=Jc(ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ll(s)}catch(v){throw v===Za?zc:v}else u=s;s=Et();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,io(9,{destroy:void 0},uR.bind(null,f,o),null)),[u,p,n]}function uR(n,s){n.action=s}function N_(n){var s=Et(),o=Ze;if(o!==null)return O_(s,o,n);Et(),s=s.memoizedState,o=Et();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function io(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Qc(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function D_(){return Et().memoizedState}function Wc(n,s,o,u){var f=fn();Oe.flags|=n,f.memoizedState=io(1|s,{destroy:void 0},o,u===void 0?null:u)}function Xc(n,s,o,u){var f=Et();u=u===void 0?null:u;var p=f.memoizedState.inst;Ze!==null&&u!==null&&qf(u,Ze.memoizedState.deps)?f.memoizedState=io(s,p,o,u):(Oe.flags|=n,f.memoizedState=io(1|s,p,o,u))}function k_(n,s){Wc(8390656,8,n,s)}function Xf(n,s){Xc(2048,8,n,s)}function cR(n){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Qc(),Oe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function x_(n){var s=Et().memoizedState;return cR({ref:s,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function P_(n,s){return Xc(4,2,n,s)}function M_(n,s){return Xc(4,4,n,s)}function U_(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function j_(n,s,o){o=o!=null?o.concat([n]):null,Xc(4,4,U_.bind(null,s,n),o)}function Zf(){}function V_(n,s){var o=Et();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&qf(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function L_(n,s){var o=Et();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&qf(s,u[1]))return u[0];if(u=n(),ta){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u}function em(n,s,o){return o===void 0||(ri&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=zv(),Oe.lanes|=n,Ki|=n,o)}function z_(n,s,o,u){return Sn(o,s)?o:to.current!==null?(n=em(n,o,u),Sn(n,s)||(Nt=!0),n):(ri&42)===0||(ri&1073741824)!==0&&(Pe&261930)===0?(Nt=!0,n.memoizedState=o):(n=zv(),Oe.lanes|=n,Ki|=n,s)}function B_(n,s,o,u,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var v=Z.T,S={};Z.T=S,rm(n,!1,s,o);try{var k=f(),$=Z.S;if($!==null&&$(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=sR(k,u);zl(n,s,X,Nn(n))}else zl(n,s,u,Nn(n))}catch(te){zl(n,s,{then:function(){},status:"rejected",reason:te},Nn())}finally{oe.p=p,v!==null&&S.types!==null&&(v.types=S.types),Z.T=v}}function hR(){}function tm(n,s,o,u){if(n.tag!==5)throw Error(r(476));var f=q_(n).queue;B_(n,f,s,_e,o===null?hR:function(){return H_(n),o(u)})}function q_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function H_(n){var s=q_(n);s.next===null&&(s=n.alternate.memoizedState),zl(n,s.next.queue,{},Nn())}function nm(){return Jt(ru)}function F_(){return Et().memoizedState}function $_(){return Et().memoizedState}function dR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Nn();n=Bi(o);var u=qi(s,n,o);u!==null&&(En(u,s,o),Ml(u,s,o)),s={cache:Df()},n.payload=s;return}s=s.return}}function fR(n,s,o){var u=Nn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zc(n)?K_(s,o):(o=Ef(n,s,o,u),o!==null&&(En(o,n,u),Q_(o,s,u)))}function G_(n,s,o){var u=Nn();zl(n,s,o,u)}function zl(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zc(n))K_(s,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,S=p(v,o);if(f.hasEagerState=!0,f.eagerState=S,Sn(S,v))return xc(n,s,f,0),nt===null&&kc(),!1}catch{}finally{}if(o=Ef(n,s,f,u),o!==null)return En(o,n,u),Q_(o,s,u),!0}return!1}function rm(n,s,o,u){if(u={lane:2,revertLane:Mm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zc(n)){if(s)throw Error(r(479))}else s=Ef(n,o,u,2),s!==null&&En(s,n,2)}function Zc(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function K_(n,s){no=Gc=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Q_(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,ll(n,o)}}var Bl={readContext:Jt,use:Yc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Bl.useEffectEvent=gt;var Y_={readContext:Jt,use:Yc,useCallback:function(n,s){return fn().memoizedState=[n,s===void 0?null:s],n},useContext:Jt,useEffect:k_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Wc(4194308,4,U_.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Wc(4194308,4,n,s)},useInsertionEffect:function(n,s){Wc(4,2,n,s)},useMemo:function(n,s){var o=fn();s=s===void 0?null:s;var u=n();if(ta){xn(!0);try{n()}finally{xn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=fn();if(o!==void 0){var f=o(s);if(ta){xn(!0);try{o(s)}finally{xn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=fR.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var s=fn();return n={current:n},s.memoizedState=n},useState:function(n){n=Jf(n);var s=n.queue,o=G_.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Zf,useDeferredValue:function(n,s){var o=fn();return em(o,n,s)},useTransition:function(){var n=Jf(!1);return n=B_.bind(null,Oe,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Oe,f=fn();if(Le){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),nt===null)throw Error(r(349));(Pe&127)!==0||p_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,k_(__.bind(null,u,p,n),[n]),u.flags|=2048,io(9,{destroy:void 0},y_.bind(null,u,p,o,s),null),o},useId:function(){var n=fn(),s=nt.identifierPrefix;if(Le){var o=Ur,u=Mr;o=(u&~(1<<32-yt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Kc++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=aR++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:nm,useFormState:C_,useActionState:C_,useOptimistic:function(n){var s=fn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=rm.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Kf,useCacheRefresh:function(){return fn().memoizedState=dR.bind(null,Oe)},useEffectEvent:function(n){var s=fn(),o={impl:n};return s.memoizedState=o,function(){if((Ge&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},im={readContext:Jt,use:Yc,useCallback:V_,useContext:Jt,useEffect:Xf,useImperativeHandle:j_,useInsertionEffect:P_,useLayoutEffect:M_,useMemo:L_,useReducer:Jc,useRef:D_,useState:function(){return Jc(ii)},useDebugValue:Zf,useDeferredValue:function(n,s){var o=Et();return z_(o,Ze.memoizedState,n,s)},useTransition:function(){var n=Jc(ii)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:Ll(n),s]},useSyncExternalStore:g_,useId:F_,useHostTransitionStatus:nm,useFormState:I_,useActionState:I_,useOptimistic:function(n,s){var o=Et();return w_(o,Ze,n,s)},useMemoCache:Kf,useCacheRefresh:$_};im.useEffectEvent=x_;var J_={readContext:Jt,use:Yc,useCallback:V_,useContext:Jt,useEffect:Xf,useImperativeHandle:j_,useInsertionEffect:P_,useLayoutEffect:M_,useMemo:L_,useReducer:Yf,useRef:D_,useState:function(){return Yf(ii)},useDebugValue:Zf,useDeferredValue:function(n,s){var o=Et();return Ze===null?em(o,n,s):z_(o,Ze.memoizedState,n,s)},useTransition:function(){var n=Yf(ii)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:Ll(n),s]},useSyncExternalStore:g_,useId:F_,useHostTransitionStatus:nm,useFormState:N_,useActionState:N_,useOptimistic:function(n,s){var o=Et();return Ze!==null?w_(o,Ze,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:$_};J_.useEffectEvent=x_;function sm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var am={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=Bi(u);f.payload=s,o!=null&&(f.callback=o),s=qi(n,f,u),s!==null&&(En(s,n,u),Ml(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=Bi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=qi(n,f,u),s!==null&&(En(s,n,u),Ml(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Nn(),u=Bi(o);u.tag=2,s!=null&&(u.callback=s),s=qi(n,u,o),s!==null&&(En(s,n,o),Ml(s,n,o))}};function W_(n,s,o,u,f,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!Cl(o,u)||!Cl(f,p):!0}function X_(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&am.enqueueReplaceState(s,s.state,null)}function na(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Z_(n){Dc(n)}function ev(n){console.error(n)}function tv(n){Dc(n)}function eh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function nv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function om(n,s,o){return o=Bi(o),o.tag=3,o.payload={element:null},o.callback=function(){eh(n,s)},o}function rv(n){return n=Bi(n),n.tag=3,n}function iv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;n.payload=function(){return f(p)},n.callback=function(){nv(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){nv(s,o,u),typeof f!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function mR(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ja(s,o,f,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Hn===null?dh():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Bc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),km(n,u,f)),!1;case 22:return o.flags|=65536,u===Bc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),km(n,u,f)),!1}throw Error(r(435,o.tag))}return km(n,u,f),dh(),!1}if(Le)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Rf&&(n=Error(r(422),{cause:u}),Nl(Ln(n,o)))):(u!==Rf&&(s=Error(r(423),{cause:u}),Nl(Ln(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Ln(u,o),f=om(n.stateNode,u,f),jf(n,f),pt!==4&&(pt=2)),!1;var p=Error(r(520),{cause:u});if(p=Ln(p,o),Yl===null?Yl=[p]:Yl.push(p),pt!==4&&(pt=2),s===null)return!0;u=Ln(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=om(o.stateNode,u,n),jf(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qi===null||!Qi.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=rv(f),iv(f,n,o,u),jf(o,f),!1}o=o.return}while(o!==null);return!1}var lm=Error(r(461)),Nt=!1;function Wt(n,s,o,u){s.child=n===null?l_(s,null,o,u):ea(s,n.child,o,u)}function sv(n,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var S in u)S!=="ref"&&(v[S]=u[S])}else v=u;return Js(s),u=Hf(n,s,o,v,p,f),S=Ff(),n!==null&&!Nt?($f(n,s,f),si(n,s,f)):(Le&&S&&Sf(s),s.flags|=1,Wt(n,s,u,f),s.child)}function av(n,s,o,u,f){if(n===null){var p=o.type;return typeof p=="function"&&!wf(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,ov(n,s,p,u,f)):(n=Mc(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!pm(n,f)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Cl,o(v,u)&&n.ref===s.ref)return si(n,s,f)}return s.flags|=1,n=Zr(p,u),n.ref=s.ref,n.return=s,s.child=n}function ov(n,s,o,u,f){if(n!==null){var p=n.memoizedProps;if(Cl(p,u)&&n.ref===s.ref)if(Nt=!1,s.pendingProps=u=p,pm(n,f))(n.flags&131072)!==0&&(Nt=!0);else return s.lanes=n.lanes,si(n,s,f)}return um(n,s,o,u,f)}function lv(n,s,o,u){var f=u.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,s.child=null;return uv(n,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lc(s,p!==null?p.cachePool:null),p!==null?h_(s,p):Lf(),d_(s);else return u=s.lanes=536870912,uv(n,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Lc(s,p.cachePool),h_(s,p),Fi(),s.memoizedState=null):(n!==null&&Lc(s,null),Lf(),Fi());return Wt(n,s,f,o),s.child}function ql(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function uv(n,s,o,u,f){var p=xf();return p=p===null?null:{parent:It._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Lc(s,null),Lf(),d_(s),n!==null&&Ja(n,s,u,!0),s.childLanes=f,null}function th(n,s){return s=rh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function cv(n,s,o){return ea(s,n.child,null,o),n=th(s,s.pendingProps),n.flags|=2,Cn(s),s.memoizedState=null,n}function gR(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Le){if(u.mode==="hidden")return n=th(s,u),s.lanes=536870912,ql(null,n);if(Bf(s),(n=it)?(n=bE(n,qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ui!==null?{id:Mr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=s,s.child=o,Yt=s,it=null)):n=null,n===null)throw Vi(s);return s.lanes=536870912,null}return th(s,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(Bf(s),f)if(s.flags&256)s.flags&=-257,s=cv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(Nt||Ja(n,s,o,!1),f=(o&n.childLanes)!==0,Nt||f){if(u=nt,u!==null&&(v=ul(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Gs(n,v),En(u,n,v),lm;dh(),s=cv(n,s,o)}else n=p.treeContext,it=Fn(v.nextSibling),Yt=s,Le=!0,ji=null,qn=!1,n!==null&&Jy(s,n),s=th(s,u),s.flags|=4096;return s}return n=Zr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function um(n,s,o,u,f){return Js(s),o=Hf(n,s,o,u,void 0,f),u=Ff(),n!==null&&!Nt?($f(n,s,f),si(n,s,f)):(Le&&u&&Sf(s),s.flags|=1,Wt(n,s,o,f),s.child)}function hv(n,s,o,u,f,p){return Js(s),s.updateQueue=null,o=m_(s,u,o,f),f_(n),u=Ff(),n!==null&&!Nt?($f(n,s,p),si(n,s,p)):(Le&&u&&Sf(s),s.flags|=1,Wt(n,s,o,p),s.child)}function dv(n,s,o,u,f){if(Js(s),s.stateNode===null){var p=Ga,v=o.contextType;typeof v=="object"&&v!==null&&(p=Jt(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=am,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Mf(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?Jt(v):Ga,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(sm(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&am.enqueueReplaceState(p,p.state,null),jl(s,u,p,f),Ul(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var S=s.memoizedProps,k=na(o,S);p.props=k;var $=p.context,X=o.contextType;v=Ga,typeof X=="object"&&X!==null&&(v=Jt(X));var te=o.getDerivedStateFromProps;X=typeof te=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||$!==v)&&X_(s,p,u,v),zi=!1;var Q=s.memoizedState;p.state=Q,jl(s,u,p,f),Ul(),$=s.memoizedState,S||Q!==$||zi?(typeof te=="function"&&(sm(s,o,te,u),$=s.memoizedState),(k=zi||W_(s,o,k,u,Q,$,v))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=$),p.props=u,p.state=$,p.context=v,u=k):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Uf(n,s),v=s.memoizedProps,X=na(o,v),p.props=X,te=s.pendingProps,Q=p.context,$=o.contextType,k=Ga,typeof $=="object"&&$!==null&&(k=Jt($)),S=o.getDerivedStateFromProps,($=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==te||Q!==k)&&X_(s,p,u,k),zi=!1,Q=s.memoizedState,p.state=Q,jl(s,u,p,f),Ul();var J=s.memoizedState;v!==te||Q!==J||zi||n!==null&&n.dependencies!==null&&jc(n.dependencies)?(typeof S=="function"&&(sm(s,o,S,u),J=s.memoizedState),(X=zi||W_(s,o,X,u,Q,J,k)||n!==null&&n.dependencies!==null&&jc(n.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,J,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,J,k)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),p.props=u,p.state=J,p.context=k,u=X):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,nh(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=ea(s,n.child,null,f),s.child=ea(s,null,o,f)):Wt(n,s,o,f),s.memoizedState=p.state,n=s.child):n=si(n,s,f),n}function fv(n,s,o,u){return Qs(),s.flags|=256,Wt(n,s,o,u),s.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(n){return{baseLanes:n,cachePool:n_()}}function dm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=On),n}function mv(n,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(vt.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(Le){if(f?Hi(s):Fi(),(n=it)?(n=bE(n,qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ui!==null?{id:Mr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=Ky(n),o.return=s,s.child=o,Yt=s,it=null)):n=null,n===null)throw Vi(s);return Qm(n)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(Fi(),f=s.mode,S=rh({mode:"hidden",children:S},f),u=Ks(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=hm(o),u.childLanes=dm(n,v,o),s.memoizedState=cm,ql(null,u)):(Hi(s),fm(s,S))}var k=n.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(p)s.flags&256?(Hi(s),s.flags&=-257,s=mm(n,s,o)):s.memoizedState!==null?(Fi(),s.child=n.child,s.flags|=128,s=null):(Fi(),S=u.fallback,f=s.mode,u=rh({mode:"visible",children:u.children},f),S=Ks(S,f,o,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,ea(s,n.child,null,o),u=s.child,u.memoizedState=hm(o),u.childLanes=dm(n,v,o),s.memoizedState=cm,s=ql(null,u));else if(Hi(s),Qm(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var $=v.dgst;v=$,u=Error(r(419)),u.stack="",u.digest=v,Nl({value:u,source:null,stack:null}),s=mm(n,s,o)}else if(Nt||Ja(n,s,o,!1),v=(o&n.childLanes)!==0,Nt||v){if(v=nt,v!==null&&(u=ul(v,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Gs(n,u),En(v,n,u),lm;Km(S)||dh(),s=mm(n,s,o)}else Km(S)?(s.flags|=192,s.child=n.child,s=null):(n=k.treeContext,it=Fn(S.nextSibling),Yt=s,Le=!0,ji=null,qn=!1,n!==null&&Jy(s,n),s=fm(s,u.children),s.flags|=4096);return s}return f?(Fi(),S=u.fallback,f=s.mode,k=n.child,$=k.sibling,u=Zr(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,$!==null?S=Zr($,S):(S=Ks(S,f,o,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,ql(null,u),u=s.child,S=n.child.memoizedState,S===null?S=hm(o):(f=S.cachePool,f!==null?(k=It._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=n_(),S={baseLanes:S.baseLanes|o,cachePool:f}),u.memoizedState=S,u.childLanes=dm(n,v,o),s.memoizedState=cm,ql(n.child,u)):(Hi(s),o=n.child,n=o.sibling,o=Zr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function fm(n,s){return s=rh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function rh(n,s){return n=An(22,n,null,s),n.lanes=0,n}function mm(n,s,o){return ea(s,n.child,null,o),n=fm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function gv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Of(n.return,s,o)}function gm(n,s,o,u,f,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=p)}function pv(n,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var v=vt.current,S=(v&2)!==0;if(S?(v=v&1|2,s.flags|=128):v&=1,le(vt,v),Wt(n,s,u,o),u=Le?Ol:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gv(n,o,s);else if(n.tag===19)gv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&$c(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),gm(s,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&$c(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}gm(s,!0,o,null,p,u);break;case"together":gm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function si(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Ki|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Ja(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Zr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Zr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function pm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&jc(n)))}function pR(n,s,o){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Li(s,It,n.memoizedState.cache),Qs();break;case 27:case 5:Is(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Li(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bf(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Hi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?mv(n,s,o):(Hi(s),n=si(n,s,o),n!==null?n.sibling:null);Hi(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ja(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return pv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(vt,vt.current),u)break;return null;case 22:return s.lanes=0,lv(n,s,o,s.pendingProps);case 24:Li(s,It,n.memoizedState.cache)}return si(n,s,o)}function yv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Nt=!0;else{if(!pm(n,o)&&(s.flags&128)===0)return Nt=!1,pR(n,s,o);Nt=(n.flags&131072)!==0}else Nt=!1,Le&&(s.flags&1048576)!==0&&Yy(s,Ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Xs(s.elementType),s.type=n,typeof n=="function")wf(n)?(u=na(n,u),s.tag=1,s=dv(null,s,n,u,o)):(s.tag=0,s=um(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===W){s.tag=11,s=sv(null,s,n,u,o);break e}else if(f===I){s.tag=14,s=av(null,s,n,u,o);break e}}throw s=ot(n)||n,Error(r(306,s,""))}}return s;case 0:return um(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=na(u,s.pendingProps),dv(n,s,u,f,o);case 3:e:{if(Ut(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Uf(n,s),jl(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Li(s,It,u),u!==p.cache&&Nf(s,[It],o,!0),Ul(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=fv(n,s,u,o);break e}else if(u!==f){f=Ln(Error(r(424)),s),Nl(f),s=fv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(it=Fn(n.firstChild),Yt=s,Le=!0,ji=null,qn=!0,o=l_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Qs(),u===f){s=si(n,s,o);break e}Wt(n,s,u,o)}s=s.child}return s;case 26:return nh(n,s),n===null?(o=IE(s.type,null,s.pendingProps,null))?s.memoizedState=o:Le||(o=s.type,n=s.pendingProps,u=vh(Ne.current).createElement(o),u[At]=s,u[qt]=n,Xt(u,o,n),Rt(u),s.stateNode=u):s.memoizedState=IE(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Is(s),n===null&&Le&&(u=s.stateNode=AE(s.type,s.pendingProps,Ne.current),Yt=s,qn=!0,f=it,Xi(s.type)?(Ym=f,it=Fn(u.firstChild)):it=f),Wt(n,s,s.pendingProps.children,o),nh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Le&&((f=u=it)&&(u=GR(u,s.type,s.pendingProps,qn),u!==null?(s.stateNode=u,Yt=s,it=Fn(u.firstChild),qn=!1,f=!0):f=!1),f||Vi(s)),Is(s),f=s.type,p=s.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Fm(f,p)?u=null:v!==null&&Fm(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=Hf(n,s,oR,null,null,o),ru._currentValue=f),nh(n,s),Wt(n,s,u,o),s.child;case 6:return n===null&&Le&&((n=o=it)&&(o=KR(o,s.pendingProps,qn),o!==null?(s.stateNode=o,Yt=s,it=null,n=!0):n=!1),n||Vi(s)),null;case 13:return mv(n,s,o);case 4:return Ut(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=ea(s,null,u,o):Wt(n,s,u,o),s.child;case 11:return sv(n,s,s.type,s.pendingProps,o);case 7:return Wt(n,s,s.pendingProps,o),s.child;case 8:return Wt(n,s,s.pendingProps.children,o),s.child;case 12:return Wt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Li(s,s.type,u.value),Wt(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Js(s),f=Jt(f),u=u(f),s.flags|=1,Wt(n,s,u,o),s.child;case 14:return av(n,s,s.type,s.pendingProps,o);case 15:return ov(n,s,s.type,s.pendingProps,o);case 19:return pv(n,s,o);case 31:return gR(n,s,o);case 22:return lv(n,s,o,s.pendingProps);case 24:return Js(s),u=Jt(It),n===null?(f=xf(),f===null&&(f=nt,p=Df(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Mf(s),Li(s,It,f)):((n.lanes&o)!==0&&(Uf(n,s),jl(s,null,null,o),Ul()),f=n.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Li(s,It,u)):(u=p.cache,Li(s,It,u),u!==f.cache&&Nf(s,[It],o,!0))),Wt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ai(n){n.flags|=4}function ym(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Fv())n.flags|=8192;else throw Zs=Bc,Pf}else n.flags&=-16777217}function _v(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xE(s))if(Fv())n.flags|=8192;else throw Zs=Bc,Pf}function ih(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?cc():536870912,n.lanes|=s,lo|=s)}function Hl(n,s){if(!Le)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function st(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function yR(n,s,o){var u=s.pendingProps;switch(Af(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(s),null;case 1:return st(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ni(It),lt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ya(s)?ai(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cf())),st(s),null;case 26:var f=s.type,p=s.memoizedState;return n===null?(ai(s),p!==null?(st(s),_v(s,p)):(st(s),ym(s,f,null,u,o))):p?p!==n.memoizedState?(ai(s),st(s),_v(s,p)):(st(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ai(s),st(s),ym(s,f,n,u,o)),null;case 27:if(Ca(s),o=Ne.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ai(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return st(s),null}n=he.current,Ya(s)?Wy(s):(n=AE(f,u,o),s.stateNode=n,ai(s))}return st(s),null;case 5:if(Ca(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ai(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return st(s),null}if(p=he.current,Ya(s))Wy(s);else{var v=vh(Ne.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}p[At]=s,p[qt]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(Xt(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ai(s)}}return st(s),ym(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ai(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ne.current,Ya(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=Yt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[At]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||mE(n.nodeValue,o)),n||Vi(s,!0)}else n=vh(n).createTextNode(u),n[At]=s,s.stateNode=n}return st(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ya(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[At]=s}else Qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),n=!1}else o=Cf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return st(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ya(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[At]=s}else Qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),f=!1}else f=Cf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),ih(s,s.updateQueue),st(s),null);case 4:return lt(),n===null&&Lm(s.stateNode.containerInfo),st(s),null;case 10:return ni(s.type),st(s),null;case 19:if(ne(vt),u=s.memoizedState,u===null)return st(s),null;if(f=(s.flags&128)!==0,p=u.rendering,p===null)if(f)Hl(u,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=$c(n),p!==null){for(s.flags|=128,Hl(u,!1),n=p.updateQueue,s.updateQueue=n,ih(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Gy(o,n),o=o.sibling;return le(vt,vt.current&1|2),Le&&ei(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&hn()>uh&&(s.flags|=128,f=!0,Hl(u,!1),s.lanes=4194304)}else{if(!f)if(n=$c(p),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,ih(s,n),Hl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Le)return st(s),null}else 2*hn()-u.renderingStartTime>uh&&o!==536870912&&(s.flags|=128,f=!0,Hl(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(n=u.last,n!==null?n.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=hn(),n.sibling=null,o=vt.current,le(vt,f?o&1|2:o&1),Le&&ei(s,u.treeForkCount),n):(st(s),null);case 22:case 23:return Cn(s),zf(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(st(s),s.subtreeFlags&6&&(s.flags|=8192)):st(s),o=s.updateQueue,o!==null&&ih(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ne(Ws),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ni(It),st(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function _R(n,s){switch(Af(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ni(It),lt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ca(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(r(340));Qs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Cn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Qs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(vt),null;case 4:return lt(),null;case 10:return ni(s.type),null;case 22:case 23:return Cn(s),zf(),n!==null&&ne(Ws),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ni(It),null;case 25:return null;default:return null}}function vv(n,s){switch(Af(s),s.tag){case 3:ni(It),lt();break;case 26:case 27:case 5:Ca(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:ne(vt);break;case 10:ni(s.type);break;case 22:case 23:Cn(s),zf(),n!==null&&ne(Ws);break;case 24:ni(It)}}function Fl(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==f)}}catch(S){We(s,s.return,S)}}function $i(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&n)===n){var v=u.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=s;var k=o,$=S;try{$()}catch(X){We(f,k,X)}}}u=u.next}while(u!==p)}}catch(X){We(s,s.return,X)}}function Ev(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{c_(s,o)}catch(u){We(n,n.return,u)}}}function wv(n,s,o){o.props=na(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){We(n,s,u)}}function $l(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){We(n,s,f)}}function jr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){We(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){We(n,s,f)}else o.current=null}function bv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){We(n,n.return,f)}}function _m(n,s,o){try{var u=n.stateNode;zR(u,n.type,o,s),u[qt]=s}catch(f){We(n,n.return,f)}}function Tv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xi(n.type)||n.tag===4}function vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Tv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Em(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=tr));else if(u!==4&&(u===27&&Xi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Em(n,s,o),n=n.sibling;n!==null;)Em(n,s,o),n=n.sibling}function sh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Xi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(sh(n,s,o),n=n.sibling;n!==null;)sh(n,s,o),n=n.sibling}function Sv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xt(s,u,o),s[At]=n,s[qt]=o}catch(p){We(n,n.return,p)}}var oi=!1,Dt=!1,wm=!1,Av=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function vR(n,s){if(n=n.containerInfo,qm=Rh,n=jy(n),mf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,S=-1,k=-1,$=0,X=0,te=n,Q=null;t:for(;;){for(var J;te!==o||f!==0&&te.nodeType!==3||(S=v+f),te!==p||u!==0&&te.nodeType!==3||(k=v+u),te.nodeType===3&&(v+=te.nodeValue.length),(J=te.firstChild)!==null;)Q=te,te=J;for(;;){if(te===n)break t;if(Q===o&&++$===f&&(S=v),Q===p&&++X===u&&(k=v),(J=te.nextSibling)!==null)break;te=Q,Q=te.parentNode}te=J}o=S===-1||k===-1?null:{start:S,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Hm={focusedElem:n,selectionRange:o},Rh=!1,Ft=s;Ft!==null;)if(s=Ft,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ft=n;else for(;Ft!==null;){switch(s=Ft,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var de=na(o.type,f);n=u.getSnapshotBeforeUpdate(de,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){We(o,o.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Gm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Gm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Ft=n;break}Ft=s.return}}function Rv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ui(n,o),u&4&&Fl(5,o);break;case 1:if(ui(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){We(o,o.return,v)}else{var f=na(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){We(o,o.return,v)}}u&64&&Ev(o),u&512&&$l(o,o.return);break;case 3:if(ui(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{c_(n,s)}catch(v){We(o,o.return,v)}}break;case 27:s===null&&u&4&&Sv(o);case 26:case 5:ui(n,o),s===null&&u&4&&bv(o),u&512&&$l(o,o.return);break;case 12:ui(n,o);break;case 31:ui(n,o),u&4&&Ov(n,o);break;case 13:ui(n,o),u&4&&Nv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=IR.bind(null,o),QR(n,o))));break;case 22:if(u=o.memoizedState!==null||oi,!u){s=s!==null&&s.memoizedState!==null||Dt,f=oi;var p=Dt;oi=u,(Dt=s)&&!p?ci(n,o,(o.subtreeFlags&8772)!==0):ui(n,o),oi=f,Dt=p}break;case 30:break;default:ui(n,o)}}function Cv(n){var s=n.alternate;s!==null&&(n.alternate=null,Cv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ka(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ct=null,pn=!1;function li(n,s,o){for(o=o.child;o!==null;)Iv(n,s,o),o=o.sibling}function Iv(n,s,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Wn,o)}catch{}switch(o.tag){case 26:Dt||jr(o,s),li(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||jr(o,s);var u=ct,f=pn;Xi(o.type)&&(ct=o.stateNode,pn=!1),li(n,s,o),eu(o.stateNode),ct=u,pn=f;break;case 5:Dt||jr(o,s);case 6:if(u=ct,f=pn,ct=null,li(n,s,o),ct=u,pn=f,ct!==null)if(pn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(o.stateNode)}catch(p){We(o,s,p)}else try{ct.removeChild(o.stateNode)}catch(p){We(o,s,p)}break;case 18:ct!==null&&(pn?(n=ct,EE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),yo(n)):EE(ct,o.stateNode));break;case 4:u=ct,f=pn,ct=o.stateNode.containerInfo,pn=!0,li(n,s,o),ct=u,pn=f;break;case 0:case 11:case 14:case 15:$i(2,o,s),Dt||$i(4,o,s),li(n,s,o);break;case 1:Dt||(jr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&wv(o,s,u)),li(n,s,o);break;case 21:li(n,s,o);break;case 22:Dt=(u=Dt)||o.memoizedState!==null,li(n,s,o),Dt=u;break;default:li(n,s,o)}}function Ov(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{yo(n)}catch(o){We(s,s.return,o)}}}function Nv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{yo(n)}catch(o){We(s,s.return,o)}}function ER(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Av),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Av),s;default:throw Error(r(435,n.tag))}}function ah(n,s){var o=ER(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=OR.bind(null,n,u);u.then(f,f)}})}function yn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=n,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Xi(S.type)){ct=S.stateNode,pn=!1;break e}break;case 5:ct=S.stateNode,pn=!1;break e;case 3:case 4:ct=S.stateNode.containerInfo,pn=!0;break e}S=S.return}if(ct===null)throw Error(r(160));Iv(p,v,f),ct=null,pn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Dv(s,n),s=s.sibling}var or=null;function Dv(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(s,n),_n(n),u&4&&($i(3,n,n.return),Fl(3,n),$i(5,n,n.return));break;case 1:yn(s,n),_n(n),u&512&&(Dt||o===null||jr(o,o.return)),u&64&&oi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=or;if(yn(s,n),_n(n),u&512&&(Dt||o===null||jr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Tr]||p[At]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Xt(p,u,o),p[At]=n,Rt(p),u=p;break e;case"link":var v=DE("link","href",f).get(u+(o.href||""));if(v){for(var S=0;S<v.length;S++)if(p=v[S],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(S,1);break t}}p=f.createElement(u),Xt(p,u,o),f.head.appendChild(p);break;case"meta":if(v=DE("meta","content",f).get(u+(o.content||""))){for(S=0;S<v.length;S++)if(p=v[S],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(S,1);break t}}p=f.createElement(u),Xt(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[At]=n,Rt(p),u=p}n.stateNode=u}else kE(f,n.type,n.stateNode);else n.stateNode=NE(f,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?kE(f,n.type,n.stateNode):NE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&_m(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(s,n),_n(n),u&512&&(Dt||o===null||jr(o,o.return)),o!==null&&u&4&&_m(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(s,n),_n(n),u&512&&(Dt||o===null||jr(o,o.return)),n.flags&32){f=n.stateNode;try{gn(f,"")}catch(de){We(n,n.return,de)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,_m(n,f,o!==null?o.memoizedProps:f)),u&1024&&(wm=!0);break;case 6:if(yn(s,n),_n(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(de){We(n,n.return,de)}}break;case 3:if(bh=null,f=or,or=Eh(s.containerInfo),yn(s,n),or=f,_n(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{yo(s.containerInfo)}catch(de){We(n,n.return,de)}wm&&(wm=!1,kv(n));break;case 4:u=or,or=Eh(n.stateNode.containerInfo),yn(s,n),_n(n),or=u;break;case 12:yn(s,n),_n(n);break;case 31:yn(s,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ah(n,u)));break;case 13:yn(s,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(lh=hn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ah(n,u)));break;case 22:f=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,$=oi,X=Dt;if(oi=$||f,Dt=X||k,yn(s,n),Dt=X,oi=$,_n(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||k||oi||Dt||ra(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){k=o=s;try{if(p=k.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=k.stateNode;var te=k.memoizedProps.style,Q=te!=null&&te.hasOwnProperty("display")?te.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(de){We(k,k.return,de)}}}else if(s.tag===6){if(o===null){k=s;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(de){We(k,k.return,de)}}}else if(s.tag===18){if(o===null){k=s;try{var J=k.stateNode;f?wE(J,!0):wE(k.stateNode,!1)}catch(de){We(k,k.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ah(n,o))));break;case 19:yn(s,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ah(n,u)));break;case 30:break;case 21:break;default:yn(s,n),_n(n)}}function _n(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Tv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=vm(n);sh(n,p,f);break;case 5:var v=o.stateNode;o.flags&32&&(gn(v,""),o.flags&=-33);var S=vm(n);sh(n,S,v);break;case 3:case 4:var k=o.stateNode.containerInfo,$=vm(n);Em(n,$,k);break;default:throw Error(r(161))}}catch(X){We(n,n.return,X)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function kv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;kv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ui(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Rv(n,s.alternate,s),s=s.sibling}function ra(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:$i(4,s,s.return),ra(s);break;case 1:jr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&wv(s,s.return,o),ra(s);break;case 27:eu(s.stateNode);case 26:case 5:jr(s,s.return),ra(s);break;case 22:s.memoizedState===null&&ra(s);break;case 30:ra(s);break;default:ra(s)}n=n.sibling}}function ci(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:ci(f,p,o),Fl(4,p);break;case 1:if(ci(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){We(u,u.return,$)}if(u=p,f=u.updateQueue,f!==null){var S=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)u_(k[f],S)}catch($){We(u,u.return,$)}}o&&v&64&&Ev(p),$l(p,p.return);break;case 27:Sv(p);case 26:case 5:ci(f,p,o),o&&u===null&&v&4&&bv(p),$l(p,p.return);break;case 12:ci(f,p,o);break;case 31:ci(f,p,o),o&&v&4&&Ov(f,p);break;case 13:ci(f,p,o),o&&v&4&&Nv(f,p);break;case 22:p.memoizedState===null&&ci(f,p,o),$l(p,p.return);break;case 30:break;default:ci(f,p,o)}s=s.sibling}}function bm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Dl(o))}function Tm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Dl(n))}function lr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xv(n,s,o,u),s=s.sibling}function xv(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:lr(n,s,o,u),f&2048&&Fl(9,s);break;case 1:lr(n,s,o,u);break;case 3:lr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Dl(n)));break;case 12:if(f&2048){lr(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,v=p.id,S=p.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){We(s,s.return,k)}}else lr(n,s,o,u);break;case 31:lr(n,s,o,u);break;case 13:lr(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?lr(n,s,o,u):Gl(n,s):p._visibility&2?lr(n,s,o,u):(p._visibility|=2,so(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&bm(v,s);break;case 24:lr(n,s,o,u),f&2048&&Tm(s.alternate,s);break;default:lr(n,s,o,u)}}function so(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,v=s,S=o,k=u,$=v.flags;switch(v.tag){case 0:case 11:case 15:so(p,v,S,k,f),Fl(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?so(p,v,S,k,f):Gl(p,v):(X._visibility|=2,so(p,v,S,k,f)),f&&$&2048&&bm(v.alternate,v);break;case 24:so(p,v,S,k,f),f&&$&2048&&Tm(v.alternate,v);break;default:so(p,v,S,k,f)}s=s.sibling}}function Gl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Gl(o,u),f&2048&&bm(u.alternate,u);break;case 24:Gl(o,u),f&2048&&Tm(u.alternate,u);break;default:Gl(o,u)}s=s.sibling}}var Kl=8192;function ao(n,s,o){if(n.subtreeFlags&Kl)for(n=n.child;n!==null;)Pv(n,s,o),n=n.sibling}function Pv(n,s,o){switch(n.tag){case 26:ao(n,s,o),n.flags&Kl&&n.memoizedState!==null&&a1(o,or,n.memoizedState,n.memoizedProps);break;case 5:ao(n,s,o);break;case 3:case 4:var u=or;or=Eh(n.stateNode.containerInfo),ao(n,s,o),or=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Kl,Kl=16777216,ao(n,s,o),Kl=u):ao(n,s,o));break;default:ao(n,s,o)}}function Mv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ql(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ft=u,jv(u,n)}Mv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Uv(n),n=n.sibling}function Uv(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&$i(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,oh(n)):Ql(n);break;default:Ql(n)}}function oh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ft=u,jv(u,n)}Mv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:$i(8,s,s.return),oh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,oh(s));break;default:oh(s)}n=n.sibling}}function jv(n,s){for(;Ft!==null;){var o=Ft;switch(o.tag){case 0:case 11:case 15:$i(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Dl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ft=u;else e:for(o=n;Ft!==null;){u=Ft;var f=u.sibling,p=u.return;if(Cv(u),u===o){Ft=null;break e}if(f!==null){f.return=p,Ft=f;break e}Ft=p}}}var wR={getCacheForType:function(n){var s=Jt(It),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Jt(It).controller.signal}},bR=typeof WeakMap=="function"?WeakMap:Map,Ge=0,nt=null,ke=null,Pe=0,Je=0,In=null,Gi=!1,oo=!1,Sm=!1,hi=0,pt=0,Ki=0,ia=0,Am=0,On=0,lo=0,Yl=null,vn=null,Rm=!1,lh=0,Vv=0,uh=1/0,ch=null,Qi=null,Vt=0,Yi=null,uo=null,di=0,Cm=0,Im=null,Lv=null,Jl=0,Om=null;function Nn(){return(Ge&2)!==0&&Pe!==0?Pe&-Pe:Z.T!==null?Mm():hc()}function zv(){if(On===0)if((Pe&536870912)===0||Le){var n=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),On=n}else On=536870912;return n=Rn.current,n!==null&&(n.flags|=32),On}function En(n,s,o){(n===nt&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(co(n,0),Ji(n,Pe,On,!1)),ks(n,o),((Ge&2)===0||n!==nt)&&(n===nt&&((Ge&2)===0&&(ia|=o),pt===4&&Ji(n,Pe,On,!1)),Vr(n))}function Bv(n,s,o){if((Ge&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Xn(n,s),f=u?AR(n,s):Dm(n,s,!0),p=u;do{if(f===0){oo&&!u&&Ji(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!TR(o)){f=Dm(n,s,!1),p=!1;continue}if(f===2){if(p=s,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=n;f=Yl;var k=S.current.memoizedState.isDehydrated;if(k&&(co(S,v).flags|=256),v=Dm(S,v,!1),v!==2){if(Sm&&!k){S.errorRecoveryDisabledLanes|=p,ia|=p,f=4;break e}p=vn,vn=f,p!==null&&(vn===null?vn=p:vn.push.apply(vn,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){co(n,0),Ji(n,s,0,!0);break}e:{switch(u=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ji(u,s,On,!Gi);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=lh+300-hn(),10<f)){if(Ji(u,s,On,!Gi),Er(u,0,!0)!==0)break e;di=s,u.timeoutHandle=_E(qv.bind(null,u,o,vn,ch,Rm,s,On,ia,lo,Gi,p,"Throttled",-0,0),f);break e}qv(u,o,vn,ch,Rm,s,On,ia,lo,Gi,p,null,-0,0)}}break}while(!0);Vr(n)}function qv(n,s,o,u,f,p,v,S,k,$,X,te,Q,J){if(n.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tr},Pv(s,p,te);var de=(p&62914560)===p?lh-hn():(p&4194048)===p?Vv-hn():0;if(de=o1(te,de),de!==null){di=p,n.cancelPendingCommit=de(Jv.bind(null,n,s,p,o,u,f,v,S,k,X,te,null,Q,J)),Ji(n,p,v,!$);return}}Jv(n,s,p,o,u,f,v,S,k)}function TR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Sn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ji(n,s,o,u){s&=~Am,s&=~ia,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var p=31-yt(f),v=1<<p;u[p]=-1,f&=~v}o!==0&&xs(n,o,s)}function hh(){return(Ge&6)===0?(Wl(0),!1):!0}function Nm(){if(ke!==null){if(Je===0)var n=ke.return;else n=ke,ti=Ys=null,Gf(n),eo=null,xl=0,n=ke;for(;n!==null;)vv(n.alternate,n),n=n.return;ke=null}}function co(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,HR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),di=0,Nm(),nt=n,ke=o=Zr(n.current,null),Pe=s,Je=0,In=null,Gi=!1,oo=Xn(n,s),Sm=!1,lo=On=Am=ia=Ki=pt=0,vn=Yl=null,Rm=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-yt(u),p=1<<f;s|=n[f],u&=~p}return hi=s,kc(),o}function Hv(n,s){Oe=null,Z.H=Bl,s===Za||s===zc?(s=s_(),Je=3):s===Pf?(s=s_(),Je=4):Je=s===lm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,In=s,ke===null&&(pt=1,eh(n,Ln(s,n.current)))}function Fv(){var n=Rn.current;return n===null?!0:(Pe&4194048)===Pe?Hn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Hn:!1}function $v(){var n=Z.H;return Z.H=Bl,n===null?Bl:n}function Gv(){var n=Z.A;return Z.A=wR,n}function dh(){pt=4,Gi||(Pe&4194048)!==Pe&&Rn.current!==null||(oo=!0),(Ki&134217727)===0&&(ia&134217727)===0||nt===null||Ji(nt,Pe,On,!1)}function Dm(n,s,o){var u=Ge;Ge|=2;var f=$v(),p=Gv();(nt!==n||Pe!==s)&&(ch=null,co(n,s)),s=!1;var v=pt;e:do try{if(Je!==0&&ke!==null){var S=ke,k=In;switch(Je){case 8:Nm(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var $=Je;if(Je=0,In=null,ho(n,S,k,$),o&&oo){v=0;break e}break;default:$=Je,Je=0,In=null,ho(n,S,k,$)}}SR(),v=pt;break}catch(X){Hv(n,X)}while(!0);return s&&n.shellSuspendCounter++,ti=Ys=null,Ge=u,Z.H=f,Z.A=p,ke===null&&(nt=null,Pe=0,kc()),v}function SR(){for(;ke!==null;)Kv(ke)}function AR(n,s){var o=Ge;Ge|=2;var u=$v(),f=Gv();nt!==n||Pe!==s?(ch=null,uh=hn()+500,co(n,s)):oo=Xn(n,s);e:do try{if(Je!==0&&ke!==null){s=ke;var p=In;t:switch(Je){case 1:Je=0,In=null,ho(n,s,p,1);break;case 2:case 9:if(r_(p)){Je=0,In=null,Qv(s);break}s=function(){Je!==2&&Je!==9||nt!==n||(Je=7),Vr(n)},p.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:r_(p)?(Je=0,In=null,Qv(s)):(Je=0,In=null,ho(n,s,p,7));break;case 5:var v=null;switch(ke.tag){case 26:v=ke.memoizedState;case 5:case 27:var S=ke;if(v?xE(v):S.stateNode.complete){Je=0,In=null;var k=S.sibling;if(k!==null)ke=k;else{var $=S.return;$!==null?(ke=$,fh($)):ke=null}break t}}Je=0,In=null,ho(n,s,p,5);break;case 6:Je=0,In=null,ho(n,s,p,6);break;case 8:Nm(),pt=6;break e;default:throw Error(r(462))}}RR();break}catch(X){Hv(n,X)}while(!0);return ti=Ys=null,Z.H=u,Z.A=f,Ge=o,ke!==null?0:(nt=null,Pe=0,kc(),pt)}function RR(){for(;ke!==null&&!of();)Kv(ke)}function Kv(n){var s=yv(n.alternate,n,hi);n.memoizedProps=n.pendingProps,s===null?fh(n):ke=s}function Qv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=hv(o,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=hv(o,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Gf(s);default:vv(o,s),s=ke=Gy(s,hi),s=yv(o,s,hi)}n.memoizedProps=n.pendingProps,s===null?fh(n):ke=s}function ho(n,s,o,u){ti=Ys=null,Gf(s),eo=null,xl=0;var f=s.return;try{if(mR(n,f,s,o,Pe)){pt=1,eh(n,Ln(o,n.current)),ke=null;return}}catch(p){if(f!==null)throw ke=f,p;pt=1,eh(n,Ln(o,n.current)),ke=null;return}s.flags&32768?(Le||u===1?n=!0:oo||(Pe&536870912)!==0?n=!1:(Gi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Yv(s,n)):fh(s)}function fh(n){var s=n;do{if((s.flags&32768)!==0){Yv(s,Gi);return}n=s.return;var o=yR(s.alternate,s,hi);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=n}while(s!==null);pt===0&&(pt=5)}function Yv(n,s){do{var o=_R(n.alternate,n);if(o!==null){o.flags&=32767,ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ke=n;return}ke=n=o}while(n!==null);pt=6,ke=null}function Jv(n,s,o,u,f,p,v,S,k){n.cancelPendingCommit=null;do mh();while(Vt!==0);if((Ge&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=vf,cf(n,o,p,v,S,k),n===nt&&(ke=nt=null,Pe=0),uo=s,Yi=n,di=o,Cm=p,Im=f,Lv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,NR(Ri,function(){return tE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=oe.p,oe.p=2,v=Ge,Ge|=4;try{vR(n,s,o)}finally{Ge=v,oe.p=f,Z.T=u}}Vt=1,Wv(),Xv(),Zv()}}function Wv(){if(Vt===1){Vt=0;var n=Yi,s=uo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=oe.p;oe.p=2;var f=Ge;Ge|=4;try{Dv(s,n);var p=Hm,v=jy(n.containerInfo),S=p.focusedElem,k=p.selectionRange;if(v!==S&&S&&S.ownerDocument&&Uy(S.ownerDocument.documentElement,S)){if(k!==null&&mf(S)){var $=k.start,X=k.end;if(X===void 0&&(X=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(X,S.value.length);else{var te=S.ownerDocument||document,Q=te&&te.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),de=S.textContent.length,Ee=Math.min(k.start,de),tt=k.end===void 0?Ee:Math.min(k.end,de);!J.extend&&Ee>tt&&(v=tt,tt=Ee,Ee=v);var z=My(S,Ee),j=My(S,tt);if(z&&j&&(J.rangeCount!==1||J.anchorNode!==z.node||J.anchorOffset!==z.offset||J.focusNode!==j.node||J.focusOffset!==j.offset)){var F=te.createRange();F.setStart(z.node,z.offset),J.removeAllRanges(),Ee>tt?(J.addRange(F),J.extend(j.node,j.offset)):(F.setEnd(j.node,j.offset),J.addRange(F))}}}}for(te=[],J=S;J=J.parentNode;)J.nodeType===1&&te.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<te.length;S++){var ee=te[S];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Rh=!!qm,Hm=qm=null}finally{Ge=f,oe.p=u,Z.T=o}}n.current=s,Vt=2}}function Xv(){if(Vt===2){Vt=0;var n=Yi,s=uo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=oe.p;oe.p=2;var f=Ge;Ge|=4;try{Rv(n,s.alternate,s)}finally{Ge=f,oe.p=u,Z.T=o}}Vt=3}}function Zv(){if(Vt===4||Vt===3){Vt=0,ic();var n=Yi,s=uo,o=di,u=Lv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Vt=5:(Vt=0,uo=Yi=null,eE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Qi=null),Yr(o),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Wn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Z.T,f=oe.p,oe.p=2,Z.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var S=u[v];p(S.value,{componentStack:S.stack})}}finally{Z.T=s,oe.p=f}}(di&3)!==0&&mh(),Vr(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Om?Jl++:(Jl=0,Om=n):Jl=0,Wl(0)}}function eE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Dl(s)))}function mh(){return Wv(),Xv(),Zv(),tE()}function tE(){if(Vt!==5)return!1;var n=Yi,s=Cm;Cm=0;var o=Yr(di),u=Z.T,f=oe.p;try{oe.p=32>o?32:o,Z.T=null,o=Im,Im=null;var p=Yi,v=di;if(Vt=0,uo=Yi=null,di=0,(Ge&6)!==0)throw Error(r(331));var S=Ge;if(Ge|=4,Uv(p.current),xv(p,p.current,v,o),Ge=S,Wl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Wn,p)}catch{}return!0}finally{oe.p=f,Z.T=u,eE(n,s)}}function nE(n,s,o){s=Ln(o,s),s=om(n.stateNode,s,2),n=qi(n,s,2),n!==null&&(ks(n,2),Vr(n))}function We(n,s,o){if(n.tag===3)nE(n,n,o);else for(;s!==null;){if(s.tag===3){nE(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){n=Ln(o,n),o=rv(2),u=qi(s,o,2),u!==null&&(iv(o,u,s,n),ks(u,2),Vr(u));break}}s=s.return}}function km(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new bR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Sm=!0,f.add(o),n=CR.bind(null,n,s,o),s.then(n,n))}function CR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,nt===n&&(Pe&o)===o&&(pt===4||pt===3&&(Pe&62914560)===Pe&&300>hn()-lh?(Ge&2)===0&&co(n,0):Am|=o,lo===Pe&&(lo=0)),Vr(n)}function rE(n,s){s===0&&(s=cc()),n=Gs(n,s),n!==null&&(ks(n,s),Vr(n))}function IR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),rE(n,o)}function OR(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),rE(n,o)}function NR(n,s){return jt(n,s)}var gh=null,fo=null,xm=!1,ph=!1,Pm=!1,Wi=0;function Vr(n){n!==fo&&n.next===null&&(fo===null?gh=fo=n:fo=fo.next=n),ph=!0,xm||(xm=!0,kR())}function Wl(n,s){if(!Pm&&ph){Pm=!0;do for(var o=!1,u=gh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var v=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-yt(42|n)+1)-1,p&=f&~(v&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,oE(u,p))}else p=Pe,p=Er(u,u===nt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Xn(u,p)||(o=!0,oE(u,p));u=u.next}while(o);Pm=!1}}function DR(){iE()}function iE(){ph=xm=!1;var n=0;Wi!==0&&qR()&&(n=Wi);for(var s=hn(),o=null,u=gh;u!==null;){var f=u.next,p=sE(u,s);p===0?(u.next=null,o===null?gh=f:o.next=f,f===null&&(fo=o)):(o=u,(n!==0||(p&3)!==0)&&(ph=!0)),u=f}Vt!==0&&Vt!==5||Wl(n),Wi!==0&&(Wi=0)}function sE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-yt(p),S=1<<v,k=f[v];k===-1?((S&o)===0||(S&u)!==0)&&(f[v]=uf(S,s)):k<=s&&(n.expiredLanes|=S),p&=~S}if(s=nt,o=Pe,o=Er(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ai(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Xn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Ai(u),Yr(o)){case 2:case 8:o=ol;break;case 32:o=Ri;break;case 268435456:o=sc;break;default:o=Ri}return u=aE.bind(null,n),o=jt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Ai(u),n.callbackPriority=2,n.callbackNode=null,2}function aE(n,s){if(Vt!==0&&Vt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(mh()&&n.callbackNode!==o)return null;var u=Pe;return u=Er(n,n===nt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Bv(n,u,s),sE(n,hn()),n.callbackNode!=null&&n.callbackNode===o?aE.bind(null,n):null)}function oE(n,s){if(mh())return null;Bv(n,s,!0)}function kR(){FR(function(){(Ge&6)!==0?jt(al,DR):iE()})}function Mm(){if(Wi===0){var n=Wa;n===0&&(n=_r,_r<<=1,(_r&261888)===0&&(_r=256)),Wi=n}return Wi}function lE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function uE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function xR(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=lE((f[qt]||null).action),v=u.submitter;v&&(s=(s=v[qt]||null)?lE(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var S=new Dr("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Wi!==0){var k=v?uE(f,v):new FormData(f);tm(o,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(S.preventDefault(),k=v?uE(f,v):new FormData(f),tm(o,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var Um=0;Um<_f.length;Um++){var jm=_f[Um],PR=jm.toLowerCase(),MR=jm[0].toUpperCase()+jm.slice(1);ar(PR,"on"+MR)}ar(zy,"onAnimationEnd"),ar(By,"onAnimationIteration"),ar(qy,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(WA,"onTransitionRun"),ar(XA,"onTransitionStart"),ar(ZA,"onTransitionCancel"),ar(Hy,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function cE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var S=u[v],k=S.instance,$=S.currentTarget;if(S=S.listener,k!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=$;try{p(f)}catch(X){Dc(X)}f.currentTarget=null,p=k}else for(v=0;v<u.length;v++){if(S=u[v],k=S.instance,$=S.currentTarget,S=S.listener,k!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=$;try{p(f)}catch(X){Dc(X)}f.currentTarget=null,p=k}}}}function xe(n,s){var o=s[Da];o===void 0&&(o=s[Da]=new Set);var u=n+"__bubble";o.has(u)||(hE(s,n,2,!1),o.add(u))}function Vm(n,s,o){var u=0;s&&(u|=4),hE(o,n,u,s)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Lm(n){if(!n[yh]){n[yh]=!0,cl.forEach(function(o){o!=="selectionchange"&&(UR.has(o)||Vm(o,!1,n),Vm(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[yh]||(s[yh]=!0,Vm("selectionchange",!1,s))}}function hE(n,s,o,u){switch(zE(s)){case 2:var f=c1;break;case 8:f=h1;break;default:f=eg}o=f.bind(null,s,o,n),f=void 0,!Vs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function zm(n,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=u.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=Sr(S),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){u=p=v;continue e}S=S.parentNode}}u=u.return}ki(function(){var $=p,X=Mn(o),te=[];e:{var Q=Fy.get(n);if(Q!==void 0){var J=Dr,de=n;switch(n){case"keypress":if(zs(o)===0)break e;case"keydown":case"keyup":J=Ic;break;case"focusin":de="focus",J=qs;break;case"focusout":de="blur",J=qs;break;case"beforeblur":case"afterblur":J=qs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=y;break;case zy:case By:case qy:J=wc;break;case Hy:J=R;break;case"scroll":case"scrollend":J=bl;break;case"wheel":J=Y;break;case"copy":case"cut":case"paste":J=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Xr;break;case"toggle":case"beforetoggle":J=Ie}var Ee=(s&4)!==0,tt=!Ee&&(n==="scroll"||n==="scrollend"),z=Ee?Q!==null?Q+"Capture":null:Q;Ee=[];for(var j=$,F;j!==null;){var ee=j;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||z===null||(ee=nr(j,z),ee!=null&&Ee.push(Zl(j,ee,F))),tt)break;j=j.return}0<Ee.length&&(Q=new J(Q,de,null,o,X),te.push({event:Q,listeners:Ee}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",Q&&o!==vl&&(de=o.relatedTarget||o.fromElement)&&(Sr(de)||de[br]))break e;if((J||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(de=o.relatedTarget||o.toElement,J=$,de=de?Sr(de):null,de!==null&&(tt=l(de),Ee=de.tag,de!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(de=null)):(J=null,de=$),J!==de)){if(Ee=Tl,ee="onMouseLeave",z="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Xr,ee="onPointerLeave",z="onPointerEnter",j="pointer"),tt=J==null?Q:bn(J),F=de==null?Q:bn(de),Q=new Ee(ee,j+"leave",J,o,X),Q.target=tt,Q.relatedTarget=F,ee=null,Sr(X)===$&&(Ee=new Ee(z,j+"enter",de,o,X),Ee.target=F,Ee.relatedTarget=tt,ee=Ee),tt=ee,J&&de)t:{for(Ee=jR,z=J,j=de,F=0,ee=z;ee;ee=Ee(ee))F++;ee=0;for(var ye=j;ye;ye=Ee(ye))ee++;for(;0<F-ee;)z=Ee(z),F--;for(;0<ee-F;)j=Ee(j),ee--;for(;F--;){if(z===j||j!==null&&z===j.alternate){Ee=z;break t}z=Ee(z),j=Ee(j)}Ee=null}else Ee=null;J!==null&&dE(te,Q,J,Ee,!1),de!==null&&tt!==null&&dE(te,tt,de,Ee,!0)}}e:{if(Q=$?bn($):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var He=Oy;else if(Cy(Q))if(Ny)He=QA;else{He=GA;var fe=$A}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&Ma($.elementType)&&(He=Oy):He=KA;if(He&&(He=He(n,$))){Iy(te,He,o,X);break e}fe&&fe(n,Q,$),n==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&pl(Q,"number",Q.value)}switch(fe=$?bn($):window,n){case"focusin":(Cy(fe)||fe.contentEditable==="true")&&(Ha=fe,gf=$,Il=null);break;case"focusout":Il=gf=Ha=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,Vy(te,o,X);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":Vy(te,o,X)}var De;if($e)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else qa?Hs(n,o)&&(Me="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Pr&&o.locale!=="ko"&&(qa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&qa&&(De=wl()):(Nr=X,El="value"in Nr?Nr.value:Nr.textContent,qa=!0)),fe=_h($,Me),0<fe.length&&(Me=new xr(Me,n,null,o,X),te.push({event:Me,listeners:fe}),De?Me.data=De:(De=Ba(o),De!==null&&(Me.data=De)))),(De=jn?BA(n,o):qA(n,o))&&(Me=_h($,"onBeforeInput"),0<Me.length&&(fe=new xr("onBeforeInput","beforeinput",null,o,X),te.push({event:fe,listeners:Me}),fe.data=De)),xR(te,n,$,o,X)}cE(te,s)})}function Zl(n,s,o){return{instance:n,listener:s,currentTarget:o}}function _h(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=nr(n,o),f!=null&&u.unshift(Zl(n,f,p)),f=nr(n,s),f!=null&&u.push(Zl(n,f,p))),n.tag===3)return u;n=n.return}return[]}function jR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function dE(n,s,o,u,f){for(var p=s._reactName,v=[];o!==null&&o!==u;){var S=o,k=S.alternate,$=S.stateNode;if(S=S.tag,k!==null&&k===u)break;S!==5&&S!==26&&S!==27||$===null||(k=$,f?($=nr(o,p),$!=null&&v.unshift(Zl(o,$,k))):f||($=nr(o,p),$!=null&&v.push(Zl(o,$,k)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var VR=/\r\n?/g,LR=/\u0000|\uFFFD/g;function fE(n){return(typeof n=="string"?n:""+n).replace(VR,`
`).replace(LR,"")}function mE(n,s){return s=fE(s),fE(n)===s}function et(n,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||gn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&gn(n,""+u);break;case"className":Tn(n,"class",u);break;case"tabIndex":Tn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(n,o,u);break;case"style":_l(n,u,p);break;case"data":if(s!=="object"){Tn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ua(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&et(n,s,"name",f.name,f,null),et(n,s,"formEncType",f.formEncType,f,null),et(n,s,"formMethod",f.formMethod,f,null),et(n,s,"formTarget",f.formTarget,f,null)):(et(n,s,"encType",f.encType,f,null),et(n,s,"method",f.method,f,null),et(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ua(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=tr);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ua(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":xe("beforetoggle",n),xe("toggle",n),xa(n,"popover",u);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_c.get(o)||o,xa(n,o,u))}}function Bm(n,s,o,u,f,p){switch(o){case"style":_l(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?gn(n,u):(typeof u=="number"||typeof u=="bigint")&&gn(n,""+u);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=n[qt]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):xa(n,o,u)}}}function Xt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",n),xe("load",n);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,p,v,o,null)}}f&&et(n,s,"srcSet",o.srcSet,o,null),u&&et(n,s,"src",o.src,o,null);return;case"input":xe("invalid",n);var S=p=v=f=null,k=null,$=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":v=X;break;case"checked":k=X;break;case"defaultChecked":$=X;break;case"value":p=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:et(n,s,u,X,o,null)}}gc(n,p,S,k,$,v,f,!1);return;case"select":xe("invalid",n),u=v=p=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":p=S;break;case"defaultValue":v=S;break;case"multiple":u=S;default:et(n,s,f,S,o,null)}s=p,o=v,n.multiple=!!u,s!=null?Ii(n,!!u,s,!1):o!=null&&Ii(n,!!u,o,!0);return;case"textarea":xe("invalid",n),p=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(S=o[v],S!=null))switch(v){case"value":u=S;break;case"defaultValue":f=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:et(n,s,v,S,o,null)}Oi(n,u,f,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(n,s,k,u,o,null)}return;case"dialog":xe("beforetoggle",n),xe("toggle",n),xe("cancel",n),xe("close",n);break;case"iframe":case"object":xe("load",n);break;case"video":case"audio":for(u=0;u<Xl.length;u++)xe(Xl[u],n);break;case"image":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"embed":case"source":case"link":xe("error",n),xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(u=o[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,$,u,o,null)}return;default:if(Ma(s)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&Bm(n,s,X,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&et(n,s,S,u,o,null))}function zR(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,S=null,k=null,$=null,X=null;for(J in o){var te=o[J];if(o.hasOwnProperty(J)&&te!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=te;default:u.hasOwnProperty(J)||et(n,s,J,null,u,te)}}for(var Q in u){var J=u[Q];if(te=o[Q],u.hasOwnProperty(Q)&&(J!=null||te!=null))switch(Q){case"type":p=J;break;case"name":f=J;break;case"checked":$=J;break;case"defaultChecked":X=J;break;case"value":v=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==te&&et(n,s,Q,J,u,te)}}Pa(n,v,S,k,$,X,p,f);return;case"select":J=v=S=Q=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":J=k;default:u.hasOwnProperty(p)||et(n,s,p,null,u,k)}for(f in u)if(p=u[f],k=o[f],u.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":Q=p;break;case"defaultValue":S=p;break;case"multiple":v=p;default:p!==k&&et(n,s,f,p,u,k)}s=S,o=v,u=J,Q!=null?Ii(n,!!o,Q,!1):!!u!=!!o&&(s!=null?Ii(n,!!o,s,!0):Ii(n,!!o,o?[]:"",!1));return;case"textarea":J=Q=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:et(n,s,S,null,u,f)}for(v in u)if(f=u[v],p=o[v],u.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":Q=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&et(n,s,v,f,u,p)}pc(n,Q,J);return;case"option":for(var de in o)if(Q=o[de],o.hasOwnProperty(de)&&Q!=null&&!u.hasOwnProperty(de))switch(de){case"selected":n.selected=!1;break;default:et(n,s,de,null,u,Q)}for(k in u)if(Q=u[k],J=o[k],u.hasOwnProperty(k)&&Q!==J&&(Q!=null||J!=null))switch(k){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:et(n,s,k,Q,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)Q=o[Ee],o.hasOwnProperty(Ee)&&Q!=null&&!u.hasOwnProperty(Ee)&&et(n,s,Ee,null,u,Q);for($ in u)if(Q=u[$],J=o[$],u.hasOwnProperty($)&&Q!==J&&(Q!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:et(n,s,$,Q,u,J)}return;default:if(Ma(s)){for(var tt in o)Q=o[tt],o.hasOwnProperty(tt)&&Q!==void 0&&!u.hasOwnProperty(tt)&&Bm(n,s,tt,void 0,u,Q);for(X in u)Q=u[X],J=o[X],!u.hasOwnProperty(X)||Q===J||Q===void 0&&J===void 0||Bm(n,s,X,Q,u,J);return}}for(var z in o)Q=o[z],o.hasOwnProperty(z)&&Q!=null&&!u.hasOwnProperty(z)&&et(n,s,z,null,u,Q);for(te in u)Q=u[te],J=o[te],!u.hasOwnProperty(te)||Q===J||Q==null&&J==null||et(n,s,te,Q,u,J)}function gE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BR(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,v=f.initiatorType,S=f.duration;if(p&&S&&gE(v)){for(v=0,S=f.responseEnd,u+=1;u<o.length;u++){var k=o[u],$=k.startTime;if($>S)break;var X=k.transferSize,te=k.initiatorType;X&&gE(te)&&(k=k.responseEnd,v+=X*(k<S?1:(S-$)/(k-$)))}if(--u,s+=8*(p+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var qm=null,Hm=null;function vh(n){return n.nodeType===9?n:n.ownerDocument}function pE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Fm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $m=null;function qR(){var n=window.event;return n&&n.type==="popstate"?n===$m?!1:($m=n,!0):($m=null,!1)}var _E=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,vE=typeof Promise=="function"?Promise:void 0,FR=typeof queueMicrotask=="function"?queueMicrotask:typeof vE<"u"?function(n){return vE.resolve(null).then(n).catch($R)}:_E;function $R(n){setTimeout(function(){throw n})}function Xi(n){return n==="head"}function EE(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),yo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")eu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,eu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,S=p.nodeName;p[Tr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&eu(n.ownerDocument.body);o=f}while(o);yo(s)}function wE(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Gm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gm(o),ka(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function GR(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Tr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Fn(n.nextSibling),n===null)break}return null}function KR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Fn(n.nextSibling),n===null))return null;return n}function bE(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Fn(n.nextSibling),n===null))return null;return n}function Km(n){return n.data==="$?"||n.data==="$~"}function Qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function QR(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Fn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Ym=null;function TE(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Fn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function SE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function AE(n,s,o){switch(s=vh(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function eu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ka(n)}var $n=new Map,RE=new Set;function Eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fi=oe.d;oe.d={f:YR,r:JR,D:WR,C:XR,L:ZR,m:e1,X:n1,S:t1,M:r1};function YR(){var n=fi.f(),s=hh();return n||s}function JR(n){var s=Pn(n);s!==null&&s.tag===5&&s.type==="form"?H_(s):fi.r(n)}var mo=typeof document>"u"?null:document;function CE(n,s,o){var u=mo;if(u&&typeof s=="string"&&s){var f=mn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),RE.has(f)||(RE.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Xt(s,"link",n),Rt(s),u.head.appendChild(s)))}}function WR(n){fi.D(n),CE("dns-prefetch",n,null)}function XR(n,s){fi.C(n,s),CE("preconnect",n,s)}function ZR(n,s,o){fi.L(n,s,o);var u=mo;if(u&&n&&s){var f='link[rel="preload"][as="'+mn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+mn(o.imageSizes)+'"]')):f+='[href="'+mn(n)+'"]';var p=f;switch(s){case"style":p=go(n);break;case"script":p=po(n)}$n.has(p)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),$n.set(p,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(tu(p))||s==="script"&&u.querySelector(nu(p))||(s=u.createElement("link"),Xt(s,"link",n),Rt(s),u.head.appendChild(s)))}}function e1(n,s){fi.m(n,s);var o=mo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(n)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=po(n)}if(!$n.has(p)&&(n=E({rel:"modulepreload",href:n},s),$n.set(p,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nu(p)))return}u=o.createElement("link"),Xt(u,"link",n),Rt(u),o.head.appendChild(u)}}}function t1(n,s,o){fi.S(n,s,o);var u=mo;if(u&&n){var f=Ar(u).hoistableStyles,p=go(n);s=s||"default";var v=f.get(p);if(!v){var S={loading:0,preload:null};if(v=u.querySelector(tu(p)))S.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=$n.get(p))&&Jm(n,o);var k=v=u.createElement("link");Rt(k),Xt(k,"link",n),k._p=new Promise(function($,X){k.onload=$,k.onerror=X}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,wh(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(p,v)}}}function n1(n,s){fi.X(n,s);var o=mo;if(o&&n){var u=Ar(o).hoistableScripts,f=po(n),p=u.get(f);p||(p=o.querySelector(nu(f)),p||(n=E({src:n,async:!0},s),(s=$n.get(f))&&Wm(n,s),p=o.createElement("script"),Rt(p),Xt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function r1(n,s){fi.M(n,s);var o=mo;if(o&&n){var u=Ar(o).hoistableScripts,f=po(n),p=u.get(f);p||(p=o.querySelector(nu(f)),p||(n=E({src:n,async:!0,type:"module"},s),(s=$n.get(f))&&Wm(n,s),p=o.createElement("script"),Rt(p),Xt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function IE(n,s,o,u){var f=(f=Ne.current)?Eh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=go(o.href),o=Ar(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=go(o.href);var p=Ar(f).hoistableStyles,v=p.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=f.querySelector(tu(n)))&&!p._p&&(v.instance=p,v.state.loading=5),$n.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(n,o),p||i1(f,n,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=po(o),o=Ar(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function go(n){return'href="'+mn(n)+'"'}function tu(n){return'link[rel="stylesheet"]['+n+"]"}function OE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function i1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",o),Rt(s),n.head.appendChild(s))}function po(n){return'[src="'+mn(n)+'"]'}function nu(n){return"script[async]"+n}function NE(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+mn(o.href)+'"]');if(u)return s.instance=u,Rt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Rt(u),Xt(u,"style",f),wh(u,o.precedence,n),s.instance=u;case"stylesheet":f=go(o.href);var p=n.querySelector(tu(f));if(p)return s.state.loading|=4,s.instance=p,Rt(p),p;u=OE(o),(f=$n.get(f))&&Jm(u,f),p=(n.ownerDocument||n).createElement("link"),Rt(p);var v=p;return v._p=new Promise(function(S,k){v.onload=S,v.onerror=k}),Xt(p,"link",u),s.state.loading|=4,wh(p,o.precedence,n),s.instance=p;case"script":return p=po(o.src),(f=n.querySelector(nu(p)))?(s.instance=f,Rt(f),f):(u=o,(f=$n.get(p))&&(u=E({},o),Wm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),Xt(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,wh(u,o.precedence,n));return s.instance}function wh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,v=0;v<u.length;v++){var S=u[v];if(S.dataset.precedence===s)p=S;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Jm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Wm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var bh=null;function DE(n,s,o){if(bh===null){var u=new Map,f=bh=new Map;f.set(o,u)}else f=bh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[Tr]||p[At]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=n+v;var S=u.get(v);S?S.push(p):u.set(v,[p])}}return u}function kE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function s1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function a1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=go(u.href),p=s.querySelector(tu(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Th.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Rt(p);return}p=s.ownerDocument||s,u=OE(u),(f=$n.get(f))&&Jm(u,f),p=p.createElement("link"),Rt(p);var v=p;v._p=new Promise(function(S,k){v.onload=S,v.onerror=k}),Xt(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Th.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Xm=0;function o1(n,s){return n.stylesheets&&n.count===0&&Ah(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Ah(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Xm===0&&(Xm=62500*BR());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ah(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Xm?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ah(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sh=null;function Ah(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sh=new Map,s.forEach(l1,n),Sh=null,Th.call(n))}function l1(n,s){if(!(s.state.loading&4)){var o=Sh.get(n);if(o)var u=o.get(null);else{o=new Map,Sh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,f),o.set(v,f),this.count++,u=Th.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var ru={$$typeof:G,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function u1(n,s,o,u,f,p,v,S,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.hiddenUpdates=wr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function PE(n,s,o,u,f,p,v,S,k,$,X,te){return n=new u1(n,s,o,v,k,$,X,te,S),s=1,p===!0&&(s|=24),p=An(3,null,null,s),n.current=p,p.stateNode=n,s=Df(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Mf(p),n}function ME(n){return n?(n=Ga,n):Ga}function UE(n,s,o,u,f,p){f=ME(f),u.context===null?u.context=f:u.pendingContext=f,u=Bi(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=qi(n,u,s),o!==null&&(En(o,n,s),Ml(o,n,s))}function jE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Zm(n,s){jE(n,s),(n=n.alternate)&&jE(n,s)}function VE(n){if(n.tag===13||n.tag===31){var s=Gs(n,67108864);s!==null&&En(s,n,67108864),Zm(n,67108864)}}function LE(n){if(n.tag===13||n.tag===31){var s=Nn();s=Ps(s);var o=Gs(n,s);o!==null&&En(o,n,s),Zm(n,s)}}var Rh=!0;function c1(n,s,o,u){var f=Z.T;Z.T=null;var p=oe.p;try{oe.p=2,eg(n,s,o,u)}finally{oe.p=p,Z.T=f}}function h1(n,s,o,u){var f=Z.T;Z.T=null;var p=oe.p;try{oe.p=8,eg(n,s,o,u)}finally{oe.p=p,Z.T=f}}function eg(n,s,o,u){if(Rh){var f=tg(u);if(f===null)zm(n,s,u,Ch,o),BE(n,u);else if(f1(f,n,s,o,u))u.stopPropagation();else if(BE(n,u),s&4&&-1<d1.indexOf(n)){for(;f!==null;){var p=Pn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=vr(p.pendingLanes);if(v!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var k=1<<31-yt(v);S.entanglements[1]|=k,v&=~k}Vr(p),(Ge&6)===0&&(uh=hn()+500,Wl(0))}}break;case 31:case 13:S=Gs(p,2),S!==null&&En(S,p,2),hh(),Zm(p,2)}if(p=tg(u),p===null&&zm(n,s,u,Ch,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else zm(n,s,u,null,o)}}function tg(n){return n=Mn(n),ng(n)}var Ch=null;function ng(n){if(Ch=null,n=Sr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ch=n,null}function zE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ns()){case al:return 2;case ol:return 8;case Ri:case lf:return 32;case sc:return 268435456;default:return 32}default:return 32}}var rg=!1,Zi=null,es=null,ts=null,iu=new Map,su=new Map,ns=[],d1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BE(n,s){switch(n){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":iu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(s.pointerId)}}function au(n,s,o,u,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=Pn(s),s!==null&&VE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function f1(n,s,o,u,f){switch(s){case"focusin":return Zi=au(Zi,n,s,o,u,f),!0;case"dragenter":return es=au(es,n,s,o,u,f),!0;case"mouseover":return ts=au(ts,n,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return iu.set(p,au(iu.get(p)||null,n,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,su.set(p,au(su.get(p)||null,n,s,o,u,f)),!0}return!1}function qE(n){var s=Sr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Zn(n.priority,function(){LE(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,Zn(n.priority,function(){LE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=tg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);vl=u,o.target.dispatchEvent(u),vl=null}else return s=Pn(o),s!==null&&VE(s),n.blockedOn=o,!1;s.shift()}return!0}function HE(n,s,o){Ih(n)&&o.delete(s)}function m1(){rg=!1,Zi!==null&&Ih(Zi)&&(Zi=null),es!==null&&Ih(es)&&(es=null),ts!==null&&Ih(ts)&&(ts=null),iu.forEach(HE),su.forEach(HE)}function Oh(n,s){n.blockedOn===s&&(n.blockedOn=null,rg||(rg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,m1)))}var Nh=null;function FE(n){Nh!==n&&(Nh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nh===n&&(Nh=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(ng(u||o)===null)continue;break}var p=Pn(o);p!==null&&(n.splice(s,3),s-=3,tm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function yo(n){function s(k){return Oh(k,n)}Zi!==null&&Oh(Zi,n),es!==null&&Oh(es,n),ts!==null&&Oh(ts,n),iu.forEach(s),su.forEach(s);for(var o=0;o<ns.length;o++){var u=ns[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ns.length&&(o=ns[0],o.blockedOn===null);)qE(o),o.blockedOn===null&&ns.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],v=f[qt]||null;if(typeof p=="function")v||FE(o);else if(v){var S=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[qt]||null)S=v.formAction;else if(ng(f)!==null)continue}else S=v.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),FE(o)}}}function $E(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function ig(n){this._internalRoot=n}Dh.prototype.render=ig.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Nn();UE(o,u,n,s,null,null)},Dh.prototype.unmount=ig.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;UE(n.current,2,null,n,null,null),hh(),s[br]=null}};function Dh(n){this._internalRoot=n}Dh.prototype.unstable_scheduleHydration=function(n){if(n){var s=hc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ns.length&&s!==0&&s<ns[o].priority;o++);ns.splice(o,0,n),o===0&&qE(n)}};var GE=e.version;if(GE!=="19.2.0")throw Error(r(527,GE,"19.2.0"));oe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var g1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{Wn=kh.inject(g1),Kt=kh}catch{}}return lu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",f=Z_,p=ev,v=tv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=PE(n,1,!1,null,null,o,u,null,f,p,v,$E),n[br]=s.current,Lm(n),new ig(s)},lu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,f="",p=Z_,v=ev,S=tv,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),s=PE(n,1,!0,s,o??null,u,f,k,p,v,S,$E),s.context=ME(null),o=s.current,u=Nn(),u=Ps(u),f=Bi(u),f.callback=null,qi(o,f,u),o=u,s.current.lanes=o,ks(s,o),Vr(s),n[br]=s.current,Lm(n),new Dh(s)},lu.version="19.2.0",lu}var n0;function I1(){if(n0)return og.exports;n0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),og.exports=C1(),og.exports}var O1=I1();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r0="popstate";function N1(i={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=wa(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Mg("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:Cu(l))}function r(a,l){Yn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return k1(e,t,r,i)}function ht(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Yn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D1(){return Math.random().toString(36).substring(2,10)}function i0(i,e){return{usr:i.state,key:i.key,idx:e}}function Mg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?wa(e):e,state:t,key:e&&e.key||r||D1()}}function Cu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function wa(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function k1(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){d="POP";let A=_(),L=A==null?null:A-g;g=A,m&&m({action:d,location:P.location,delta:L})}function b(A,L){d="PUSH";let K=Mg(P.location,A,L);t&&t(K,A),g=_()+1;let G=i0(K,g),W=P.createHref(K);try{c.pushState(G,"",W)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;a.location.assign(W)}l&&m&&m({action:d,location:P.location,delta:1})}function T(A,L){d="REPLACE";let K=Mg(P.location,A,L);t&&t(K,A),g=_();let G=i0(K,g),W=P.createHref(K);c.replaceState(G,"",W),l&&m&&m({action:d,location:P.location,delta:0})}function N(A){return x1(A)}let P={get action(){return d},get location(){return i(a,c)},listen(A){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(r0,E),m=A,()=>{a.removeEventListener(r0,E),m=null}},createHref(A){return e(a,A)},createURL:N,encodeLocation(A){let L=N(A);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:b,replace:T,go(A){return c.go(A)}};return P}function x1(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Cu(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function hb(i,e,t="/"){return P1(i,e,t,!1)}function P1(i,e,t,r){let a=typeof e=="string"?wa(e):e,l=vi(a.pathname||"/",t);if(l==null)return null;let c=db(i);M1(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=G1(l);d=F1(c[m],g,r)}return d}function db(i,e=[],t=[],r="",a=!1){let l=(c,d,m=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&m)return;ht(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let E=yi([r,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),db(c.children,e,b,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:q1(E,c.index),routesMeta:b})};return i.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of fb(c.path))l(c,d,!0,m)}),e}function fb(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=fb(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>i.startsWith("/")&&m===""?"/":m)}function M1(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:H1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var U1=/^:[\w-]+$/,j1=3,V1=2,L1=1,z1=10,B1=-2,s0=i=>i==="*";function q1(i,e){let t=i.split("/"),r=t.length;return t.some(s0)&&(r+=B1),e&&(r+=V1),t.filter(a=>!s0(a)).reduce((a,l)=>a+(U1.test(l)?j1:l===""?L1:z1),r)}function H1(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function F1(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=ud({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=ud({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:yi([l,E.pathname]),pathnameBase:J1(yi([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=yi([l,E.pathnameBase]))}return c}function ud(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=$1(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:E},b)=>{if(_==="*"){let N=d[b]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const T=d[b];return E&&!T?g[_]=void 0:g[_]=(T||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:i}}function $1(i,e=!1,t=!0){Yn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function G1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function vi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function K1(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?wa(i):i;return{pathname:t?t.startsWith("/")?t:Q1(t,e):e,search:W1(r),hash:X1(a)}}function Q1(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function hg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y1(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wp(i){let e=Y1(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function bp(i,e,t,r=!1){let a;typeof i=="string"?a=wa(i):(a={...i},ht(!a.pathname||!a.pathname.includes("?"),hg("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),hg("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),hg("#","search","hash",a)));let l=i===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}d=E>=0?e[E]:"/"}let m=K1(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var yi=i=>i.join("/").replace(/\/\/+/g,"/"),J1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),W1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,X1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Z1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mb=["POST","PUT","PATCH","DELETE"];new Set(mb);var eC=["GET",...mb];new Set(eC);var $o=q.createContext(null);$o.displayName="DataRouter";var xd=q.createContext(null);xd.displayName="DataRouterState";q.createContext(!1);var gb=q.createContext({isTransitioning:!1});gb.displayName="ViewTransition";var tC=q.createContext(new Map);tC.displayName="Fetchers";var nC=q.createContext(null);nC.displayName="Await";var pr=q.createContext(null);pr.displayName="Navigation";var Fu=q.createContext(null);Fu.displayName="Location";var Qr=q.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var Tp=q.createContext(null);Tp.displayName="RouteError";function rC(i,{relative:e}={}){ht(Go(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(pr),{hash:a,pathname:l,search:c}=$u(i,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:yi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Go(){return q.useContext(Fu)!=null}function As(){return ht(Go(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Fu).location}var pb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yb(i){q.useContext(pr).static||q.useLayoutEffect(i)}function Pd(){let{isDataRoute:i}=q.useContext(Qr);return i?pC():iC()}function iC(){ht(Go(),"useNavigate() may be used only in the context of a <Router> component.");let i=q.useContext($o),{basename:e,navigator:t}=q.useContext(pr),{matches:r}=q.useContext(Qr),{pathname:a}=As(),l=JSON.stringify(wp(r)),c=q.useRef(!1);return yb(()=>{c.current=!0}),q.useCallback((m,g={})=>{if(Yn(c.current,pb),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=bp(m,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:yi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,i])}q.createContext(null);function $u(i,{relative:e}={}){let{matches:t}=q.useContext(Qr),{pathname:r}=As(),a=JSON.stringify(wp(t));return q.useMemo(()=>bp(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function sC(i,e){return _b(i,e)}function _b(i,e,t,r,a){ht(Go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=q.useContext(pr),{matches:c}=q.useContext(Qr),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",E=d&&d.route;{let K=E&&E.path||"";vb(g,!E||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=As(),T;if(e){let K=typeof e=="string"?wa(e):e;ht(_==="/"||K.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${K.pathname}" was given in the \`location\` prop.`),T=K}else T=b;let N=T.pathname||"/",P=N;if(_!=="/"){let K=_.replace(/^\//,"").split("/");P="/"+N.replace(/^\//,"").split("/").slice(K.length).join("/")}let A=hb(i,{pathname:P});Yn(E||A!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Yn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=cC(A&&A.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:yi([_,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:yi([_,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,r,a);return e&&L?q.createElement(Fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},L):L}function aC(){let i=gC(),e=Z1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:a},t):null,c)}var oC=q.createElement(aC,null),lC=class extends q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?q.createElement(Qr.Provider,{value:this.props.routeContext},q.createElement(Tp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:i,match:e,children:t}){let r=q.useContext($o);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Qr.Provider,{value:i},t)}function cC(i,e=[],t=null,r=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:E,errors:b}=t,T=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||T){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,_,E)=>{let b,T=!1,N=null,P=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,N=_.route.errorElement||oC,d&&(m<0&&E===0?(vb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,P=null):m===E&&(T=!0,P=_.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,E+1)),L=()=>{let K;return b?K=N:T?K=P:_.route.Component?K=q.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=g,q.createElement(uC,{match:_,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:K})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?q.createElement(lC,{location:t.location,revalidation:t.revalidation,component:N,error:b,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):L()},null)}function Sp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(i){let e=q.useContext($o);return ht(e,Sp(i)),e}function dC(i){let e=q.useContext(xd);return ht(e,Sp(i)),e}function fC(i){let e=q.useContext(Qr);return ht(e,Sp(i)),e}function Ap(i){let e=fC(i),t=e.matches[e.matches.length-1];return ht(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function mC(){return Ap("useRouteId")}function gC(){let i=q.useContext(Tp),e=dC("useRouteError"),t=Ap("useRouteError");return i!==void 0?i:e.errors?.[t]}function pC(){let{router:i}=hC("useNavigate"),e=Ap("useNavigate"),t=q.useRef(!1);return yb(()=>{t.current=!0}),q.useCallback(async(a,l={})=>{Yn(t.current,pb),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var a0={};function vb(i,e,t){!e&&!a0[i]&&(a0[i]=!0,Yn(!1,t))}q.memo(yC);function yC({routes:i,future:e,state:t,unstable_onError:r}){return _b(i,void 0,t,r,e)}function Eb({to:i,replace:e,state:t,relative:r}){ht(Go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=q.useContext(pr);Yn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(Qr),{pathname:c}=As(),d=Pd(),m=bp(i,wp(l),c,r==="path"),g=JSON.stringify(m);return q.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function as(i){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _C({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){ht(!Go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=wa(t));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:b="default"}=t,T=q.useMemo(()=>{let N=vi(m,c);return N==null?null:{location:{pathname:N,search:g,hash:_,state:E,key:b},navigationType:r}},[c,m,g,_,E,b,r]);return Yn(T!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:q.createElement(pr.Provider,{value:d},q.createElement(Fu.Provider,{children:e,value:T}))}function o0({children:i,location:e}){return sC(Ug(i),e)}function Ug(i,e=[]){let t=[];return q.Children.forEach(i,(r,a)=>{if(!q.isValidElement(r))return;let l=[...e,a];if(r.type===q.Fragment){t.push.apply(t,Ug(r.props.children,l));return}ht(r.type===as,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ug(r.props.children,l)),t.push(c)}),t}var Jh="get",Wh="application/x-www-form-urlencoded";function Md(i){return i!=null&&typeof i.tagName=="string"}function vC(i){return Md(i)&&i.tagName.toLowerCase()==="button"}function EC(i){return Md(i)&&i.tagName.toLowerCase()==="form"}function wC(i){return Md(i)&&i.tagName.toLowerCase()==="input"}function bC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function TC(i,e){return i.button===0&&(!e||e==="_self")&&!bC(i)}var xh=null;function SC(){if(xh===null)try{new FormData(document.createElement("form"),0),xh=!1}catch{xh=!0}return xh}var AC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dg(i){return i!=null&&!AC.has(i)?(Yn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wh}"`),null):i}function RC(i,e){let t,r,a,l,c;if(EC(i)){let d=i.getAttribute("action");r=d?vi(d,e):null,t=i.getAttribute("method")||Jh,a=dg(i.getAttribute("enctype"))||Wh,l=new FormData(i)}else if(vC(i)||wC(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||d.getAttribute("action");if(r=m?vi(m,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||Jh,a=dg(i.getAttribute("formenctype"))||dg(d.getAttribute("enctype"))||Wh,l=new FormData(d,i),!SC()){let{name:g,type:_,value:E}=i;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(Md(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Jh,r=null,a=Wh,c=i}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function CC(i,e,t){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&vi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function IC(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OC(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function NC(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await IC(l,t);return c.links?c.links():[]}return[]}));return PC(r.flat(1).filter(OC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function l0(i,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function DC(i,e,{includeHydrateFallback:t}={}){return kC(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function kC(i){return[...new Set(i)]}function xC(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function PC(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(xC(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function wb(){let i=q.useContext($o);return Rp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function MC(){let i=q.useContext(xd);return Rp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Cp=q.createContext(void 0);Cp.displayName="FrameworkContext";function bb(){let i=q.useContext(Cp);return Rp(i,"You must render this element inside a <HydratedRouter> element"),i}function UC(i,e){let t=q.useContext(Cp),[r,a]=q.useState(!1),[l,c]=q.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,b=q.useRef(null);q.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let P=L=>{L.forEach(K=>{c(K.isIntersecting)})},A=new IntersectionObserver(P,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[i]),q.useEffect(()=>{if(r){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[r]);let T=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?i!=="intent"?[l,b,{}]:[l,b,{onFocus:uu(d,T),onBlur:uu(m,N),onMouseEnter:uu(g,T),onMouseLeave:uu(_,N),onTouchStart:uu(E,T)}]:[!1,b,{}]}function uu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function jC({page:i,...e}){let{router:t}=wb(),r=q.useMemo(()=>hb(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?q.createElement(LC,{page:i,matches:r,...e}):null}function VC(i){let{manifest:e,routeModules:t}=bb(),[r,a]=q.useState([]);return q.useEffect(()=>{let l=!1;return NC(i,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[i,e,t]),r}function LC({page:i,matches:e,...t}){let r=As(),{manifest:a,routeModules:l}=bb(),{basename:c}=wb(),{loaderData:d,matches:m}=MC(),g=q.useMemo(()=>l0(i,e,m,a,r,"data"),[i,e,m,a,r]),_=q.useMemo(()=>l0(i,e,m,a,r,"assets"),[i,e,m,a,r]),E=q.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let N=new Set,P=!1;if(e.forEach(L=>{let K=a.routes[L.route.id];!K||!K.hasLoader||(!g.some(G=>G.route.id===L.route.id)&&L.route.id in d&&l[L.route.id]?.shouldRevalidate||K.hasClientLoader?P=!0:N.add(L.route.id))}),N.size===0)return[];let A=CC(i,c,"data");return P&&N.size>0&&A.searchParams.set("_routes",e.filter(L=>N.has(L.route.id)).map(L=>L.route.id).join(",")),[A.pathname+A.search]},[c,d,r,a,g,e,i,l]),b=q.useMemo(()=>DC(_,a),[_,a]),T=VC(_);return q.createElement(q.Fragment,null,E.map(N=>q.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),b.map(N=>q.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),T.map(({key:N,link:P})=>q.createElement("link",{key:N,nonce:t.nonce,...P})))}function zC(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tb&&(window.__reactRouterVersion="7.9.5")}catch{}function BC({basename:i,children:e,window:t}){let r=q.useRef();r.current==null&&(r.current=N1({window:t,v5Compat:!0}));let a=r.current,[l,c]=q.useState({action:a.action,location:a.location}),d=q.useCallback(m=>{q.startTransition(()=>c(m))},[c]);return q.useLayoutEffect(()=>a.listen(d),[a,d]),q.createElement(_C,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var Sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ab=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:E,...b},T){let{basename:N}=q.useContext(pr),P=typeof g=="string"&&Sb.test(g),A,L=!1;if(typeof g=="string"&&P&&(A=g,Tb))try{let O=new URL(window.location.href),U=g.startsWith("//")?new URL(O.protocol+g):new URL(g),M=vi(U.pathname,N);U.origin===O.origin&&M!=null?g=M+U.search+U.hash:L=!0}catch{Yn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=rC(g,{relative:a}),[G,W,se]=UC(r,b),ue=FC(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:E});function I(O){e&&e(O),O.defaultPrevented||ue(O)}let C=q.createElement("a",{...b,...se,href:A||K,onClick:L||l?e:I,ref:zC(T,W),target:m,"data-discover":!P&&t==="render"?"true":void 0});return G&&!P?q.createElement(q.Fragment,null,C,q.createElement(jC,{page:K})):C});Ab.displayName="Link";var cu=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let E=$u(c,{relative:g.relative}),b=As(),T=q.useContext(xd),{navigator:N,basename:P}=q.useContext(pr),A=T!=null&&YC(E)&&d===!0,L=N.encodeLocation?N.encodeLocation(E).pathname:E.pathname,K=b.pathname,G=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(K=K.toLowerCase(),G=G?G.toLowerCase():null,L=L.toLowerCase()),G&&P&&(G=vi(G,P)||G);const W=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let se=K===L||!a&&K.startsWith(L)&&K.charAt(W)==="/",ue=G!=null&&(G===L||!a&&G.startsWith(L)&&G.charAt(L.length)==="/"),I={isActive:se,isPending:ue,isTransitioning:A},C=se?e:void 0,O;typeof r=="function"?O=r(I):O=[r,se?"active":null,ue?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(I):l;return q.createElement(Ab,{...g,"aria-current":C,className:O,ref:_,style:U,to:c,viewTransition:d},typeof m=="function"?m(I):m)});cu.displayName="NavLink";var qC=q.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=Jh,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:E,...b},T)=>{let N=KC(),P=QC(d,{relative:g}),A=c.toLowerCase()==="get"?"get":"post",L=typeof d=="string"&&Sb.test(d),K=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let W=G.nativeEvent.submitter,se=W?.getAttribute("formmethod")||c;N(W||G.currentTarget,{fetcherKey:e,method:se,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:E})};return q.createElement("form",{ref:T,method:A,action:P,onSubmit:r?m:K,...b,"data-discover":!L&&i==="render"?"true":void 0})});qC.displayName="Form";function HC(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rb(i){let e=q.useContext($o);return ht(e,HC(i)),e}function FC(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Pd(),m=As(),g=$u(i,{relative:l});return q.useCallback(_=>{if(TC(_,e)){_.preventDefault();let E=t!==void 0?t:Cu(m)===Cu(g);d(i,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,r,e,i,a,l,c])}var $C=0,GC=()=>`__${String(++$C)}__`;function KC(){let{router:i}=Rb("useSubmit"),{basename:e}=q.useContext(pr),t=mC();return q.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=RC(r,e);if(a.navigate===!1){let _=a.fetcherKey||GC();await i.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function QC(i,{relative:e}={}){let{basename:t}=q.useContext(pr),r=q.useContext(Qr);ht(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...$u(i||".",{relative:e})},c=As();if(i==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();l.search=_?`?${_}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:yi([t,l.pathname])),Cu(l)}function YC(i,{relative:e}={}){let t=q.useContext(gb);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Rb("useViewTransitionState"),a=$u(i,{relative:e});if(!t.isTransitioning)return!1;let l=vi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=vi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ud(a.pathname,c)!=null||ud(a.pathname,l)!=null}const JC=q.createContext(null),fg={didCatch:!1,error:null};class WC extends q.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=fg}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:l,reason:"imperative-api"}),this.setState(fg)}}componentDidCatch(e,t){var r,a;(r=(a=this.props).onError)===null||r===void 0||r.call(a,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:a}=this.props;if(r&&t.error!==null&&XC(e.resetKeys,a)){var l,c;(l=(c=this.props).onReset)===null||l===void 0||l.call(c,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(fg)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:a}=this.props,{didCatch:l,error:c}=this.state;let d=e;if(l){const m={error:c,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")d=t(m);else if(r)d=q.createElement(r,m);else if(a!==void 0)d=a;else throw c}return q.createElement(JC.Provider,{value:{didCatch:l,error:c,resetErrorBoundary:this.resetErrorBoundary}},d)}}function XC(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i.length!==e.length||i.some((t,r)=>!Object.is(t,e[r]))}const ZC=()=>{};var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},eI=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],d=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,d=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,T=g&63;m||(T=64,c||(b=64)),r.push(t[_],t[E],t[b],t[T])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Cb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):eI(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const E=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new tI;const b=l<<2|d>>4;if(r.push(b),g!==64){const T=d<<4&240|g>>2;if(r.push(T),E!==64){const N=g<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nI=function(i){const e=Cb(i);return Ib.encodeByteArray(e,!0)},cd=function(i){return nI(i).replace(/\./g,"")},Ob=function(i){try{return Ib.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=()=>rI().__FIREBASE_DEFAULTS__,sI=()=>{if(typeof process>"u"||typeof u0>"u")return;const i=u0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aI=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ob(i[1]);return e&&JSON.parse(e)},Ud=()=>{try{return ZC()||iI()||sI()||aI()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Nb=i=>Ud()?.emulatorHosts?.[i],oI=i=>{const e=Nb(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Db=()=>Ud()?.config,kb=i=>Ud()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lI=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[cd(JSON.stringify(t)),cd(JSON.stringify(c)),""].join(".")}const _u={};function cI(){const i={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?i.emulator.push(e):i.prod.push(e);return i}function hI(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let c0=!1;function Pb(i,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||_u[i]===e||_u[i]||c0)return;_u[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=cI().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,T){b.setAttribute("width","24"),b.setAttribute("id",T),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{c0=!0,c()},b}function _(b,T){b.setAttribute("id",T),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=hI(r),T=t("text"),N=document.getElementById(T)||document.createElement("span"),P=t("learnmore"),A=document.getElementById(P)||document.createElement("a"),L=t("preprendIcon"),K=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),_(A,P);const W=g();m(K,L),G.append(K,N,A,W),document.body.appendChild(G)}l?(N.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function fI(){const i=Ud()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gI(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yI(){const i=cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function _I(){return!fI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vI(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="FirebaseError";class Si extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wI,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?bI(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Si(a,d,r)}}function bI(i,e){return i.replace(TI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const TI=/\{\$([^}]+)}/g;function SI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function pa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(h0(l)&&h0(c)){if(!pa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function h0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function du(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function AI(i,e){const t=new RI(i,e);return t.subscribe.bind(t)}class RI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=mg),a.error===void 0&&(a.error=mg),a.complete===void 0&&(a.complete=mg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(i){return i&&i._delegate?i._delegate:i}class ya{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NI(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OI(i){return i===la?void 0:i}function NI(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new II(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const kI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},xI=Ue.INFO,PI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},MI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=PI[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ip{constructor(e){this.name=e,this._logLevel=xI,this._logHandler=MI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const UI=(i,e)=>e.some(t=>i instanceof t);let d0,f0;function jI(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VI(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mb=new WeakMap,jg=new WeakMap,Ub=new WeakMap,gg=new WeakMap,Op=new WeakMap;function LI(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(fs(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Mb.set(t,i)}).catch(()=>{}),Op.set(e,i),e}function zI(i){if(jg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});jg.set(i,e)}let Vg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return jg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Ub.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function BI(i){Vg=i(Vg)}function qI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(pg(this),e,...t);return Ub.set(r,e.sort?e.sort():[e]),fs(r)}:VI().includes(i)?function(...e){return i.apply(pg(this),e),fs(Mb.get(this))}:function(...e){return fs(i.apply(pg(this),e))}}function HI(i){return typeof i=="function"?qI(i):(i instanceof IDBTransaction&&zI(i),UI(i,jI())?new Proxy(i,Vg):i)}function fs(i){if(i instanceof IDBRequest)return LI(i);if(gg.has(i))return gg.get(i);const e=HI(i);return e!==i&&(gg.set(i,e),Op.set(e,i)),e}const pg=i=>Op.get(i);function FI(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),d=fs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(fs(c.result),m.oldVersion,m.newVersion,fs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const $I=["get","getKey","getAll","getAllKeys","count"],GI=["put","add","delete","clear"],yg=new Map;function m0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(yg.get(e))return yg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=GI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||$I.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return yg.set(e,l),l}BI(i=>({...i,get:(e,t,r)=>m0(e,t)||i.get(e,t,r),has:(e,t)=>!!m0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function QI(i){return i.getComponent()?.type==="VERSION"}const Lg="@firebase/app",g0="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Ip("@firebase/app"),YI="@firebase/app-compat",JI="@firebase/analytics-compat",WI="@firebase/analytics",XI="@firebase/app-check-compat",ZI="@firebase/app-check",eO="@firebase/auth",tO="@firebase/auth-compat",nO="@firebase/database",rO="@firebase/data-connect",iO="@firebase/database-compat",sO="@firebase/functions",aO="@firebase/functions-compat",oO="@firebase/installations",lO="@firebase/installations-compat",uO="@firebase/messaging",cO="@firebase/messaging-compat",hO="@firebase/performance",dO="@firebase/performance-compat",fO="@firebase/remote-config",mO="@firebase/remote-config-compat",gO="@firebase/storage",pO="@firebase/storage-compat",yO="@firebase/firestore",_O="@firebase/ai",vO="@firebase/firestore-compat",EO="firebase",wO="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="[DEFAULT]",bO={[Lg]:"fire-core",[YI]:"fire-core-compat",[WI]:"fire-analytics",[JI]:"fire-analytics-compat",[ZI]:"fire-app-check",[XI]:"fire-app-check-compat",[eO]:"fire-auth",[tO]:"fire-auth-compat",[nO]:"fire-rtdb",[rO]:"fire-data-connect",[iO]:"fire-rtdb-compat",[sO]:"fire-fn",[aO]:"fire-fn-compat",[oO]:"fire-iid",[lO]:"fire-iid-compat",[uO]:"fire-fcm",[cO]:"fire-fcm-compat",[hO]:"fire-perf",[dO]:"fire-perf-compat",[fO]:"fire-rc",[mO]:"fire-rc-compat",[gO]:"fire-gcs",[pO]:"fire-gcs-compat",[yO]:"fire-fst",[vO]:"fire-fst-compat",[_O]:"fire-vertex","fire-js":"fire-js",[EO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,TO=new Map,Bg=new Map;function p0(i,e){try{i.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Mo(i){const e=i.name;if(Bg.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,i);for(const t of Iu.values())p0(t,i);for(const t of TO.values())p0(t,i);return!0}function Np(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function dr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Gu("app","Firebase",SO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=wO;function jb(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:zg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ms.create("bad-app-name",{appName:String(a)});if(t||(t=Db()),!t)throw ms.create("no-options");const l=Iu.get(a);if(l){if(pa(t,l.options)&&pa(r,l.config))return l;throw ms.create("duplicate-app",{appName:a})}const c=new DI(a);for(const m of Bg.values())c.addComponent(m);const d=new AO(t,r,c);return Iu.set(a,d),d}function Vb(i=zg){const e=Iu.get(i);if(!e&&i===zg&&Db())return jb();if(!e)throw ms.create("no-app",{appName:i});return e}function y0(){return Array.from(Iu.values())}function gs(i,e,t){let r=bO[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(c.join(" "));return}Mo(new ya(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebase-heartbeat-database",CO=1,Ou="firebase-heartbeat-store";let _g=null;function Lb(){return _g||(_g=FI(RO,CO,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(i=>{throw ms.create("idb-open",{originalErrorMessage:i.message})})),_g}async function IO(i){try{const t=(await Lb()).transaction(Ou),r=await t.objectStore(Ou).get(zb(i));return await t.done,r}catch(e){if(e instanceof Si)Ei.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function _0(i,e){try{const r=(await Lb()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,zb(i)),await r.done}catch(t){if(t instanceof Si)Ei.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(r.message)}}}function zb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=1024,NO=30;class DO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=v0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>NO){const a=PO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ei.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=v0(),{heartbeatsToSend:t,unsentEntries:r}=kO(this._heartbeatsCache.heartbeats),a=cd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ei.warn(e),""}}}function v0(){return new Date().toISOString().substring(0,10)}function kO(i,e=OO){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),E0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),E0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vI()?EI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function E0(i){return cd(JSON.stringify({version:2,heartbeats:i})).length}function PO(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(i){Mo(new ya("platform-logger",e=>new KI(e),"PRIVATE")),Mo(new ya("heartbeat",e=>new DO(e),"PRIVATE")),gs(Lg,g0,i),gs(Lg,g0,"esm2020"),gs("fire-js","")}MO("");var UO="firebase",jO="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(UO,jO,"app");function Bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VO=Bb,qb=new Gu("auth","Firebase",Bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Ip("@firebase/auth");function LO(i,...e){hd.logLevel<=Ue.WARN&&hd.warn(`Auth (${Qo}): ${i}`,...e)}function Xh(i,...e){hd.logLevel<=Ue.ERROR&&hd.error(`Auth (${Qo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(i,...e){throw Dp(i,...e)}function zr(i,...e){return Dp(i,...e)}function Hb(i,e,t){const r={...VO(),[e]:t};return new Gu("auth","Firebase",r).create(e,{appName:i.name})}function ps(i){return Hb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return qb.create(i,...e)}function we(i,e,...t){if(!i)throw Dp(e,...t)}function gi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Xh(e),new Error(e)}function wi(i,e){i||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(){return typeof self<"u"&&self.location?.href||""}function zO(){return w0()==="http:"||w0()==="https:"}function w0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zO()||gI()||"connection"in navigator)?navigator.onLine:!0}function qO(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,wi(t>e,"Short delay should be less than long delay!"),this.isMobile=dI()||pI()}get(){return BO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i,e){wi(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$O=new Qu(3e4,6e4);function ba(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Rs(i,e,t,r,a={}){return $b(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Ku({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return mI()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Ko(i.emulatorConfig.host)&&(g.credentials="include"),Fb.fetch()(await Gb(i,i.config.apiHost,t,d),g)})}async function $b(i,e,t){i._canInitEmulator=!1;const r={...HO,...e};try{const a=new KO(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ph(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Ph(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Ph(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Hb(i,_,g);gr(i,_)}}catch(a){if(a instanceof Si)throw a;gr(i,"network-request-failed",{message:String(a)})}}async function jd(i,e,t,r,a={}){const l=await Rs(i,e,t,r,a);return"mfaPendingCredential"in l&&gr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function Gb(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?kp(i.config,a):`${i.config.apiScheme}://${a}`;return FO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function GO(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),$O.get())})}}function Ph(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=zr(i,e,r);return a.customData._tokenResponse=t,a}function b0(i){return i!==void 0&&i.enterprise!==void 0}class QO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YO(i,e){return Rs(i,"GET","/v2/recaptchaConfig",ba(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(i,e){return Rs(i,"POST","/v1/accounts:delete",e)}async function dd(i,e){return Rs(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WO(i,e=!1){const t=Jn(i),r=await t.getIdToken(e),a=xp(r);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:vu(vg(a.auth_time)),issuedAtTime:vu(vg(a.iat)),expirationTime:vu(vg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function vg(i){return Number(i)*1e3}function xp(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ob(t);return a?JSON.parse(a):(Xh("Failed to decode base64 JWT payload"),null)}catch(a){return Xh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function T0(i){const e=xp(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Si&&XO(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function XO({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(i){const e=i.auth,t=await i.getIdToken(),r=await Nu(i,dd(e,{idToken:t}));we(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?Kb(a.providerUserInfo):[],c=tN(i.providerData,l),d=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!c?.length,g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function eN(i){const e=Jn(i);await fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tN(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function Kb(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(i,e){const t=await $b(i,{},async()=>{const r=Ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await Gb(i,a,"/v1/token",`key=${l}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return i.emulatorConfig&&Ko(i.emulatorConfig.host)&&(m.credentials="include"),Fb.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rN(i,e){return Rs(i,"POST","/v2/accounts:revokeToken",ba(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=T0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await nN(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new No;return r&&(we(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(we(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new ZO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Nu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WO(this,e)}reload(){return eN(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Nu(this,JO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:T,providerData:N,stsTokenManager:P}=t;we(E&&P,e,"internal-error");const A=No.fromJSON(this.name,P);we(typeof E=="string",e,"internal-error"),is(r,e.name),is(a,e.name),we(typeof b=="boolean",e,"internal-error"),we(typeof T=="boolean",e,"internal-error"),is(l,e.name),is(c,e.name),is(d,e.name),is(m,e.name),is(g,e.name),is(_,e.name);const L=new fr({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:T,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:A,createdAt:g,lastLoginAt:_});return N&&Array.isArray(N)&&(L.providerData=N.map(K=>({...K}))),m&&(L._redirectEventId=m),L}static async _fromIdTokenResponse(e,t,r=!1){const a=new No;a.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await fd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Kb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new No;d.updateFromIdToken(r);const m=new fr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function pi(i){wi(i instanceof Function,"Expected a class definition");let e=S0.get(i);return e?(wi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,S0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qb.type="NONE";const A0=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i,e,t){return`firebase:${i}:${e}:${t}`}class Do{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Zh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Zh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dd(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Do(pi(A0),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||pi(A0);const c=Zh(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await dd(e,{idToken:_}).catch(()=>{});if(!b)break;E=await fr._fromGetAccountInfoResponse(e,b,_)}else E=fr._fromJSON(e,_);g!==l&&(d=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Do(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Do(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eT(e))return"Blackberry";if(tT(e))return"Webos";if(Jb(e))return"Safari";if((e.includes("chrome/")||Wb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function Yb(i=cn()){return/firefox\//i.test(i)}function Jb(i=cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wb(i=cn()){return/crios\//i.test(i)}function Xb(i=cn()){return/iemobile/i.test(i)}function Zb(i=cn()){return/android/i.test(i)}function eT(i=cn()){return/blackberry/i.test(i)}function tT(i=cn()){return/webos/i.test(i)}function Pp(i=cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function iN(i=cn()){return Pp(i)&&!!window.navigator?.standalone}function sN(){return yI()&&document.documentMode===10}function nT(i=cn()){return Pp(i)||Zb(i)||tT(i)||eT(i)||/windows phone/i.test(i)||Xb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(i,e=[]){let t;switch(i){case"Browser":t=R0(cn());break;case"Worker":t=`${R0(cn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(i,e={}){return Rs(i,"GET","/v2/passwordPolicy",ba(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=6;class uN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new aN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dd(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(ps(this));const t=e?Jn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oN(this),t=new uN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await rN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yo(i){return Jn(i)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=AI(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hN(i){Vd=i}function iT(i){return Vd.loadJS(i)}function dN(){return Vd.recaptchaEnterpriseScript}function fN(){return Vd.gapiScript}function mN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class gN{constructor(){this.enterprise=new pN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yN="recaptcha-enterprise",sT="NO_RECAPTCHA";class _N{constructor(e){this.type=yN,this.auth=Yo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{YO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new QO(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;b0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(sT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&b0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=dN();m.length!==0&&(m+=d),iT(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function I0(i,e,t,r=!1,a=!1){const l=new _N(i);let c;if(a)c=sT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function O0(i,e,t,r,a){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await I0(i,e,t,t==="getOobCode");return r(i,l)}else return r(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await I0(i,e,t,t==="getOobCode");return r(i,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(i,e){const t=Np(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(pa(l,e??{}))return a;gr(a,"already-initialized")}return t.initialize({options:e})}function EN(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function wN(i,e,t){const r=Yo(i);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=aT(e),{host:c,port:d}=bN(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(pa(g,r.config.emulator)&&pa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Ko(c)?(xb(`${l}//${c}${m}`),Pb("Auth",!0)):TN()}function aT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function bN(i){const e=aT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:N0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:N0(c)}}}function N0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function TN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function SN(i,e){return Rs(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(i,e){return jd(i,"POST","/v1/accounts:signInWithPassword",ba(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(i,e){return jd(i,"POST","/v1/accounts:signInWithEmailLink",ba(i,e))}async function CN(i,e){return jd(i,"POST","/v1/accounts:signInWithEmailLink",ba(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Mp{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Du(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Du(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,t,"signInWithPassword",AN);case"emailLink":return RN(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,r,"signUpPassword",SN);case"emailLink":return CN(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(i,e){return jd(i,"POST","/v1/accounts:signInWithIdp",ba(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="http://localhost";class _a extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new _a(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:IN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ku(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NN(i){const e=hu(du(i)).link,t=e?hu(du(e)).deep_link_id:null,r=hu(du(i)).deep_link_id;return(r?hu(du(r)).link:null)||r||t||e||i}class Up{constructor(e){const t=hu(du(e)),r=t.apiKey??null,a=t.oobCode??null,l=ON(t.mode??null);we(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=NN(e);try{return new Up(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.providerId=Jo.PROVIDER_ID}static credential(e,t){return Du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Up.parseLink(t);return we(r,"argument-error"),Du._fromEmailAndCode(e,r.code,r.tenantId)}}Jo.PROVIDER_ID="password";Jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends oT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Yu{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _a._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ls.credential(t,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Yu{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Yu{constructor(){super("twitter.com")}static credential(e,t){return _a._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await fr._fromIdTokenResponse(e,r,a),c=D0(r);return new Uo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=D0(r);return new Uo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function D0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Si{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,md.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new md(e,t,r,a)}}function lT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?md._fromErrorAndOperation(i,l,e,r):l})}async function DN(i,e,t=!1){const r=await Nu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Uo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(i,e,t=!1){const{auth:r}=i;if(dr(r.app))return Promise.reject(ps(r));const a="reauthenticate";try{const l=await Nu(i,lT(r,a,e,i),t);we(l.idToken,r,"internal-error");const c=xp(l.idToken);we(c,r,"internal-error");const{sub:d}=c;return we(i.uid===d,r,"user-mismatch"),Uo._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&gr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(i,e,t=!1){if(dr(i.app))return Promise.reject(ps(i));const r="signIn",a=await lT(i,r,e),l=await Uo._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function xN(i,e){return uT(Yo(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(i){const e=Yo(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function MN(i,e,t){return dr(i.app)?Promise.reject(ps(i)):xN(Jn(i),Jo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&PN(i),r})}function UN(i,e,t,r){return Jn(i).onIdTokenChanged(e,t,r)}function jN(i,e,t){return Jn(i).beforeAuthStateChanged(e,t)}function VN(i,e,t,r){return Jn(i).onAuthStateChanged(e,t,r)}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=1e3,zN=10;class hT extends cT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);sN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,zN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hT.type="LOCAL";const BN=hT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT extends cT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dT.type="SESSION";const fT=dT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await qN(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=jp("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function FN(i){Br().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function $N(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GN(){return navigator?.serviceWorker?.controller||null}function KN(){return mT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firebaseLocalStorageDb",QN=1,pd="firebaseLocalStorage",pT="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zd(i,e){return i.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function YN(){const i=indexedDB.deleteDatabase(gT);return new Ju(i).toPromise()}function Fg(){const i=indexedDB.open(gT,QN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(pd,{keyPath:pT})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(pd)?e(r):(r.close(),await YN(),e(await Fg()))})})}async function k0(i,e,t){const r=zd(i,!0).put({[pT]:e,value:t});return new Ju(r).toPromise()}async function JN(i,e){const t=zd(i,!1).get(e),r=await new Ju(t).toPromise();return r===void 0?null:r.value}function x0(i,e){const t=zd(i,!0).delete(e);return new Ju(t).toPromise()}const WN=800,XN=3;class yT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>XN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(KN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $N(),!this.activeServiceWorker)return;this.sender=new HN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fg();return await k0(e,gd,"1"),await x0(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>k0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>JN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>x0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=zd(a,!1).getAll();return new Ju(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yT.type="LOCAL";const ZN=yT;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(i,e){return e?pi(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tD(i){return uT(i.auth,new Vp(i),i.bypassAuthState)}function nD(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),kN(t,new Vp(i),i.bypassAuthState)}async function rD(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),DN(t,new Vp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tD;case"linkViaPopup":case"linkViaRedirect":return rD;case"reauthViaPopup":case"reauthViaRedirect":return nD;default:gr(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Qu(2e3,1e4);class Oo extends _T{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iD.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="pendingRedirect",ed=new Map;class aD extends _T{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const r=await oD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oD(i,e){const t=cD(e),r=uD(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function lD(i,e){ed.set(i._key(),e)}function uD(i){return pi(i._redirectPersistence)}function cD(i){return Zh(sD,i.config.apiKey,i.name)}async function hD(i,e,t=!1){if(dr(i.app))return Promise.reject(ps(i));const r=Yo(i),a=eD(r,e),c=await new aD(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=600*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(zr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dD&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function vT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function mD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(i,e={}){return Rs(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yD=/^https?/;async function _D(i){if(i.config.emulator)return;const{authorizedDomains:e}=await gD(i);for(const t of e)try{if(vD(t))return}catch{}gr(i,"unauthorized-domain")}function vD(i){const e=qg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!yD.test(t))return!1;if(pD.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Qu(3e4,6e4);function M0(){const i=Br().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function wD(i){return new Promise((e,t)=>{function r(){M0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M0(),t(zr(i,"network-request-failed"))},timeout:ED.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)r();else{const a=mN("iframefcb");return Br()[a]=()=>{gapi.load?r():t(zr(i,"network-request-failed"))},iT(`${fN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw td=null,e})}let td=null;function bD(i){return td=td||wD(i),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Qu(5e3,15e3),SD="__/auth/iframe",AD="emulator/auth/iframe",RD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ID(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?kp(e,AD):`https://${i.config.authDomain}/${SD}`,r={apiKey:e.apiKey,appName:i.name,v:Qo},a=CD.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ku(r).slice(1)}`}async function OD(i){const e=await bD(i),t=Br().gapi;return we(t,i,"internal-error"),e.open({where:document.body,url:ID(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RD,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=zr(i,"network-request-failed"),d=Br().setTimeout(()=>{l(c)},TD.get());function m(){Br().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DD=500,kD=600,xD="_blank",PD="http://localhost";class U0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MD(i,e,t,r=DD,a=kD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...ND,width:r.toString(),height:a.toString(),top:l,left:c},g=cn().toLowerCase();t&&(d=Wb(g)?xD:t),Yb(g)&&(e=e||PD,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[T,N])=>`${b}${T}=${N},`,"");if(iN(g)&&d!=="_self")return UD(e||"",d),new U0(null);const E=window.open(e||"",d,_);we(E,i,"popup-blocked");try{E.focus()}catch{}return new U0(E)}function UD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="__/auth/handler",VD="emulator/auth/handler",LD=encodeURIComponent("fac");async function j0(i,e,t,r,a,l){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Qo,eventId:a};if(e instanceof oT){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",SI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Yu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await i._getAppCheckToken(),g=m?`#${LD}=${encodeURIComponent(m)}`:"";return`${zD(i)}?${Ku(d).slice(1)}${g}`}function zD({config:i}){return i.emulator?kp(i,VD):`https://${i.authDomain}/${jD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class BD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fT,this._completeRedirectFn=hD,this._overrideRedirectResult=lD}async _openPopup(e,t,r,a){wi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await j0(e,t,r,qg(),a);return MD(e,l,jp())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await j0(e,t,r,qg(),a);return FN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OD(e),r=new fD(e);return t.register("authEvent",a=>(we(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},a=>{const l=a?.[0]?.[Eg];l!==void 0&&t(!!l),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_D(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nT()||Jb()||Pp()}}const qD=BD;var V0="@firebase/auth",L0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $D(i){Mo(new ya("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rT(i)},g=new cN(r,a,l,m);return EN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mo(new ya("auth-internal",e=>{const t=Yo(e.getProvider("auth").getImmediate());return(r=>new HD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(V0,L0,FD(i)),gs(V0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=300,KD=kb("authIdTokenMaxAge")||GD;let z0=null;const QD=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KD)return;const a=t?.token;z0!==a&&(z0=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function YD(i=Vb()){const e=Np(i,"auth");if(e.isInitialized())return e.getImmediate();const t=vN(i,{popupRedirectResolver:qD,persistence:[ZN,BN,fT]}),r=kb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=QD(l.toString());jN(t,c,()=>c(t.currentUser)),UN(t,d=>c(d))}}const a=Nb("auth");return a&&wN(t,`http://${a}`),t}function JD(){return document.getElementsByTagName("head")?.[0]??document}hN({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=zr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",JD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$D("Browser");var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,ET;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function O(){}O.prototype=C.prototype,I.F=C.prototype,I.prototype=new O,I.prototype.constructor=I,I.D=function(U,M,B){for(var D=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)D[ot-2]=arguments[ot];return C.prototype[M].apply(U,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,C,O){O||(O=0);const U=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)U[M]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(M=0;M<16;++M)U[M]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=I.g[0],O=I.g[1],M=I.g[2];let B=I.g[3],D;D=C+(B^O&(M^B))+U[0]+3614090360&4294967295,C=O+(D<<7&4294967295|D>>>25),D=B+(M^C&(O^M))+U[1]+3905402710&4294967295,B=C+(D<<12&4294967295|D>>>20),D=M+(O^B&(C^O))+U[2]+606105819&4294967295,M=B+(D<<17&4294967295|D>>>15),D=O+(C^M&(B^C))+U[3]+3250441966&4294967295,O=M+(D<<22&4294967295|D>>>10),D=C+(B^O&(M^B))+U[4]+4118548399&4294967295,C=O+(D<<7&4294967295|D>>>25),D=B+(M^C&(O^M))+U[5]+1200080426&4294967295,B=C+(D<<12&4294967295|D>>>20),D=M+(O^B&(C^O))+U[6]+2821735955&4294967295,M=B+(D<<17&4294967295|D>>>15),D=O+(C^M&(B^C))+U[7]+4249261313&4294967295,O=M+(D<<22&4294967295|D>>>10),D=C+(B^O&(M^B))+U[8]+1770035416&4294967295,C=O+(D<<7&4294967295|D>>>25),D=B+(M^C&(O^M))+U[9]+2336552879&4294967295,B=C+(D<<12&4294967295|D>>>20),D=M+(O^B&(C^O))+U[10]+4294925233&4294967295,M=B+(D<<17&4294967295|D>>>15),D=O+(C^M&(B^C))+U[11]+2304563134&4294967295,O=M+(D<<22&4294967295|D>>>10),D=C+(B^O&(M^B))+U[12]+1804603682&4294967295,C=O+(D<<7&4294967295|D>>>25),D=B+(M^C&(O^M))+U[13]+4254626195&4294967295,B=C+(D<<12&4294967295|D>>>20),D=M+(O^B&(C^O))+U[14]+2792965006&4294967295,M=B+(D<<17&4294967295|D>>>15),D=O+(C^M&(B^C))+U[15]+1236535329&4294967295,O=M+(D<<22&4294967295|D>>>10),D=C+(M^B&(O^M))+U[1]+4129170786&4294967295,C=O+(D<<5&4294967295|D>>>27),D=B+(O^M&(C^O))+U[6]+3225465664&4294967295,B=C+(D<<9&4294967295|D>>>23),D=M+(C^O&(B^C))+U[11]+643717713&4294967295,M=B+(D<<14&4294967295|D>>>18),D=O+(B^C&(M^B))+U[0]+3921069994&4294967295,O=M+(D<<20&4294967295|D>>>12),D=C+(M^B&(O^M))+U[5]+3593408605&4294967295,C=O+(D<<5&4294967295|D>>>27),D=B+(O^M&(C^O))+U[10]+38016083&4294967295,B=C+(D<<9&4294967295|D>>>23),D=M+(C^O&(B^C))+U[15]+3634488961&4294967295,M=B+(D<<14&4294967295|D>>>18),D=O+(B^C&(M^B))+U[4]+3889429448&4294967295,O=M+(D<<20&4294967295|D>>>12),D=C+(M^B&(O^M))+U[9]+568446438&4294967295,C=O+(D<<5&4294967295|D>>>27),D=B+(O^M&(C^O))+U[14]+3275163606&4294967295,B=C+(D<<9&4294967295|D>>>23),D=M+(C^O&(B^C))+U[3]+4107603335&4294967295,M=B+(D<<14&4294967295|D>>>18),D=O+(B^C&(M^B))+U[8]+1163531501&4294967295,O=M+(D<<20&4294967295|D>>>12),D=C+(M^B&(O^M))+U[13]+2850285829&4294967295,C=O+(D<<5&4294967295|D>>>27),D=B+(O^M&(C^O))+U[2]+4243563512&4294967295,B=C+(D<<9&4294967295|D>>>23),D=M+(C^O&(B^C))+U[7]+1735328473&4294967295,M=B+(D<<14&4294967295|D>>>18),D=O+(B^C&(M^B))+U[12]+2368359562&4294967295,O=M+(D<<20&4294967295|D>>>12),D=C+(O^M^B)+U[5]+4294588738&4294967295,C=O+(D<<4&4294967295|D>>>28),D=B+(C^O^M)+U[8]+2272392833&4294967295,B=C+(D<<11&4294967295|D>>>21),D=M+(B^C^O)+U[11]+1839030562&4294967295,M=B+(D<<16&4294967295|D>>>16),D=O+(M^B^C)+U[14]+4259657740&4294967295,O=M+(D<<23&4294967295|D>>>9),D=C+(O^M^B)+U[1]+2763975236&4294967295,C=O+(D<<4&4294967295|D>>>28),D=B+(C^O^M)+U[4]+1272893353&4294967295,B=C+(D<<11&4294967295|D>>>21),D=M+(B^C^O)+U[7]+4139469664&4294967295,M=B+(D<<16&4294967295|D>>>16),D=O+(M^B^C)+U[10]+3200236656&4294967295,O=M+(D<<23&4294967295|D>>>9),D=C+(O^M^B)+U[13]+681279174&4294967295,C=O+(D<<4&4294967295|D>>>28),D=B+(C^O^M)+U[0]+3936430074&4294967295,B=C+(D<<11&4294967295|D>>>21),D=M+(B^C^O)+U[3]+3572445317&4294967295,M=B+(D<<16&4294967295|D>>>16),D=O+(M^B^C)+U[6]+76029189&4294967295,O=M+(D<<23&4294967295|D>>>9),D=C+(O^M^B)+U[9]+3654602809&4294967295,C=O+(D<<4&4294967295|D>>>28),D=B+(C^O^M)+U[12]+3873151461&4294967295,B=C+(D<<11&4294967295|D>>>21),D=M+(B^C^O)+U[15]+530742520&4294967295,M=B+(D<<16&4294967295|D>>>16),D=O+(M^B^C)+U[2]+3299628645&4294967295,O=M+(D<<23&4294967295|D>>>9),D=C+(M^(O|~B))+U[0]+4096336452&4294967295,C=O+(D<<6&4294967295|D>>>26),D=B+(O^(C|~M))+U[7]+1126891415&4294967295,B=C+(D<<10&4294967295|D>>>22),D=M+(C^(B|~O))+U[14]+2878612391&4294967295,M=B+(D<<15&4294967295|D>>>17),D=O+(B^(M|~C))+U[5]+4237533241&4294967295,O=M+(D<<21&4294967295|D>>>11),D=C+(M^(O|~B))+U[12]+1700485571&4294967295,C=O+(D<<6&4294967295|D>>>26),D=B+(O^(C|~M))+U[3]+2399980690&4294967295,B=C+(D<<10&4294967295|D>>>22),D=M+(C^(B|~O))+U[10]+4293915773&4294967295,M=B+(D<<15&4294967295|D>>>17),D=O+(B^(M|~C))+U[1]+2240044497&4294967295,O=M+(D<<21&4294967295|D>>>11),D=C+(M^(O|~B))+U[8]+1873313359&4294967295,C=O+(D<<6&4294967295|D>>>26),D=B+(O^(C|~M))+U[15]+4264355552&4294967295,B=C+(D<<10&4294967295|D>>>22),D=M+(C^(B|~O))+U[6]+2734768916&4294967295,M=B+(D<<15&4294967295|D>>>17),D=O+(B^(M|~C))+U[13]+1309151649&4294967295,O=M+(D<<21&4294967295|D>>>11),D=C+(M^(O|~B))+U[4]+4149444226&4294967295,C=O+(D<<6&4294967295|D>>>26),D=B+(O^(C|~M))+U[11]+3174756917&4294967295,B=C+(D<<10&4294967295|D>>>22),D=M+(C^(B|~O))+U[2]+718787259&4294967295,M=B+(D<<15&4294967295|D>>>17),D=O+(B^(M|~C))+U[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const O=C-this.blockSize,U=this.C;let M=this.h,B=0;for(;B<C;){if(M==0)for(;B<=O;)a(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<C;)if(U[M++]=I.charCodeAt(B++),M==this.blockSize){a(this,U),M=0;break}}else for(;B<C;)if(U[M++]=I[B++],M==this.blockSize){a(this,U),M=0;break}}this.h=M,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var O=I.length-8;O<I.length;++O)I[O]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)I[C++]=this.g[O]>>>U&255;return I};function l(I,C){var O=d;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=C(I)}function c(I,C){this.h=C;const O=[];let U=!0;for(let M=I.length-1;M>=0;M--){const B=I[M]|0;U&&B==C||(O[M]=B,U=!1)}this.g=O}var d={};function m(I){return-128<=I&&I<128?l(I,function(C){return new c([C|0],C<0?-1:0)}):new c([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return A(g(-I));const C=[];let O=1;for(let U=0;I>=O;U++)C[U]=I/O|0,O*=4294967296;return new c(C,0)}function _(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return A(_(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=g(Math.pow(C,8));let U=E;for(let B=0;B<I.length;B+=8){var M=Math.min(8,I.length-B);const D=parseInt(I.substring(B,B+M),C);M<8?(M=g(Math.pow(C,M)),U=U.j(M).add(g(D))):(U=U.j(O),U=U.add(g(D)))}return U}var E=m(0),b=m(1),T=m(16777216);i=c.prototype,i.m=function(){if(P(this))return-A(this).m();let I=0,C=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);I+=(U>=0?U:4294967296+U)*C,C*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(P(this))return"-"+A(this).toString(I);const C=g(Math.pow(I,6));var O=this;let U="";for(;;){const M=W(O,C).g;O=L(O,M.j(C));let B=((O.g.length>0?O.g[0]:O.h)>>>0).toString(I);if(O=M,N(O))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function P(I){return I.h==-1}i.l=function(I){return I=L(this,I),P(I)?-1:N(I)?0:1};function A(I){const C=I.g.length,O=[];for(let U=0;U<C;U++)O[U]=~I.g[U];return new c(O,~I.h).add(b)}i.abs=function(){return P(this)?A(this):this},i.add=function(I){const C=Math.max(this.g.length,I.g.length),O=[];let U=0;for(let M=0;M<=C;M++){let B=U+(this.i(M)&65535)+(I.i(M)&65535),D=(B>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);U=D>>>16,B&=65535,D&=65535,O[M]=D<<16|B}return new c(O,O[O.length-1]&-2147483648?-1:0)};function L(I,C){return I.add(A(C))}i.j=function(I){if(N(this)||N(I))return E;if(P(this))return P(I)?A(this).j(A(I)):A(A(this).j(I));if(P(I))return A(this.j(A(I)));if(this.l(T)<0&&I.l(T)<0)return g(this.m()*I.m());const C=this.g.length+I.g.length,O=[];for(var U=0;U<2*C;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<I.g.length;M++){const B=this.i(U)>>>16,D=this.i(U)&65535,ot=I.i(M)>>>16,Mt=I.i(M)&65535;O[2*U+2*M]+=D*Mt,K(O,2*U+2*M),O[2*U+2*M+1]+=B*Mt,K(O,2*U+2*M+1),O[2*U+2*M+1]+=D*ot,K(O,2*U+2*M+1),O[2*U+2*M+2]+=B*ot,K(O,2*U+2*M+2)}for(I=0;I<C;I++)O[I]=O[2*I+1]<<16|O[2*I];for(I=C;I<2*C;I++)O[I]=0;return new c(O,0)};function K(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function G(I,C){this.g=I,this.h=C}function W(I,C){if(N(C))throw Error("division by zero");if(N(I))return new G(E,E);if(P(I))return C=W(A(I),C),new G(A(C.g),A(C.h));if(P(C))return C=W(I,A(C)),new G(A(C.g),C.h);if(I.g.length>30){if(P(I)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var O=b,U=C;U.l(I)<=0;)O=se(O),U=se(U);var M=ue(O,1),B=ue(U,1);for(U=ue(U,2),O=ue(O,2);!N(U);){var D=B.add(U);D.l(I)<=0&&(M=M.add(O),B=D),U=ue(U,1),O=ue(O,1)}return C=L(I,M.j(C)),new G(M,C)}for(M=E;I.l(C)>=0;){for(O=Math.max(1,Math.floor(I.m()/C.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=g(O),D=B.j(C);P(D)||D.l(I)>0;)O-=U,B=g(O),D=B.j(C);N(B)&&(B=b),M=M.add(B),I=L(I,D)}return new G(M,I)}i.B=function(I){return W(this,I).h},i.and=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)&I.i(U);return new c(O,this.h&I.h)},i.or=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)|I.i(U);return new c(O,this.h|I.h)},i.xor=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)^I.i(U);return new c(O,this.h^I.h)};function se(I){const C=I.g.length+1,O=[];for(let U=0;U<C;U++)O[U]=I.i(U)<<1|I.i(U-1)>>>31;return new c(O,I.h)}function ue(I,C){const O=C>>5;C%=32;const U=I.g.length-O,M=[];for(let B=0;B<U;B++)M[B]=C>0?I.i(B+O)>>>C|I.i(B+O+1)<<32-C:I.i(B+O);return new c(M,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ET=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ys=c}).apply(typeof B0<"u"?B0:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wT,fu,bT,nd,$g,TT,ST,AT;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var w=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var H=h[R];if(!(H in w))break e;w=w[H]}h=h[h.length-1],R=w[h],y=y(R),y!=R&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&w.push([R,y[R]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,w){return h.call.apply(h.bind,arguments)}function g(h,y,w){return g=m,g.apply(null,arguments)}function _(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(R,H,Y){for(var ae=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ae[Ie-2]=arguments[Ie];return y.prototype[H].apply(R,ae)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const y=h.length;if(y>0){const w=Array(y);for(let R=0;R<y;R++)w[R]=h[R];return w}return[]}function N(h,y){for(let R=1;R<arguments.length;R++){const H=arguments[R];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=h.length||0;const Y=H.length||0;h.length=w+Y;for(let ae=0;ae<Y;ae++)h[w+ae]=H[ae]}else h.push(H)}}class P{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function A(h){c.setTimeout(()=>{throw h},0)}function L(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,w){const R=G.get();R.set(y,w),this.h?this.h.next=R:this.g=R,this.h=R}}var G=new P(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ue=!1,I=new K,C=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(O)}};function O(){for(var h;h=L();){try{h.h.call(h.g)}catch(w){A(w)}var y=G;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ue=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ot(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(ot,M),ot.prototype.init=function(h,y){const w=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ot.Z.h.call(this)},ot.prototype.h=function(){ot.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Mt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function oe(h,y,w,R,H){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!R,this.ha=H,this.key=++Z,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qe(h,y,w){for(const R in h)y.call(w,h[R],R,h)}function Qe(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function V(h){const y={};for(const w in h)y[w]=h[w];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let w,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(w in R)h[w]=R[w];for(let Y=0;Y<ne.length;Y++)w=ne[Y],Object.prototype.hasOwnProperty.call(R,w)&&(h[w]=R[w])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,y,w,R,H){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ae=Ne(h,y,R,H);return ae>-1?(y=h[ae],w||(y.fa=!1)):(y=new oe(y,this.src,Y,!!R,H),y.fa=w,h.push(y)),y};function Se(h,y){const w=y.type;if(w in h.g){var R=h.g[w],H=Array.prototype.indexOf.call(R,y,void 0),Y;(Y=H>=0)&&Array.prototype.splice.call(R,H,1),Y&&(_e(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ne(h,y,w,R){for(let H=0;H<h.length;++H){const Y=h[H];if(!Y.da&&Y.listener==y&&Y.capture==!!w&&Y.ha==R)return H}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Ut={};function lt(h,y,w,R,H){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)lt(h,y[Y],w,R,H);return null}return w=sl(w),h&&h[Mt]?h.J(y,w,d(R)?!!R.capture:!1,H):Is(h,y,w,!1,R,H)}function Is(h,y,w,R,H,Y){if(!y)throw Error("Invalid event type");const ae=d(H)?!!H.capture:!!H;let Ie=Os(h);if(Ie||(h[ze]=Ie=new he(h)),w=Ie.add(y,w,R,ae,Y),w.proxy)return w;if(R=Ca(),w.proxy=R,R.src=h,R.listener=w,h.addEventListener)B||(H=ae),H===void 0&&(H=!1),h.addEventListener(y.toString(),R,H);else if(h.attachEvent)h.attachEvent(yr(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ca(){function h(w){return y.call(h.src,h.listener,w)}const y=rl;return h}function Ia(h,y,w,R,H){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Ia(h,y[Y],w,R,H);else R=d(R)?!!R.capture:!!R,w=sl(w),h&&h[Mt]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],w=Ne(y,w,R,H),w>-1&&(_e(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Os(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ne(y,w,R,H)),(w=h>-1?y[h]:null)&&Oa(w))}function Oa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Mt])Se(y.i,h);else{var w=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(w,R,h.capture):y.detachEvent?y.detachEvent(yr(w),R):y.addListener&&y.removeListener&&y.removeListener(R),(w=Os(y))?(Se(w,h),w.h==0&&(w.src=null,y[ze]=null)):_e(h)}}}function yr(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function rl(h,y){if(h.da)h=!0;else{y=new ot(y,this);const w=h.listener,R=h.ha||h.src;h.fa&&Oa(h),h=w.call(R,y)}return h}function Os(h){return h=h[ze],h instanceof he?h:null}var il="__closure_events_fn_"+(Math.random()*1e9>>>0);function sl(h){return typeof h=="function"?h:(h[il]||(h[il]=function(y){return h.handleEvent(y)}),h[il])}function Tt(){U.call(this),this.i=new he(this),this.M=this,this.G=null}E(Tt,U),Tt.prototype[Mt]=!0,Tt.prototype.removeEventListener=function(h,y,w,R){Ia(this,h,y,w,R)};function jt(h,y){var w,R=h.G;if(R)for(w=[];R;R=R.G)w.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var H=y;y=new M(R,h),le(y,H)}H=!0;let Y,ae;if(w)for(ae=w.length-1;ae>=0;ae--)Y=y.g=w[ae],H=Ai(Y,R,!0,y)&&H;if(Y=y.g=h,H=Ai(Y,R,!0,y)&&H,H=Ai(Y,R,!1,y)&&H,w)for(ae=0;ae<w.length;ae++)Y=y.g=w[ae],H=Ai(Y,R,!1,y)&&H}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let R=0;R<w.length;R++)_e(w[R]);delete h.g[y],h.h--}}this.G=null},Tt.prototype.J=function(h,y,w,R){return this.i.add(String(h),y,!1,w,R)},Tt.prototype.K=function(h,y,w,R){return this.i.add(String(h),y,!0,w,R)};function Ai(h,y,w,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let Y=0;Y<y.length;++Y){const ae=y[Y];if(ae&&!ae.da&&ae.capture==w){const Ie=ae.listener,_t=ae.ha||ae.src;ae.fa&&Se(h.i,ae),H=Ie.call(_t,R)!==!1&&H}}return H&&!R.defaultPrevented}function of(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ic(h){h.g=of(()=>{h.g=null,h.i&&(h.i=!1,ic(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hn extends U{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ic(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){U.call(this),this.h=h,this.g={}}E(Ns,U);var al=[];function ol(h){qe(h.g,function(y,w){this.g.hasOwnProperty(w)&&Oa(y)},h),h.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),ol(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ri=c.JSON.stringify,lf=c.JSON.parse,sc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function ac(){}function oc(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){M.call(this,"d")}E(Kt,M);function xn(){M.call(this,"c")}E(xn,M);var yt={},lc=null;function Na(){return lc=lc||new Tt}yt.Ia="serverreachability";function uc(h){M.call(this,yt.Ia,h)}E(uc,M);function _r(h){const y=Na();jt(y,new uc(y))}yt.STAT_EVENT="statevent";function Ds(h,y){M.call(this,yt.STAT_EVENT,h),this.stat=y}E(Ds,M);function St(h){const y=Na();jt(y,new Ds(y,h))}yt.Ja="timingevent";function vr(h,y){M.call(this,yt.Ja,h),this.size=y}E(vr,M);function Er(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function uf(h,y,w,R,H,Y){h.info(function(){if(h.g)if(Y){var ae="",Ie=Y.split("&");for(let $e=0;$e<Ie.length;$e++){var _t=Ie[$e].split("=");if(_t.length>1){const ut=_t[0];_t=_t[1];const jn=ut.split("_");ae=jn.length>=2&&jn[1]=="type"?ae+(ut+"="+_t+"&"):ae+(ut+"=redacted&")}}}else ae=null;else ae=Y;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+y+`
`+w+`
`+ae})}function cc(h,y,w,R,H,Y,ae){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+y+`
`+w+`
`+Y+" "+ae})}function wr(h,y,w,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+cf(h,w)+(R?" "+R:"")})}function ks(h,y){h.info(function(){return"TIMEOUT: "+y})}Xn.prototype.info=function(){};function cf(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var w=Y[h];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<R.length;ae++)R[ae]=""}}}}return Ri(Y)}catch{return y}}var xs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ll={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ul;function Ps(){}E(Ps,ac),Ps.prototype.g=function(){return new XMLHttpRequest},ul=new Ps;function Yr(h){return encodeURIComponent(String(h))}function hc(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Zn(h,y,w,R){this.j=h,this.i=y,this.l=w,this.S=R||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new er}function er(){this.i=null,this.g="",this.h=!1}var At={},qt={};function br(h,y,w){h.M=1,h.A=Ms(Ct(y)),h.u=w,h.R=!0,Da(h,null)}function Da(h,y){h.F=Date.now(),Tr(h),h.B=Ct(h.A);var w=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Ma(w.i,"t",R),h.C=0,w=h.j.L,h.h=new er,h.g=Rc(h.j,w?y:null,!h.u),h.P>0&&(h.O=new hn(g(h.Y,h,h.g),h.P)),y=h.V,w=h.g,R=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(al[0]=H.toString()),H=al);for(let Y=0;Y<H.length;Y++){const ae=lt(w,H[Y],R||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),_r(),uf(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const y=this.O;y&&rr(h)==3?y.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=rr(this.g),_t=this.g.ya(),$e=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||_t==7||(_t==8||$e<=0?_r(3):_r(2)),Sr(this);var y=this.g.ca();this.X=y;var w=hf(this);if(this.o=y==200,cc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Y=R;break t}}Y=null}if(h=Y)wr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ar(this,h);else{this.o=!1,this.m=3,St(12),bn(this),Pn(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<w.length;)if(ut=fc(this,w),ut==qt){Ie==4&&(this.m=4,St(14),h=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==At){this.m=4,St(15),wr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else wr(this.i,this.l,ut,null),Ar(this,ut);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)wr(this.i,this.l,w,"[Invalid Chunked Response]"),bn(this),Pn(this);else if(w.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Sl(ae),ae.P=!0,St(11))}}else wr(this.i,this.l,w,null),Ar(this,w);Ie==4&&bn(this),this.o&&!this.K&&(Ie==4?bc(this.j,this):(this.o=!1,Tr(this)))}else Wr(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),bn(this),Pn(this)}}}catch{}finally{}};function hf(h){if(!dc(h))return h.g.la();const y=Qt(h.g);if(y==="")return"";let w="";const R=y.length,H=rr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<R;Y++)h.h.h=!0,w+=h.h.i.decode(y[Y],{stream:!(H&&Y==R-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function dc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function fc(h,y){var w=h.C,R=y.indexOf(`
`,w);return R==-1?qt:(w=Number(y.substring(w,R)),isNaN(w)?At:(R+=1,R+w>y.length?qt:(y=y.slice(R,R+w),h.C=R+w,y)))}Zn.prototype.cancel=function(){this.K=!0,bn(this)};function Tr(h){h.T=Date.now()+h.H,ka(h,h.H)}function ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Er(g(h.aa,h),y)}function Sr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ks(this.i,this.B),this.M!=2&&(_r(),St(17)),bn(this),this.m=2,Pn(this)):ka(this,this.T-h)};function Pn(h){h.j.I==0||h.K||bc(h.j,h)}function bn(h){Sr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,ol(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ar(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Cr(w.h,h))){if(!h.L&&Cr(w.h,h)&&w.I==3){try{var R=w.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)za(w),Pi(w);else break e;qs(w),St(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Er(g(w.Va,w),6e3));Rr(w.h)<=1&&w.ta&&(w.ta=void 0)}else xr(w,11)}else if((h.L||w.g==h)&&za(w),!D(y))for(H=w.Ba.g.parse(y),y=0;y<H.length;y++){let $e=H[y];const ut=$e[0];if(!(ut<=w.K))if(w.K=ut,$e=$e[1],w.I==2)if($e[0]=="c"){w.M=$e[1],w.ba=$e[2];const jn=$e[3];jn!=null&&(w.ka=jn,w.j.info("VER="+w.ka));const Pr=$e[4];Pr!=null&&(w.za=Pr,w.j.info("SVER="+w.za));const ir=$e[5];ir!=null&&typeof ir=="number"&&ir>0&&(R=1.5*ir,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const sr=h.g;if(sr){const Hs=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var Y=R.h;Y.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(dl(Y,Y.h),Y.h=null))}if(R.G){const Ba=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(R.wa=Ba,Ye(R.J,R.G,Ba))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var ae=h;if(R.na=Ac(R,R.L?R.ba:null,R.W),ae.L){fl(R.h,ae);var Ie=ae,_t=R.O;_t&&(Ie.H=_t),Ie.D&&(Sr(Ie),Tr(Ie)),R.g=ae}else Ec(R);w.i.length>0&&kr(w)}else $e[0]!="stop"&&$e[0]!="close"||xr(w,7);else w.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?xr(w,7):bl(w):$e[0]!="noop"&&w.l&&w.l.qa($e),w.A=0)}}_r(4)}catch{}}var Rt=class{constructor(h,y){this.g=h,this.map=y}};function cl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Rr(h){return h.h?1:h.g?h.g.size:0}function Cr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function dl(h,y){h.g?h.g.add(y):h.h=y}function fl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}cl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ml(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return T(h.i)}var mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const R=h[w].indexOf("=");let H,Y=null;R>=0?(H=h[w].substring(0,R),Y=h[w].substring(R+1)):H=h[w],y(H,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Tn?(this.l=h.l,Ht(this,h.j),this.o=h.o,this.g=h.g,Ci(this,h.u),this.h=h.h,gl(this,_c(h.i)),this.m=h.m):h&&(y=String(h).match(mc))?(this.l=!1,Ht(this,y[1]||"",!0),this.o=Ir(y[2]||""),this.g=Ir(y[3]||"",!0),Ci(this,y[4]),this.h=Ir(y[5]||"",!0),gl(this,y[6]||"",!0),this.m=Ir(y[7]||"")):(this.l=!1,this.i=new Oi(null,this.l))}Tn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Us(y,Pa,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Us(y,Pa,!0),"@"),h.push(Yr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Us(w,w.charAt(0)=="/"?pl:gc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Us(w,pc)),h.join("")},Tn.prototype.resolve=function(h){const y=Ct(this);let w=!!h.j;w?Ht(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var R=h.h;if(w)Ci(y,h.u);else if(w=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=y.h.lastIndexOf("/");H!=-1&&(R=y.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const Y=[];for(let ae=0;ae<H.length;){const Ie=H[ae++];Ie=="."?R&&ae==H.length&&Y.push(""):Ie==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&ae==H.length&&Y.push("")):(Y.push(Ie),R=!0)}R=Y.join("/")}else R=H}return w?y.h=R:w=h.i.toString()!=="",w?gl(y,_c(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Ct(h){return new Tn(h)}function Ht(h,y,w){h.j=w?Ir(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ci(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function gl(h,y,w){y instanceof Oi?(h.i=y,Ua(h.i,h.l)):(w||(y=Us(y,Ii)),h.i=new Oi(y,h.l))}function Ye(h,y,w){h.i.set(y,w)}function Ms(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ir(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Us(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,mn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pa=/[#\/\?@]/g,gc=/[#\?:]/g,pl=/[#\?]/g,Ii=/[#\?@]/g,pc=/#/g;function Oi(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&xa(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}i=Oi.prototype,i.add=function(h,y){gn(this),this.i=null,h=Ni(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function yc(h,y){gn(h),y=Ni(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function yl(h,y){return gn(h),y=Ni(h,y),h.g.has(y)}i.forEach=function(h,y){gn(this),this.g.forEach(function(w,R){w.forEach(function(H){h.call(y,H,R,this)},this)},this)};function _l(h,y){gn(h);let w=[];if(typeof y=="string")yl(h,y)&&(w=w.concat(h.g.get(Ni(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}i.set=function(h,y){return gn(this),this.i=null,h=Ni(this,h),yl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=_l(this,h),h.length>0?String(h[0]):y):y};function Ma(h,y,w){yc(h,y),w.length>0&&(h.i=null,h.g.set(Ni(h,y),T(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var w=y[R];const H=Yr(w);w=_l(this,w);for(let Y=0;Y<w.length;Y++){let ae=H;w[Y]!==""&&(ae+="="+Yr(w[Y])),h.push(ae)}}return this.i=h.join("&")};function _c(h){const y=new Oi;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ni(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ua(h,y){y&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(w,R){const H=R.toLowerCase();R!=H&&(yc(this,R),Ma(this,H,w))},h)),h.j=y}function tr(h,y){const w=new Xn;if(c.Image){const R=new Image;R.onload=_(Mn,w,"TestLoadImage: loaded",!0,y,R),R.onerror=_(Mn,w,"TestLoadImage: error",!1,y,R),R.onabort=_(Mn,w,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(Mn,w,"TestLoadImage: timeout",!1,y,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function vl(h,y){const w=new Xn,R=new AbortController,H=setTimeout(()=>{R.abort(),Mn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(Y=>{clearTimeout(H),Y.ok?Mn(w,"TestPingServer: ok",!0,y):Mn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Mn(w,"TestPingServer: error",!1,y)})}function Mn(h,y,w,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(w)}catch{}}function Di(){this.g=new sc}function Or(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Or,ac),Or.prototype.g=function(){return new js(this.i,this.h)};function js(h,y){Tt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(js,Tt),i=js.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,nr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ki(this):nr(this),this.readyState==3&&ja(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,ki(this))},i.Na=function(h){this.g&&(this.response=h,ki(this))},i.ga=function(){this.g&&ki(this)};function ki(h){h.readyState=4,h.l=null,h.j=null,h.B=null,nr(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let y="";return qe(h,function(w,R){y+=R,y+=":",y+=w,y+=`\r
`}),y}function Vs(h,y,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=Un(w),typeof h=="string"?w!=null&&Yr(w):Ye(h,y,w))}function Xe(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,Tt);var Nr=/^https?$/i,El=["POST","PUT"];i=Xe.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ul.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Ls(this,Y);return}if(h=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)w.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())w.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(El,y,void 0)>=0)||R||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ae]of w)this.g.setRequestHeader(Y,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Ls(this,Y)}};function Ls(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,wl(h),Jr(h)}function wl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),Jr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),Xe.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},i.Xa=function(){zs(this)};function zs(h){if(h.h&&typeof l<"u"){if(h.v&&rr(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),rr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var R;if(R=Y===0){let ae=String(h.D).match(mc)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),R=!Nr.test(ae?ae.toLowerCase():"")}w=R}if(w)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var H=rr(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",wl(h)}}finally{Jr(h)}}}}function Jr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||jt(h,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function rr(h){return h.g?h.g.readyState:0}i.ca=function(){try{return rr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),lf(y)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wr(h){const y={};h=(h.g&&rr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(D(h[R]))continue;var w=hc(h[R]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=y[H]||[];y[H]=Y,Y.push(w)}Qe(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function xi(h){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dr("baseRetryDelayMs",5e3,h),this.Za=Dr("retryDelaySeedMs",1e4,h),this.Ta=Dr("forwardChannelMaxRetries",2,h),this.va=Dr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new cl(h&&h.concurrentRequestLimit),this.Ba=new Di,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=xi.prototype,i.ka=8,i.I=1,i.connect=function(h,y,w,R){St(0),this.W=h,this.H=y||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=Ac(this,null,this.W),kr(this)};function bl(h){if(Va(h),h.I==3){var y=h.V++,w=Ct(h.J);if(Ye(w,"SID",h.M),Ye(w,"RID",y),Ye(w,"TYPE","terminate"),Bs(h,w),y=new Zn(h,h.j,y),y.M=2,y.A=Ms(Ct(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=Rc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Tr(y)}Sc(h)}function Pi(h){h.g&&(Sl(h),h.g.cancel(),h.g=null)}function Va(h){Pi(h),h.v&&(c.clearTimeout(h.v),h.v=null),za(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function kr(h){if(!hl(h.h)&&!h.m){h.m=!0;var y=h.Ea;se||C(),ue||(se(),ue=!0),I.add(y,h),h.D=0}}function La(h,y){return Rr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Er(g(h.Ea,h,y),Tc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Zn(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=V(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(H.J=Y,Y=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=vc(this,H,y),w=Ct(this.J),Ye(w,"RID",h),Ye(w,"CVER",22),this.G&&Ye(w,"X-HTTP-Session-Id",this.G),Bs(this,w),Y&&(this.R?y="headers="+Yr(Un(Y))+"&"+y:this.u&&Vs(w,this.u,Y)),dl(this.h,H),this.Ra&&Ye(w,"TYPE","init"),this.S?(Ye(w,"$req",y),Ye(w,"SID","null"),H.U=!0,br(H,w,null)):br(H,w,y),this.I=2}}else this.I==3&&(h?Tl(this,h):this.i.length==0||hl(this.h)||Tl(this))};function Tl(h,y){var w;y?w=y.l:w=h.V++;const R=Ct(h.J);Ye(R,"SID",h.M),Ye(R,"RID",w),Ye(R,"AID",h.K),Bs(h,R),h.u&&h.o&&Vs(R,h.u,h.o),w=new Zn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=vc(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),dl(h.h,w),br(w,R,y)}function Bs(h,y){h.H&&qe(h.H,function(w,R){Ye(y,R,w)}),h.l&&qe({},function(w,R){Ye(y,R,w)})}function vc(h,y,w){w=Math.min(h.i.length,w);const R=h.l?g(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ie=-1;for(;;){const _t=["count="+w];Ie==-1?w>0?(Ie=H[0].g,_t.push("ofs="+Ie)):Ie=0:_t.push("ofs="+Ie);let $e=!0;for(let ut=0;ut<w;ut++){var Y=H[ut].g;const jn=H[ut].map;if(Y-=Ie,Y<0)Ie=Math.max(0,H[ut].g-100),$e=!1;else try{Y="req"+Y+"_"||"";try{var ae=jn instanceof Map?jn:Object.entries(jn);for(const[Pr,ir]of ae){let sr=ir;d(ir)&&(sr=Ri(ir)),_t.push(Y+Pr+"="+encodeURIComponent(sr))}}catch(Pr){throw _t.push(Y+"type="+encodeURIComponent("_badmap")),Pr}}catch{R&&R(jn)}}if($e){ae=_t.join("&");break e}}ae=void 0}return h=h.i.splice(0,w),y.G=h,ae}function Ec(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;se||C(),ue||(se(),ue=!0),I.add(y,h),h.A=0}}function qs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Er(g(h.Da,h),Tc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Er(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Pi(this),wc(this))};function Sl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function wc(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);Ye(y,"RID","rpc"),Ye(y,"SID",h.M),Ye(y,"AID",h.K),Ye(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(y,"TO",h.ia),Ye(y,"TYPE","xmlhttp"),Bs(h,y),h.u&&h.o&&Vs(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ms(Ct(y)),w.u=null,w.R=!0,Da(w,h)}i.Va=function(){this.C!=null&&(this.C=null,Pi(this),qs(this),St(19))};function za(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function bc(h,y){var w=null;if(h.g==y){za(h),Sl(h),h.g=null;var R=2}else if(Cr(h.h,y))w=y.G,fl(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;R=Na(),jt(R,new vr(R,w)),kr(h)}else Ec(h);else if(H=y.m,H==3||H==0&&y.X>0||!(R==1&&La(h,y)||R==2&&qs(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),H){case 1:xr(h,5);break;case 4:xr(h,10);break;case 3:xr(h,6);break;default:xr(h,2)}}}function Tc(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function xr(h,y){if(h.j.info("Error code "+y),y==2){var w=g(h.bb,h),R=h.Ua;const H=!R;R=new Tn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(R,"https"),Ms(R),H?tr(R.toString(),w):vl(R.toString(),w)}else St(2);h.I=0,h.l&&h.l.pa(y),Sc(h),Va(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Sc(h){if(h.I=0,h.ja=[],h.l){const y=ml(h.h);(y.length!=0||h.i.length!=0)&&(N(h.ja,y),N(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Ac(h,y,w){var R=w instanceof Tn?Ct(w):new Tn(w);if(R.g!="")y&&(R.g=y+"."+R.g),Ci(R,R.u);else{var H=c.location;R=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const Y=new Tn(null);R&&Ht(Y,R),y&&(Y.g=y),H&&Ci(Y,H),w&&(Y.h=w),R=Y}return w=h.G,y=h.wa,w&&y&&Ye(R,w,y),Ye(R,"VER",h.ka),Bs(h,R),R}function Rc(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Xe(new Or({ab:w})):new Xe(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}i=Cc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Mi(){}Mi.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){Tt.call(this),this.g=new xi(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Xr(this)}E(dn,Tt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){bl(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Ri(h),h=w);y.i.push(new Rt(y.Ya++,h)),y.I==3&&kr(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,dn.Z.N.call(this)};function Ic(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Ic,Kt);function Oc(){xn.call(this),this.status=1}E(Oc,xn);function Xr(h){this.g=h}E(Xr,Cc),Xr.prototype.ra=function(){jt(this.g,"a")},Xr.prototype.qa=function(h){jt(this.g,new Ic(h))},Xr.prototype.pa=function(h){jt(this.g,new Oc)},Xr.prototype.oa=function(){jt(this.g,"b")},Mi.prototype.createWebChannel=Mi.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,AT=function(){return new Mi},ST=function(){return Na()},TT=yt,$g={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xs.NO_ERROR=0,xs.TIMEOUT=8,xs.HTTP_ERROR=6,nd=xs,ll.COMPLETE="complete",bT=ll,oc.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,fu=oc,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,wT=Xe}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",H0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new Ip("@firebase/firestore");function To(){return va.logLevel}function ce(i,...e){if(va.logLevel<=Ue.DEBUG){const t=e.map(Lp);va.debug(`Firestore (${Wo}): ${i}`,...t)}}function bi(i,...e){if(va.logLevel<=Ue.ERROR){const t=e.map(Lp);va.error(`Firestore (${Wo}): ${i}`,...t)}}function jo(i,...e){if(va.logLevel<=Ue.WARN){const t=e.map(Lp);va.warn(`Firestore (${Wo}): ${i}`,...t)}}function Lp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,RT(i,r,t)}function RT(i,e,t){let r=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bi(r),new Error(r)}function Ke(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||RT(e,a,r)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class XD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZD{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new CT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class ek{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ek(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class F0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new F0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=rk(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(i,e){return i<e?-1:i>e?1:0}function Gg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return wg(a)===wg(l)?je(a,l):wg(a)?1:-1}return je(i.length,e.length)}const ik=55296,sk=57343;function wg(i){const e=i.charCodeAt(0);return e>=ik&&e<=sk}function Vo(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="__name__";class Lr{constructor(e,t,r){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Lr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=Lr.isNumericId(e),a=Lr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):Gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class ft extends Lr{construct(e,t,r){return new ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const ak=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Lr{construct(e,t,r){return new tn(e,t,r)}static isValidIdentifier(e){return ak.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$0}static keyField(){return new tn([$0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ft.fromString(e))}static fromName(e){return new ve(ft.fromString(e).popFirst(5))}static empty(){return new ve(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(i,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function lk(i,e,t,r){if(e===!0&&r===!0)throw new ge(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function G0(i){if(!ve.isDocumentKey(i))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function IT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Bp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function ku(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bp(i);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Wu(i,e){if(!IT(i))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=-62135596800,Q0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Q0);return new at(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<K0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q0}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Pt("string",at._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new at(0,0))}static max(){return new Ae(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=-1;function uk(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(r===1e9?new at(t+1,0):new at(t,r));return new vs(a,ve.empty(),e)}function ck(i){return new vs(i.readTime,i.key,xu)}class vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new vs(Ae.min(),ve.empty(),xu)}static max(){return new vs(Ae.max(),ve.empty(),xu)}}function hk(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(i.documentKey,e.documentKey),t!==0?t:je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==dk)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,r)=>{t(e)}))}static reject(e){return new re(((t,r)=>{r(e)}))}static waitFor(e){return new re(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next((a=>a?re.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new re(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++d,d===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new re(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function mk(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function qd(i){return i==null}function yd(i){return i===0&&1/i==-1/0}function gk(i){return typeof i=="number"&&Number.isInteger(i)&&!yd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="";function pk(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Y0(e)),e=yk(i.get(t),e);return Y0(e)}function yk(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case OT:t+="";break;default:t+=l}}return t}function Y0(i){return i+OT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ta(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function NT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new en(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W0(this.data.getIterator())}getIteratorFrom(e){return new W0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class W0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new mr([])}unionWith(e){let t=new Bt(tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new DT("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const _k=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(i){if(Ke(!!i,39018),typeof i=="string"){let e=0;const t=_k.exec(i);if(Ke(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ws(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="server_timestamp",xT="__type__",PT="__previous_value__",MT="__local_write_time__";function Hp(i){return(i?.mapValue?.fields||{})[xT]?.stringValue===kT}function Hd(i){const e=i.mapValue.fields[PT];return Hp(e)?Hd(e):e}function Pu(i){const e=Es(i.mapValue.fields[MT].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t,r,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const _d="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||_d}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===_d}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__type__",Ek="__max__",jh={mapValue:{}},jT="__vector__",vd="value";function bs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Hp(i)?4:bk(i)?9007199254740991:wk(i)?10:11:be(28295,{value:i})}function Gr(i,e){if(i===e)return!0;const t=bs(i);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pu(i).isEqual(Pu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Es(a.timestampValue),d=Es(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return ws(a.bytesValue).isEqual(ws(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return wt(a.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return wt(a.integerValue)===wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=wt(a.doubleValue),d=wt(l.doubleValue);return c===d?yd(c)===yd(d):isNaN(c)&&isNaN(d)}return!1})(i,e);case 9:return Vo(i.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(J0(c)!==J0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Gr(c[m],d[m])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function Uu(i,e){return(i.values||[]).find((t=>Gr(t,e)))!==void 0}function Lo(i,e){if(i===e)return 0;const t=bs(i),r=bs(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=wt(l.integerValue||l.doubleValue),m=wt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(i,e);case 3:return X0(i.timestampValue,e.timestampValue);case 4:return X0(Pu(i),Pu(e));case 5:return Gg(i.stringValue,e.stringValue);case 6:return(function(l,c){const d=ws(l),m=ws(c);return d.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=je(d[g],m[g]);if(_!==0)return _}return je(d.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=je(wt(l.latitude),wt(c.latitude));return d!==0?d:je(wt(l.longitude),wt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Z0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},g=d[vd]?.arrayValue,_=m[vd]?.arrayValue,E=je(g?.values?.length||0,_?.values?.length||0);return E!==0?E:Z0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===jh.mapValue&&c===jh.mapValue)return 0;if(l===jh.mapValue)return 1;if(c===jh.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const b=Gg(m[E],_[E]);if(b!==0)return b;const T=Lo(d[m[E]],g[_[E]]);if(T!==0)return T}return je(m.length,_.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function X0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const t=Es(i),r=Es(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function Z0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Lo(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function zo(i){return Kg(i)}function Kg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ws(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ve.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Kg(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Kg(t.fields[c])}`;return a+"}"})(i.mapValue):be(61005,{value:i})}function rd(i){switch(bs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(i);return e?16+rd(e):16;case 5:return 2*i.stringValue.length;case 6:return ws(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+rd(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return Ta(r.fields,((l,c)=>{a+=l.length+rd(c)})),a})(i.mapValue);default:throw be(13486,{value:i})}}function Qg(i){return!!i&&"integerValue"in i}function Fp(i){return!!i&&"arrayValue"in i}function ew(i){return!!i&&"nullValue"in i}function tw(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function id(i){return!!i&&"mapValue"in i}function wk(i){return(i?.mapValue?.fields||{})[UT]?.stringValue===jT}function Eu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ta(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Eu(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(i.arrayValue.values[t]);return e}return{...i}}function bk(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Ek}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=tn.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Eu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];id(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Kn(Eu(this.value))}}function VT(i){const e=[];return Ta(i.fields,((t,r)=>{const a=new tn([t]);if(id(r)){const l=VT(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Ae.min(),Ae.min(),Ae.min(),Kn.empty(),0)}static newFoundDocument(e,t,r,a){return new un(e,1,t,Ae.min(),r,a,0)}static newNoDocument(e,t){return new un(e,2,t,Ae.min(),Ae.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Ae.min(),Ae.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function nw(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(c.referenceValue),t.key):r=Lo(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function rw(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Gr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tk(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class zt extends LT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ak(e,t,r):t==="array-contains"?new Ik(e,r):t==="in"?new Ok(e,r):t==="not-in"?new Nk(e,r):t==="array-contains-any"?new Dk(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Rk(e,r):new Ck(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Lo(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends LT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Kr(e,t)}matches(e){return zT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zT(i){return i.op==="and"}function BT(i){return Sk(i)&&zT(i)}function Sk(i){for(const e of i.filters)if(e instanceof Kr)return!1;return!0}function Yg(i){if(i instanceof zt)return i.field.canonicalString()+i.op.toString()+zo(i.value);if(BT(i))return i.filters.map((e=>Yg(e))).join(",");{const e=i.filters.map((t=>Yg(t))).join(",");return`${i.op}(${e})`}}function qT(i,e){return i instanceof zt?(function(r,a){return a instanceof zt&&r.op===a.op&&r.field.isEqual(a.field)&&Gr(r.value,a.value)})(i,e):i instanceof Kr?(function(r,a){return a instanceof Kr&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&qT(c,a.filters[d])),!0):!1})(i,e):void be(19439)}function HT(i){return i instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`})(i):i instanceof Kr?(function(t){return t.op.toString()+" {"+t.getFilters().map(HT).join(" ,")+"}"})(i):"Filter"}class Ak extends zt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rk extends zt{constructor(e,t){super(e,"in",t),this.keys=FT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ck extends zt{constructor(e,t){super(e,"not-in",t),this.keys=FT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FT(i,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class Ik extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fp(t)&&Uu(t.arrayValue,this.value)}}class Ok extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uu(this.value.arrayValue,t)}}class Nk extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uu(this.value.arrayValue,t)}}class Dk extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Uu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function iw(i,e=null,t=[],r=[],a=null,l=null,c=null){return new kk(i,e,t,r,a,l,c)}function $p(i){const e=Ce(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Yg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>zo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>zo(r))).join(",")),e.Te=t}return e.Te}function Gp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Tk(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!rw(i.startAt,e.startAt)&&rw(i.endAt,e.endAt)}function Jg(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xk(i,e,t,r,a,l,c,d){return new Fd(i,e,t,r,a,l,c,d)}function Kp(i){return new Fd(i)}function sw(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Pk(i){return i.collectionGroup!==null}function wu(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(tn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wd(l,r))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new wd(tn.keyField(),r))}return e.Ie}function qr(i){const e=Ce(i);return e.Ee||(e.Ee=Mk(e,wu(i))),e.Ee}function Mk(i,e){if(i.limitType==="F")return iw(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new wd(a.field,l)}));const t=i.endAt?new Ed(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ed(i.startAt.position,i.startAt.inclusive):null;return iw(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Wg(i,e,t){return new Fd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function $d(i,e){return Gp(qr(i),qr(e))&&i.limitType===e.limitType}function $T(i){return`${$p(qr(i))}|lt:${i.limitType}`}function So(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>HT(a))).join(", ")}]`),qd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>zo(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>zo(a))).join(",")),`Target(${r})`})(qr(i))}; limitType=${i.limitType})`}function Gd(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of wu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const g=nw(c,d,m);return c.inclusive?g<=0:g<0})(r.startAt,wu(r),a)||r.endAt&&!(function(c,d,m){const g=nw(c,d,m);return c.inclusive?g>=0:g>0})(r.endAt,wu(r),a))})(i,e)}function Uk(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function GT(i){return(e,t)=>{let r=!1;for(const a of wu(i)){const l=jk(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function jk(i,e,t){const r=i.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Lo(m,g):be(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new mt(ve.comparator);function Ti(){return Vk}const KT=new mt(ve.comparator);function mu(...i){let e=KT;for(const t of i)e=e.insert(t.key,t);return e}function QT(i){let e=KT;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function fa(){return bu()}function YT(){return bu()}function bu(){return new Sa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Lk=new mt(ve.comparator),zk=new Bt(ve.comparator);function Ve(...i){let e=zk;for(const t of i)e=e.add(t);return e}const Bk=new Bt(je);function qk(){return Bk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(e)?"-0":e}}function JT(i){return{integerValue:""+i}}function Hk(i,e){return gk(e)?JT(e):Qp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function Fk(i,e,t){return i instanceof ju?(function(a,l){const c={fields:{[xT]:{stringValue:kT},[MT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Hp(l)&&(l=Hd(l)),l&&(c.fields[PT]=l),{mapValue:c}})(t,e):i instanceof Vu?XT(i,e):i instanceof Lu?ZT(i,e):(function(a,l){const c=WT(a,l),d=aw(c)+aw(a.Ae);return Qg(c)&&Qg(a.Ae)?JT(d):Qp(a.serializer,d)})(i,e)}function $k(i,e,t){return i instanceof Vu?XT(i,e):i instanceof Lu?ZT(i,e):t}function WT(i,e){return i instanceof bd?(function(r){return Qg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class ju extends Kd{}class Vu extends Kd{constructor(e){super(),this.elements=e}}function XT(i,e){const t=eS(e);for(const r of i.elements)t.some((a=>Gr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Lu extends Kd{constructor(e){super(),this.elements=e}}function ZT(i,e){let t=eS(e);for(const r of i.elements)t=t.filter((a=>!Gr(a,r)));return{arrayValue:{values:t}}}class bd extends Kd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aw(i){return wt(i.integerValue||i.doubleValue)}function eS(i){return Fp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.field=e,this.transform=t}}function Kk(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof Vu&&a instanceof Vu||r instanceof Lu&&a instanceof Lu?Vo(r.elements,a.elements,Gr):r instanceof bd&&a instanceof bd?Gr(r.Ae,a.Ae):r instanceof ju&&a instanceof ju})(i.transform,e.transform)}class Qk{constructor(e,t){this.version=e,this.transformResults=t}}class _i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Qd{}function tS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new rS(i.key,_i.none()):new Xu(i.key,i.data,_i.none());{const t=i.data,r=Kn.empty();let a=new Bt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Aa(i.key,r,new mr(a.toArray()),_i.none())}}function Yk(i,e,t){i instanceof Xu?(function(a,l,c){const d=a.value.clone(),m=lw(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(i,e,t):i instanceof Aa?(function(a,l,c){if(!sd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=lw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(nS(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Tu(i,e,t,r){return i instanceof Xu?(function(l,c,d,m){if(!sd(l.precondition,c))return d;const g=l.value.clone(),_=uw(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof Aa?(function(l,c,d,m){if(!sd(l.precondition,c))return d;const g=uw(l.fieldTransforms,m,c),_=c.data;return _.setAll(nS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,d){return sd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(i,e,t)}function Jk(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=WT(r.transform,a||null);l!=null&&(t===null&&(t=Kn.empty()),t.set(r.field,l))}return t||null}function ow(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Vo(r,a,((l,c)=>Kk(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Xu extends Qd{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Aa extends Qd{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nS(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function lw(i,e,t){const r=new Map;Ke(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,$k(c,d,t[a]))}return r}function uw(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Fk(l,c,e))}return r}class rS extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wk extends Qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Yk(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=tS(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,r)=>ow(t,r)))&&Vo(this.baseMutations,e.baseMutations,((t,r)=>ow(t,r)))}}class Yp{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Lk})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Yp(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Be;function t2(i){switch(i){case ie.OK:return be(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function iS(i){if(i===void 0)return bi("GRPC error has no .code"),ie.UNKNOWN;switch(i){case kt.OK:return ie.OK;case kt.CANCELLED:return ie.CANCELLED;case kt.UNKNOWN:return ie.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ie.INTERNAL;case kt.UNAVAILABLE:return ie.UNAVAILABLE;case kt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case kt.NOT_FOUND:return ie.NOT_FOUND;case kt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case kt.ABORTED:return ie.ABORTED;case kt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case kt.DATA_LOSS:return ie.DATA_LOSS;default:return be(39323,{code:i})}}(Be=kt||(kt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new ys([4294967295,4294967295],0);function cw(i){const e=n2().encode(i),t=new ET;return t.update(e),new Uint8Array(t.digest())}function hw(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ys([t,r],0),new ys([a,l],0)]}class Jp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gu(`Invalid padding: ${t}`);if(r<0)throw new gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ys.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ys.fromNumber(r)));return a.compare(r2)===1&&(a=new ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cw(e),[r,a]=hw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jp(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=cw(e),[r,a]=hw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yd(Ae.min(),a,new mt(je),Ti(),Ve())}}class Zu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zu(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class sS{constructor(e,t){this.targetId=e,this.Ce=t}}class aS{constructor(e,t,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class dw{constructor(){this.ve=0,this.Fe=fw(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),r=Ve();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:be(38017,{changeType:l})}})),new Zu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=fw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ti(),this.Je=Vh(),this.He=Vh(),this.Ye=new mt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Jg(l))if(r===0){const c=new ve(l.path);this.et(t,c,un.newNoDocument(c,Ae.min()))}else Ke(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ws(r).toUint8Array()}catch(m){if(m instanceof DT)return jo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Jp(c,a,l)}catch(m){return jo(m instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Jg(d.target)){const m=new ve(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,un.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Ve();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Yd(e,t,this.Ye,this.je,r);return this.je=Ti(),this.Je=Vh(),this.He=Vh(),this.Ye=new mt(je),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vh(){return new mt(ve.comparator)}function fw(){return new mt(ve.comparator)}const s2={asc:"ASCENDING",desc:"DESCENDING"},a2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o2={and:"AND",or:"OR"};class l2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xg(i,e){return i.useProto3Json||qd(e)?e:{value:e}}function Td(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function u2(i,e){return Td(i,e.toTimestamp())}function Hr(i){return Ke(!!i,49232),Ae.fromTimestamp((function(t){const r=Es(t);return new at(r.seconds,r.nanos)})(i))}function Wp(i,e){return Zg(i,e).canonicalString()}function Zg(i,e){const t=(function(a){return new ft(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function lS(i){const e=ft.fromString(i);return Ke(fS(e),10190,{key:e.toString()}),e}function ep(i,e){return Wp(i.databaseId,e.path)}function bg(i,e){const t=lS(e);if(t.get(1)!==i.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ve(cS(t))}function uS(i,e){return Wp(i.databaseId,e)}function c2(i){const e=lS(i);return e.length===4?ft.emptyPath():cS(e)}function tp(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cS(i){return Ke(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function mw(i,e,t){return{name:ep(i,e),fields:t.value.mapValue.fields}}function h2(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?ie.UNKNOWN:iS(g.code);return new ge(_,g.message||"")})(c);t=new aS(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=bg(i,r.document.name),l=Hr(r.document.updateTime),c=r.document.createTime?Hr(r.document.createTime):Ae.min(),d=new Kn({mapValue:{fields:r.document.fields}}),m=un.newFoundDocument(a,l,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new ad(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=bg(i,r.document),l=r.readTime?Hr(r.readTime):Ae.min(),c=un.newNoDocument(a,l),d=r.removedTargetIds||[];t=new ad([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=bg(i,r.document),l=r.removedTargetIds||[];t=new ad([],l,a,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new e2(a,l),d=r.targetId;t=new sS(d,c)}}return t}function d2(i,e){let t;if(e instanceof Xu)t={update:mw(i,e.key,e.value)};else if(e instanceof rS)t={delete:ep(i,e.key)};else if(e instanceof Aa)t={update:mw(i,e.key,e.data),updateMask:w2(e.fieldMask)};else{if(!(e instanceof Wk))return be(16599,{Vt:e.type});t={verify:ep(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof ju)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Vu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Lu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:u2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(i,e.precondition)),t}function f2(i,e){return i&&i.length>0?(Ke(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?Hr(a.updateTime):Hr(l);return c.isEqual(Ae.min())&&(c=Hr(l)),new Qk(c,a.transformResults||[])})(t,e)))):[]}function m2(i,e){return{documents:[uS(i,e.path)]}}function g2(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uS(i,a);const l=(function(g){if(g.length!==0)return dS(Kr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:Ao(b.field),direction:_2(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Xg(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function p2(i){let e=c2(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ke(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=hS(E);return b instanceof Kr&&BT(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(N){return new wd(Ro(N.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,qd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,T=E.values||[];return new Ed(T,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,T=E.values||[];return new Ed(T,b)})(t.endAt)),xk(e,a,c,l,d,"F",m,g)}function y2(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hS(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ro(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Ro(t.unaryFilter.field);return zt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(t.unaryFilter.field);return zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ro(t.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(t){return zt.create(Ro(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Kr.create(t.compositeFilter.filters.map((r=>hS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(i):be(30097,{filter:i})}function _2(i){return s2[i]}function v2(i){return a2[i]}function E2(i){return o2[i]}function Ao(i){return{fieldPath:i.canonicalString()}}function Ro(i){return tn.fromServerFormat(i.fieldPath)}function dS(i){return i instanceof zt?(function(t){if(t.op==="=="){if(tw(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if(ew(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tw(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if(ew(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:v2(t.op),value:t.value}}})(i):i instanceof Kr?(function(t){const r=t.getFilters().map((a=>dS(a)));return r.length===1?r[0]:{compositeFilter:{op:E2(t.op),filters:r}}})(i):be(54877,{filter:i})}function w2(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function fS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r,a,l=Ae.min(),c=Ae.min(),d=nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.yt=e}}function T2(i){const e=p2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Wg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Cn=new A2}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(vs.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class A2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Bt(ft.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Bt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mS=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(mS,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LruGarbageCollector",R2=1048576;function yw([i,e],[t,r]){const a=je(i,t);return a===0?je(e,r):a}class C2{constructor(e){this.Ir=e,this.buffer=new Bt(yw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(pw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ce(pw,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Vr(3e5)}))}}class O2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Bd.ce);const r=new C2(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(gw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),To()<=Ue.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function N2(i,e){return new O2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.changes=new Sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Tu(r.mutation,a,mr.empty(),at.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const a=fa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=mu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=fa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Ti();const c=bu(),d=(function(){return bu()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Aa)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Tu(_.mutation,g,_.mutation.getFieldMask(),at.now())):c.set(g.key,mr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new k2(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=bu();let a=new mt(((c,d)=>c-d)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||mr.empty();_=d.applyToLocalView(g,_),r.set(m,_);const E=(a.get(d.batchId)||Ve()).add(m);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,E=YT();_.forEach((b=>{if(!l.has(b)){const T=tS(t.get(b),r.get(b));T!==null&&E.set(b,T),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return re.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):re.resolve(fa());let d=xu,m=l;return c.next((g=>re.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ve()))).next((_=>({batchId:d,changes:QT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((r=>{let a=mu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=mu();return this.indexManager.getCollectionParents(e,l).next((d=>re.forEach(d,(m=>{const g=(function(E,b){return new Fd(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,un.newInvalidDocument(_)))}));let d=mu();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&Tu(_.mutation,g,mr.empty(),at.now()),Gd(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Hr(a.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:T2(a.bundledQuery),readTime:Hr(a.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.overlays=new mt(ve.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fa();return re.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const a=fa(),l=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new mt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=fa(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=fa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return re.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Zk(t,r));let l=this.qr.get(t);l===void 0&&(l=Ve(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Qr=new Bt($t.$r),this.Ur=new Bt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ve(new ft([])),r=new $t(t,e),a=new $t(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new ft([])),r=new $t(t,e),a=new $t(t,e+1);let l=Ve();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt($t.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Xk(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?qp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(je);return t.forEach((a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{r=r.add(d.Yr)}))})),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const c=new $t(new ve(l),0);let d=new Bt(je);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(t.mutations,(a=>{const l=new $t(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new $t(t,0),a=this.Zr.firstAfterOrEqual(r);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.ri=e,this.docs=(function(){return new mt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():un.newInvalidDocument(a))})),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Ti();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||hk(ck(_),r)<=0||(a.has(_.key)||Gd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,r,a){be(9500)}ii(e,t){return re.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new L2(this)}getSize(e){return re.resolve(this.size)}}class L2 extends D2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.persistence=e,this.si=new Sa((t=>$p(t)),Gp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Xp,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bd(0),this.li=!1,this.li=!0,this.hi=new U2,this.referenceDelegate=e(this),this.Pi=new z2(this),this.indexManager=new S2,this.remoteDocumentCache=(function(a){return new V2(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new b2(t),this.Ii=new P2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new j2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new B2(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class B2 extends fk{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Xp,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(r=>{const a=ve.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sd{constructor(e,t){this.persistence=e,this.pi=new Sa((r=>pk(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=N2(this,t)}static mi(e,t){return new Sd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?re.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Ae.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}br(e,t,r){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return re.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ve(),a=Ve();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ey(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _I()?8:mk(cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new q2;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(To()<=Ue.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(To()<=Ue.DEBUG&&ce("QueryEngine","Query:",So(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(To()<=Ue.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):re.resolve())}ys(e,t){if(sw(t))return re.resolve(null);let r=qr(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Wg(t,null,"F"),r=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ve(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,Wg(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,a){return sw(t)||a.isEqual(Ae.min())?re.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?re.resolve(null):(To()<=Ue.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),So(t)),this.vs(e,c,t,uk(a,xu)).next((d=>d)))}))}Ds(e,t){let r=new Bt(GT(e));return t.forEach(((a,l)=>{Gd(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return To()<=Ue.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",So(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="LocalStore",F2=3e8;class $2{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new mt(je),this.xs=new Sa((l=>$p(l)),Gp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function G2(i,e,t,r){return new $2(i,e,t,r)}async function pS(i,e){const t=Ce(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=Ve();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function K2(i,e){const t=Ce(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const E=g.batch,b=E.keys();let T=re.resolve();return b.forEach((N=>{T=T.next((()=>_.getEntry(m,N))).next((P=>{const A=g.docVersions.get(N);Ke(A!==null,48541),P.version.compareTo(A)<0&&(E.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),_.addEntry(P)))}))})),T.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=Ve();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function yS(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Q2(i,e){const t=Ce(i),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,E)=>{const b=a.get(E);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let T=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?T=T.withResumeToken(nn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(_.resumeToken,r)),a=a.insert(E,T),(function(P,A,L){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=F2?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(b,T,_)&&d.push(t.Pi.updateTargetData(l,T))}));let m=Ti(),g=Ve();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(Y2(l,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!r.isEqual(Ae.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(_)}return re.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function Y2(i,e,t){let r=Ve(),a=Ve();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=Ti();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ce(ty,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function J2(i,e){const t=Ce(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=qp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function W2(i,e){const t=Ce(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,re.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new ds(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function np(i,e,t){const r=Ce(i),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Zo(c))throw c;ce(ty,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function _w(i,e,t){const r=Ce(i);let a=Ae.min(),l=Ve();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=Ce(m),b=E.xs.get(_);return b!==void 0?re.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,_)})(r,c,qr(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ae.min(),t?l:Ve()))).next((d=>(X2(r,Uk(e),d),{documents:d,Qs:l})))))}function X2(i,e,t){let r=i.Os.get(e)||Ae.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Os.set(e,r)}class vw{constructor(){this.activeTargetIds=qk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z2{constructor(){this.Mo=new vw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="ConnectivityMonitor";class ww{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Ew,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Ew,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function rp(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="RestConnection",tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===_d?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=rp(),d=this.zo(e,t.toUriEncodedString());ce(Tg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),_=Ko(g);return this.Jo(e,d,m,r,_).then((E=>(ce(Tg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw jo(Tg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=tx[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class ix extends nx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=rp();return new Promise(((d,m)=>{const g=new wT;g.setWithCredentials(!0),g.listenOnce(bT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case nd.NO_ERROR:const E=g.getResponseJson();ce(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case nd.TIMEOUT:ce(sn,`RPC '${e}' ${c} timed out`),m(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const b=g.getStatus();if(ce(sn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let T=g.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T?.error;if(N&&N.status&&N.message){const P=(function(L){const K=L.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(K)>=0?K:ie.UNKNOWN})(N.status);m(new ge(P,N.message))}else m(new ge(ie.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(sn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ce(sn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=rp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=AT(),d=ST(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");ce(sn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const E=c.createWebChannel(_,m);this.I_(E);let b=!1,T=!1;const N=new rx({Yo:A=>{T?ce(sn,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(b||(ce(sn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),b=!0),ce(sn,`RPC '${e}' stream ${a} sending:`,A),E.send(A))},Zo:()=>E.close()}),P=(A,L,K)=>{A.listen(L,(G=>{try{K(G)}catch(W){setTimeout((()=>{throw W}),0)}}))};return P(E,fu.EventType.OPEN,(()=>{T||(ce(sn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),P(E,fu.EventType.CLOSE,(()=>{T||(T=!0,ce(sn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(E))})),P(E,fu.EventType.ERROR,(A=>{T||(T=!0,jo(sn,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),N.a_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),P(E,fu.EventType.MESSAGE,(A=>{if(!T){const L=A.data[0];Ke(!!L,16349);const K=L,G=K?.error||K[0]?.error;if(G){ce(sn,`RPC '${e}' stream ${a} received error:`,G);const W=G.status;let se=(function(C){const O=kt[C];if(O!==void 0)return iS(O)})(W),ue=G.message;se===void 0&&(se=ie.INTERNAL,ue="Unknown error status: "+W+" with message "+G.message),T=!0,N.a_(new ge(se,ue)),E.close()}else ce(sn,`RPC '${e}' stream ${a} received:`,L),N.u_(L)}})),P(d,TT.STAT_EVENT,(A=>{A.stat===$g.PROXY?ce(sn,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===$g.NOPROXY&&ce(sn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(i){return new l2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="PersistentStream";class vS{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new ge(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(bw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(bw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sx extends vS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=h2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Hr(c.readTime):Ae.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Jg(m)?{documents:m2(l,m)}:{query:g2(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=oS(l,c.resumeToken);const g=Xg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Td(l,c.snapshotVersion.toTimestamp());const g=Xg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=y2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class ax extends vS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=f2(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>d2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{}class lx extends ox{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Zg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ie.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Zg(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ux{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bi(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class cx{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ra(this)&&(ce(Ea,"Restarting streams for network reachability change."),await(async function(m){const g=Ce(m);g.Ea.add(4),await ec(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Wd(g)})(this))}))})),this.Ra=new ux(r,a)}}async function Wd(i){if(Ra(i))for(const e of i.da)await e(!0)}async function ec(i){for(const e of i.da)await e(!1)}function ES(i,e){const t=Ce(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sy(t)?iy(t):el(t).O_()&&ry(t,e))}function ny(i,e){const t=Ce(i),r=el(t);t.Ia.delete(e),r.O_()&&wS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ra(t)&&t.Ra.set("Unknown"))}function ry(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}el(i).Y_(e)}function wS(i,e){i.Va.Ue(e),el(i).Z_(e)}function iy(i){i.Va=new i2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),el(i).start(),i.Ra.ua()}function sy(i){return Ra(i)&&!el(i).x_()&&i.Ia.size>0}function Ra(i){return Ce(i).Ea.size===0}function bS(i){i.Va=void 0}async function hx(i){i.Ra.set("Online")}async function dx(i){i.Ia.forEach(((e,t)=>{ry(i,e)}))}async function fx(i,e){bS(i),sy(i)?(i.Ra.ha(e),iy(i)):i.Ra.set("Unknown")}async function mx(i,e,t){if(i.Ra.set("Online"),e instanceof aS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(i,e)}catch(r){ce(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ad(i,r)}else if(e instanceof ad?i.Va.Ze(e):e instanceof sS?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ae.min()))try{const r=await yS(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),wS(l,m);const E=new ds(_.target,m,g,_.sequenceNumber);ry(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(i,t)}catch(r){ce(Ea,"Failed to raise snapshot:",r),await Ad(i,r)}}async function Ad(i,e,t){if(!Zo(e))throw e;i.Ea.add(1),await ec(i),i.Ra.set("Offline"),t||(t=()=>yS(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ce(Ea,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Wd(i)}))}function TS(i,e){return e().catch((t=>Ad(i,t,e)))}async function Xd(i){const e=Ce(i),t=Ts(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qp;for(;gx(e);)try{const a=await J2(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,px(e,a)}catch(a){await Ad(e,a)}SS(e)&&AS(e)}function gx(i){return Ra(i)&&i.Ta.length<10}function px(i,e){i.Ta.push(e);const t=Ts(i);t.O_()&&t.X_&&t.ea(e.mutations)}function SS(i){return Ra(i)&&!Ts(i).x_()&&i.Ta.length>0}function AS(i){Ts(i).start()}async function yx(i){Ts(i).ra()}async function _x(i){const e=Ts(i);for(const t of i.Ta)e.ea(t.mutations)}async function vx(i,e,t){const r=i.Ta.shift(),a=Yp.from(r,e,t);await TS(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Xd(i)}async function Ex(i,e){e&&Ts(i).X_&&await(async function(r,a){if((function(c){return t2(c)&&c!==ie.ABORTED})(a.code)){const l=r.Ta.shift();Ts(r).B_(),await TS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Xd(r)}})(i,e),SS(i)&&AS(i)}async function Tw(i,e){const t=Ce(i);t.asyncQueue.verifyOperationInProgress(),ce(Ea,"RemoteStore received new credentials");const r=Ra(t);t.Ea.add(3),await ec(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wd(t)}async function wx(i,e){const t=Ce(i);e?(t.Ea.delete(2),await Wd(t)):e||(t.Ea.add(2),await ec(t),t.Ra.set("Unknown"))}function el(i){return i.ma||(i.ma=(function(t,r,a){const l=Ce(t);return l.sa(),new sx(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:hx.bind(null,i),t_:dx.bind(null,i),r_:fx.bind(null,i),H_:mx.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),sy(i)?iy(i):i.Ra.set("Unknown")):(await i.ma.stop(),bS(i))}))),i.ma}function Ts(i){return i.fa||(i.fa=(function(t,r,a){const l=Ce(t);return l.sa(),new ax(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:yx.bind(null,i),r_:Ex.bind(null,i),ta:_x.bind(null,i),na:vx.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Xd(i)):(await i.fa.stop(),i.Ta.length>0&&(ce(Ea,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new ay(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(i,e){if(bi("AsyncQueue",`${e}: ${i}`),Zo(i))return new ge(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(e){return new xo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=mu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.ga=new mt(ve.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class qo{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new qo(e,t,xo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Tx{constructor(){this.queries=Aw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Ce(t),l=a.queries;a.queries=Aw(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function Aw(){return new Sa((i=>$T(i)),$d)}async function Sx(i,e){const t=Ce(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new bx,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=oy(c,`Initialization of query '${So(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ly(t)}async function Ax(i,e){const t=Ce(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Rx(i,e){const t=Ce(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&ly(t)}function Cx(i,e,t){const r=Ce(i),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function ly(i){i.Ca.forEach((e=>{e.next()}))}var ip,Rw;(Rw=ip||(ip={})).Ma="default",Rw.Cache="cache";class Ix{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.key=e}}class CS{constructor(e){this.key=e}}class Ox{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=GT(e),this.tu=new xo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Sw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const b=a.get(_),T=Gd(this.query,E)?E:null,N=!!b&&this.mutatedKeys.has(b.key),P=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;b&&T?b.data.isEqual(T.data)?N!==P&&(r.track({type:3,doc:T}),A=!0):this.su(b,T)||(r.track({type:2,doc:T}),A=!0,(m&&this.eu(T,m)>0||g&&this.eu(T,g)<0)&&(d=!0)):!b&&T?(r.track({type:0,doc:T}),A=!0):b&&!T&&(r.track({type:1,doc:b}),A=!0,(m||g)&&(d=!0)),A&&(T?(c=c.add(T),l=P?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(T,N){const P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:A})}};return P(T)-P(N)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new qo(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new CS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new RS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uy="SyncEngine";class Nx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Dx{constructor(e){this.key=e,this.hu=!1}}class kx{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Sa((d=>$T(d)),$d),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ve.comparator),this.Au=new Map,this.Ru=new Xp,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xx(i,e,t=!0){const r=xS(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await IS(r,e,t,!0),a}async function Px(i,e){const t=xS(i);await IS(t,e,!0,!1)}async function IS(i,e,t,r){const a=await W2(i.localStore,qr(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Mx(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&ES(i.remoteStore,a),d}async function Mx(i,e,t,r,a){i.pu=(E,b,T)=>(async function(P,A,L,K){let G=A.view.ru(L);G.Cs&&(G=await _w(P.localStore,A.query,!1).then((({documents:I})=>A.view.ru(I,G))));const W=K&&K.targetChanges.get(A.targetId),se=K&&K.targetMismatches.get(A.targetId)!=null,ue=A.view.applyChanges(G,P.isPrimaryClient,W,se);return Iw(P,A.targetId,ue.au),ue.snapshot})(i,E,b,T);const l=await _w(i.localStore,e,!0),c=new Ox(e,l.Qs),d=c.ru(l.documents),m=Zu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(d,i.isPrimaryClient,m);Iw(i,t,g.au);const _=new Nx(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function Ux(i,e,t){const r=Ce(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!$d(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await np(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&ny(r.remoteStore,a.targetId),sp(r,a.targetId)})).catch(Xo)):(sp(r,a.targetId),await np(r.localStore,a.targetId,!0))}async function jx(i,e){const t=Ce(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ny(t.remoteStore,r.targetId))}async function Vx(i,e,t){const r=$x(i);try{const a=await(function(c,d){const m=Ce(c),g=at.now(),_=d.reduce(((T,N)=>T.add(N.key)),Ve());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let N=Ti(),P=Ve();return m.Ns.getEntries(T,_).next((A=>{N=A,N.forEach(((L,K)=>{K.isValidDocument()||(P=P.add(L))}))})).next((()=>m.localDocuments.getOverlayedDocuments(T,N))).next((A=>{E=A;const L=[];for(const K of d){const G=Jk(K,E.get(K.key).overlayedDocument);G!=null&&L.push(new Aa(K.key,G,VT(G.value.mapValue),_i.exists(!0)))}return m.mutationQueue.addMutationBatch(T,g,L,d)})).next((A=>{b=A;const L=A.applyToLocalDocumentSet(E,P);return m.documentOverlayCache.saveOverlays(T,A.batchId,L)}))})).then((()=>({batchId:b.batchId,changes:QT(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new mt(je)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await tc(r,a.changes),await Xd(r.remoteStore)}catch(a){const l=oy(a,"Failed to persist write");t.reject(l)}}async function OS(i,e){const t=Ce(i);try{const r=await Q2(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ke(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ke(c.hu,14607):a.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await tc(t,r,e)}catch(r){await Xo(r)}}function Cw(i,e,t){const r=Ce(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Ce(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,E)=>{for(const b of E.Sa)b.va(d)&&(g=!0)})),g&&ly(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Lx(i,e,t){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new mt(ve.comparator);c=c.insert(l,un.newNoDocument(l,Ae.min()));const d=Ve().add(l),m=new Yd(Ae.min(),new Map,new mt(je),c,d);await OS(r,m),r.du=r.du.remove(l),r.Au.delete(e),cy(r)}else await np(r.localStore,e,!1).then((()=>sp(r,e,t))).catch(Xo)}async function zx(i,e){const t=Ce(i),r=e.batch.batchId;try{const a=await K2(t.localStore,e);DS(t,r,null),NS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await tc(t,a)}catch(a){await Xo(a)}}async function Bx(i,e,t){const r=Ce(i);try{const a=await(function(c,d){const m=Ce(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(Ke(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);DS(r,e,t),NS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await tc(r,a)}catch(a){await Xo(a)}}function NS(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function DS(i,e,t){const r=Ce(i);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function sp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||kS(i,r)}))}function kS(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(ny(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),cy(i))}function Iw(i,e,t){for(const r of t)r instanceof RS?(i.Ru.addReference(r.key,e),qx(i,r)):r instanceof CS?(ce(uy,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||kS(i,r.key)):be(19791,{wu:r})}function qx(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(ce(uy,"New document in limbo: "+t),i.Eu.add(r),cy(i))}function cy(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ve(ft.fromString(e)),r=i.fu.next();i.Au.set(r,new Dx(t)),i.du=i.du.insert(t,r),ES(i.remoteStore,new ds(qr(Kp(t.path)),r,"TargetPurposeLimboResolution",Bd.ce))}}async function tc(i,e,t){const r=Ce(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=ey.As(m.targetId,g);l.push(_)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const _=Ce(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(g,(b=>re.forEach(b.Es,(T=>_.persistence.referenceDelegate.addReference(E,b.targetId,T))).next((()=>re.forEach(b.ds,(T=>_.persistence.referenceDelegate.removeReference(E,b.targetId,T)))))))))}catch(E){if(!Zo(E))throw E;ce(ty,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const T=_.Ms.get(b),N=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(N);_.Ms=_.Ms.insert(b,P)}}})(r.localStore,l))}async function Hx(i,e){const t=Ce(i);if(!t.currentUser.isEqual(e)){ce(uy,"User change. New user:",e.toKey());const r=await pS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new ge(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tc(t,r.Ls)}}function Fx(i,e){const t=Ce(i),r=t.Au.get(e);if(r&&r.hu)return Ve().add(r.key);{let a=Ve();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function xS(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=OS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lx.bind(null,e),e.Pu.H_=Rx.bind(null,e.eventManager),e.Pu.yu=Cx.bind(null,e.eventManager),e}function $x(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bx.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return G2(this.persistence,new H2,e.initialUser,this.serializer)}Cu(e){return new gS(Zp.mi,this.serializer)}Du(e){return new Z2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class Gx extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Sd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new gS((r=>Sd.mi(r,t)),this.serializer)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hx.bind(null,this.syncEngine),await wx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Tx})()}createDatastore(e){const t=Jd(e.databaseInfo.databaseId),r=(function(l){return new ix(l)})(e.databaseInfo);return(function(l,c,d,m){return new lx(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new cx(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cw(this.syncEngine,t,0)),(function(){return ww.v()?new ww:new ex})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,_){const E=new kx(a,l,c,d,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ce(t);ce(Ea,"RemoteStore shutting down."),r.Ea.add(5),await ec(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class Qx{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=ln.UNAUTHENTICATED,this.clientId=zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ce(Ss,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ce(Ss,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=oy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ag(i,e){i.asyncQueue.verifyOperationInProgress(),ce(Ss,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await pS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Ow(i,e){i.asyncQueue.verifyOperationInProgress();const t=await Yx(i);ce(Ss,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Tw(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>Tw(e.remoteStore,a))),i._onlineComponents=e}async function Yx(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(Ss,"Using user provided OfflineComponentProvider");try{await Ag(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),await Ag(i,new Rd)}}else ce(Ss,"Using default OfflineComponentProvider"),await Ag(i,new Gx(void 0));return i._offlineComponents}async function PS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(Ss,"Using user provided OnlineComponentProvider"),await Ow(i,i._uninitializedComponentsProvider._online)):(ce(Ss,"Using default OnlineComponentProvider"),await Ow(i,new ap))),i._onlineComponents}function Jx(i){return PS(i).then((e=>e.syncEngine))}async function Wx(i){const e=await PS(i),t=e.eventManager;return t.onListen=xx.bind(null,e.syncEngine),t.onUnlisten=Ux.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Px.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jx.bind(null,e.syncEngine),t}function Xx(i,e,t={}){const r=new _s;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new Kx({next:b=>{_.Nu(),c.enqueueAndForget((()=>Ax(l,E)));const T=b.docs.has(d);!T&&b.fromCache?g.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&m&&m.source==="server"?g.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new Ix(Kp(d.path),_,{includeMetadataChanges:!0,qa:!0});return Sx(l,E)})(await Wx(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firestore.googleapis.com",Dw=!0;class kw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=US,this.ssl=Dw}else this.host=e.host,this.ssl=e.ssl??Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R2)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hy{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new WD;switch(r.type){case"firstParty":return new tk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Nw.get(t);r&&(ce("ComponentProvider","Removing Datastore"),Nw.delete(t),r.terminate())})(this),Promise.resolve()}}function Zx(i,e,t,r={}){i=ku(i,hy);const a=Ko(e),l=i._getSettings(),c={...l,emulatorOptions:i._getEmulatorOptions()},d=`${e}:${t}`;a&&(xb(`https://${d}`),Pb("Firestore",!0)),l.host!==US&&l.host!==d&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!pa(m,c)&&(i._setSettings(m),r.mockUserToken)){let g,_;if(typeof r.mockUserToken=="string")g=r.mockUserToken,_=ln.MOCK_USER;else{g=uI(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ln(E)}i._authCredentials=new XD(new CT(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dy(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wu(t,Gt._jsonSchema))return new Gt(e,r||null,new ve(ft.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Pt("string",Gt._jsonSchemaVersion),referencePath:Pt("string")};class zu extends dy{constructor(e,t,r){super(e,t,Kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function eP(i,e,...t){if(i=Jn(i),arguments.length===1&&(e=zp.newId()),ok("doc","path",e),i instanceof hy){const r=ft.fromString(e,...t);return G0(r),new Gt(i,null,new ve(r))}{if(!(i instanceof Gt||i instanceof zu))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ft.fromString(e,...t));return G0(r),new Gt(i.firestore,i instanceof zu?i.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="AsyncQueue";class Pw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _S(this,"async_queue_retry"),this._c=()=>{const r=Sg();r&&ce(xw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zo(e))throw e;ce(xw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,bi("INTERNAL UNHANDLED ERROR: ",Mw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ay.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:Mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class fy extends hy{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Pw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pw(e),this._firestoreClient=void 0,await e}}}function tP(i,e){const t=typeof i=="object"?i:Vb(),r=typeof i=="string"?i:_d,a=Np(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=oI("firestore");l&&Zx(a,...l)}return a}function jS(i){if(i._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||nP(i),i._firestoreClient}function nP(i){const e=i._freezeSettings(),t=(function(a,l,c,d){return new vk(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,MS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new Qx(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(nn.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Pt("string",Qn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fr._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,Fr._jsonSchema))return new Fr(e.latitude,e.longitude)}}Fr._jsonSchemaVersion="firestore/geoPoint/1.0",Fr._jsonSchema={type:Pt("string",Fr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,$r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $r(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$r._jsonSchemaVersion="firestore/vectorValue/1.0",$r._jsonSchema={type:Pt("string",$r._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=/^__.*__$/;class iP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}function VS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class py{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new py({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VS(this.Ac)&&rP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jd(e)}Cc(e,t,r,a=!1){return new py({Ac:e,methodName:t,Dc:r,path:tn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aP(i){const e=i._freezeSettings(),t=Jd(i._databaseId);return new sP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function oP(i,e,t,r,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);qS("Data must be an object, but it was:",c,r);const d=zS(r,c);let m,g;if(l.merge)m=new mr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=lP(e,E,t);if(!c.contains(b))throw new ge(ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);cP(_,b)||_.push(b)}m=new mr(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new iP(new Kn(d),m,g)}class yy extends gy{_toFieldTransform(e){return new Gk(e.path,new ju)}isEqual(e){return e instanceof yy}}function LS(i,e){if(BS(i=Jn(i)))return qS("Unsupported field value:",e,i),zS(i,e);if(i instanceof gy)return(function(r,a){if(!VS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=LS(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=Jn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hk(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=at.fromDate(r);return{timestampValue:Td(a.serializer,l)}}if(r instanceof at){const l=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Td(a.serializer,l)}}if(r instanceof Fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:oS(a.serializer,r._byteString)};if(r instanceof Gt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $r)return(function(c,d){return{mapValue:{fields:{[UT]:{stringValue:jT},[vd]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Qp(d.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Bp(r)}`)})(i,e)}function zS(i,e){const t={};return NT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(i,((r,a)=>{const l=LS(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function BS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof at||i instanceof Fr||i instanceof Qn||i instanceof Gt||i instanceof gy||i instanceof $r)}function qS(i,e,t){if(!BS(t)||!IT(t)){const r=Bp(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function lP(i,e,t){if((e=Jn(e))instanceof my)return e._internalPath;if(typeof e=="string")return HS(i,e);throw Cd("Field path arguments must be of type string or ",i,!1,void 0,t)}const uP=new RegExp("[~\\*/\\[\\]]");function HS(i,e,t){if(e.search(uP)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new my(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Cd(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ge(ie.INVALID_ARGUMENT,d+i+m)}function cP(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($S("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hP extends FS{data(){return super.data()}}function $S(i,e){return typeof e=="string"?HS(i,e):e instanceof my?e._internalPath:e._delegate._internalPath}class dP{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ta(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[vd].arrayValue?.values?.map((r=>wt(r.doubleValue)));return new $r(t)}convertGeoPoint(e){return new Fr(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Hd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const t=Es(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ft.fromString(e);Ke(fS(r),9688,{name:e});const a=new Mu(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return a.isEqual(t)||bi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends FS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($S("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ga._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Pt("string",ga._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class od extends ga{data(e={}){return super.data(e)}}class Su{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new pu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new od(this._firestore,this._userDataWriter,r.key,r,new pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new od(a._firestore,a._userDataWriter,d.doc.key,d.doc,new pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new od(a._firestore,a._userDataWriter,d.doc.key,d.doc,new pu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:mP(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Su._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(i){i=ku(i,Gt);const e=ku(i.firestore,fy);return Xx(jS(e),i._key).then((t=>vP(e,i,t)))}Su._jsonSchemaVersion="firestore/querySnapshot/1.0",Su._jsonSchema={type:Pt("string",Su._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class pP extends dP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function yP(i,e,t){i=ku(i,Gt);const r=ku(i.firestore,fy),a=fP(i.converter,e,t);return _P(r,[oP(aP(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,_i.none())])}function _P(i,e){return(function(r,a){const l=new _s;return r.asyncQueue.enqueueAndForget((async()=>Vx(await Jx(r),a,l))),l.promise})(jS(i),e)}function vP(i,e,t){const r=t.docs.get(e._key),a=new pP(i);return new ga(i,a,e._key,r,new pu(t.hasPendingWrites,t.fromCache),e.converter)}function EP(){return new yy("serverTimestamp")}(function(e,t=!0){(function(a){Wo=a})(Qo),Mo(new ya("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new fy(new ZD(r.getProvider("auth-internal")),new nk(c,r.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),gs(q0,H0,e),gs(q0,H0,"esm2020")})();const ld={apiKey:"AIzaSyDSjWIuCCemQOJHl85jbpcXmyEGdICh-ZY",authDomain:"kamaynikasyon-e760c.firebaseapp.com",projectId:"kamaynikasyon-e760c",storageBucket:"kamaynikasyon-e760c.firebasestorage.app",messagingSenderId:"1037097929957",appId:"1:1037097929957:web:b3c43a8d7be2571165980c"},GS=ld.apiKey&&ld.authDomain&&ld.projectId;GS||console.error("Firebase configuration is missing. Please set Firebase environment variables in .env file");let Ho;try{Ho=y0().length?y0()[0]:GS?jb(ld):null}catch(i){console.error("Failed to initialize Firebase:",i),Ho=null}const sa=Ho?YD(Ho):null,Uw=Ho?tP(Ho):null;var op=function(i,e){return op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},op(i,e)};function KS(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");op(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Id=function(){return Id=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Id.apply(this,arguments)};function tl(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function QS(i,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,t,r);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function YS(i,e){return function(t,r){e(t,r,i)}}function JS(i,e,t,r,a,l){function c(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var d=r.kind,m=d==="getter"?"get":d==="setter"?"set":"value",g=!e&&i?r.static?i:i.prototype:null,_=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),E,b=!1,T=t.length-1;T>=0;T--){var N={};for(var P in r)N[P]=P==="access"?{}:r[P];for(var P in r.access)N.access[P]=r.access[P];N.addInitializer=function(L){if(b)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(L||null))};var A=(0,t[T])(d==="accessor"?{get:_.get,set:_.set}:_[m],N);if(d==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(E=c(A.get))&&(_.get=E),(E=c(A.set))&&(_.set=E),(E=c(A.init))&&a.unshift(E)}else(E=c(A))&&(d==="field"?a.unshift(E):_[m]=E)}g&&Object.defineProperty(g,r.name,_),b=!0}function WS(i,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(i,t):e[a].call(i);return r?t:void 0}function XS(i){return typeof i=="symbol"?i:"".concat(i)}function ZS(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function eA(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function me(i,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(_){try{g(r.next(_))}catch(E){c(E)}}function m(_){try{g(r.throw(_))}catch(E){c(E)}}function g(_){_.done?l(_.value):a(_.value).then(d,m)}g((r=r.apply(i,e||[])).next())})}function tA(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(g){return function(_){return m([g,_])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(_){g=[6,_],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Zd=Object.create?(function(i,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,a)}):(function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]});function nA(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zd(e,i,t)}function Od(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _y(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var r=t.call(i),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function rA(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(_y(arguments[e]));return i}function iA(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var r=Array(i),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,d=l.length;c<d;c++,a++)r[a]=l[c];return r}function sA(i,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return i.concat(l||Array.prototype.slice.call(e))}function Fo(i){return this instanceof Fo?(this.v=i,this):new Fo(i)}function aA(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(N){return Promise.resolve(N).then(T,E)}}function d(T,N){r[T]&&(a[T]=function(P){return new Promise(function(A,L){l.push([T,P,A,L])>1||m(T,P)})},N&&(a[T]=N(a[T])))}function m(T,N){try{g(r[T](N))}catch(P){b(l[0][3],P)}}function g(T){T.value instanceof Fo?Promise.resolve(T.value.v).then(_,E):b(l[0][2],T)}function _(T){m("next",T)}function E(T){m("throw",T)}function b(T,N){T(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function oA(i){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=i[a]?function(c){return(t=!t)?{value:Fo(i[a](c)),done:!1}:l?l(c):c}:l}}function lA(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Od=="function"?Od(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=i[l]&&function(c){return new Promise(function(d,m){c=i[l](c),a(d,m,c.done,c.value)})}}function a(l,c,d,m){Promise.resolve(m).then(function(g){l({value:g,done:d})},c)}}function uA(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var wP=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},lp=function(i){return lp=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},lp(i)};function cA(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=lp(i),r=0;r<t.length;r++)t[r]!=="default"&&Zd(e,i,t[r]);return wP(e,i),e}function hA(i){return i&&i.__esModule?i:{default:i}}function dA(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)}function fA(i,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,t):a?a.value=t:e.set(i,t),t}function mA(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function gA(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:e,dispose:r,async:t})}else t&&i.stack.push({async:!0});return e}var bP=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};function pA(i){function e(l){i.error=i.hasError?new bP(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var t,r=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&r===1)return r=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function yA(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):i}const TP={__extends:KS,__assign:Id,__rest:tl,__decorate:QS,__param:YS,__esDecorate:JS,__runInitializers:WS,__propKey:XS,__setFunctionName:ZS,__metadata:eA,__awaiter:me,__generator:tA,__createBinding:Zd,__exportStar:nA,__values:Od,__read:_y,__spread:rA,__spreadArrays:iA,__spreadArray:sA,__await:Fo,__asyncGenerator:aA,__asyncDelegator:oA,__asyncValues:lA,__makeTemplateObject:uA,__importStar:cA,__importDefault:hA,__classPrivateFieldGet:dA,__classPrivateFieldSet:fA,__classPrivateFieldIn:mA,__addDisposableResource:gA,__disposeResources:pA,__rewriteRelativeImportExtension:yA},SP=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:gA,get __assign(){return Id},__asyncDelegator:oA,__asyncGenerator:aA,__asyncValues:lA,__await:Fo,__awaiter:me,__classPrivateFieldGet:dA,__classPrivateFieldIn:mA,__classPrivateFieldSet:fA,__createBinding:Zd,__decorate:QS,__disposeResources:pA,__esDecorate:JS,__exportStar:nA,__extends:KS,__generator:tA,__importDefault:hA,__importStar:cA,__makeTemplateObject:uA,__metadata:eA,__param:YS,__propKey:XS,__read:_y,__rest:tl,__rewriteRelativeImportExtension:yA,__runInitializers:WS,__setFunctionName:ZS,__spread:rA,__spreadArray:sA,__spreadArrays:iA,__values:Od,default:TP},Symbol.toStringTag,{value:"Module"})),AP=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class vy extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class RP extends vy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jw extends vy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vw extends vy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var up;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(up||(up={}));class CP{constructor(e,{headers:t={},customFetch:r,region:a=up.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=AP(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return me(this,arguments,void 0,function*(t,r={}){var a;let l,c;try{const{headers:d,method:m,body:g,signal:_,timeout:E}=r;let b={},{region:T}=r;T||(T=this.region);const N=new URL(`${this.url}/${t}`);T&&T!=="any"&&(b["x-region"]=T,N.searchParams.set("forceFunctionRegion",T));let P;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",P=g):typeof g=="string"?(b["Content-Type"]="text/plain",P=g):typeof FormData<"u"&&g instanceof FormData?P=g:(b["Content-Type"]="application/json",P=JSON.stringify(g)):P=g;let A=_;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),_?(A=c.signal,_.addEventListener("abort",()=>c.abort())):A=c.signal);const L=yield this.fetch(N.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:P,signal:A}).catch(se=>{throw new RP(se)}),K=L.headers.get("x-relay-error");if(K&&K==="true")throw new jw(L);if(!L.ok)throw new Vw(L);let G=((a=L.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),W;return G==="application/json"?W=yield L.json():G==="application/octet-stream"||G==="application/pdf"?W=yield L.blob():G==="text/event-stream"?W=L:G==="multipart/form-data"?W=yield L.formData():W=yield L.text(),{data:W,error:null,response:L}}catch(d){return{data:null,error:d,response:d instanceof Vw||d instanceof jw?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var an={};const nl=v1(SP);var zh={},Bh={},qh={},Hh={},Fh={},$h={},Lw;function _A(){if(Lw)return $h;Lw=1,Object.defineProperty($h,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return $h.default=i,$h}var zw;function vA(){if(zw)return Fh;zw=1,Object.defineProperty(Fh,"__esModule",{value:!0});const e=nl.__importDefault(_A());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,_,E,b;let T=null,N=null,P=null,A=m.status,L=m.statusText;if(m.ok){if(this.method!=="HEAD"){const se=await m.text();se===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?N=se:N=JSON.parse(se))}const G=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),W=(E=m.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");G&&W&&W.length>1&&(P=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(T={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,P=null,A=406,L="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const G=await m.text();try{T=JSON.parse(G),Array.isArray(T)&&m.status===404&&(N=[],T=null,A=200,L="OK")}catch{m.status===404&&G===""?(A=204,L="No Content"):T={message:G}}if(T&&this.isMaybeSingle&&(!((b=T?.details)===null||b===void 0)&&b.includes("0 rows"))&&(T=null,A=200,L="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:N,count:P,status:A,statusText:L}});return this.shouldThrowOnError||(d=d.catch(m=>{var g,_,E;return{error:{message:`${(g=m?.name)!==null&&g!==void 0?g:"FetchError"}: ${m?.message}`,details:`${(_=m?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(E=m?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Fh.default=t,Fh}var Bw;function EA(){if(Bw)return Hh;Bw=1,Object.defineProperty(Hh,"__esModule",{value:!0});const e=nl.__importDefault(vA());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:m=d}={}){const g=m?`${m}.order`:"order",_=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${_?`${_},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const m=typeof d>"u"?"offset":`${d}.offset`,g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:m=!1,format:g="text"}={}){var _;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,m?"wal":null].filter(Boolean).join("|"),b=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${E};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Hh.default=t,Hh}var qw;function Ey(){if(qw)return qh;qw=1,Object.defineProperty(qh,"__esModule",{value:!0});const e=nl.__importDefault(EA()),t=new RegExp("[,()]");class r extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(m=>typeof m=="string"&&t.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const _=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${g}fts${_}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return qh.default=r,qh}var Hw;function wA(){if(Hw)return Bh;Hw=1,Object.defineProperty(Bh,"__esModule",{value:!0});const e=nl.__importDefault(Ey());class t{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,l){const{head:c=!1,count:d}=l??{},m=c?"HEAD":"GET";let g=!1;const _=(a??"*").split("").map(E=>/\s/.test(E)&&!g?"":(E==='"'&&(g=!g),E)).join("");return this.url.searchParams.set("select",_),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(g.length>0){const _=[...new Set(g)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:m=!0}={}){var g;const _="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((b,T)=>b.concat(Object.keys(T)),[]);if(E.length>0){const b=[...new Set(E)].map(T=>`"${T}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Bh.default=t,Bh}var Fw;function IP(){if(Fw)return zh;Fw=1,Object.defineProperty(zh,"__esModule",{value:!0});const i=nl,e=i.__importDefault(wA()),t=i.__importDefault(Ey());class r{constructor(l,{headers:c={},schema:d,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=m}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:m=!1,count:g}={}){var _;let E;const b=new URL(`${this.url}/rpc/${l}`);let T;d||m?(E=d?"HEAD":"GET",Object.entries(c).filter(([P,A])=>A!==void 0).map(([P,A])=>[P,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([P,A])=>{b.searchParams.append(P,A)})):(E="POST",T=c);const N=new Headers(this.headers);return g&&N.set("Prefer",`count=${g}`),new t.default({method:E,url:b,headers:N,schema:this.schemaName,body:T,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return zh.default=r,zh}var $w;function OP(){if($w)return an;$w=1,Object.defineProperty(an,"__esModule",{value:!0}),an.PostgrestError=an.PostgrestBuilder=an.PostgrestTransformBuilder=an.PostgrestFilterBuilder=an.PostgrestQueryBuilder=an.PostgrestClient=void 0;const i=nl,e=i.__importDefault(IP());an.PostgrestClient=e.default;const t=i.__importDefault(wA());an.PostgrestQueryBuilder=t.default;const r=i.__importDefault(Ey());an.PostgrestFilterBuilder=r.default;const a=i.__importDefault(EA());an.PostgrestTransformBuilder=a.default;const l=i.__importDefault(vA());an.PostgrestBuilder=l.default;const c=i.__importDefault(_A());return an.PostgrestError=c.default,an.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},an}var bA=OP();const TA=_1(bA),NP=y1({__proto__:null,default:TA},[bA]),{PostgrestClient:DP,PostgrestQueryBuilder:aj,PostgrestFilterBuilder:oj,PostgrestTransformBuilder:lj,PostgrestBuilder:uj,PostgrestError:cj}=TA||NP;class kP{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const xP="2.81.1",PP=`realtime-js/${xP}`,SA="1.0.0",MP="2.0.0",Gw=SA,cp=1e4,UP=1e3,jP=100;var ca;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ca||(ca={}));var Lt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Lt||(Lt={}));var Gn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Gn||(Gn={}));var hp;(function(i){i.websocket="websocket"})(hp||(hp={}));var ha;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(ha||(ha={}));class VP{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:t,ref:r,event:a,topic:l,payload:c}=e,d=this.META_LENGTH+t.length+r.length+l.length+a.length,m=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(m),_=0;g.setUint8(_++,this.KINDS.push),g.setUint8(_++,t.length),g.setUint8(_++,r.length),g.setUint8(_++,l.length),g.setUint8(_++,a.length),Array.from(t,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(r,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(l,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(a,b=>g.setUint8(_++,b.charCodeAt(0)));var E=new Uint8Array(m.byteLength+c.byteLength);return E.set(new Uint8Array(m),0),E.set(new Uint8Array(c),m.byteLength),E.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const{join_ref:a,ref:l,topic:c}=e,d=e.payload.event,m=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+d.length,_=new ArrayBuffer(this.HEADER_LENGTH+g);let E=new DataView(_),b=0;E.setUint8(b++,this.KINDS.userBroadcastPush),E.setUint8(b++,a.length),E.setUint8(b++,l.length),E.setUint8(b++,c.length),E.setUint8(b++,d.length),E.setUint8(b++,this.BINARY_ENCODING),Array.from(a,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(l,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(c,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(d,N=>E.setUint8(b++,N.charCodeAt(0)));var T=new Uint8Array(_.byteLength+m.byteLength);return T.set(new Uint8Array(_),0),T.set(new Uint8Array(m),_.byteLength),T.buffer}_encodeJsonUserBroadcastPush(e){var t,r;const{join_ref:a,ref:l,topic:c}=e,d=e.payload.event,m=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},_=new TextEncoder().encode(JSON.stringify(m)).buffer,E=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+d.length,b=new ArrayBuffer(this.HEADER_LENGTH+E);let T=new DataView(b),N=0;T.setUint8(N++,this.KINDS.userBroadcastPush),T.setUint8(N++,a.length),T.setUint8(N++,l.length),T.setUint8(N++,c.length),T.setUint8(N++,d.length),T.setUint8(N++,this.JSON_ENCODING),Array.from(a,A=>T.setUint8(N++,A.charCodeAt(0))),Array.from(l,A=>T.setUint8(N++,A.charCodeAt(0))),Array.from(c,A=>T.setUint8(N++,A.charCodeAt(0))),Array.from(d,A=>T.setUint8(N++,A.charCodeAt(0)));var P=new Uint8Array(b.byteLength+_.byteLength);return P.set(new Uint8Array(b),0),P.set(new Uint8Array(_),b.byteLength),P.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,d,m]=r;return t({join_ref:a,ref:l,topic:c,event:d,payload:m})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,a);case this.KINDS.reply:return this._decodeReply(e,t,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodePush(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3);let d=this.HEADER_LENGTH+this.META_LENGTH-1;const m=r.decode(e.slice(d,d+a));d=d+a;const g=r.decode(e.slice(d,d+l));d=d+l;const _=r.decode(e.slice(d,d+c));d=d+c;const E=JSON.parse(r.decode(e.slice(d,e.byteLength)));return{join_ref:m,ref:null,topic:g,event:_,payload:E}}_decodeReply(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),d=t.getUint8(4);let m=this.HEADER_LENGTH+this.META_LENGTH;const g=r.decode(e.slice(m,m+a));m=m+a;const _=r.decode(e.slice(m,m+l));m=m+l;const E=r.decode(e.slice(m,m+c));m=m+c;const b=r.decode(e.slice(m,m+d));m=m+d;const T=JSON.parse(r.decode(e.slice(m,e.byteLength))),N={status:b,response:T};return{join_ref:g,ref:_,topic:E,event:Gn.reply,payload:N}}_decodeBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2);let c=this.HEADER_LENGTH+2;const d=r.decode(e.slice(c,c+a));c=c+a;const m=r.decode(e.slice(c,c+l));c=c+l;const g=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{join_ref:null,ref:null,topic:d,event:m,payload:g}}_decodeUserBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),d=t.getUint8(4);let m=this.HEADER_LENGTH+4;const g=r.decode(e.slice(m,m+a));m=m+a;const _=r.decode(e.slice(m,m+l));m=m+l;const E=r.decode(e.slice(m,m+c));m=m+c;const b=e.slice(m,e.byteLength),T=d===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,N={type:this.BROADCAST,event:_,payload:T};return c>0&&(N.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class AA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(rt||(rt={}));const Kw=(i,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=LP(c,i,e,a),l),{}):{}},LP=(i,e,t,r)=>{const a=e.find(d=>d.name===i),l=a?.type,c=t[i];return l&&!r.includes(l)?RA(l,c):dp(c)},RA=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return HP(e,t)}switch(i){case rt.bool:return zP(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return BP(e);case rt.json:case rt.jsonb:return qP(e);case rt.timestamp:return FP(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return dp(e);default:return dp(e)}},dp=i=>i,zP=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},BP=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},qP=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},HP=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let l;const c=i.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>RA(e,d))}return i},FP=i=>typeof i=="string"?i.replace(" ","T"):i,CA=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Rg{constructor(e,t,r={},a=cp){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qw;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Qw||(Qw={}));class Au{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Au.syncState(this.state,a,l,c),this.pendingDiffs.forEach(m=>{this.state=Au.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Au.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const l=this.cloneDeep(e),c=this.transformState(t),d={},m={};return this.map(l,(g,_)=>{c[g]||(m[g]=_)}),this.map(c,(g,_)=>{const E=l[g];if(E){const b=_.map(A=>A.presence_ref),T=E.map(A=>A.presence_ref),N=_.filter(A=>T.indexOf(A.presence_ref)<0),P=E.filter(A=>b.indexOf(A.presence_ref)<0);N.length>0&&(d[g]=N),P.length>0&&(m[g]=P)}else d[g]=_}),this.syncDiff(l,{joins:d,leaves:m},r,a)}static syncDiff(e,t,r,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(d,m)=>{var g;const _=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(m),_.length>0){const E=e[d].map(T=>T.presence_ref),b=_.filter(T=>E.indexOf(T.presence_ref)<0);e[d].unshift(...b)}r(d,_,m)}),this.map(c,(d,m)=>{let g=e[d];if(!g)return;const _=m.map(E=>E.presence_ref);g=g.filter(E=>_.indexOf(E.presence_ref)<0),e[d]=g,a(d,g,m),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yw;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Yw||(Yw={}));var Ru;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Ru||(Ru={}));var mi;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(mi||(mi={}));class wy{constructor(e,t={config:{}},r){var a,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rg(this,Gn.join,this.params,this.timeout),this.rejoinTimer=new AA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gn.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Au(this),this.broadcastEndpointURL=CA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:c,presence:d,private:m}}=this.params,g=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&a!==void 0?a:[],_=!!this.bindings[Ru.PRESENCE]&&this.bindings[Ru.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},b={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:_}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(T=>e?.(mi.CHANNEL_ERROR,T)),this._onClose(()=>e?.(mi.CLOSED)),this.updateJoinPayload(Object.assign({config:b},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:T})=>{var N;if(this.socket.setAuth(),T===void 0){e?.(mi.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,A=(N=P?.length)!==null&&N!==void 0?N:0,L=[];for(let K=0;K<A;K++){const G=P[K],{filter:{event:W,schema:se,table:ue,filter:I}}=G,C=T&&T[K];if(C&&C.event===W&&C.schema===se&&C.table===ue&&C.filter===I)L.push(Object.assign(Object.assign({},G),{id:C.id}));else{this.unsubscribe(),this.state=Lt.errored,e?.(mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(mi.SUBSCRIBED);return}}).receive("error",T=>{this.state=Lt.errored,e?.(mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e?.(mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Lt.joined&&e===Ru.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const g=await d.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,m;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Lt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Rg(this,Gn.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Rg(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>jP){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:m,leave:g,join:_}=Gn;if(r&&[d,m,g,_].indexOf(c)>=0&&r!==this._joinRef())return;let b=this._onMessage(c,t,r);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var N,P,A;return((N=T.filter)===null||N===void 0?void 0:N.event)==="*"||((A=(P=T.filter)===null||P===void 0?void 0:P.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===c}).map(T=>T.callback(b,r)):(l=this.bindings[c])===null||l===void 0||l.filter(T=>{var N,P,A,L,K,G;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const W=T.id,se=(N=T.filter)===null||N===void 0?void 0:N.event;return W&&((P=t.ids)===null||P===void 0?void 0:P.includes(W))&&(se==="*"||se?.toLocaleLowerCase()===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const W=(K=(L=T?.filter)===null||L===void 0?void 0:L.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return W==="*"||W===((G=t?.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:P,table:A,commit_timestamp:L,type:K,errors:G}=N;b=Object.assign(Object.assign({},{schema:P,table:A,commit_timestamp:L,eventType:K,new:{},old:{},errors:G}),this._getPayloadRecords(N))}T.callback(b,r)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&wy.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gn.close,{},e)}_onError(e){this._on(Gn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Kw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Kw(e.columns,e.old_record)),t}}const Cg=()=>{},Gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$P=[1e3,2e3,5e3,1e4],GP=1e4,KP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class QP{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cp,this.transport=null,this.heartbeatIntervalMs=Gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cg,this.ref=0,this.reconnectTimer=null,this.vsn=Gw,this.logger=Cg,this.conn=null,this.sendBuffer=[],this.serializer=new VP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${hp.websocket}`,this.httpEndpoint=CA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kP.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ca.connecting:return ha.Connecting;case ca.open:return ha.Open;case ca.closing:return ha.Closing;default:return ha.Closed}}isConnected(){return this.connectionState()===ha.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new wy(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${t} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(UP,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=t,d=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${r} ${a} ${d}`.trim(),l),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ca.open||this.conn.readyState===ca.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([KP],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:PP};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Gn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new AA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,l,c,d,m,g,_,E,b,T;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:cp,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Gh.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Cg,this.vsn=(m=e?.vsn)!==null&&m!==void 0?m:Gw,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:(N=>$P[N-1]||GP),this.vsn){case SA:this.encode=(_=e?.encode)!==null&&_!==void 0?_:((N,P)=>P(JSON.stringify(N))),this.decode=(E=e?.decode)!==null&&E!==void 0?E:((N,P)=>P(JSON.parse(N)));break;case MP:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(T=e?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class by extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class YP extends by{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fp extends by{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ty=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),JP=()=>Response,mp=i=>{if(Array.isArray(i))return i.map(t=>mp(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=mp(r)}),e},WP=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Ig=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},XP=(i,e,t)=>me(void 0,void 0,void 0,function*(){const r=yield JP();i instanceof r&&!t?.noResolveJson?i.json().then(a=>{const l=i.status||500,c=a?.statusCode||l+"";e(new YP(Ig(a),l,c))}).catch(a=>{e(new fp(Ig(a),a))}):e(new fp(Ig(i),i))}),ZP=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"||!r?a:(WP(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function nc(i,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,d)=>{i(t,ZP(e,r,a,l)).then(m=>{if(!m.ok)throw m;return r?.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>XP(m,d,r))})})}function Bu(i,e,t,r){return me(this,void 0,void 0,function*(){return nc(i,"GET",e,t,r)})}function hr(i,e,t,r,a){return me(this,void 0,void 0,function*(){return nc(i,"POST",e,r,a,t)})}function gp(i,e,t,r,a){return me(this,void 0,void 0,function*(){return nc(i,"PUT",e,r,a,t)})}function eM(i,e,t,r){return me(this,void 0,void 0,function*(){return nc(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Sy(i,e,t,r,a){return me(this,void 0,void 0,function*(){return nc(i,"DELETE",e,r,a,t)})}class tM{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return me(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}})}}var IA;class nM{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[IA]="BlobDownloadBuilder",this.promise=null}asStream(){return new tM(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return me(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dt(e))return{data:null,error:e};throw e}})}}IA=Symbol.toStringTag;const rM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iM{constructor(e,t={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ty(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,a){return me(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Jw),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,m&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const g=this._removeEmptyFolders(t),_=this._getFinalPath(g),E=yield(e=="PUT"?gp:hr)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return me(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",t);try{let m;const g=Object.assign({upsert:Jw.upsert},a),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",g.cacheControl)):(m=r,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType);const E=yield gp(this.fetch,d.toString(),m,{headers:_});return{data:{path:l,fullPath:E.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(dt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const l=yield hr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new by("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}copy(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield hr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const a=yield hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(e),m=()=>Bu(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new nM(m,this.shouldThrowOnError)}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Bu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:mp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield eM(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r)&&r instanceof fp){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const d=typeof t?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(t?.transform||{});m!==""&&a.push(m);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${g}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},rM),t),{prefix:e||""});return{data:yield hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const OA="2.81.1",NA={"X-Client-Info":`storage-js/${OA}`};class sM{constructor(e,t={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NA),t),this.fetch=Ty(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Bu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Bu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}createBucket(e){return me(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class aM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NA),t),this.fetch=Ty(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Bu(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Sy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}}const Ay={"X-Client-Info":`storage-js/${OA}`,"Content-Type":"application/json"};class DA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Dn(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class Og extends DA{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oM extends DA{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Ww;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ww||(Ww={}));const Ry=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),lM=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Xw=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),uM=(i,e,t)=>me(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const a=i.status||500,l=i;if(typeof l.json=="function")l.json().then(c=>{const d=c?.statusCode||c?.code||a+"";e(new Og(Xw(c),a,d))}).catch(()=>{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Og(d,a,c))});else{const c=a+"",d=l.statusText||`HTTP ${a} error`;e(new Og(d,a,c))}}else e(new oM(Xw(i),i))}),cM=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return r?(lM(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),t)):a};function hM(i,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,d)=>{i(t,cM(e,r,a,l)).then(m=>{if(!m.ok)throw m;if(r?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>c(m)).catch(m=>uM(m,d,r))})})}function kn(i,e,t,r,a){return me(this,void 0,void 0,function*(){return hM(i,"POST",e,r,a,t)})}class dM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ay),t),this.fetch=Ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}listIndexes(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}}class fM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ay),t),this.fetch=Ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return me(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}listVectors(e){return me(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield kn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}queryVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return me(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}class mM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ay),t),this.fetch=Ry(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}listBuckets(){return me(this,arguments,void 0,function*(e={}){try{return{data:yield kn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}class gM extends mM{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new pM(this.url,this.headers,e,this.fetch)}}class pM extends dM{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return me(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return me(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return me(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return me(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new yM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class yM extends fM{constructor(e,t,r,a,l){super(e,t,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return me(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return me(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return me(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return me(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return me(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class _M extends sM{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new iM(this.url,this.headers,e,this.fetch)}get vectors(){return new gM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aM(this.url+"/iceberg",this.headers,this.fetch)}}const vM="2.81.1";let yu="";typeof Deno<"u"?yu="deno":typeof document<"u"?yu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yu="react-native":yu="node";const EM={"X-Client-Info":`supabase-js-${yu}/${vM}`},wM={headers:EM},bM={schema:"public"},TM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SM={},AM=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),RM=()=>Headers,CM=(i,e,t)=>{const r=AM(t),a=RM();return async(l,c)=>{var d;const m=(d=await e())!==null&&d!==void 0?d:i;let g=new a(c?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),r(l,Object.assign(Object.assign({},c),{headers:g}))}};function IM(i){return i.endsWith("/")?i:i+"/"}function OM(i,e){var t,r;const{db:a,auth:l,realtime:c,global:d}=i,{db:m,auth:g,realtime:_,global:E}=e,b={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},_),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),d),{headers:Object.assign(Object.assign({},(t=E?.headers)!==null&&t!==void 0?t:{}),(r=d?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function NM(i){const e=i?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IM(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const kA="2.81.1",Co=30*1e3,pp=3,Ng=pp*Co,DM="http://localhost:9999",kM="supabase.auth.token",xM={"X-Client-Info":`gotrue-js/${kA}`},yp="X-Supabase-Api-Version",xA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MM=600*1e3;class qu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function pe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class UM extends qu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function jM(i){return pe(i)&&i.name==="AuthApiError"}class da extends qu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cs extends qu{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class ur extends Cs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function VM(i){return pe(i)&&i.name==="AuthSessionMissingError"}class _o extends Cs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kh extends Cs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qh extends Cs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LM(i){return pe(i)&&i.name==="AuthImplicitGrantRedirectError"}class Zw extends Cs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _p extends Cs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Dg(i){return pe(i)&&i.name==="AuthRetryableFetchError"}class eb extends Cs{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class vp extends Cs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tb=` 	
\r=`.split(""),zM=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<tb.length;e+=1)i[tb[e].charCodeAt(0)]=-2;for(let e=0;e<Nd.length;e+=1)i[Nd[e].charCodeAt(0)]=e;return i})();function nb(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Nd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Nd[r]),e.queuedBits-=6}}function PA(i,e,t){const r=zM[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function rb(i){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{HM(c,r,t)};for(let c=0;c<i.length;c+=1)PA(i.charCodeAt(c),a,l);return e.join("")}function BM(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function qM(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}BM(r,e)}}function HM(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Po(i){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<i.length;a+=1)PA(i.charCodeAt(a),t,r);return new Uint8Array(e)}function FM(i){const e=[];return qM(i,t=>e.push(t)),new Uint8Array(e)}function ma(i){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return i.forEach(a=>nb(a,t,r)),nb(null,t,r),e.join("")}function $M(i){return Math.round(Date.now()/1e3)+i}function GM(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",aa={tested:!1,writable:!1},MA=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(aa.tested)return aa.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),aa.tested=!0,aa.writable=!0}catch{aa.tested=!0,aa.writable=!1}return aa.writable};function KM(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const UA=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),QM=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Io=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},oa=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ss=async(i,e)=>{await i.removeItem(e)};class ef{constructor(){this.promise=new ef.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ef.promiseConstructor=Promise;function kg(i){const e=i.split(".");if(e.length!==3)throw new vp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!PM.test(e[r]))throw new vp("JWT not in base64url format");return{header:JSON.parse(rb(e[0])),payload:JSON.parse(rb(e[1])),signature:Po(e[2]),raw:{header:e[0],payload:e[1]}}}async function YM(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function JM(i,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await i(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function WM(i){return("0"+i.toString(16)).substr(-2)}function XM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,WM).join("")}async function ZM(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function eU(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await ZM(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(i,e,t=!1){const r=XM();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await Io(i,`${e}-code-verifier`,a);const l=await eU(r);return[l,r===l?"plain":"s256"]}const tU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nU(i){const e=i.headers.get(yp);if(!e||!e.match(tU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function rU(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function iU(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Eo(i){if(!sU.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xg(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aU(i,e){return new Proxy(i,{get:(t,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,a)}})}function ib(i){return JSON.parse(JSON.stringify(i))}const ua=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),oU=[502,503,504];async function sb(i){var e;if(!QM(i))throw new _p(ua(i),0);if(oU.includes(i.status))throw new _p(ua(i),i.status);let t;try{t=await i.json()}catch(l){throw new da(ua(l),l)}let r;const a=nU(i);if(a&&a.getTime()>=xA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new eb(ua(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ur}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new eb(ua(t),i.status,t.weak_password.reasons);throw new UM(ua(t),i.status||500,r)}const lU=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function Te(i,e,t,r){var a;const l=Object.assign({},r?.headers);l[yp]||(l[yp]=xA["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(c.redirect_to=r.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await uU(i,e,t+d,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(m):{data:Object.assign({},m),error:null}}async function uU(i,e,t,r,a,l){const c=lU(e,r,a,l);let d;try{d=await i(t,Object.assign({},c))}catch(m){throw console.error(m),new _p(ua(m),0)}if(d.ok||await sb(d),r?.noResolveJson)return d;try{return await d.json()}catch(m){await sb(m)}}function cr(i){var e;let t=null;dU(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=$M(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function ab(i){const e=cr(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function hs(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function cU(i){return{data:i,error:null}}function hU(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l}=i,c=tl(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l},m=Object.assign({},c);return{data:{properties:d,user:m},error:null}}function ob(i){return i}function dU(i){return i.access_token&&i.refresh_token&&i.expires_in}const Pg=["global","local","others"];class fU{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=UA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Pg[0]){if(Pg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pg.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=tl(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:hU,redirectTo:t?.redirectTo})}catch(t){if(pe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hs})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,l,c,d,m;try{const g={nextPage:null,lastPage:0,total:0},_=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:ob});if(_.error)throw _.error;const E=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(m=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(N=>{const P=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);g[`${A}Page`]=P}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(pe(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Eo(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hs})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Eo(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Eo(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Eo(e.userId);try{const{data:t,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Eo(e.userId),Eo(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,a,l,c,d,m;try{const g={nextPage:null,lastPage:0,total:0},_=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:ob});if(_.error)throw _.error;const E=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(m=(d=_.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(N=>{const P=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);g[`${A}Page`]=P}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(pe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}}function lb(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const wo={debug:!!(globalThis&&MA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mU extends jA{}async function gU(i,e,t){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await t()}finally{wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new mU(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(wo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function pU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function VA(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function yU(i){return parseInt(i,16)}function _U(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function vU(i){var e;const{chainId:t,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:m,resources:g,scheme:_,uri:E,version:b}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const T=VA(i.address),N=_?`${_}://${r}`:r,P=i.statement?`${i.statement}
`:"",A=`${N} wants you to sign in with your Ethereum account:
${T}

${P}`;let L=`URI: ${E}
Version: ${b}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(L+=`
Expiration Time: ${a.toISOString()}`),d&&(L+=`
Not Before: ${d.toISOString()}`),m&&(L+=`
Request ID: ${m}`),g){let K=`
Resources:`;for(const G of g){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);K+=`
- ${G}`}L+=K}return`${A}
${L}`}class xt extends Error{constructor({message:e,code:t,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Dd extends xt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function EU({error:i,options:e}){var t,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new xt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(LA(c)){if(l.rp.id!==c)return new xt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function wU({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new xt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(LA(r)){if(t.rpId!==r)return new xt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class bU{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const TU=new bU;function SU(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:r}=i,a=tl(i,["challenge","user","excludeCredentials"]),l=Po(e).buffer,c=Object.assign(Object.assign({},t),{id:Po(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const g=r[m];d.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Po(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function AU(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,r=tl(i,["challenge","allowCredentials"]),a=Po(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const d=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:Po(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function RU(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:ma(new Uint8Array(i.response.attestationObject)),clientDataJSON:ma(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function CU(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,r=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:ma(new Uint8Array(a.authenticatorData)),clientDataJSON:ma(new Uint8Array(a.clientDataJSON)),signature:ma(new Uint8Array(a.signature)),userHandle:a.userHandle?ma(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function LA(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function ub(){var i,e;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function IU(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:EU({error:e,options:i})}}}async function OU(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:wU({error:e,options:i})}}}const NU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kd(...i){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of i)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const d=r[l];e(d)?r[l]=kd(d,c):r[l]=kd(c)}else r[l]=c}return r}function kU(i,e){return kd(NU,i,e||{})}function xU(i,e){return kd(DU,i,e||{})}class PU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:a},l){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:d};const m=a??TU.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=kU(c.webauthn.credential_options.publicKey,l?.create),{data:_,error:E}=await IU({publicKey:g,signal:m});return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}case"request":{const g=xU(c.webauthn.credential_options.publicKey,l?.request),{data:_,error:E}=await OU(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:m}));return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new qu("rpId is required for WebAuthn authentication")};try{if(!ub())return{data:null,error:new da("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:m}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:m.type,rpId:t,rpOrigins:r,credential_response:m.credential_response}})}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new qu("rpId is required for WebAuthn registration")};try{if(!ub())return{data:null,error:new da("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(_=>{var E;return(E=_.data)===null||E===void 0?void 0:E.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:d};const{data:m,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:a},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:t,rpOrigins:r,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new da("Unexpected error in register",c)}}}}pU();const MU={url:DM,storageKey:kM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cb(i,e,t){return await t()}const bo={};class Hu{get jwks(){var e,t;return(t=(e=bo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=bo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},MU),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Hu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Hu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Zt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new fU({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=UA(l.fetch),this.lock=l.lock||cb,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Zt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=gU:this.lock=cb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:MA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lb(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=lb(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${kA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(Zt()&&(t=KM(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Zt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),LM(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return pe(t)?this._returnResult({error:t}):this._returnResult({error:new da("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:cr}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,a;try{let l;if("email"in e){const{email:_,password:E,options:b}=e;let T=null,N=null;this.flowType==="pkce"&&([T,N]=await vo(this.storage,this.storageKey)),l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:_,password:E,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:T,code_challenge_method:N},xform:cr})}else if("phone"in e){const{phone:_,password:E,options:b}=e;l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:E,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:cr})}else throw new Kh("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:d}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:ab})}else if("phone"in e){const{phone:l,password:c,options:d}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:ab})}else throw new Kh("You must provide either an email or phone number and a password");const{data:r,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new _o;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,a,l,c,d,m,g,_,E,b;let T,N;if("message"in e)T=e.message,N=e.signature;else{const{chain:P,wallet:A,statement:L,options:K}=e;let G;if(Zt())if(typeof A=="object")G=A;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")G=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=A}const W=new URL((t=K?.url)!==null&&t!==void 0?t:window.location.href),se=await G.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!se||se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ue=VA(se[0]);let I=(r=K?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const O=await G.request({method:"eth_chainId"});I=yU(O)}const C={domain:W.host,address:ue,statement:L,uri:W.href,version:"1",chainId:I,nonce:(a=K?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=K?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=K?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=K?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=K?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(_=K?.signInWithEthereum)===null||_===void 0?void 0:_.resources};T=vU(C),N=await G.request({method:"personal_sign",params:[_U(T),ue]})}try{const{data:P,error:A}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:N},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:cr});if(A)throw A;if(!P||!P.session||!P.user){const L=new _o;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:A})}catch(P){if(pe(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var t,r,a,l,c,d,m,g,_,E,b,T;let N,P;if("message"in e)N=e.message,P=e.signature;else{const{chain:A,wallet:L,statement:K,options:G}=e;let W;if(Zt())if(typeof L=="object")W=L;else{const ue=window;if("solana"in ue&&typeof ue.solana=="object"&&("signIn"in ue.solana&&typeof ue.solana.signIn=="function"||"signMessage"in ue.solana&&typeof ue.solana.signMessage=="function"))W=ue.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!G?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=L}const se=new URL((t=G?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in W&&W.signIn){const ue=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G?.signInWithSolana),{version:"1",domain:se.host,uri:se.href}),K?{statement:K}:null));let I;if(Array.isArray(ue)&&ue[0]&&typeof ue[0]=="object")I=ue[0];else if(ue&&typeof ue=="object"&&"signedMessage"in ue&&"signature"in ue)I=ue;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)N=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),P=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${se.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${se.href}`,`Issued At: ${(a=(r=G?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=G?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((c=G?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((d=G?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((m=G?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((g=G?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((E=(_=G?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||E===void 0)&&E.length?["Resources",...G.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const ue=await W.signMessage(new TextEncoder().encode(N),"utf8");if(!ue||!(ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=ue}}try{const{data:A,error:L}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:ma(P)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:cr});if(L)throw L;if(!A||!A.session||!A.user){const K=new _o;return this._returnResult({data:{user:null,session:null},error:K})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:L})}catch(A){if(pe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const t=await oa(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:l,error:c}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:cr});if(await ss(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new _o;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:l,nonce:c}=e,d=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:cr}),{data:m,error:g}=d;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const _=new _o;return this._returnResult({data:{user:null,session:null},error:_})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,a,l,c;try{if("email"in e){const{email:d,options:m}=e;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await vo(this.storage,this.storageKey));const{error:E}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=m?.data)!==null&&t!==void 0?t:{},create_user:(r=m?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:_},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:d,options:m}=e,{data:g,error:_}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:_})}throw new Kh("You must provide either an email or phone number.")}catch(d){if(pe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,r;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:d}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:cr});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,g=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,r,a,l,c;try{let d=null,m=null;this.flowType==="pkce"&&([d,m]=await vo(this.storage,this.storageKey));const g=await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:m}),headers:this.headers,xform:cU});return!((l=g.data)===null||l===void 0)&&l.url&&Zt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(d){if(pe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ur;const{error:a}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:d}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Kh("You must provide either an email or phone number and a type")}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ng:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await oa(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=xg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=aU(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hs}):await this._useSession(async t=>{var r,a,l;const{data:c,error:d}=t;if(d)throw d;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ur}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:hs})})}catch(t){if(pe(t))return VM(t)&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new ur;const c=a.session;let d=null,m=null;this.flowType==="pkce"&&e.email!=null&&([d,m]=await vo(this.storage,this.storageKey));const{data:g,error:_}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:m}),jwt:c.access_token,xform:hs});if(_)throw _;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(pe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ur;const t=Date.now()/1e3;let r=t,a=!0,l=null;const{payload:c}=kg(e.access_token);if(c.exp&&(r=c.exp,a=r<=t),a){const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(pe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:d}=t;if(d)throw d;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ur;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Zt())throw new Qh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Zw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zw("No code detected.");const{data:K,error:G}=await this._exchangeCodeForSession(e.code);if(G)throw G;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:m,token_type:g}=e;if(!l||!d||!c||!g)throw new Qh("No session defined in URL");const _=Math.round(Date.now()/1e3),E=parseInt(d);let b=_+E;m&&(b=parseInt(m));const T=b-_;T*1e3<=Co&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${E}s`);const N=b-E;_-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,_):_-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,_);const{data:P,error:A}=await this._getUser(l);if(A)throw A;const L={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:b,refresh_token:c,token_type:g,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(r){if(pe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(jM(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=GM(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await vo(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(pe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:a}=await this._useSession(async l=>{var c,d,m,g,_;const{data:E,error:b}=l;if(b)throw b;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",T,{headers:this.headers,jwt:(_=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return Zt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(pe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:d,token:m,access_token:g,nonce:_}=e,E=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:m,access_token:g,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:cr}),{data:b,error:T}=E;return T?this._returnResult({data:{user:null,session:null},error:T}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new _o}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:T}))}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)throw c;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await JM(async a=>(a>0&&await YM(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Dg(l)&&Date.now()+c-r<Co})}catch(r){if(this._debug(t,"error",r),pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Zt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await oa(this.storage,this.storageKey);if(a&&this.userStorage){let c=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Io(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:xg()}else if(a&&!a.user&&!a.user){const c=await oa(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await ss(this.storage,this.storageKey+"-user"),await Io(this.storage,this.storageKey,a)):a.user=xg()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ng;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Ng}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Dg(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ef;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new ur;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),pe(l)){const c={data:null,error:l};return Dg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Io(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=ib(a);await Io(this.storage,this.storageKey,l)}else{const a=ib(t);await Io(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ss(this.storage,this.storageKey),await ss(this.storage,this.storageKey+"-code-verifier"),await ss(this.storage,this.storageKey+"-user"),this.userStorage&&await ss(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Co);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Co);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Co}ms, refresh threshold is ${pp} ticks`),a<=pp&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await vo(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:g}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&m.type==="totp"&&(!((a=m?.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?RU(e.webauthn.credential_response):CU(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:m}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:m}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:SU(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:AU(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=kg(r.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ur})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new ur});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new ur});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(d=>d.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+MM>a)return r;const{data:l,error:c}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:T,error:N}=await this.getSession();if(N||!T.session)return this._returnResult({data:null,error:N});r=T.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:m}}=kg(r);t?.allowExpired||rU(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:l,header:a,signature:c},error:null}}const _=iU(a.alg),E=await crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!await crypto.subtle.verify(_,E,c,FM(`${d}.${m}`)))throw new vp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}}Hu.nextInstanceID={};const UU=Hu;class jU extends UU{constructor(e){super(e)}}class VU{constructor(e,t,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const d=NM(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const m=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:bM,realtime:SM,auth:Object.assign(Object.assign({},TM),{storageKey:m}),global:wM},_=OM(r??{},g);this.storageKey=(a=_.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(E,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=_.auth)!==null&&c!==void 0?c:{},this.headers,_.global.fetch),this.fetch=CM(t,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new DP(new URL("rest/v1",d).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new _M(this.storageUrl.href,this.headers,this.fetch,r?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new CP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:d,lock:m,debug:g,throwOnError:_},E,b){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jU({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,flowType:d,lock:m,debug:g,throwOnError:_,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new QP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LU=(i,e,t)=>new VU(i,e,t);function zU(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}zU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BU="https://zcsedyougupagxksbxmq.supabase.co",qU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpjc2VkeW91Z3VwYWd4a3NieG1xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NjMyNDYsImV4cCI6MjA3ODUzOTI0Nn0.E0ElsJsAjD476SKOfPlt9Yw7AzkUqYu_G0yQ_O28rXM",on=LU(BU,qU,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storageKey:"sb-auth-token"},global:{headers:{"x-client-info":"kamaynikasyon-admin"}},realtime:{params:{eventsPerSecond:10}}}),bt={LESSONS:"lessons",QUIZZES:"quizzes",DICTIONARY:"dictionary",MINIGAMES:"minigames",MEDIA:"media"};async function rc(i,e,t,r={}){try{const{data:a,error:l}=await on.storage.from(i).upload(e,t,{cacheControl:"3600",upsert:!0,...r});if(l)throw l;return a}catch(a){throw console.error("Error uploading file:",a),a}}function HU(i,e){const{data:t}=on.storage.from(i).getPublicUrl(e);return t.publicUrl}async function tf(i,e){try{const{data:t,error:r}=await on.storage.from(i).download(e);if(r)throw r;return await t.text()}catch(t){throw console.error("Error downloading file:",t),t}}async function nf(i,e=""){try{const{data:t,error:r}=await on.storage.from(i).list(e);if(r)throw r;return t}catch(t){throw console.error("Error listing files:",t),t}}async function rf(i,e){try{const{data:t,error:r}=await on.storage.from(i).remove([e]);if(r)throw r;return t}catch(t){throw console.error("Error deleting file:",t),t}}const zA=q.createContext(null);function FU({children:i}){const[e,t]=q.useState(!1),[r,a]=q.useState(""),[l,c]=q.useState(!0);q.useEffect(()=>{let E=!0,b=null;b=setTimeout(()=>{E&&(console.warn("Auth check timeout - proceeding without authentication"),c(!1))},5e3),(async()=>{try{const{data:{session:P},error:A}=await on.auth.getSession();if(!E)return;if(A){console.warn("Session check error:",A),b&&clearTimeout(b),c(!1);return}if(P?.user){const L=d(P.user.email),K=new Promise((G,W)=>setTimeout(()=>W(new Error("Admin check timeout")),3e3));try{const G=await Promise.race([L,K]);if(!E)return;G?(t(!0),a(P.user.email||"")):await on.auth.signOut()}catch(G){console.warn("Admin check failed or timed out:",G),E&&await on.auth.signOut()}}}catch(P){console.error("Auth initialization error:",P)}finally{b&&clearTimeout(b),E&&c(!1)}})();const{data:{subscription:N}}=on.auth.onAuthStateChange(async(P,A)=>{if(E){if(P==="SIGNED_IN"&&A?.user)try{const L=await d(A.user.email);if(!E)return;if(L)t(!0),a(A.user.email||"");else throw await on.auth.signOut(),new Error("Not authorized: this account is not in the admin allowlist")}catch(L){console.error("Auth state change error:",L)}else P==="SIGNED_OUT"&&(t(!1),a(""));E&&c(!1)}});return()=>{E=!1,b&&clearTimeout(b),N.unsubscribe()}},[]);const d=async E=>{if(!E)return!1;const b=E.toLowerCase().trim();try{const{data:T,error:N}=await on.from("admins").select("email").ilike("email",b).limit(1).maybeSingle();if(N){if(N.code==="42501"||N.message?.includes("row-level security"))throw console.error("RLS Policy Error: The admins table needs a SELECT policy for authenticated users."),console.error("Go to Supabase Dashboard > Table Editor > admins > RLS Policies"),console.error("Create a policy: SELECT for authenticated role with definition: true"),new Error("Database access denied. Please configure RLS policies for the admins table.");return console.warn("Admin check error:",N),!1}return!!T}catch(T){throw console.error("Admin allowlist check failed:",T),T}},m=async({email:E,password:b})=>{if(!E||!b)throw new Error("Email and password are required");try{const T=on.auth.signInWithPassword({email:E,password:b}),N=new Promise((W,se)=>setTimeout(()=>se(new Error("Sign in timeout: Please check your connection and try again")),1e4)),{data:P,error:A}=await Promise.race([T,N]);if(A)throw A;if(!P?.user)throw new Error("Sign in failed: No user data received");const L=d(P.user.email),K=new Promise((W,se)=>setTimeout(()=>se(new Error("Admin check timeout: Please try again")),5e3));let G;try{G=await Promise.race([L,K])}catch(W){throw await on.auth.signOut(),W}if(!G)throw await on.auth.signOut(),new Error("Not authorized: this account is not in the admin allowlist");t(!0),a(P.user.email||"")}catch(T){try{await on.auth.signOut()}catch{}throw T}},g=async()=>{await on.auth.signOut(),t(!1),a("")},_=q.useMemo(()=>({isAuthenticated:e,adminName:r,login:m,logout:g,loading:l}),[e,r,l]);return x.jsx(zA.Provider,{value:_,children:i})}function sf(){const i=q.useContext(zA);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}function $U(){const{adminName:i}=sf(),[e,t]=q.useState(""),[r,a]=q.useState(null),[l,c]=q.useState("Not authenticated"),[d,m]=q.useState(""),[g,_]=q.useState(!1);q.useEffect(()=>{if(!sa)return;const T=VN(sa,N=>{N?(c(`Authenticated as ${N.email}`),_(!1)):(c("Not authenticated"),_(!0))});return()=>T()},[]);const E=async()=>{if(!sa||!i||!d){t("Please enter your Firebase password");return}try{t("Authenticating with Firebase..."),await MN(sa,i,d),t("Firebase authentication successful!")}catch(T){console.error(T),t("Firebase auth error: "+(T?.message||"Unknown"))}},b=async()=>{if(!sa||!sa.currentUser){t("Please authenticate with Firebase first"),_(!0);return}if(!Uw){t("Firebase not configured");return}try{t("Testing Firestore"),a(null);const T=eP(Uw,"admin_healthchecks","web_admin_test");await yP(T,{ping:"ok",at:EP(),adminEmail:i,timestamp:new Date().toISOString()},{merge:!0});const N=await gP(T);a(N.exists()?N.data():null),t("Firestore OK - Connection successful!")}catch(T){console.error(T),t("Firestore error: "+(T?.message||"Unknown")),(T?.code==="permission-denied"||T?.message?.includes("permission"))&&t("Firestore error: Missing or insufficient permissions. Please check Firestore security rules.")}};return x.jsxs("div",{style:{maxWidth:"800px"},children:[x.jsx("h1",{children:" Admin Dashboard"}),x.jsx("p",{children:" Welcome to Kamaynikasyon Admin."}),x.jsxs("p",{children:["Signed in as: ",x.jsxs("strong",{children:[" ",i||"unknown"]})]}),x.jsxs("div",{style:{marginTop:"32px",padding:"20px",background:"var(--surface)",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[x.jsx("h2",{style:{marginTop:0,marginBottom:"16px"},children:"Firebase Connection"}),x.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"16px"},children:["Status: ",x.jsx("strong",{children:l})]}),g&&x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:500},children:["Firebase Password (for ",i,"):"]}),x.jsx("input",{type:"password",value:d,onChange:T=>m(T.target.value),placeholder:"Enter your Firebase password",style:{width:"100%",padding:"12px 16px",border:"2px solid var(--outline)",borderRadius:"8px",fontSize:"1rem",marginBottom:"12px"},onKeyPress:T=>{T.key==="Enter"&&E()}}),x.jsx("button",{className:"btn btn-primary",onClick:E,disabled:!d,children:"Authenticate with Firebase"})]}),x.jsx("div",{style:{marginTop:"20px"},children:x.jsx("button",{className:"btn btn-primary",onClick:b,disabled:!sa?.currentUser,children:"Test Firebase (Firestore)"})}),e&&x.jsx("div",{style:{marginTop:"16px",padding:"12px 16px",borderRadius:"8px",background:e.includes("error")||e.includes("Missing")?"rgba(244, 67, 54, 0.1)":"rgba(76, 175, 80, 0.1)",color:e.includes("error")||e.includes("Missing")?"var(--wrong)":"var(--correct)",border:`1px solid ${e.includes("error")||e.includes("Missing")?"rgba(244, 67, 54, 0.3)":"rgba(76, 175, 80, 0.3)"}`},children:e}),r&&x.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"var(--background-light)",borderRadius:"8px",border:"1px solid var(--outline)"},children:[x.jsx("h3",{style:{marginTop:0,marginBottom:"12px"},children:"Firestore Test Result:"}),x.jsx("pre",{style:{margin:0,padding:"12px",background:"var(--surface)",borderRadius:"8px",overflow:"auto",fontSize:"0.9rem",fontFamily:"monospace"},children:JSON.stringify(r,null,2)})]})]})]})}function GU(){return x.jsxs("div",{children:[x.jsx("h1",{children:"Users"}),x.jsx("p",{children:"Manage user accounts here."})]})}function af({bucket:i,onUploadComplete:e,accept:t="*/*",label:r="Upload File"}){const[a,l]=q.useState(!1),[c,d]=q.useState(0),[m,g]=q.useState(null),_=async E=>{const b=E.target.files?.[0];if(b){l(!0),g(null),d(0);try{let T=b.name;i===bt.MEDIA&&(b.type.startsWith("video/")?T=`vid/${b.name}`:b.type.startsWith("image/")&&(T=`img/${b.name}`)),await rc(i,T,b,{onUploadProgress:P=>{d(P)}});const N=HU(i,T);e&&e({path:T,url:N,name:b.name,size:b.size,type:b.type}),d(100),E.target.value=""}catch(T){g(T.message||"Upload failed"),console.error("Upload error:",T)}finally{l(!1),setTimeout(()=>d(0),2e3)}}};return x.jsxs("div",{className:"file-uploader",children:[x.jsxs("label",{className:"file-uploader__label",children:[r,x.jsx("input",{type:"file",onChange:_,accept:t,disabled:a,className:"file-uploader__input"})]}),a&&x.jsxs("div",{className:"file-uploader__progress",children:[x.jsx("progress",{value:c,max:100}),x.jsxs("span",{children:[c,"%"]})]}),m&&x.jsx("div",{className:"file-uploader__error",children:m})]})}function KU(){const[i,e]=q.useState([]),[t,r]=q.useState(!1),[a,l]=q.useState(null),[c,d]=q.useState(""),[m,g]=q.useState(null);q.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await nf(bt.LESSONS);e(A.filter(L=>L.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load lessons"),console.error("Error loading lessons:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const L=await tf(bt.LESSONS,A);d(L),l(A)}catch(L){g(L.message||"Failed to load lesson"),console.error("Error loading lesson:",L)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a lesson first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await rc(bt.LESSONS,a,A),alert("Lesson saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save lesson"),console.error("Error saving lesson:",A)}finally{r(!1)}},T=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await rf(bt.LESSONS,A),a===A&&(l(null),d("")),_()}catch(L){g(L.message||"Failed to delete lesson"),console.error("Error deleting lesson:",L)}finally{r(!1)}}},N=()=>{const A={id:`l_new_${Date.now()}`,title:"New Lesson",description:"Lesson description",difficulty:"Easy",pages:[]};d(JSON.stringify(A,null,2)),l("new_lesson.json")},P=({path:A})=>{l(A),E(A)};return x.jsxs("div",{className:"content-manager",children:[x.jsxs("div",{className:"content-manager__header",children:[x.jsx("h2",{children:"Lessons"}),x.jsxs("div",{className:"content-manager__actions",children:[x.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Lesson"}),x.jsx(af,{bucket:bt.LESSONS,onUploadComplete:P,accept:".json",label:"Upload Lesson JSON"})]})]}),m&&x.jsx("div",{className:"alert alert-error",children:m}),x.jsxs("div",{className:"content-manager__body",children:[x.jsxs("div",{className:"content-manager__sidebar",children:[x.jsx("h3",{children:"Existing Lessons"}),t&&x.jsx("p",{children:"Loading..."}),x.jsx("ul",{className:"file-list",children:i.map(A=>x.jsxs("li",{className:"file-list__item",children:[x.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),x.jsx("button",{onClick:()=>T(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),x.jsx("div",{className:"content-manager__editor",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"editor-header",children:[x.jsxs("div",{className:"editor-header__title",children:[x.jsx("h3",{children:a}),a!=="new_lesson.json"&&x.jsx("button",{onClick:()=>T(a),className:"btn btn-sm btn-danger",title:"Delete this lesson",disabled:t,children:"Delete"})]}),x.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),x.jsx("textarea",{value:c,onChange:A=>d(A.target.value),className:"editor-textarea",placeholder:"Lesson JSON content..."})]}):x.jsx("div",{className:"editor-placeholder",children:x.jsx("p",{children:"Select a lesson from the list or create a new one"})})})]})]})}function QU(){const[i,e]=q.useState([]),[t,r]=q.useState(!1),[a,l]=q.useState(null),[c,d]=q.useState(""),[m,g]=q.useState(null);q.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await nf(bt.QUIZZES);e(A.filter(L=>L.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load quizzes"),console.error("Error loading quizzes:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const L=await tf(bt.QUIZZES,A);d(L),l(A)}catch(L){g(L.message||"Failed to load quiz"),console.error("Error loading quiz:",L)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a quiz first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await rc(bt.QUIZZES,a,A),alert("Quiz saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save quiz"),console.error("Error saving quiz:",A)}finally{r(!1)}},T=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await rf(bt.QUIZZES,A),a===A&&(l(null),d("")),_()}catch(L){g(L.message||"Failed to delete quiz"),console.error("Error deleting quiz:",L)}finally{r(!1)}}},N=()=>{const A={id:`q_new_${Date.now()}`,title:"New Quiz",description:"Quiz description",difficulty:"Easy",questions:[]};d(JSON.stringify(A,null,2)),l("new_quiz.json")},P=({path:A})=>{l(A),E(A)};return x.jsxs("div",{className:"content-manager",children:[x.jsxs("div",{className:"content-manager__header",children:[x.jsx("h2",{children:"Quizzes"}),x.jsxs("div",{className:"content-manager__actions",children:[x.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Quiz"}),x.jsx(af,{bucket:bt.QUIZZES,onUploadComplete:P,accept:".json",label:"Upload Quiz JSON"})]})]}),m&&x.jsx("div",{className:"alert alert-error",children:m}),x.jsxs("div",{className:"content-manager__body",children:[x.jsxs("div",{className:"content-manager__sidebar",children:[x.jsx("h3",{children:"Existing Quizzes"}),t&&x.jsx("p",{children:"Loading..."}),x.jsx("ul",{className:"file-list",children:i.map(A=>x.jsxs("li",{className:"file-list__item",children:[x.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),x.jsx("button",{onClick:()=>T(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),x.jsx("div",{className:"content-manager__editor",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"editor-header",children:[x.jsxs("div",{className:"editor-header__title",children:[x.jsx("h3",{children:a}),a!=="new_quiz.json"&&x.jsx("button",{onClick:()=>T(a),className:"btn btn-sm btn-danger",title:"Delete this quiz",disabled:t,children:"Delete"})]}),x.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),x.jsx("textarea",{value:c,onChange:A=>d(A.target.value),className:"editor-textarea",placeholder:"Quiz JSON content..."})]}):x.jsx("div",{className:"editor-placeholder",children:x.jsx("p",{children:"Select a quiz from the list or create a new one"})})})]})]})}function YU(){const[i,e]=q.useState([]),[t,r]=q.useState(!1),[a,l]=q.useState(null),[c,d]=q.useState(""),[m,g]=q.useState(null);q.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await nf(bt.DICTIONARY);e(A.filter(L=>L.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load dictionary files"),console.error("Error loading dictionary files:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const L=await tf(bt.DICTIONARY,A);d(L),l(A)}catch(L){g(L.message||"Failed to load file"),console.error("Error loading file:",L)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a file first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await rc(bt.DICTIONARY,a,A),alert("File saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save file"),console.error("Error saving file:",A)}finally{r(!1)}},T=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await rf(bt.DICTIONARY,A),a===A&&(l(null),d("")),_()}catch(L){g(L.message||"Failed to delete file"),console.error("Error deleting file:",L)}finally{r(!1)}}},N=()=>{d(JSON.stringify({category:"New Category",words:[]},null,2)),l("new_category.json")},P=({path:A})=>{l(A),E(A)};return x.jsxs("div",{className:"content-manager",children:[x.jsxs("div",{className:"content-manager__header",children:[x.jsx("h2",{children:"Dictionary"}),x.jsxs("div",{className:"content-manager__actions",children:[x.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Category"}),x.jsx(af,{bucket:bt.DICTIONARY,onUploadComplete:P,accept:".json",label:"Upload Dictionary JSON"})]})]}),m&&x.jsx("div",{className:"alert alert-error",children:m}),x.jsxs("div",{className:"content-manager__body",children:[x.jsxs("div",{className:"content-manager__sidebar",children:[x.jsx("h3",{children:"Dictionary Files"}),t&&x.jsx("p",{children:"Loading..."}),x.jsx("ul",{className:"file-list",children:i.map(A=>x.jsxs("li",{className:"file-list__item",children:[x.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),x.jsx("button",{onClick:()=>T(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),x.jsx("div",{className:"content-manager__editor",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"editor-header",children:[x.jsxs("div",{className:"editor-header__title",children:[x.jsx("h3",{children:a}),a!=="new_category.json"&&x.jsx("button",{onClick:()=>T(a),className:"btn btn-sm btn-danger",title:"Delete this file",disabled:t,children:"Delete"})]}),x.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),x.jsx("textarea",{value:c,onChange:A=>d(A.target.value),className:"editor-textarea",placeholder:"Dictionary JSON content..."})]}):x.jsx("div",{className:"editor-placeholder",children:x.jsx("p",{children:"Select a file from the list or create a new one"})})})]})]})}const Yh={index:{picture_quiz:{minigame:{id:"picture_quiz",title:"Picture Quiz",description:"Test your knowledge by matching signs with pictures",icon:"",color:"#FF6B6B"},tutorialPages:[{iconRes:"default_image",title:"Welcome to Picture Quiz!",description:"Figure out the Picture given."},{iconRes:"default_image",title:"Finger Spelling",description:"Spell the word to take a guess"},{iconRes:"default_image",title:"Have Fun!",description:"Beat levels and unlock harder challenges as you go. Have fun!"}],levels:[{id:"level1"}]},spelling_sequence:{minigame:{id:"spelling_sequence",title:"Spelling Sequence",description:"Practice finger spelling and word sequences",icon:"",color:"#4ECDC4"},tutorialPages:[{iconRes:"default_image",title:"Learn to Spell",description:"Spell the word by selecting the correct sequence of hand signs."},{iconRes:"default_image",title:"Get Faster",description:"Finger faster to earn a high score!"},{iconRes:"default_image",title:"Have Fun!",description:"Beat levels and unlock harder challenges as you go. Have fun!"}],levels:[{id:"level1"}]},bubble_shooter:{minigame:{id:"bubble_shooter",title:"Bubble Shooter",description:"Shoot colorful balls to match and pop them! Clear all balls to win.",icon:"",color:"#FF6B6B"},tutorialPages:[{iconRes:"default_image",title:"How to Play",description:"Match and pop all bubbles by shooting matching colors."},{iconRes:"default_image",title:"Switch Colors",description:"Copy the bubbles color by making the gesture inside of the bubble"},{iconRes:"default_image",title:"Have Fun!",description:"Beat levels and unlock harder challenges as you go. Have fun!"}],levels:[{id:"level1"}]},gesture_match:{minigame:{id:"gesture_match",title:"Gesture Match",description:"Match sign language gestures (images/videos) to their correct meanings!",icon:"",color:"#FFD166"},tutorialPages:[{iconRes:"default_image",title:"Match Gestures",description:"Click two cards to match them."},{iconRes:"default_image",title:"See & Learn",description:"View cards to learn the signs and match them."},{iconRes:"default_image",title:"Try More!",description:"Advance through levels to increase the challenge, good luck! and have fun!"}],levels:[{id:"level1"}]}},level:{picture_quiz:{id:"level1",title:"Basic Signs",media:{type:"image",path:"img/picture_quiz/hi.png"},correctAnswer:"HI",hints:"This is a common greeting gesture",modelConfig:"ml/alphabet_mapping.json"},spelling_sequence:{id:"level1",title:"Alphabet Basics 1",correctAnswer:"HI",hints:"Spell HI",modelConfig:"ml/alphabet_mapping.json"},bubble_shooter:{level:{id:"level1",title:"Basic Bubbles",description:"A simple introduction level with basic patterns"},layout:["1-1-0-2-2-0-3-","-1-4-4-2-5-5-3-0","0-0-4-0-0-5-0-"],ballTypes:[1,2,3,4,5],ballLetters:{1:"A",2:"B",3:"C",4:"D",5:"E"},modelConfig:"ml/alphabet_mapping.json"},gesture_match:{id:"level1",title:"Greetings Match",pairs:[{media:{type:"video",path:"vid/GREETINGS/Hello.mp4"},answer:"Hello"},{media:{type:"video",path:"vid/GREETINGS/Good Morning.mp4"},answer:"Good Morning"},{media:{type:"video",path:"vid/GREETINGS/Hi (1).mp4"},answer:"Hi"}]}}};function JU(){const[i,e]=q.useState([]),[t,r]=q.useState(null),[a,l]=q.useState(null),[c,d]=q.useState(""),[m,g]=q.useState(!1),[_,E]=q.useState(null);q.useEffect(()=>{b()},[]);const b=async()=>{g(!0),E(null);try{const W=await nf(bt.MINIGAMES),se=new Map;W.forEach(I=>{const C=I.name.split("/");if(C.length>1){const O=C[0],U=C[C.length-1];se.has(O)||se.set(O,{index:null,levels:[]});const M=se.get(O);U==="index.json"?M.index={...I,relativePath:I.name}:U.endsWith(".json")&&M.levels.push({...I,relativePath:I.name,levelName:U})}});const ue=Array.from(se.entries()).map(([I,C])=>({name:I,index:C.index,levels:C.levels.sort((O,U)=>O.levelName.localeCompare(U.levelName))})).sort((I,C)=>I.name.localeCompare(C.name));e(ue)}catch(W){E(W.message||"Failed to load minigames"),console.error("Error loading minigames:",W)}finally{g(!1)}},T=async W=>{g(!0),E(null);try{const se=await tf(bt.MINIGAMES,W);d(se),l(W),r(W.split("/")[0])}catch(se){E(se.message||"Failed to load file"),console.error("Error loading file:",se)}finally{g(!1)}},N=async()=>{if(!a){E("Please select or create a file first");return}g(!0),E(null);try{JSON.parse(c);const W=new Blob([c],{type:"application/json"});await rc(bt.MINIGAMES,a,W),alert("File saved successfully!"),b()}catch(W){W instanceof SyntaxError?E("Invalid JSON format: "+W.message):E(W.message||"Failed to save file"),console.error("Error saving file:",W)}finally{g(!1)}},P=async W=>{if(confirm(`Are you sure you want to delete ${W}?`)){g(!0),E(null);try{await rf(bt.MINIGAMES,W),a===W&&(l(null),d("")),b()}catch(se){E(se.message||"Failed to delete file"),console.error("Error deleting file:",se)}finally{g(!1)}}},A=W=>{const se=Yh.index[W]||Yh.index.picture_quiz;d(JSON.stringify(se,null,2));const ue=`${W}/index.json`;l(ue),r(W)},L=W=>{const se=Yh.level[W]||Yh.level.picture_quiz,C=(i.find(B=>B.name===W)?.levels||[]).map(B=>{const D=B.levelName.match(/level(\d+)\.json/);return D?parseInt(D[1]):0}).filter(B=>B>0),O=C.length>0?Math.max(...C)+1:1,U=JSON.parse(JSON.stringify(se));U.id?U.id=`level${O}`:U.level?.id&&(U.level.id=`level${O}`),d(JSON.stringify(U,null,2));const M=`${W}/level${O}.json`;l(M),r(W)},K=({path:W})=>{l(W),T(W)},G=()=>["picture_quiz","spelling_sequence","bubble_shooter","gesture_match"];return x.jsxs("div",{className:"content-manager",children:[x.jsxs("div",{className:"content-manager__header",children:[x.jsx("h2",{children:"Minigames"}),x.jsxs("div",{className:"content-manager__actions",children:[x.jsxs("select",{onChange:W=>{W.target.value&&A(W.target.value)},defaultValue:"",style:{padding:"10px 16px",borderRadius:"8px",border:"2px solid var(--outline)",fontSize:"0.95rem",marginRight:"12px",background:"var(--surface)",cursor:"pointer"},children:[x.jsx("option",{value:"",children:"Create New Minigame..."}),G().map(W=>x.jsx("option",{value:W,children:W.replace(/_/g," ").replace(/\b\w/g,se=>se.toUpperCase())},W))]}),x.jsx(af,{bucket:bt.MINIGAMES,onUploadComplete:K,accept:".json",label:"Upload JSON"})]})]}),_&&x.jsx("div",{className:"alert alert-error",children:_}),x.jsxs("div",{className:"content-manager__body",children:[x.jsxs("div",{className:"content-manager__sidebar",children:[x.jsx("h3",{children:"Minigames"}),m&&x.jsx("p",{children:"Loading..."}),i.map(({name:W,index:se,levels:ue})=>x.jsxs("div",{className:"minigame-group",children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[x.jsx("h4",{children:W.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase())}),x.jsx("button",{onClick:()=>L(W),className:"btn btn-sm btn-primary",title:"Add new level",children:"+ Level"})]}),se&&x.jsx("div",{style:{marginBottom:"12px"},children:x.jsx("button",{onClick:()=>T(se.relativePath),className:`file-list__link ${a===se.relativePath?"active":""}`,style:{width:"100%",textAlign:"left",marginBottom:"4px"},children:" index.json"})}),ue.length>0&&x.jsx("ul",{className:"file-list",style:{marginTop:"8px"},children:ue.map(I=>x.jsxs("li",{className:"file-list__item",children:[x.jsx("button",{onClick:()=>T(I.relativePath),className:`file-list__link ${a===I.relativePath?"active":""}`,children:I.levelName}),x.jsx("button",{onClick:()=>P(I.relativePath),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},I.relativePath))})]},W))]}),x.jsx("div",{className:"content-manager__editor",children:a?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"editor-header",children:[x.jsxs("div",{className:"editor-header__title",children:[x.jsx("h3",{children:a}),a&&!a.includes("new_")&&x.jsx("button",{onClick:()=>P(a),className:"btn btn-sm btn-danger",title:"Delete this file",disabled:m,children:"Delete"})]}),x.jsx("button",{onClick:N,className:"btn btn-primary",disabled:m,children:m?"Saving...":"Save"})]}),x.jsx("textarea",{value:c,onChange:W=>d(W.target.value),className:"editor-textarea",placeholder:"JSON content..."})]}):x.jsx("div",{className:"editor-placeholder",children:x.jsx("p",{children:"Select a minigame file from the list, create a new minigame, or upload a JSON file"})})})]})]})}function WU(){const[i,e]=q.useState("lessons"),t=[{id:"lessons",label:"Lessons",icon:""},{id:"quizzes",label:"Quizzes",icon:""},{id:"dictionary",label:"Dictionary",icon:""},{id:"minigames",label:"Minigames",icon:""}];return x.jsxs("div",{className:"content-page",children:[x.jsx("div",{className:"content-page__tabs",children:t.map(r=>x.jsxs("button",{onClick:()=>e(r.id),className:`tab-button ${i===r.id?"active":""}`,children:[x.jsx("span",{className:"tab-button__icon",children:r.icon}),x.jsx("span",{className:"tab-button__label",children:r.label})]},r.id))}),x.jsxs("div",{className:"content-page__content",children:[i==="lessons"&&x.jsx(KU,{}),i==="quizzes"&&x.jsx(QU,{}),i==="dictionary"&&x.jsx(YU,{}),i==="minigames"&&x.jsx(JU,{})]})]})}function XU(){return x.jsxs("div",{children:[x.jsx("h1",{children:"Settings"}),x.jsx("p",{children:"Configure admin preferences."})]})}function ZU(){const{login:i}=sf(),e=Pd(),[t,r]=q.useState(""),[a,l]=q.useState(""),[c,d]=q.useState(!1),[m,g]=q.useState(""),_=q.useRef(null),E=async b=>{b.preventDefault(),g(""),d(!0),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{d(!1),g("Login is taking longer than expected. Please check your connection and try again."),_.current=null},15e3);try{await i({email:t,password:a}),_.current&&(clearTimeout(_.current),_.current=null),e("/",{replace:!0})}catch(T){_.current&&(clearTimeout(_.current),_.current=null);const N=T?.message||"Login failed";g(N),console.error("Login error:",T)}finally{_.current&&(clearTimeout(_.current),_.current=null),d(!1)}};return x.jsx("div",{className:"login-root",children:x.jsxs("div",{className:"login-card",children:[x.jsx("div",{className:"login-logo-container",children:x.jsx("img",{src:"/kamaynikasyon_logo.png",alt:"Kamaynikasyon Logo",className:"login-logo"})}),x.jsx("h1",{className:"login-title",children:"Admin Sign in"}),!1,x.jsxs("form",{onSubmit:E,className:"login-form",children:[m?x.jsx("div",{className:"alert error",children:m}):null,x.jsxs("label",{className:"field",children:[x.jsx("span",{className:"field__label",children:" Email"}),x.jsx("input",{type:"email",className:"field__input",value:t,onChange:b=>r(b.target.value),placeholder:"admin@example.com",required:!0,autoFocus:!0})]}),x.jsxs("label",{className:"field",children:[x.jsx("span",{className:"field__label",children:" Password"}),x.jsx("input",{type:"password",className:"field__input",value:a,onChange:b=>l(b.target.value),placeholder:"",required:!0})]}),x.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?x.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Signing in"]}):" Sign in"}),c&&x.jsx("style",{children:`
              @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            `})]})]})})}function ej({children:i}){const{adminName:e,logout:t}=sf(),r=Pd(),a=()=>{t(),r("/login",{replace:!0})};return x.jsxs("div",{className:"app-root",children:[x.jsxs("header",{className:"app-bar",children:[x.jsxs("div",{className:"app-bar__brand",children:[x.jsx("img",{src:"/kamaynikasyon_logo.png",alt:"Kamaynikasyon Logo",className:"app-bar__logo"}),x.jsx("div",{className:"app-bar__title",children:"Kamaynikasyon Admin"})]}),x.jsxs("div",{className:"app-bar__actions",children:[x.jsxs("span",{className:"app-bar__user",children:[" ",e]}),x.jsx("button",{className:"btn btn-text",onClick:a,children:" Logout"})]})]}),x.jsxs("div",{className:"app-shell",children:[x.jsx("aside",{className:"nav-rail",children:x.jsxs("nav",{className:"nav-rail__nav",children:[x.jsxs(cu,{to:"/",end:!0,className:"nav-rail__link",children:[x.jsx("span",{className:"nav-rail__icon",children:""}),x.jsx("span",{className:"nav-rail__label",children:"Dashboard"})]}),x.jsxs(cu,{to:"/users",className:"nav-rail__link",children:[x.jsx("span",{className:"nav-rail__icon",children:""}),x.jsx("span",{className:"nav-rail__label",children:"Users"})]}),x.jsxs(cu,{to:"/content",className:"nav-rail__link",children:[x.jsx("span",{className:"nav-rail__icon",children:""}),x.jsx("span",{className:"nav-rail__label",children:"Content"})]}),x.jsxs(cu,{to:"/settings",className:"nav-rail__link",children:[x.jsx("span",{className:"nav-rail__icon",children:""}),x.jsx("span",{className:"nav-rail__label",children:"Settings"})]})]})}),x.jsx("main",{className:"app-content",children:i})]})]})}function tj({error:i,resetErrorBoundary:e}){return x.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[x.jsx("h2",{children:"Something went wrong:"}),x.jsx("pre",{style:{color:"red",textAlign:"left",background:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:i.message}),x.jsx("button",{onClick:e,style:{marginTop:"10px",padding:"8px 16px"},children:"Try again"})]})}function nj({children:i}){const{isAuthenticated:e,loading:t}=sf();return t?x.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",gap:"16px",color:"var(--on-surface)"},children:[x.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--outline)",borderTop:"4px solid var(--primary)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),x.jsx("div",{children:"Checking authentication..."}),x.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):e?i:x.jsx(Eb,{to:"/login",replace:!0})}function rj(){return x.jsx(WC,{FallbackComponent:tj,children:x.jsx(BC,{children:x.jsx(FU,{children:x.jsxs(o0,{children:[x.jsx(as,{path:"/login",element:x.jsx(ZU,{})}),x.jsx(as,{path:"/*",element:x.jsx(nj,{children:x.jsx(ej,{children:x.jsxs(o0,{children:[x.jsx(as,{path:"/",element:x.jsx($U,{})}),x.jsx(as,{path:"/users",element:x.jsx(GU,{})}),x.jsx(as,{path:"/content",element:x.jsx(WU,{})}),x.jsx(as,{path:"/settings",element:x.jsx(XU,{})}),x.jsx(as,{path:"*",element:x.jsx(Eb,{to:"/",replace:!0})})]})})})})]})})})})}O1.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(rj,{})}));
