function y1(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in i)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(i,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function _1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function v1(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var a=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return i[r]}})}),t}var ng={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function E1(){if(HE)return iu;HE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return iu.Fragment=e,iu.jsx=t,iu.jsxs=t,iu}var $E;function w1(){return $E||($E=1,ng.exports=E1()),ng.exports}var L=w1(),rg={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function b1(){if(FE)return Re;FE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,A={};function j(M,te,oe){this.props=M,this.context=te,this.refs=A,this.updater=oe||N}j.prototype.isReactComponent={},j.prototype.setState=function(M,te){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,te,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function z(){}z.prototype=j.prototype;function H(M,te,oe){this.props=M,this.context=te,this.refs=A,this.updater=oe||N}var re=H.prototype=new z;re.constructor=H,U(re,j.prototype),re.isPureReactComponent=!0;var he=Array.isArray;function le(){}var O={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(M,te,oe){var ce=oe.ref;return{$$typeof:i,type:M,key:te,ref:ce!==void 0?ce:null,props:oe}}function V(M,te){return I(M.type,te,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function q(M){var te={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(oe){return te[oe]})}var D=/\/+/g;function ot(M,te){return typeof M=="object"&&M!==null&&M.key!=null?q(""+M.key):te.toString(36)}function Mt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(le,le):(M.status="pending",M.then(function(te){M.status==="pending"&&(M.status="fulfilled",M.value=te)},function(te){M.status==="pending"&&(M.status="rejected",M.reason=te)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,te,oe,ce,Se){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(Ne){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case i:case e:ze=!0;break;case _:return ze=M._init,X(ze(M._payload),te,oe,ce,Se)}}if(ze)return Se=Se(M),ze=ce===""?"."+ot(M,0):ce,he(Se)?(oe="",ze!=null&&(oe=ze.replace(D,"$&/")+"/"),X(Se,te,oe,"",function(Cs){return Cs})):Se!=null&&(P(Se)&&(Se=V(Se,oe+(Se.key==null||M&&M.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+ze)),te.push(Se)),1;ze=0;var Ut=ce===""?".":ce+":";if(he(M))for(var lt=0;lt<M.length;lt++)ce=M[lt],Ne=Ut+ot(ce,lt),ze+=X(ce,te,oe,Ne,Se);else if(lt=S(M),typeof lt=="function")for(M=lt.call(M),lt=0;!(ce=M.next()).done;)ce=ce.value,Ne=Ut+ot(ce,lt++),ze+=X(ce,te,oe,Ne,Se);else if(Ne==="object"){if(typeof M.then=="function")return X(Mt(M),te,oe,ce,Se);throw te=String(M),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ae(M,te,oe){if(M==null)return M;var ce=[],Se=0;return X(M,ce,"","",function(Ne){return te.call(oe,Ne,Se++)}),ce}function _e(M){if(M._status===-1){var te=M._result;te=te(),te.then(function(oe){(M._status===0||M._status===-1)&&(M._status=1,M._result=oe)},function(oe){(M._status===0||M._status===-1)&&(M._status=2,M._result=oe)}),M._status===-1&&(M._status=0,M._result=te)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:ae,forEach:function(M,te,oe){ae(M,function(){te.apply(this,arguments)},oe)},count:function(M){var te=0;return ae(M,function(){te++}),te},toArray:function(M){return ae(M,function(te){return te})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Re.Activity=E,Re.Children=Qe,Re.Component=j,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=H,Re.StrictMode=r,Re.Suspense=m,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return O.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(M,te,oe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=U({},M.props),Se=M.key;if(te!=null)for(Ne in te.key!==void 0&&(Se=""+te.key),te)!C.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(ce[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)ce.children=oe;else if(1<Ne){for(var ze=Array(Ne),Ut=0;Ut<Ne;Ut++)ze[Ut]=arguments[Ut+2];ce.children=ze}return I(M.type,Se,ce)},Re.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Re.createElement=function(M,te,oe){var ce,Se={},Ne=null;if(te!=null)for(ce in te.key!==void 0&&(Ne=""+te.key),te)C.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=te[ce]);var ze=arguments.length-2;if(ze===1)Se.children=oe;else if(1<ze){for(var Ut=Array(ze),lt=0;lt<ze;lt++)Ut[lt]=arguments[lt+2];Se.children=Ut}if(M&&M.defaultProps)for(ce in ze=M.defaultProps,ze)Se[ce]===void 0&&(Se[ce]=ze[ce]);return I(M,Ne,Se)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:f,render:M}},Re.isValidElement=P,Re.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:_e}},Re.memo=function(M,te){return{$$typeof:g,type:M,compare:te===void 0?null:te}},Re.startTransition=function(M){var te=O.T,oe={};O.T=oe;try{var ce=M(),Se=O.S;Se!==null&&Se(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(le,qe)}catch(Ne){qe(Ne)}finally{te!==null&&oe.types!==null&&(te.types=oe.types),O.T=te}},Re.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Re.use=function(M){return O.H.use(M)},Re.useActionState=function(M,te,oe){return O.H.useActionState(M,te,oe)},Re.useCallback=function(M,te){return O.H.useCallback(M,te)},Re.useContext=function(M){return O.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,te){return O.H.useDeferredValue(M,te)},Re.useEffect=function(M,te){return O.H.useEffect(M,te)},Re.useEffectEvent=function(M){return O.H.useEffectEvent(M)},Re.useId=function(){return O.H.useId()},Re.useImperativeHandle=function(M,te,oe){return O.H.useImperativeHandle(M,te,oe)},Re.useInsertionEffect=function(M,te){return O.H.useInsertionEffect(M,te)},Re.useLayoutEffect=function(M,te){return O.H.useLayoutEffect(M,te)},Re.useMemo=function(M,te){return O.H.useMemo(M,te)},Re.useOptimistic=function(M,te){return O.H.useOptimistic(M,te)},Re.useReducer=function(M,te,oe){return O.H.useReducer(M,te,oe)},Re.useRef=function(M){return O.H.useRef(M)},Re.useState=function(M){return O.H.useState(M)},Re.useSyncExternalStore=function(M,te,oe){return O.H.useSyncExternalStore(M,te,oe)},Re.useTransition=function(){return O.H.useTransition()},Re.version="19.2.0",Re}var GE;function pp(){return GE||(GE=1,rg.exports=b1()),rg.exports}var K=pp(),ig={exports:{}},su={},sg={exports:{}},ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function T1(){return KE||(KE=1,(function(i){function e(X,ae){var _e=X.length;X.push(ae);e:for(;0<_e;){var qe=_e-1>>>1,Qe=X[qe];if(0<a(Qe,ae))X[qe]=ae,X[_e]=Qe,_e=qe;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],_e=X.pop();if(_e!==ae){X[0]=_e;e:for(var qe=0,Qe=X.length,M=Qe>>>1;qe<M;){var te=2*(qe+1)-1,oe=X[te],ce=te+1,Se=X[ce];if(0>a(oe,_e))ce<Qe&&0>a(Se,oe)?(X[qe]=Se,X[ce]=_e,qe=ce):(X[qe]=oe,X[te]=_e,qe=te);else if(ce<Qe&&0>a(Se,_e))X[qe]=Se,X[ce]=_e,qe=ce;else break e}}return ae}function a(X,ae){var _e=X.sortIndex-ae.sortIndex;return _e!==0?_e:X.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,E=null,b=3,S=!1,N=!1,U=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=X)r(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(g)}}function he(X){if(U=!1,re(X),!N)if(t(m)!==null)N=!0,le||(le=!0,q());else{var ae=t(g);ae!==null&&Mt(he,ae.startTime-X)}}var le=!1,O=-1,C=5,I=-1;function V(){return A?!0:!(i.unstable_now()-I<C)}function P(){if(A=!1,le){var X=i.unstable_now();I=X;var ae=!0;try{e:{N=!1,U&&(U=!1,z(O),O=-1),S=!0;var _e=b;try{t:{for(re(X),E=t(m);E!==null&&!(E.expirationTime>X&&V());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,b=E.priorityLevel;var Qe=qe(E.expirationTime<=X);if(X=i.unstable_now(),typeof Qe=="function"){E.callback=Qe,re(X),ae=!0;break t}E===t(m)&&r(m),re(X)}else r(m);E=t(m)}if(E!==null)ae=!0;else{var M=t(g);M!==null&&Mt(he,M.startTime-X),ae=!1}}break e}finally{E=null,b=_e,S=!1}ae=void 0}}finally{ae?q():le=!1}}}var q;if(typeof H=="function")q=function(){H(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ot=D.port2;D.port1.onmessage=P,q=function(){ot.postMessage(null)}}else q=function(){j(P,0)};function Mt(X,ae){O=j(function(){X(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var _e=b;b=ae;try{return X()}finally{b=_e}},i.unstable_requestPaint=function(){A=!0},i.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=b;b=X;try{return ae()}finally{b=_e}},i.unstable_scheduleCallback=function(X,ae,_e){var qe=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?qe+_e:qe):_e=qe,X){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=_e+Qe,X={id:_++,callback:ae,priorityLevel:X,startTime:_e,expirationTime:Qe,sortIndex:-1},_e>qe?(X.sortIndex=_e,e(g,X),t(m)===null&&X===t(g)&&(U?(z(O),O=-1):U=!0,Mt(he,_e-qe))):(X.sortIndex=Qe,e(m,X),N||S||(N=!0,le||(le=!0,q()))),X},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(X){var ae=b;return function(){var _e=b;b=ae;try{return X.apply(this,arguments)}finally{b=_e}}}})(ag)),ag}var QE;function S1(){return QE||(QE=1,sg.exports=T1()),sg.exports}var og={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function A1(){if(YE)return rn;YE=1;var i=pp();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},rn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},rn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},rn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},rn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:S}):_==="script"&&r.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},rn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=f(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},rn.requestFormReset=function(m){r.d.r(m)},rn.unstable_batchedUpdates=function(m,g){return m(g)},rn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var JE;function R1(){if(JE)return og.exports;JE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),og.exports=A1(),og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function C1(){if(WE)return su;WE=1;var i=S1(),e=pp(),t=R1();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),n;if(p===u)return m(d),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=p;else{for(var v=!1,T=d.child;T;){if(T===o){v=!0,o=d,u=p;break}if(T===u){v=!0,u=d,o=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===o){v=!0,o=p,u=d;break}if(T===u){v=!0,u=p,o=d;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ot(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case j:return"Profiler";case A:return"StrictMode";case he:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case H:return n.displayName||"Context";case z:return(n._context.displayName||"Context")+".Consumer";case re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return s=n.displayName||null,s!==null?s:ot(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return ot(n(s))}catch{}}return null}var Mt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},qe=[],Qe=-1;function M(n){return{current:n}}function te(n){0>Qe||(n.current=qe[Qe],qe[Qe]=null,Qe--)}function oe(n,s){Qe++,qe[Qe]=n.current,n.current=s}var ce=M(null),Se=M(null),Ne=M(null),ze=M(null);function Ut(n,s){switch(oe(Ne,s),oe(Se,n),oe(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?fE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=fE(s),n=dE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}te(ce),oe(ce,n)}function lt(){te(ce),te(Se),te(Ne)}function Cs(n){n.memoizedState!==null&&oe(ze,n);var s=ce.current,o=dE(s,n.type);s!==o&&(oe(Se,n),oe(ce,o))}function Aa(n){Se.current===n&&(te(ce),te(Se)),ze.current===n&&(te(ze),eu._currentValue=_e)}var Ra,Ca;function pr(n){if(Ra===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ra=s&&s[1]||"",Ca=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+n+Ca}var el=!1;function Is(n,s){if(!n||el)return"";el=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(J){var Q=J}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(J){Q=J}n.call(ee.prototype)}}else{try{throw Error()}catch(J){Q=J}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],T=p[1];if(v&&T){var k=v.split(`
`),G=T.split(`
`);for(d=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(u===k.length||d===G.length)for(u=k.length-1,d=G.length-1;1<=u&&0<=d&&k[u]!==G[d];)d--;for(;1<=u&&0<=d;u--,d--)if(k[u]!==G[d]){if(u!==1||d!==1)do if(u--,d--,0>d||k[u]!==G[d]){var W=`
`+k[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=d);break}}}finally{el=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?pr(o):""}function tl(n,s){switch(n.tag){case 26:case 27:case 5:return pr(n.type);case 16:return pr("Lazy");case 13:return n.child!==s&&s!==null?pr("Suspense Fallback"):pr("Suspense");case 19:return pr("SuspenseList");case 0:case 15:return Is(n.type,!1);case 11:return Is(n.type.render,!1);case 1:return Is(n.type,!0);case 31:return pr("Activity");default:return""}}function nl(n){try{var s="",o=null;do s+=tl(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=i.unstable_scheduleCallback,Si=i.unstable_cancelCallback,id=i.unstable_shouldYield,rc=i.unstable_requestPaint,cn=i.unstable_now,Os=i.unstable_getCurrentPriorityLevel,rl=i.unstable_ImmediatePriority,il=i.unstable_UserBlockingPriority,Ai=i.unstable_NormalPriority,sd=i.unstable_LowPriority,ic=i.unstable_IdlePriority,sc=i.log,ac=i.unstable_setDisableYieldValue,Jn=null,Kt=null;function Pn(n){if(typeof sc=="function"&&ac(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Jn,n)}catch{}}var yt=Math.clz32?Math.clz32:lc,oc=Math.log,Ia=Math.LN2;function lc(n){return n>>>=0,n===0?32:31-(oc(n)/Ia|0)|0}var yr=256,Ns=262144,St=4194304;function _r(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function vr(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~p,u!==0?d=_r(u):(v&=T,v!==0?d=_r(v):o||(o=T&~n,o!==0&&(d=_r(o))))):(T=u&~p,T!==0?d=_r(T):v!==0?d=_r(v):o||(o=u&~n,o!==0&&(d=_r(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function Wn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ad(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(){var n=St;return St<<=1,(St&62914560)===0&&(St=4194304),n}function Er(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Ds(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function od(n,s,o,u,d,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,k=n.expirationTimes,G=n.hiddenUpdates;for(o=v&~o;0<o;){var W=31-yt(o),ee=1<<W;T[W]=0,k[W]=-1;var Q=G[W];if(Q!==null)for(G[W]=null,W=0;W<Q.length;W++){var J=Q[W];J!==null&&(J.lane&=-536870913)}o&=~ee}u!==0&&ks(n,u,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~s))}function ks(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-yt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function sl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-yt(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function al(n,s){var o=s&-s;return o=(o&42)!==0?1:Ps(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ps(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Qr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function cc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:UE(n.type))}function Xn(n,s){var o=ae.p;try{return ae.p=n,s()}finally{ae.p=o}}var Zn=Math.random().toString(36).slice(2),At="__reactFiber$"+Zn,qt="__reactProps$"+Zn,wr="__reactContainer$"+Zn,Oa="__reactEvents$"+Zn,ld="__reactListeners$"+Zn,hc="__reactHandles$"+Zn,fc="__reactResources$"+Zn,br="__reactMarker$"+Zn;function Na(n){delete n[At],delete n[qt],delete n[Oa],delete n[ld],delete n[hc]}function Tr(n){var s=n[At];if(s)return s;for(var o=n.parentNode;o;){if(s=o[wr]||o[At]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=EE(n);n!==null;){if(o=n[At])return o;n=EE(n)}return s}n=o,o=n.parentNode}return null}function xn(n){if(n=n[At]||n[wr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function bn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Sr(n){var s=n[fc];return s||(s=n[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(n){n[br]=!0}var ol=new Set,ll={};function Ar(n,s){Rr(n,s),Rr(n+"Capture",s)}function Rr(n,s){for(ll[n]=s,n=0;n<s.length;n++)ol.add(s[n])}var ul=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},hl={};function dc(n){return Tt.call(hl,n)?!0:Tt.call(cl,n)?!1:ul.test(n)?hl[n]=!0:(cl[n]=!0,!1)}function Da(n,s,o){if(dc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Tn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Ct(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Ht(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ri(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fl(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ye(n){if(!n._valueTracker){var s=Ri(n)?"checked":"value";n._valueTracker=fl(n,s,""+n[s])}}function xs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ri(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ms=/[\n"\\]/g;function dn(n){return n.replace(Ms,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ka(n,s,o,u,d,p,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Ht(s)):n.value!==""+Ht(s)&&(n.value=""+Ht(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?dl(n,v,Ht(s)):o!=null?dl(n,v,Ht(o)):u!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ht(T):n.removeAttribute("name")}function mc(n,s,o,u,d,p,v,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Ye(n);return}o=o!=null?""+Ht(o):"",s=s!=null?""+Ht(s):o,T||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ye(n)}function dl(n,s,o){s==="number"&&Cr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ci(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ht(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function gc(n,s,o){if(s!=null&&(s=""+Ht(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Ht(o):""}function Ii(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Mt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ht(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ye(n)}function mn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var pc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||pc.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function gl(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&ml(n,d,u)}else for(var p in s)s.hasOwnProperty(p)&&ml(n,p,s[p])}function Pa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(n){return Oi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function er(){}var pl=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ni=null,Ir=null;function Us(n){var s=xn(n);if(s&&(n=s.stateNode)){var o=n[qt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ka(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[qt]||null;if(!d)throw Error(r(90));ka(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&xs(u)}break e;case"textarea":gc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ci(n,!!o.multiple,s,!1)}}}var Ma=!1;function Di(n,s,o){if(Ma)return n(s,o);Ma=!0;try{var u=n(s);return u}finally{if(Ma=!1,(Ni!==null||Ir!==null)&&(ch(),Ni&&(s=Ni,n=Ir,Ir=Ni=null,Us(s),n)))for(s=0;s<n.length;s++)Us(n[s])}}function tr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[qt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(Un)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch{Vs=!1}var Or=null,yl=null,Ls=null;function _l(){if(Ls)return Ls;var n,s=yl,o=s.length,u,d="value"in Or?Or.value:Or.textContent,p=d.length;for(n=0;n<o&&s[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===d[p-u];u++);return Ls=d.slice(n,1<u?1-u:void 0)}function js(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Yr(){return!0}function nr(){return!1}function Qt(n){function s(o,u,d,p,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yr:nr,this.isPropagationStopped=nr,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),s}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nr=Qt(Jr),ki=E({},Jr,{view:0,detail:0}),vl=Qt(ki),Pi,Ua,Dr,Va=E({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(Pi=n.screenX-Dr.screenX,Ua=n.screenY-Dr.screenY):Ua=Pi=0,Dr=n),Pi)},movementY:function(n){return"movementY"in n?n.movementY:Ua}}),El=Qt(Va),zs=E({},Va,{dataTransfer:0}),_c=Qt(zs),vc=E({},ki,{relatedTarget:0}),Bs=Qt(vc),wl=E({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ec=Qt(wl),La=E({},Jr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wc=Qt(La),bc=E({},Jr,{data:0}),kr=Qt(bc),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ac[n])?!!s[n]:!1}function xi(){return Rc}var hn=E({},ki,{key:function(n){if(n.key){var s=Tc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(n){return n.type==="keypress"?js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Cc=Qt(hn),Ic=E({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wr=Qt(Ic),h=E({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi}),y=Qt(h),w=E({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Qt(w),$=E({},Va,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Qt($),se=E({},Jr,{newState:0,oldState:0}),Ie=Qt(se),_t=[9,13,27,32],Fe=Un&&"CompositionEvent"in window,ut=null;Un&&"documentMode"in document&&(ut=document.documentMode);var Vn=Un&&"TextEvent"in window&&!ut,Pr=Un&&(!Fe||ut&&8<ut&&11>=ut),rr=" ",ir=!1;function qs(n,s){switch(n){case"keyup":return _t.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ja(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var za=!1;function BA(n,s){switch(n){case"compositionend":return ja(s);case"keypress":return s.which!==32?null:(ir=!0,rr);case"textInput":return n=s.data,n===rr&&ir?null:n;default:return null}}function qA(n,s){if(za)return n==="compositionend"||!Fe&&qs(n,s)?(n=_l(),Ls=yl=Or=null,za=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pr&&s.locale!=="ko"?null:s.data;default:return null}}var HA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!HA[n.type]:s==="textarea"}function Sy(n,s,o,u){Ni?Ir?Ir.push(u):Ir=[u]:Ni=u,s=yh(s,"onChange"),0<s.length&&(o=new Nr("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var bl=null,Tl=null;function $A(n){aE(n,0)}function Oc(n){var s=bn(n);if(xs(s))return n}function Ay(n,s){if(n==="change")return s}var Ry=!1;if(Un){var ud;if(Un){var cd="oninput"in document;if(!cd){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),cd=typeof Cy.oninput=="function"}ud=cd}else ud=!1;Ry=ud&&(!document.documentMode||9<document.documentMode)}function Iy(){bl&&(bl.detachEvent("onpropertychange",Oy),Tl=bl=null)}function Oy(n){if(n.propertyName==="value"&&Oc(Tl)){var s=[];Sy(s,Tl,n,Mn(n)),Di($A,s)}}function FA(n,s,o){n==="focusin"?(Iy(),bl=s,Tl=o,bl.attachEvent("onpropertychange",Oy)):n==="focusout"&&Iy()}function GA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Oc(Tl)}function KA(n,s){if(n==="click")return Oc(s)}function QA(n,s){if(n==="input"||n==="change")return Oc(s)}function YA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:YA;function Sl(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Tt.call(s,d)||!Sn(n[d],s[d]))return!1}return!0}function Ny(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dy(n,s){var o=Ny(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ny(o)}}function ky(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ky(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Py(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Cr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Cr(n.document)}return s}function hd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var JA=Un&&"documentMode"in document&&11>=document.documentMode,Ba=null,fd=null,Al=null,dd=!1;function xy(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;dd||Ba==null||Ba!==Cr(u)||(u=Ba,"selectionStart"in u&&hd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Al&&Sl(Al,u)||(Al=u,u=yh(fd,"onSelect"),0<u.length&&(s=new Nr("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ba)))}function Hs(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var qa={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},md={},My={};Un&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function $s(n){if(md[n])return md[n];if(!qa[n])return n;var s=qa[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in My)return md[n]=s[o];return n}var Uy=$s("animationend"),Vy=$s("animationiteration"),Ly=$s("animationstart"),WA=$s("transitionrun"),XA=$s("transitionstart"),ZA=$s("transitioncancel"),jy=$s("transitionend"),zy=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function sr(n,s){zy.set(n,s),Ar(s,[n])}var Nc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ln=[],Ha=0,pd=0;function Dc(){for(var n=Ha,s=pd=Ha=0;s<n;){var o=Ln[s];Ln[s++]=null;var u=Ln[s];Ln[s++]=null;var d=Ln[s];Ln[s++]=null;var p=Ln[s];if(Ln[s++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}p!==0&&By(o,d,p)}}function kc(n,s,o,u){Ln[Ha++]=n,Ln[Ha++]=s,Ln[Ha++]=o,Ln[Ha++]=u,pd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function yd(n,s,o,u){return kc(n,s,o,u),Pc(n)}function Fs(n,s){return kc(n,null,null,s),Pc(n)}function By(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-yt(o),n=p.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Pc(n){if(50<Kl)throw Kl=0,Rm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var $a={};function eR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,s,o,u){return new eR(n,s,o,u)}function _d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xr(n,s){var o=n.alternate;return o===null?(o=An(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function qy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function xc(n,s,o,u,d,p){var v=0;if(u=n,typeof n=="function")_d(n)&&(v=1);else if(typeof n=="string")v=s1(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=An(31,o,s,d),n.elementType=I,n.lanes=p,n;case U:return Gs(o.children,d,p,s);case A:v=8,d|=24;break;case j:return n=An(12,o,s,d|2),n.elementType=j,n.lanes=p,n;case he:return n=An(13,o,s,d),n.elementType=he,n.lanes=p,n;case le:return n=An(19,o,s,d),n.elementType=le,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:v=10;break e;case z:v=9;break e;case re:v=11;break e;case O:v=14;break e;case C:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=An(v,o,s,d),s.elementType=n,s.type=u,s.lanes=p,s}function Gs(n,s,o,u){return n=An(7,n,u,s),n.lanes=o,n}function vd(n,s,o){return n=An(6,n,null,s),n.lanes=o,n}function Hy(n){var s=An(18,null,null,0);return s.stateNode=n,s}function Ed(n,s,o){return s=An(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var $y=new WeakMap;function jn(n,s){if(typeof n=="object"&&n!==null){var o=$y.get(n);return o!==void 0?o:(s={value:n,source:s,stack:nl(s)},$y.set(n,s),s)}return{value:n,source:s,stack:nl(s)}}var Fa=[],Ga=0,Mc=null,Rl=0,zn=[],Bn=0,Mi=null,xr=1,Mr="";function Zr(n,s){Fa[Ga++]=Rl,Fa[Ga++]=Mc,Mc=n,Rl=s}function Fy(n,s,o){zn[Bn++]=xr,zn[Bn++]=Mr,zn[Bn++]=Mi,Mi=n;var u=xr;n=Mr;var d=32-yt(u)-1;u&=~(1<<d),o+=1;var p=32-yt(s)+d;if(30<p){var v=d-d%5;p=(u&(1<<v)-1).toString(32),u>>=v,d-=v,xr=1<<32-yt(s)+d|o<<d|u,Mr=p+n}else xr=1<<p|o<<d|u,Mr=n}function wd(n){n.return!==null&&(Zr(n,1),Fy(n,1,0))}function bd(n){for(;n===Mc;)Mc=Fa[--Ga],Fa[Ga]=null,Rl=Fa[--Ga],Fa[Ga]=null;for(;n===Mi;)Mi=zn[--Bn],zn[Bn]=null,Mr=zn[--Bn],zn[Bn]=null,xr=zn[--Bn],zn[Bn]=null}function Gy(n,s){zn[Bn++]=xr,zn[Bn++]=Mr,zn[Bn++]=Mi,xr=s.id,Mr=s.overflow,Mi=n}var Yt=null,it=null,je=!1,Ui=null,qn=!1,Td=Error(r(519));function Vi(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(jn(s,n)),Td}function Ky(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[At]=n,s[qt]=u,o){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(o=0;o<Yl.length;o++)Pe(Yl[o],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),mc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Ii(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||cE(s.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=er),s=!0):s=!1,s||Vi(n,!0)}function Qy(n){for(Yt=n.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Yt=Yt.return}}function Ka(n){if(n!==Yt)return!1;if(!je)return Qy(n),je=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Bm(n.type,n.memoizedProps)),o=!o),o&&it&&Vi(n),Qy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=vE(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=vE(n)}else s===27?(s=it,Wi(n.type)?(n=Gm,Gm=null,it=n):it=s):it=Yt?$n(n.stateNode.nextSibling):null;return!0}function Ks(){it=Yt=null,je=!1}function Sd(){var n=Ui;return n!==null&&(_n===null?_n=n:_n.push.apply(_n,n),Ui=null),n}function Cl(n){Ui===null?Ui=[n]:Ui.push(n)}var Ad=M(null),Qs=null,ei=null;function Li(n,s,o){oe(Ad,s._currentValue),s._currentValue=o}function ti(n){n._currentValue=Ad.current,te(Ad)}function Rd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Cd(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var v=d.child;p=p.firstContext;e:for(;p!==null;){var T=p;p=d;for(var k=0;k<s.length;k++)if(T.context===s[k]){p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),Rd(p.return,o,n),u||(v=null);break e}p=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Rd(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Qa(n,s,o,u){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=d.type;Sn(d.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(d===ze.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(eu):n=[eu])}d=d.return}n!==null&&Cd(s,n,o,u),s.flags|=262144}function Uc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ys(n){Qs=n,ei=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return Yy(Qs,n)}function Vc(n,s){return Qs===null&&Ys(n),Yy(n,s)}function Yy(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ei===null){if(n===null)throw Error(r(308));ei=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ei=ei.next=s;return o}var tR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},nR=i.unstable_scheduleCallback,rR=i.unstable_NormalPriority,It={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Id(){return{controller:new tR,data:new Map,refCount:0}}function Il(n){n.refCount--,n.refCount===0&&nR(rR,function(){n.controller.abort()})}var Ol=null,Od=0,Ya=0,Ja=null;function iR(n,s){if(Ol===null){var o=Ol=[];Od=0,Ya=km(),Ja={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Od++,s.then(Jy,Jy),s}function Jy(){if(--Od===0&&Ol!==null){Ja!==null&&(Ja.status="fulfilled");var n=Ol;Ol=null,Ya=0,Ja=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function sR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Wy=X.S;X.S=function(n,s){xv=cn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&iR(n,s),Wy!==null&&Wy(n,s)};var Js=M(null);function Nd(){var n=Js.current;return n!==null?n:nt.pooledCache}function Lc(n,s){s===null?oe(Js,Js.current):oe(Js,s.pool)}function Xy(){var n=Nd();return n===null?null:{parent:It._currentValue,pool:n}}var Wa=Error(r(460)),Dd=Error(r(474)),jc=Error(r(542)),zc={then:function(){}};function Zy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function e_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(er,er),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n_(n),n;default:if(typeof s.status=="string")s.then(er,er);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n_(n),n}throw Xs=s,Wa}}function Ws(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xs=o,Wa):o}}var Xs=null;function t_(){if(Xs===null)throw Error(r(459));var n=Xs;return Xs=null,n}function n_(n){if(n===Wa||n===jc)throw Error(r(483))}var Xa=null,Nl=0;function Bc(n){var s=Nl;return Nl+=1,Xa===null&&(Xa=[]),e_(Xa,n,s)}function Dl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function qc(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function r_(n){function s(B,x){if(n){var F=B.deletions;F===null?(B.deletions=[x],B.flags|=16):F.push(x)}}function o(B,x){if(!n)return null;for(;x!==null;)s(B,x),x=x.sibling;return null}function u(B){for(var x=new Map;B!==null;)B.key!==null?x.set(B.key,B):x.set(B.index,B),B=B.sibling;return x}function d(B,x){return B=Xr(B,x),B.index=0,B.sibling=null,B}function p(B,x,F){return B.index=F,n?(F=B.alternate,F!==null?(F=F.index,F<x?(B.flags|=67108866,x):F):(B.flags|=67108866,x)):(B.flags|=1048576,x)}function v(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function T(B,x,F,Z){return x===null||x.tag!==6?(x=vd(F,B.mode,Z),x.return=B,x):(x=d(x,F),x.return=B,x)}function k(B,x,F,Z){var ye=F.type;return ye===U?W(B,x,F.props.children,Z,F.key):x!==null&&(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&Ws(ye)===x.type)?(x=d(x,F.props),Dl(x,F),x.return=B,x):(x=xc(F.type,F.key,F.props,null,B.mode,Z),Dl(x,F),x.return=B,x)}function G(B,x,F,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==F.containerInfo||x.stateNode.implementation!==F.implementation?(x=Ed(F,B.mode,Z),x.return=B,x):(x=d(x,F.children||[]),x.return=B,x)}function W(B,x,F,Z,ye){return x===null||x.tag!==7?(x=Gs(F,B.mode,Z,ye),x.return=B,x):(x=d(x,F),x.return=B,x)}function ee(B,x,F){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=vd(""+x,B.mode,F),x.return=B,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case S:return F=xc(x.type,x.key,x.props,null,B.mode,F),Dl(F,x),F.return=B,F;case N:return x=Ed(x,B.mode,F),x.return=B,x;case C:return x=Ws(x),ee(B,x,F)}if(Mt(x)||q(x))return x=Gs(x,B.mode,F,null),x.return=B,x;if(typeof x.then=="function")return ee(B,Bc(x),F);if(x.$$typeof===H)return ee(B,Vc(B,x),F);qc(B,x)}return null}function Q(B,x,F,Z){var ye=x!==null?x.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:T(B,x,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===ye?k(B,x,F,Z):null;case N:return F.key===ye?G(B,x,F,Z):null;case C:return F=Ws(F),Q(B,x,F,Z)}if(Mt(F)||q(F))return ye!==null?null:W(B,x,F,Z,null);if(typeof F.then=="function")return Q(B,x,Bc(F),Z);if(F.$$typeof===H)return Q(B,x,Vc(B,F),Z);qc(B,F)}return null}function J(B,x,F,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(F)||null,T(x,B,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return B=B.get(Z.key===null?F:Z.key)||null,k(x,B,Z,ye);case N:return B=B.get(Z.key===null?F:Z.key)||null,G(x,B,Z,ye);case C:return Z=Ws(Z),J(B,x,F,Z,ye)}if(Mt(Z)||q(Z))return B=B.get(F)||null,W(x,B,Z,ye,null);if(typeof Z.then=="function")return J(B,x,F,Bc(Z),ye);if(Z.$$typeof===H)return J(B,x,F,Vc(x,Z),ye);qc(x,Z)}return null}function fe(B,x,F,Z){for(var ye=null,He=null,de=x,De=x=0,Me=null;de!==null&&De<F.length;De++){de.index>De?(Me=de,de=null):Me=de.sibling;var $e=Q(B,de,F[De],Z);if($e===null){de===null&&(de=Me);break}n&&de&&$e.alternate===null&&s(B,de),x=p($e,x,De),He===null?ye=$e:He.sibling=$e,He=$e,de=Me}if(De===F.length)return o(B,de),je&&Zr(B,De),ye;if(de===null){for(;De<F.length;De++)de=ee(B,F[De],Z),de!==null&&(x=p(de,x,De),He===null?ye=de:He.sibling=de,He=de);return je&&Zr(B,De),ye}for(de=u(de);De<F.length;De++)Me=J(de,B,De,F[De],Z),Me!==null&&(n&&Me.alternate!==null&&de.delete(Me.key===null?De:Me.key),x=p(Me,x,De),He===null?ye=Me:He.sibling=Me,He=Me);return n&&de.forEach(function(ns){return s(B,ns)}),je&&Zr(B,De),ye}function Ee(B,x,F,Z){if(F==null)throw Error(r(151));for(var ye=null,He=null,de=x,De=x=0,Me=null,$e=F.next();de!==null&&!$e.done;De++,$e=F.next()){de.index>De?(Me=de,de=null):Me=de.sibling;var ns=Q(B,de,$e.value,Z);if(ns===null){de===null&&(de=Me);break}n&&de&&ns.alternate===null&&s(B,de),x=p(ns,x,De),He===null?ye=ns:He.sibling=ns,He=ns,de=Me}if($e.done)return o(B,de),je&&Zr(B,De),ye;if(de===null){for(;!$e.done;De++,$e=F.next())$e=ee(B,$e.value,Z),$e!==null&&(x=p($e,x,De),He===null?ye=$e:He.sibling=$e,He=$e);return je&&Zr(B,De),ye}for(de=u(de);!$e.done;De++,$e=F.next())$e=J(de,B,De,$e.value,Z),$e!==null&&(n&&$e.alternate!==null&&de.delete($e.key===null?De:$e.key),x=p($e,x,De),He===null?ye=$e:He.sibling=$e,He=$e);return n&&de.forEach(function(p1){return s(B,p1)}),je&&Zr(B,De),ye}function tt(B,x,F,Z){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var ye=F.key;x!==null;){if(x.key===ye){if(ye=F.type,ye===U){if(x.tag===7){o(B,x.sibling),Z=d(x,F.props.children),Z.return=B,B=Z;break e}}else if(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===C&&Ws(ye)===x.type){o(B,x.sibling),Z=d(x,F.props),Dl(Z,F),Z.return=B,B=Z;break e}o(B,x);break}else s(B,x);x=x.sibling}F.type===U?(Z=Gs(F.props.children,B.mode,Z,F.key),Z.return=B,B=Z):(Z=xc(F.type,F.key,F.props,null,B.mode,Z),Dl(Z,F),Z.return=B,B=Z)}return v(B);case N:e:{for(ye=F.key;x!==null;){if(x.key===ye)if(x.tag===4&&x.stateNode.containerInfo===F.containerInfo&&x.stateNode.implementation===F.implementation){o(B,x.sibling),Z=d(x,F.children||[]),Z.return=B,B=Z;break e}else{o(B,x);break}else s(B,x);x=x.sibling}Z=Ed(F,B.mode,Z),Z.return=B,B=Z}return v(B);case C:return F=Ws(F),tt(B,x,F,Z)}if(Mt(F))return fe(B,x,F,Z);if(q(F)){if(ye=q(F),typeof ye!="function")throw Error(r(150));return F=ye.call(F),Ee(B,x,F,Z)}if(typeof F.then=="function")return tt(B,x,Bc(F),Z);if(F.$$typeof===H)return tt(B,x,Vc(B,F),Z);qc(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,x!==null&&x.tag===6?(o(B,x.sibling),Z=d(x,F),Z.return=B,B=Z):(o(B,x),Z=vd(F,B.mode,Z),Z.return=B,B=Z),v(B)):o(B,x)}return function(B,x,F,Z){try{Nl=0;var ye=tt(B,x,F,Z);return Xa=null,ye}catch(de){if(de===Wa||de===jc)throw de;var He=An(29,de,null,B.mode);return He.lanes=Z,He.return=B,He}finally{}}}var Zs=r_(!0),i_=r_(!1),ji=!1;function kd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Bi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Pc(n),By(n,null,o),s}return kc(n,u,s,o),Pc(n)}function kl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,sl(n,o)}}function xd(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Md=!1;function Pl(){if(Md){var n=Ja;if(n!==null)throw n}}function xl(n,s,o,u){Md=!1;var d=n.updateQueue;ji=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var k=T,G=k.next;k.next=null,v===null?p=G:v.next=G,v=k;var W=n.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==v&&(T===null?W.firstBaseUpdate=G:T.next=G,W.lastBaseUpdate=k))}if(p!==null){var ee=d.baseState;v=0,W=G=k=null,T=p;do{var Q=T.lane&-536870913,J=Q!==T.lane;if(J?(xe&Q)===Q:(u&Q)===Q){Q!==0&&Q===Ya&&(Md=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=n,Ee=T;Q=s;var tt=o;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){ee=fe.call(tt,ee,Q);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,Q=typeof fe=="function"?fe.call(tt,ee,Q):fe,Q==null)break e;ee=E({},ee,Q);break e;case 2:ji=!0}}Q=T.callback,Q!==null&&(n.flags|=64,J&&(n.flags|=8192),J=d.callbacks,J===null?d.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(G=W=J,k=ee):W=W.next=J,v|=Q;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;J=T,T=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);W===null&&(k=ee),d.baseState=k,d.firstBaseUpdate=G,d.lastBaseUpdate=W,p===null&&(d.shared.lanes=0),Gi|=v,n.lanes=v,n.memoizedState=ee}}function s_(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function a_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)s_(o[n],s)}var Za=M(null),Hc=M(0);function o_(n,s){n=ci,oe(Hc,n),oe(Za,s),ci=n|s.baseLanes}function Ud(){oe(Hc,ci),oe(Za,Za.current)}function Vd(){ci=Hc.current,te(Za),te(Hc)}var Rn=M(null),Hn=null;function qi(n){var s=n.alternate;oe(vt,vt.current&1),oe(Rn,n),Hn===null&&(s===null||Za.current!==null||s.memoizedState!==null)&&(Hn=n)}function Ld(n){oe(vt,vt.current),oe(Rn,n),Hn===null&&(Hn=n)}function l_(n){n.tag===22?(oe(vt,vt.current),oe(Rn,n),Hn===null&&(Hn=n)):Hi()}function Hi(){oe(vt,vt.current),oe(Rn,Rn.current)}function Cn(n){te(Rn),Hn===n&&(Hn=null),te(vt)}var vt=M(0);function $c(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||$m(o)||Fm(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ni=0,Oe=null,Ze=null,Ot=null,Fc=!1,eo=!1,ea=!1,Gc=0,Ml=0,to=null,aR=0;function gt(){throw Error(r(321))}function jd(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Sn(n[o],s[o]))return!1;return!0}function zd(n,s,o,u,d,p){return ni=p,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?F_:tm,ea=!1,p=o(u,d),ea=!1,eo&&(p=c_(s,o,u,d)),u_(n),p}function u_(n){X.H=Ll;var s=Ze!==null&&Ze.next!==null;if(ni=0,Ot=Ze=Oe=null,Fc=!1,Ml=0,to=null,s)throw Error(r(300));n===null||Nt||(n=n.dependencies,n!==null&&Uc(n)&&(Nt=!0))}function c_(n,s,o,u){Oe=n;var d=0;do{if(eo&&(to=null),Ml=0,eo=!1,25<=d)throw Error(r(301));if(d+=1,Ot=Ze=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=G_,p=s(o,u)}while(eo);return p}function oR(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Ul(s):s,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Bd(){var n=Gc!==0;return Gc=0,n}function qd(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Hd(n){if(Fc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Fc=!1}ni=0,Ot=Ze=Oe=null,eo=!1,Ml=Gc=0,to=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Oe.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Et(){if(Ze===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var s=Ot===null?Oe.memoizedState:Ot.next;if(s!==null)Ot=s,Ze=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ot===null?Oe.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function Kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(n){var s=Ml;return Ml+=1,to===null&&(to=[]),n=e_(to,n,s),s=Oe,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?F_:tm),n}function Qc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ul(n);if(n.$$typeof===H)return Jt(n)}throw Error(r(438,String(n)))}function $d(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kc(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=V;return s.index++,o}function ri(n,s){return typeof s=="function"?s(n):s}function Yc(n){var s=Et();return Fd(s,Ze,n)}function Fd(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,p=u.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}s.baseQueue=d=p,u.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var T=v=null,k=null,G=s,W=!1;do{var ee=G.lane&-536870913;if(ee!==G.lane?(xe&ee)===ee:(ni&ee)===ee){var Q=G.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ee===Ya&&(W=!0);else if((ni&Q)===Q){G=G.next,Q===Ya&&(W=!0);continue}else ee={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(T=k=ee,v=p):k=k.next=ee,Oe.lanes|=Q,Gi|=Q;ee=G.action,ea&&o(p,ee),p=G.hasEagerState?G.eagerState:o(p,ee)}else Q={lane:ee,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(T=k=Q,v=p):k=k.next=Q,Oe.lanes|=ee,Gi|=ee;G=G.next}while(G!==null&&G!==s);if(k===null?v=p:k.next=T,!Sn(p,n.memoizedState)&&(Nt=!0,W&&(o=Ja,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=k,u.lastRenderedState=p}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Gd(n){var s=Et(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Sn(p,s.memoizedState)||(Nt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function h_(n,s,o){var u=Oe,d=Et(),p=je;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var v=!Sn((Ze||d).memoizedState,o);if(v&&(d.memoizedState=o,Nt=!0),d=d.queue,Yd(m_.bind(null,u,d,n),[n]),d.getSnapshot!==s||v||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,no(9,{destroy:void 0},d_.bind(null,u,d,o,s),null),nt===null)throw Error(r(349));p||(ni&127)!==0||f_(u,s,o)}return o}function f_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=Kc(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function d_(n,s,o,u){s.value=o,s.getSnapshot=u,g_(s)&&p_(n)}function m_(n,s,o){return o(function(){g_(s)&&p_(n)})}function g_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Sn(n,o)}catch{return!0}}function p_(n){var s=Fs(n,2);s!==null&&vn(s,n,2)}function Kd(n){var s=fn();if(typeof n=="function"){var o=n;if(n=o(),ea){Pn(!0);try{o()}finally{Pn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},s}function y_(n,s,o,u){return n.baseState=o,Fd(n,Ze,typeof u=="function"?u:ri)}function lR(n,s,o,u,d){if(Xc(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,__(s,p)):(p.next=o.next,s.pending=o.next=p)}}function __(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var p=X.T,v={};X.T=v;try{var T=o(d,u),k=X.S;k!==null&&k(v,T),v_(n,s,T)}catch(G){Qd(n,s,G)}finally{p!==null&&v.types!==null&&(p.types=v.types),X.T=p}}else try{p=o(d,u),v_(n,s,p)}catch(G){Qd(n,s,G)}}function v_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){E_(n,s,u)},function(u){return Qd(n,s,u)}):E_(n,s,o)}function E_(n,s,o){s.status="fulfilled",s.value=o,w_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,__(n,o)))}function Qd(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,w_(s),s=s.next;while(s!==u)}n.action=null}function w_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function b_(n,s){return s}function T_(n,s){if(je){var o=nt.formState;if(o!==null){e:{var u=Oe;if(je){if(it){t:{for(var d=it,p=qn;d.nodeType!==8;){if(!p){d=null;break t}if(d=$n(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){it=$n(d.nextSibling),u=d.data==="F!";break e}}Vi(u)}u=!1}u&&(s=o[0])}}return o=fn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b_,lastRenderedState:s},o.queue=u,o=q_.bind(null,Oe,u),u.dispatch=o,u=Kd(!1),p=em.bind(null,Oe,!1,u.queue),u=fn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=lR.bind(null,Oe,d,p,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function S_(n){var s=Et();return A_(s,Ze,n)}function A_(n,s,o){if(s=Fd(n,s,b_)[0],n=Yc(ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ul(s)}catch(v){throw v===Wa?jc:v}else u=s;s=Et();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,no(9,{destroy:void 0},uR.bind(null,d,o),null)),[u,p,n]}function uR(n,s){n.action=s}function R_(n){var s=Et(),o=Ze;if(o!==null)return A_(s,o,n);Et(),s=s.memoizedState,o=Et();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function no(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Kc(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function C_(){return Et().memoizedState}function Jc(n,s,o,u){var d=fn();Oe.flags|=n,d.memoizedState=no(1|s,{destroy:void 0},o,u===void 0?null:u)}function Wc(n,s,o,u){var d=Et();u=u===void 0?null:u;var p=d.memoizedState.inst;Ze!==null&&u!==null&&jd(u,Ze.memoizedState.deps)?d.memoizedState=no(s,p,o,u):(Oe.flags|=n,d.memoizedState=no(1|s,p,o,u))}function I_(n,s){Jc(8390656,8,n,s)}function Yd(n,s){Wc(2048,8,n,s)}function cR(n){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Kc(),Oe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function O_(n){var s=Et().memoizedState;return cR({ref:s,nextImpl:n}),function(){if((Ge&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function N_(n,s){return Wc(4,2,n,s)}function D_(n,s){return Wc(4,4,n,s)}function k_(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function P_(n,s,o){o=o!=null?o.concat([n]):null,Wc(4,4,k_.bind(null,s,n),o)}function Jd(){}function x_(n,s){var o=Et();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&jd(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function M_(n,s){var o=Et();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&jd(s,u[1]))return u[0];if(u=n(),ea){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,s],u}function Wd(n,s,o){return o===void 0||(ni&1073741824)!==0&&(xe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Uv(),Oe.lanes|=n,Gi|=n,o)}function U_(n,s,o,u){return Sn(o,s)?o:Za.current!==null?(n=Wd(n,o,u),Sn(n,s)||(Nt=!0),n):(ni&42)===0||(ni&1073741824)!==0&&(xe&261930)===0?(Nt=!0,n.memoizedState=o):(n=Uv(),Oe.lanes|=n,Gi|=n,s)}function V_(n,s,o,u,d){var p=ae.p;ae.p=p!==0&&8>p?p:8;var v=X.T,T={};X.T=T,em(n,!1,s,o);try{var k=d(),G=X.S;if(G!==null&&G(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=sR(k,u);Vl(n,s,W,Nn(n))}else Vl(n,s,u,Nn(n))}catch(ee){Vl(n,s,{then:function(){},status:"rejected",reason:ee},Nn())}finally{ae.p=p,v!==null&&T.types!==null&&(v.types=T.types),X.T=v}}function hR(){}function Xd(n,s,o,u){if(n.tag!==5)throw Error(r(476));var d=L_(n).queue;V_(n,d,s,_e,o===null?hR:function(){return j_(n),o(u)})}function L_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function j_(n){var s=L_(n);s.next===null&&(s=n.alternate.memoizedState),Vl(n,s.next.queue,{},Nn())}function Zd(){return Jt(eu)}function z_(){return Et().memoizedState}function B_(){return Et().memoizedState}function fR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Nn();n=zi(o);var u=Bi(s,n,o);u!==null&&(vn(u,s,o),kl(u,s,o)),s={cache:Id()},n.payload=s;return}s=s.return}}function dR(n,s,o){var u=Nn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xc(n)?H_(s,o):(o=yd(n,s,o,u),o!==null&&(vn(o,n,u),$_(o,s,u)))}function q_(n,s,o){var u=Nn();Vl(n,s,o,u)}function Vl(n,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xc(n))H_(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,T=p(v,o);if(d.hasEagerState=!0,d.eagerState=T,Sn(T,v))return kc(n,s,d,0),nt===null&&Dc(),!1}catch{}finally{}if(o=yd(n,s,d,u),o!==null)return vn(o,n,u),$_(o,s,u),!0}return!1}function em(n,s,o,u){if(u={lane:2,revertLane:km(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Xc(n)){if(s)throw Error(r(479))}else s=yd(n,o,u,2),s!==null&&vn(s,n,2)}function Xc(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function H_(n,s){eo=Fc=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function $_(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,sl(n,o)}}var Ll={readContext:Jt,use:Qc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Ll.useEffectEvent=gt;var F_={readContext:Jt,use:Qc,useCallback:function(n,s){return fn().memoizedState=[n,s===void 0?null:s],n},useContext:Jt,useEffect:I_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Jc(4194308,4,k_.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Jc(4194308,4,n,s)},useInsertionEffect:function(n,s){Jc(4,2,n,s)},useMemo:function(n,s){var o=fn();s=s===void 0?null:s;var u=n();if(ea){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=fn();if(o!==void 0){var d=o(s);if(ea){Pn(!0);try{o(s)}finally{Pn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=dR.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var s=fn();return n={current:n},s.memoizedState=n},useState:function(n){n=Kd(n);var s=n.queue,o=q_.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Jd,useDeferredValue:function(n,s){var o=fn();return Wd(o,n,s)},useTransition:function(){var n=Kd(!1);return n=V_.bind(null,Oe,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Oe,d=fn();if(je){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),nt===null)throw Error(r(349));(xe&127)!==0||f_(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,I_(m_.bind(null,u,p,n),[n]),u.flags|=2048,no(9,{destroy:void 0},d_.bind(null,u,p,o,s),null),o},useId:function(){var n=fn(),s=nt.identifierPrefix;if(je){var o=Mr,u=xr;o=(u&~(1<<32-yt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Gc++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=aR++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Zd,useFormState:T_,useActionState:T_,useOptimistic:function(n){var s=fn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=em.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:$d,useCacheRefresh:function(){return fn().memoizedState=fR.bind(null,Oe)},useEffectEvent:function(n){var s=fn(),o={impl:n};return s.memoizedState=o,function(){if((Ge&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},tm={readContext:Jt,use:Qc,useCallback:x_,useContext:Jt,useEffect:Yd,useImperativeHandle:P_,useInsertionEffect:N_,useLayoutEffect:D_,useMemo:M_,useReducer:Yc,useRef:C_,useState:function(){return Yc(ri)},useDebugValue:Jd,useDeferredValue:function(n,s){var o=Et();return U_(o,Ze.memoizedState,n,s)},useTransition:function(){var n=Yc(ri)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:Ul(n),s]},useSyncExternalStore:h_,useId:z_,useHostTransitionStatus:Zd,useFormState:S_,useActionState:S_,useOptimistic:function(n,s){var o=Et();return y_(o,Ze,n,s)},useMemoCache:$d,useCacheRefresh:B_};tm.useEffectEvent=O_;var G_={readContext:Jt,use:Qc,useCallback:x_,useContext:Jt,useEffect:Yd,useImperativeHandle:P_,useInsertionEffect:N_,useLayoutEffect:D_,useMemo:M_,useReducer:Gd,useRef:C_,useState:function(){return Gd(ri)},useDebugValue:Jd,useDeferredValue:function(n,s){var o=Et();return Ze===null?Wd(o,n,s):U_(o,Ze.memoizedState,n,s)},useTransition:function(){var n=Gd(ri)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:Ul(n),s]},useSyncExternalStore:h_,useId:z_,useHostTransitionStatus:Zd,useFormState:R_,useActionState:R_,useOptimistic:function(n,s){var o=Et();return Ze!==null?y_(o,Ze,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:$d,useCacheRefresh:B_};G_.useEffectEvent=O_;function nm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var rm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Nn(),d=zi(u);d.payload=s,o!=null&&(d.callback=o),s=Bi(n,d,u),s!==null&&(vn(s,n,u),kl(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Nn(),d=zi(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Bi(n,d,u),s!==null&&(vn(s,n,u),kl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Nn(),u=zi(o);u.tag=2,s!=null&&(u.callback=s),s=Bi(n,u,o),s!==null&&(vn(s,n,o),kl(s,n,o))}};function K_(n,s,o,u,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!Sl(o,u)||!Sl(d,p):!0}function Q_(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&rm.enqueueReplaceState(s,s.state,null)}function ta(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function Y_(n){Nc(n)}function J_(n){console.error(n)}function W_(n){Nc(n)}function Zc(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function X_(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function im(n,s,o){return o=zi(o),o.tag=3,o.payload={element:null},o.callback=function(){Zc(n,s)},o}function Z_(n){return n=zi(n),n.tag=3,n}function ev(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;n.payload=function(){return d(p)},n.callback=function(){X_(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){X_(s,o,u),typeof d!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function mR(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Qa(s,o,d,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Hn===null?hh():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===zc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Om(n,u,d)),!1;case 22:return o.flags|=65536,u===zc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Om(n,u,d)),!1}throw Error(r(435,o.tag))}return Om(n,u,d),hh(),!1}if(je)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Td&&(n=Error(r(422),{cause:u}),Cl(jn(n,o)))):(u!==Td&&(s=Error(r(423),{cause:u}),Cl(jn(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=jn(u,o),d=im(n.stateNode,u,d),xd(n,d),pt!==4&&(pt=2)),!1;var p=Error(r(520),{cause:u});if(p=jn(p,o),Gl===null?Gl=[p]:Gl.push(p),pt!==4&&(pt=2),s===null)return!0;u=jn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=im(o.stateNode,u,n),xd(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ki===null||!Ki.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=Z_(d),ev(d,n,o,u),xd(o,d),!1}o=o.return}while(o!==null);return!1}var sm=Error(r(461)),Nt=!1;function Wt(n,s,o,u){s.child=n===null?i_(s,null,o,u):Zs(s,n.child,o,u)}function tv(n,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Ys(s),u=zd(n,s,o,v,p,d),T=Bd(),n!==null&&!Nt?(qd(n,s,d),ii(n,s,d)):(je&&T&&wd(s),s.flags|=1,Wt(n,s,u,d),s.child)}function nv(n,s,o,u,d){if(n===null){var p=o.type;return typeof p=="function"&&!_d(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,rv(n,s,p,u,d)):(n=xc(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!dm(n,d)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:Sl,o(v,u)&&n.ref===s.ref)return ii(n,s,d)}return s.flags|=1,n=Xr(p,u),n.ref=s.ref,n.return=s,s.child=n}function rv(n,s,o,u,d){if(n!==null){var p=n.memoizedProps;if(Sl(p,u)&&n.ref===s.ref)if(Nt=!1,s.pendingProps=u=p,dm(n,d))(n.flags&131072)!==0&&(Nt=!0);else return s.lanes=n.lanes,ii(n,s,d)}return am(n,s,o,u,d)}function iv(n,s,o,u){var d=u.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,s.child=null;return sv(n,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lc(s,p!==null?p.cachePool:null),p!==null?o_(s,p):Ud(),l_(s);else return u=s.lanes=536870912,sv(n,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Lc(s,p.cachePool),o_(s,p),Hi(),s.memoizedState=null):(n!==null&&Lc(s,null),Ud(),Hi());return Wt(n,s,d,o),s.child}function jl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sv(n,s,o,u,d){var p=Nd();return p=p===null?null:{parent:It._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&Lc(s,null),Ud(),l_(s),n!==null&&Qa(n,s,u,!0),s.childLanes=d,null}function eh(n,s){return s=nh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function av(n,s,o){return Zs(s,n.child,null,o),n=eh(s,s.pendingProps),n.flags|=2,Cn(s),s.memoizedState=null,n}function gR(n,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(je){if(u.mode==="hidden")return n=eh(s,u),s.lanes=536870912,jl(null,n);if(Ld(s),(n=it)?(n=_E(n,qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Mi!==null?{id:xr,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Hy(n),o.return=s,s.child=o,Yt=s,it=null)):n=null,n===null)throw Vi(s);return s.lanes=536870912,null}return eh(s,u)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(Ld(s),d)if(s.flags&256)s.flags&=-257,s=av(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(Nt||Qa(n,s,o,!1),d=(o&n.childLanes)!==0,Nt||d){if(u=nt,u!==null&&(v=al(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Fs(n,v),vn(u,n,v),sm;hh(),s=av(n,s,o)}else n=p.treeContext,it=$n(v.nextSibling),Yt=s,je=!0,Ui=null,qn=!1,n!==null&&Gy(s,n),s=eh(s,u),s.flags|=4096;return s}return n=Xr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function th(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function am(n,s,o,u,d){return Ys(s),o=zd(n,s,o,u,void 0,d),u=Bd(),n!==null&&!Nt?(qd(n,s,d),ii(n,s,d)):(je&&u&&wd(s),s.flags|=1,Wt(n,s,o,d),s.child)}function ov(n,s,o,u,d,p){return Ys(s),s.updateQueue=null,o=c_(s,u,o,d),u_(n),u=Bd(),n!==null&&!Nt?(qd(n,s,p),ii(n,s,p)):(je&&u&&wd(s),s.flags|=1,Wt(n,s,o,p),s.child)}function lv(n,s,o,u,d){if(Ys(s),s.stateNode===null){var p=$a,v=o.contextType;typeof v=="object"&&v!==null&&(p=Jt(v)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=rm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},kd(s),v=o.contextType,p.context=typeof v=="object"&&v!==null?Jt(v):$a,p.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(nm(s,o,v,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&rm.enqueueReplaceState(p,p.state,null),xl(s,u,p,d),Pl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var T=s.memoizedProps,k=ta(o,T);p.props=k;var G=p.context,W=o.contextType;v=$a,typeof W=="object"&&W!==null&&(v=Jt(W));var ee=o.getDerivedStateFromProps;W=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||G!==v)&&Q_(s,p,u,v),ji=!1;var Q=s.memoizedState;p.state=Q,xl(s,u,p,d),Pl(),G=s.memoizedState,T||Q!==G||ji?(typeof ee=="function"&&(nm(s,o,ee,u),G=s.memoizedState),(k=ji||K_(s,o,k,u,Q,G,v))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),p.props=u,p.state=G,p.context=v,u=k):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Pd(n,s),v=s.memoizedProps,W=ta(o,v),p.props=W,ee=s.pendingProps,Q=p.context,G=o.contextType,k=$a,typeof G=="object"&&G!==null&&(k=Jt(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==ee||Q!==k)&&Q_(s,p,u,k),ji=!1,Q=s.memoizedState,p.state=Q,xl(s,u,p,d),Pl();var J=s.memoizedState;v!==ee||Q!==J||ji||n!==null&&n.dependencies!==null&&Uc(n.dependencies)?(typeof T=="function"&&(nm(s,o,T,u),J=s.memoizedState),(W=ji||K_(s,o,W,u,Q,J,k)||n!==null&&n.dependencies!==null&&Uc(n.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,J,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,J,k)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=J),p.props=u,p.state=J,p.context=k,u=W):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,th(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=Zs(s,n.child,null,d),s.child=Zs(s,null,o,d)):Wt(n,s,o,d),s.memoizedState=p.state,n=s.child):n=ii(n,s,d),n}function uv(n,s,o,u){return Ks(),s.flags|=256,Wt(n,s,o,u),s.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lm(n){return{baseLanes:n,cachePool:Xy()}}function um(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=On),n}function cv(n,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(vt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(je){if(d?qi(s):Hi(),(n=it)?(n=_E(n,qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Mi!==null?{id:xr,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Hy(n),o.return=s,s.child=o,Yt=s,it=null)):n=null,n===null)throw Vi(s);return Fm(n)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Hi(),d=s.mode,T=nh({mode:"hidden",children:T},d),u=Gs(u,d,o,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=lm(o),u.childLanes=um(n,v,o),s.memoizedState=om,jl(null,u)):(qi(s),cm(s,T))}var k=n.memoizedState;if(k!==null&&(T=k.dehydrated,T!==null)){if(p)s.flags&256?(qi(s),s.flags&=-257,s=hm(n,s,o)):s.memoizedState!==null?(Hi(),s.child=n.child,s.flags|=128,s=null):(Hi(),T=u.fallback,d=s.mode,u=nh({mode:"visible",children:u.children},d),T=Gs(T,d,o,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,Zs(s,n.child,null,o),u=s.child,u.memoizedState=lm(o),u.childLanes=um(n,v,o),s.memoizedState=om,s=jl(null,u));else if(qi(s),Fm(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var G=v.dgst;v=G,u=Error(r(419)),u.stack="",u.digest=v,Cl({value:u,source:null,stack:null}),s=hm(n,s,o)}else if(Nt||Qa(n,s,o,!1),v=(o&n.childLanes)!==0,Nt||v){if(v=nt,v!==null&&(u=al(v,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Fs(n,u),vn(v,n,u),sm;$m(T)||hh(),s=hm(n,s,o)}else $m(T)?(s.flags|=192,s.child=n.child,s=null):(n=k.treeContext,it=$n(T.nextSibling),Yt=s,je=!0,Ui=null,qn=!1,n!==null&&Gy(s,n),s=cm(s,u.children),s.flags|=4096);return s}return d?(Hi(),T=u.fallback,d=s.mode,k=n.child,G=k.sibling,u=Xr(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,G!==null?T=Xr(G,T):(T=Gs(T,d,o,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,jl(null,u),u=s.child,T=n.child.memoizedState,T===null?T=lm(o):(d=T.cachePool,d!==null?(k=It._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Xy(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=um(n,v,o),s.memoizedState=om,jl(n.child,u)):(qi(s),o=n.child,n=o.sibling,o=Xr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function cm(n,s){return s=nh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function nh(n,s){return n=An(22,n,null,s),n.lanes=0,n}function hm(n,s,o){return Zs(s,n.child,null,o),n=cm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function hv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Rd(n.return,s,o)}function fm(n,s,o,u,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=p)}function fv(n,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var v=vt.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,oe(vt,v),Wt(n,s,u,o),u=je?Rl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hv(n,o,s);else if(n.tag===19)hv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&$c(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),fm(s,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&$c(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}fm(s,!0,o,null,p,u);break;case"together":fm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ii(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Gi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Qa(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Xr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Xr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function dm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Uc(n)))}function pR(n,s,o){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Li(s,It,n.memoizedState.cache),Ks();break;case 27:case 5:Cs(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Li(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ld(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(qi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?cv(n,s,o):(qi(s),n=ii(n,s,o),n!==null?n.sibling:null);qi(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Qa(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return fv(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(vt,vt.current),u)break;return null;case 22:return s.lanes=0,iv(n,s,o,s.pendingProps);case 24:Li(s,It,n.memoizedState.cache)}return ii(n,s,o)}function dv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Nt=!0;else{if(!dm(n,o)&&(s.flags&128)===0)return Nt=!1,pR(n,s,o);Nt=(n.flags&131072)!==0}else Nt=!1,je&&(s.flags&1048576)!==0&&Fy(s,Rl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ws(s.elementType),s.type=n,typeof n=="function")_d(n)?(u=ta(n,u),s.tag=1,s=lv(null,s,n,u,o)):(s.tag=0,s=am(null,s,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===re){s.tag=11,s=tv(null,s,n,u,o);break e}else if(d===O){s.tag=14,s=nv(null,s,n,u,o);break e}}throw s=ot(n)||n,Error(r(306,s,""))}}return s;case 0:return am(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=ta(u,s.pendingProps),lv(n,s,u,d,o);case 3:e:{if(Ut(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Pd(n,s),xl(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Li(s,It,u),u!==p.cache&&Cd(s,[It],o,!0),Pl(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=uv(n,s,u,o);break e}else if(u!==d){d=jn(Error(r(424)),s),Cl(d),s=uv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(it=$n(n.firstChild),Yt=s,je=!0,Ui=null,qn=!0,o=i_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ks(),u===d){s=ii(n,s,o);break e}Wt(n,s,u,o)}s=s.child}return s;case 26:return th(n,s),n===null?(o=SE(s.type,null,s.pendingProps,null))?s.memoizedState=o:je||(o=s.type,n=s.pendingProps,u=_h(Ne.current).createElement(o),u[At]=s,u[qt]=n,Xt(u,o,n),Rt(u),s.stateNode=u):s.memoizedState=SE(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Cs(s),n===null&&je&&(u=s.stateNode=wE(s.type,s.pendingProps,Ne.current),Yt=s,qn=!0,d=it,Wi(s.type)?(Gm=d,it=$n(u.firstChild)):it=d),Wt(n,s,s.pendingProps.children,o),th(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&je&&((d=u=it)&&(u=GR(u,s.type,s.pendingProps,qn),u!==null?(s.stateNode=u,Yt=s,it=$n(u.firstChild),qn=!1,d=!0):d=!1),d||Vi(s)),Cs(s),d=s.type,p=s.pendingProps,v=n!==null?n.memoizedProps:null,u=p.children,Bm(d,p)?u=null:v!==null&&Bm(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=zd(n,s,oR,null,null,o),eu._currentValue=d),th(n,s),Wt(n,s,u,o),s.child;case 6:return n===null&&je&&((n=o=it)&&(o=KR(o,s.pendingProps,qn),o!==null?(s.stateNode=o,Yt=s,it=null,n=!0):n=!1),n||Vi(s)),null;case 13:return cv(n,s,o);case 4:return Ut(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Zs(s,null,u,o):Wt(n,s,u,o),s.child;case 11:return tv(n,s,s.type,s.pendingProps,o);case 7:return Wt(n,s,s.pendingProps,o),s.child;case 8:return Wt(n,s,s.pendingProps.children,o),s.child;case 12:return Wt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Li(s,s.type,u.value),Wt(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ys(s),d=Jt(d),u=u(d),s.flags|=1,Wt(n,s,u,o),s.child;case 14:return nv(n,s,s.type,s.pendingProps,o);case 15:return rv(n,s,s.type,s.pendingProps,o);case 19:return fv(n,s,o);case 31:return gR(n,s,o);case 22:return iv(n,s,o,s.pendingProps);case 24:return Ys(s),u=Jt(It),n===null?(d=Nd(),d===null&&(d=nt,p=Id(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},kd(s),Li(s,It,d)):((n.lanes&o)!==0&&(Pd(n,s),xl(s,null,null,o),Pl()),d=n.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Li(s,It,u)):(u=p.cache,Li(s,It,u),u!==d.cache&&Cd(s,[It],o,!0))),Wt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function si(n){n.flags|=4}function mm(n,s,o,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(zv())n.flags|=8192;else throw Xs=zc,Dd}else n.flags&=-16777217}function mv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!OE(s))if(zv())n.flags|=8192;else throw Xs=zc,Dd}function rh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?uc():536870912,n.lanes|=s,ao|=s)}function zl(n,s){if(!je)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function st(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function yR(n,s,o){var u=s.pendingProps;switch(bd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(s),null;case 1:return st(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ti(It),lt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ka(s)?si(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sd())),st(s),null;case 26:var d=s.type,p=s.memoizedState;return n===null?(si(s),p!==null?(st(s),mv(s,p)):(st(s),mm(s,d,null,u,o))):p?p!==n.memoizedState?(si(s),st(s),mv(s,p)):(st(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&si(s),st(s),mm(s,d,n,u,o)),null;case 27:if(Aa(s),o=Ne.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return st(s),null}n=ce.current,Ka(s)?Ky(s):(n=wE(d,u,o),s.stateNode=n,si(s))}return st(s),null;case 5:if(Aa(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return st(s),null}if(p=ce.current,Ka(s))Ky(s);else{var v=_h(Ne.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}p[At]=s,p[qt]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(Xt(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&si(s)}}return st(s),mm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&si(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ne.current,Ka(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=Yt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[At]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||cE(n.nodeValue,o)),n||Vi(s,!0)}else n=_h(n).createTextNode(u),n[At]=s,s.stateNode=n}return st(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ka(s),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[At]=s}else Ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),n=!1}else o=Sd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return st(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ka(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[At]=s}else Ks(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;st(s),d=!1}else d=Sd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),rh(s,s.updateQueue),st(s),null);case 4:return lt(),n===null&&Um(s.stateNode.containerInfo),st(s),null;case 10:return ti(s.type),st(s),null;case 19:if(te(vt),u=s.memoizedState,u===null)return st(s),null;if(d=(s.flags&128)!==0,p=u.rendering,p===null)if(d)zl(u,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=$c(n),p!==null){for(s.flags|=128,zl(u,!1),n=p.updateQueue,s.updateQueue=n,rh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)qy(o,n),o=o.sibling;return oe(vt,vt.current&1|2),je&&Zr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&cn()>lh&&(s.flags|=128,d=!0,zl(u,!1),s.lanes=4194304)}else{if(!d)if(n=$c(p),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,rh(s,n),zl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!je)return st(s),null}else 2*cn()-u.renderingStartTime>lh&&o!==536870912&&(s.flags|=128,d=!0,zl(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(n=u.last,n!==null?n.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=cn(),n.sibling=null,o=vt.current,oe(vt,d?o&1|2:o&1),je&&Zr(s,u.treeForkCount),n):(st(s),null);case 22:case 23:return Cn(s),Vd(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(st(s),s.subtreeFlags&6&&(s.flags|=8192)):st(s),o=s.updateQueue,o!==null&&rh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&te(Js),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ti(It),st(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function _R(n,s){switch(bd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ti(It),lt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Aa(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(r(340));Ks()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Cn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ks()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return te(vt),null;case 4:return lt(),null;case 10:return ti(s.type),null;case 22:case 23:return Cn(s),Vd(),n!==null&&te(Js),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ti(It),null;case 25:return null;default:return null}}function gv(n,s){switch(bd(s),s.tag){case 3:ti(It),lt();break;case 26:case 27:case 5:Aa(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:te(vt);break;case 10:ti(s.type);break;case 22:case 23:Cn(s),Vd(),n!==null&&te(Js);break;case 24:ti(It)}}function Bl(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==d)}}catch(T){We(s,s.return,T)}}function $i(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=s;var k=o,G=T;try{G()}catch(W){We(d,k,W)}}}u=u.next}while(u!==p)}}catch(W){We(s,s.return,W)}}function pv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{a_(s,o)}catch(u){We(n,n.return,u)}}}function yv(n,s,o){o.props=ta(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){We(n,s,u)}}function ql(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){We(n,s,d)}}function Ur(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){We(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){We(n,s,d)}else o.current=null}function _v(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){We(n,n.return,d)}}function gm(n,s,o){try{var u=n.stateNode;zR(u,n.type,o,s),u[qt]=s}catch(d){We(n,n.return,d)}}function vv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wi(n.type)||n.tag===4}function pm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ym(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=er));else if(u!==4&&(u===27&&Wi(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ym(n,s,o),n=n.sibling;n!==null;)ym(n,s,o),n=n.sibling}function ih(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Wi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(ih(n,s,o),n=n.sibling;n!==null;)ih(n,s,o),n=n.sibling}function Ev(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Xt(s,u,o),s[At]=n,s[qt]=o}catch(p){We(n,n.return,p)}}var ai=!1,Dt=!1,_m=!1,wv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function vR(n,s){if(n=n.containerInfo,jm=Ah,n=Py(n),hd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,T=-1,k=-1,G=0,W=0,ee=n,Q=null;t:for(;;){for(var J;ee!==o||d!==0&&ee.nodeType!==3||(T=v+d),ee!==p||u!==0&&ee.nodeType!==3||(k=v+u),ee.nodeType===3&&(v+=ee.nodeValue.length),(J=ee.firstChild)!==null;)Q=ee,ee=J;for(;;){if(ee===n)break t;if(Q===o&&++G===d&&(T=v),Q===p&&++W===u&&(k=v),(J=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=J}o=T===-1||k===-1?null:{start:T,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(zm={focusedElem:n,selectionRange:o},Ah=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var fe=ta(o.type,d);n=u.getSnapshotBeforeUpdate(fe,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){We(o,o.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Hm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function bv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:li(n,o),u&4&&Bl(5,o);break;case 1:if(li(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){We(o,o.return,v)}else{var d=ta(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){We(o,o.return,v)}}u&64&&pv(o),u&512&&ql(o,o.return);break;case 3:if(li(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{a_(n,s)}catch(v){We(o,o.return,v)}}break;case 27:s===null&&u&4&&Ev(o);case 26:case 5:li(n,o),s===null&&u&4&&_v(o),u&512&&ql(o,o.return);break;case 12:li(n,o);break;case 31:li(n,o),u&4&&Av(n,o);break;case 13:li(n,o),u&4&&Rv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=IR.bind(null,o),QR(n,o))));break;case 22:if(u=o.memoizedState!==null||ai,!u){s=s!==null&&s.memoizedState!==null||Dt,d=ai;var p=Dt;ai=u,(Dt=s)&&!p?ui(n,o,(o.subtreeFlags&8772)!==0):li(n,o),ai=d,Dt=p}break;case 30:break;default:li(n,o)}}function Tv(n){var s=n.alternate;s!==null&&(n.alternate=null,Tv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Na(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ct=null,gn=!1;function oi(n,s,o){for(o=o.child;o!==null;)Sv(n,s,o),o=o.sibling}function Sv(n,s,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Jn,o)}catch{}switch(o.tag){case 26:Dt||Ur(o,s),oi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Ur(o,s);var u=ct,d=gn;Wi(o.type)&&(ct=o.stateNode,gn=!1),oi(n,s,o),Wl(o.stateNode),ct=u,gn=d;break;case 5:Dt||Ur(o,s);case 6:if(u=ct,d=gn,ct=null,oi(n,s,o),ct=u,gn=d,ct!==null)if(gn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(o.stateNode)}catch(p){We(o,s,p)}else try{ct.removeChild(o.stateNode)}catch(p){We(o,s,p)}break;case 18:ct!==null&&(gn?(n=ct,pE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),go(n)):pE(ct,o.stateNode));break;case 4:u=ct,d=gn,ct=o.stateNode.containerInfo,gn=!0,oi(n,s,o),ct=u,gn=d;break;case 0:case 11:case 14:case 15:$i(2,o,s),Dt||$i(4,o,s),oi(n,s,o);break;case 1:Dt||(Ur(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&yv(o,s,u)),oi(n,s,o);break;case 21:oi(n,s,o);break;case 22:Dt=(u=Dt)||o.memoizedState!==null,oi(n,s,o),Dt=u;break;default:oi(n,s,o)}}function Av(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{go(n)}catch(o){We(s,s.return,o)}}}function Rv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{go(n)}catch(o){We(s,s.return,o)}}function ER(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new wv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new wv),s;default:throw Error(r(435,n.tag))}}function sh(n,s){var o=ER(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=OR.bind(null,n,u);u.then(d,d)}})}function pn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=n,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Wi(T.type)){ct=T.stateNode,gn=!1;break e}break;case 5:ct=T.stateNode,gn=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,gn=!0;break e}T=T.return}if(ct===null)throw Error(r(160));Sv(p,v,d),ct=null,gn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cv(s,n),s=s.sibling}var ar=null;function Cv(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:pn(s,n),yn(n),u&4&&($i(3,n,n.return),Bl(3,n),$i(5,n,n.return));break;case 1:pn(s,n),yn(n),u&512&&(Dt||o===null||Ur(o,o.return)),u&64&&ai&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=ar;if(pn(s,n),yn(n),u&512&&(Dt||o===null||Ur(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[br]||p[At]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),Xt(p,u,o),p[At]=n,Rt(p),u=p;break e;case"link":var v=CE("link","href",d).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(p=v[T],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}p=d.createElement(u),Xt(p,u,o),d.head.appendChild(p);break;case"meta":if(v=CE("meta","content",d).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(p=v[T],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}p=d.createElement(u),Xt(p,u,o),d.head.appendChild(p);break;default:throw Error(r(468,u))}p[At]=n,Rt(p),u=p}n.stateNode=u}else IE(d,n.type,n.stateNode);else n.stateNode=RE(d,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?IE(d,n.type,n.stateNode):RE(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&gm(n,n.memoizedProps,o.memoizedProps)}break;case 27:pn(s,n),yn(n),u&512&&(Dt||o===null||Ur(o,o.return)),o!==null&&u&4&&gm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(pn(s,n),yn(n),u&512&&(Dt||o===null||Ur(o,o.return)),n.flags&32){d=n.stateNode;try{mn(d,"")}catch(fe){We(n,n.return,fe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,gm(n,d,o!==null?o.memoizedProps:d)),u&1024&&(_m=!0);break;case 6:if(pn(s,n),yn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(fe){We(n,n.return,fe)}}break;case 3:if(wh=null,d=ar,ar=vh(s.containerInfo),pn(s,n),ar=d,yn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{go(s.containerInfo)}catch(fe){We(n,n.return,fe)}_m&&(_m=!1,Iv(n));break;case 4:u=ar,ar=vh(n.stateNode.containerInfo),pn(s,n),yn(n),ar=u;break;case 12:pn(s,n),yn(n);break;case 31:pn(s,n),yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sh(n,u)));break;case 13:pn(s,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(oh=cn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sh(n,u)));break;case 22:d=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,G=ai,W=Dt;if(ai=G||d,Dt=W||k,pn(s,n),Dt=W,ai=G,yn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||k||ai||Dt||na(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){k=o=s;try{if(p=k.stateNode,d)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=k.stateNode;var ee=k.memoizedProps.style,Q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(fe){We(k,k.return,fe)}}}else if(s.tag===6){if(o===null){k=s;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(fe){We(k,k.return,fe)}}}else if(s.tag===18){if(o===null){k=s;try{var J=k.stateNode;d?yE(J,!0):yE(k.stateNode,!1)}catch(fe){We(k,k.return,fe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,sh(n,o))));break;case 19:pn(s,n),yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,sh(n,u)));break;case 30:break;case 21:break;default:pn(s,n),yn(n)}}function yn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(vv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=pm(n);ih(n,p,d);break;case 5:var v=o.stateNode;o.flags&32&&(mn(v,""),o.flags&=-33);var T=pm(n);ih(n,T,v);break;case 3:case 4:var k=o.stateNode.containerInfo,G=pm(n);ym(n,G,k);break;default:throw Error(r(161))}}catch(W){We(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Iv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function li(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bv(n,s.alternate,s),s=s.sibling}function na(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:$i(4,s,s.return),na(s);break;case 1:Ur(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&yv(s,s.return,o),na(s);break;case 27:Wl(s.stateNode);case 26:case 5:Ur(s,s.return),na(s);break;case 22:s.memoizedState===null&&na(s);break;case 30:na(s);break;default:na(s)}n=n.sibling}}function ui(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:ui(d,p,o),Bl(4,p);break;case 1:if(ui(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){We(u,u.return,G)}if(u=p,d=u.updateQueue,d!==null){var T=u.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)s_(k[d],T)}catch(G){We(u,u.return,G)}}o&&v&64&&pv(p),ql(p,p.return);break;case 27:Ev(p);case 26:case 5:ui(d,p,o),o&&u===null&&v&4&&_v(p),ql(p,p.return);break;case 12:ui(d,p,o);break;case 31:ui(d,p,o),o&&v&4&&Av(d,p);break;case 13:ui(d,p,o),o&&v&4&&Rv(d,p);break;case 22:p.memoizedState===null&&ui(d,p,o),ql(p,p.return);break;case 30:break;default:ui(d,p,o)}s=s.sibling}}function vm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Il(o))}function Em(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Il(n))}function or(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ov(n,s,o,u),s=s.sibling}function Ov(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:or(n,s,o,u),d&2048&&Bl(9,s);break;case 1:or(n,s,o,u);break;case 3:or(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Il(n)));break;case 12:if(d&2048){or(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,v=p.id,T=p.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){We(s,s.return,k)}}else or(n,s,o,u);break;case 31:or(n,s,o,u);break;case 13:or(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?or(n,s,o,u):Hl(n,s):p._visibility&2?or(n,s,o,u):(p._visibility|=2,ro(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&vm(v,s);break;case 24:or(n,s,o,u),d&2048&&Em(s.alternate,s);break;default:or(n,s,o,u)}}function ro(n,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,v=s,T=o,k=u,G=v.flags;switch(v.tag){case 0:case 11:case 15:ro(p,v,T,k,d),Bl(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?ro(p,v,T,k,d):Hl(p,v):(W._visibility|=2,ro(p,v,T,k,d)),d&&G&2048&&vm(v.alternate,v);break;case 24:ro(p,v,T,k,d),d&&G&2048&&Em(v.alternate,v);break;default:ro(p,v,T,k,d)}s=s.sibling}}function Hl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Hl(o,u),d&2048&&vm(u.alternate,u);break;case 24:Hl(o,u),d&2048&&Em(u.alternate,u);break;default:Hl(o,u)}s=s.sibling}}var $l=8192;function io(n,s,o){if(n.subtreeFlags&$l)for(n=n.child;n!==null;)Nv(n,s,o),n=n.sibling}function Nv(n,s,o){switch(n.tag){case 26:io(n,s,o),n.flags&$l&&n.memoizedState!==null&&a1(o,ar,n.memoizedState,n.memoizedProps);break;case 5:io(n,s,o);break;case 3:case 4:var u=ar;ar=vh(n.stateNode.containerInfo),io(n,s,o),ar=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=$l,$l=16777216,io(n,s,o),$l=u):io(n,s,o));break;default:io(n,s,o)}}function Dv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Fl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,Pv(u,n)}Dv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)kv(n),n=n.sibling}function kv(n){switch(n.tag){case 0:case 11:case 15:Fl(n),n.flags&2048&&$i(9,n,n.return);break;case 3:Fl(n);break;case 12:Fl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ah(n)):Fl(n);break;default:Fl(n)}}function ah(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,Pv(u,n)}Dv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:$i(8,s,s.return),ah(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ah(s));break;default:ah(s)}n=n.sibling}}function Pv(n,s){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:$i(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Il(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var d=u.sibling,p=u.return;if(Tv(u),u===o){$t=null;break e}if(d!==null){d.return=p,$t=d;break e}$t=p}}}var wR={getCacheForType:function(n){var s=Jt(It),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Jt(It).controller.signal}},bR=typeof WeakMap=="function"?WeakMap:Map,Ge=0,nt=null,ke=null,xe=0,Je=0,In=null,Fi=!1,so=!1,wm=!1,ci=0,pt=0,Gi=0,ra=0,bm=0,On=0,ao=0,Gl=null,_n=null,Tm=!1,oh=0,xv=0,lh=1/0,uh=null,Ki=null,Lt=0,Qi=null,oo=null,hi=0,Sm=0,Am=null,Mv=null,Kl=0,Rm=null;function Nn(){return(Ge&2)!==0&&xe!==0?xe&-xe:X.T!==null?km():cc()}function Uv(){if(On===0)if((xe&536870912)===0||je){var n=Ns;Ns<<=1,(Ns&3932160)===0&&(Ns=262144),On=n}else On=536870912;return n=Rn.current,n!==null&&(n.flags|=32),On}function vn(n,s,o){(n===nt&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(lo(n,0),Yi(n,xe,On,!1)),Ds(n,o),((Ge&2)===0||n!==nt)&&(n===nt&&((Ge&2)===0&&(ra|=o),pt===4&&Yi(n,xe,On,!1)),Vr(n))}function Vv(n,s,o){if((Ge&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Wn(n,s),d=u?AR(n,s):Im(n,s,!0),p=u;do{if(d===0){so&&!u&&Yi(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!TR(o)){d=Im(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=n;d=Gl;var k=T.current.memoizedState.isDehydrated;if(k&&(lo(T,v).flags|=256),v=Im(T,v,!1),v!==2){if(wm&&!k){T.errorRecoveryDisabledLanes|=p,ra|=p,d=4;break e}p=_n,_n=d,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}d=v}if(p=!1,d!==2)continue}}if(d===1){lo(n,0),Yi(n,s,0,!0);break}e:{switch(u=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Yi(u,s,On,!Fi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=oh+300-cn(),10<d)){if(Yi(u,s,On,!Fi),vr(u,0,!0)!==0)break e;hi=s,u.timeoutHandle=mE(Lv.bind(null,u,o,_n,uh,Tm,s,On,ra,ao,Fi,p,"Throttled",-0,0),d);break e}Lv(u,o,_n,uh,Tm,s,On,ra,ao,Fi,p,null,-0,0)}}break}while(!0);Vr(n)}function Lv(n,s,o,u,d,p,v,T,k,G,W,ee,Q,J){if(n.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},Nv(s,p,ee);var fe=(p&62914560)===p?oh-cn():(p&4194048)===p?xv-cn():0;if(fe=o1(ee,fe),fe!==null){hi=p,n.cancelPendingCommit=fe(Gv.bind(null,n,s,p,o,u,d,v,T,k,W,ee,null,Q,J)),Yi(n,p,v,!G);return}}Gv(n,s,p,o,u,d,v,T,k)}function TR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Sn(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yi(n,s,o,u){s&=~bm,s&=~ra,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var p=31-yt(d),v=1<<p;u[p]=-1,d&=~v}o!==0&&ks(n,o,s)}function ch(){return(Ge&6)===0?(Ql(0),!1):!0}function Cm(){if(ke!==null){if(Je===0)var n=ke.return;else n=ke,ei=Qs=null,Hd(n),Xa=null,Nl=0,n=ke;for(;n!==null;)gv(n.alternate,n),n=n.return;ke=null}}function lo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,HR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),hi=0,Cm(),nt=n,ke=o=Xr(n.current,null),xe=s,Je=0,In=null,Fi=!1,so=Wn(n,s),wm=!1,ao=On=bm=ra=Gi=pt=0,_n=Gl=null,Tm=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-yt(u),p=1<<d;s|=n[d],u&=~p}return ci=s,Dc(),o}function jv(n,s){Oe=null,X.H=Ll,s===Wa||s===jc?(s=t_(),Je=3):s===Dd?(s=t_(),Je=4):Je=s===sm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,In=s,ke===null&&(pt=1,Zc(n,jn(s,n.current)))}function zv(){var n=Rn.current;return n===null?!0:(xe&4194048)===xe?Hn===null:(xe&62914560)===xe||(xe&536870912)!==0?n===Hn:!1}function Bv(){var n=X.H;return X.H=Ll,n===null?Ll:n}function qv(){var n=X.A;return X.A=wR,n}function hh(){pt=4,Fi||(xe&4194048)!==xe&&Rn.current!==null||(so=!0),(Gi&134217727)===0&&(ra&134217727)===0||nt===null||Yi(nt,xe,On,!1)}function Im(n,s,o){var u=Ge;Ge|=2;var d=Bv(),p=qv();(nt!==n||xe!==s)&&(uh=null,lo(n,s)),s=!1;var v=pt;e:do try{if(Je!==0&&ke!==null){var T=ke,k=In;switch(Je){case 8:Cm(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var G=Je;if(Je=0,In=null,uo(n,T,k,G),o&&so){v=0;break e}break;default:G=Je,Je=0,In=null,uo(n,T,k,G)}}SR(),v=pt;break}catch(W){jv(n,W)}while(!0);return s&&n.shellSuspendCounter++,ei=Qs=null,Ge=u,X.H=d,X.A=p,ke===null&&(nt=null,xe=0,Dc()),v}function SR(){for(;ke!==null;)Hv(ke)}function AR(n,s){var o=Ge;Ge|=2;var u=Bv(),d=qv();nt!==n||xe!==s?(uh=null,lh=cn()+500,lo(n,s)):so=Wn(n,s);e:do try{if(Je!==0&&ke!==null){s=ke;var p=In;t:switch(Je){case 1:Je=0,In=null,uo(n,s,p,1);break;case 2:case 9:if(Zy(p)){Je=0,In=null,$v(s);break}s=function(){Je!==2&&Je!==9||nt!==n||(Je=7),Vr(n)},p.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Zy(p)?(Je=0,In=null,$v(s)):(Je=0,In=null,uo(n,s,p,7));break;case 5:var v=null;switch(ke.tag){case 26:v=ke.memoizedState;case 5:case 27:var T=ke;if(v?OE(v):T.stateNode.complete){Je=0,In=null;var k=T.sibling;if(k!==null)ke=k;else{var G=T.return;G!==null?(ke=G,fh(G)):ke=null}break t}}Je=0,In=null,uo(n,s,p,5);break;case 6:Je=0,In=null,uo(n,s,p,6);break;case 8:Cm(),pt=6;break e;default:throw Error(r(462))}}RR();break}catch(W){jv(n,W)}while(!0);return ei=Qs=null,X.H=u,X.A=d,Ge=o,ke!==null?0:(nt=null,xe=0,Dc(),pt)}function RR(){for(;ke!==null&&!id();)Hv(ke)}function Hv(n){var s=dv(n.alternate,n,ci);n.memoizedProps=n.pendingProps,s===null?fh(n):ke=s}function $v(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=ov(o,s,s.pendingProps,s.type,void 0,xe);break;case 11:s=ov(o,s,s.pendingProps,s.type.render,s.ref,xe);break;case 5:Hd(s);default:gv(o,s),s=ke=qy(s,ci),s=dv(o,s,ci)}n.memoizedProps=n.pendingProps,s===null?fh(n):ke=s}function uo(n,s,o,u){ei=Qs=null,Hd(s),Xa=null,Nl=0;var d=s.return;try{if(mR(n,d,s,o,xe)){pt=1,Zc(n,jn(o,n.current)),ke=null;return}}catch(p){if(d!==null)throw ke=d,p;pt=1,Zc(n,jn(o,n.current)),ke=null;return}s.flags&32768?(je||u===1?n=!0:so||(xe&536870912)!==0?n=!1:(Fi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fv(s,n)):fh(s)}function fh(n){var s=n;do{if((s.flags&32768)!==0){Fv(s,Fi);return}n=s.return;var o=yR(s.alternate,s,ci);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=n}while(s!==null);pt===0&&(pt=5)}function Fv(n,s){do{var o=_R(n.alternate,n);if(o!==null){o.flags&=32767,ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ke=n;return}ke=n=o}while(n!==null);pt=6,ke=null}function Gv(n,s,o,u,d,p,v,T,k){n.cancelPendingCommit=null;do dh();while(Lt!==0);if((Ge&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=pd,od(n,o,p,v,T,k),n===nt&&(ke=nt=null,xe=0),oo=s,Qi=n,hi=o,Sm=p,Am=d,Mv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,NR(Ai,function(){return Wv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=ae.p,ae.p=2,v=Ge,Ge|=4;try{vR(n,s,o)}finally{Ge=v,ae.p=d,X.T=u}}Lt=1,Kv(),Qv(),Yv()}}function Kv(){if(Lt===1){Lt=0;var n=Qi,s=oo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ae.p;ae.p=2;var d=Ge;Ge|=4;try{Cv(s,n);var p=zm,v=Py(n.containerInfo),T=p.focusedElem,k=p.selectionRange;if(v!==T&&T&&T.ownerDocument&&ky(T.ownerDocument.documentElement,T)){if(k!==null&&hd(T)){var G=k.start,W=k.end;if(W===void 0&&(W=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,Q=ee&&ee.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),fe=T.textContent.length,Ee=Math.min(k.start,fe),tt=k.end===void 0?Ee:Math.min(k.end,fe);!J.extend&&Ee>tt&&(v=tt,tt=Ee,Ee=v);var B=Dy(T,Ee),x=Dy(T,tt);if(B&&x&&(J.rangeCount!==1||J.anchorNode!==B.node||J.anchorOffset!==B.offset||J.focusNode!==x.node||J.focusOffset!==x.offset)){var F=ee.createRange();F.setStart(B.node,B.offset),J.removeAllRanges(),Ee>tt?(J.addRange(F),J.extend(x.node,x.offset)):(F.setEnd(x.node,x.offset),J.addRange(F))}}}}for(ee=[],J=T;J=J.parentNode;)J.nodeType===1&&ee.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Ah=!!jm,zm=jm=null}finally{Ge=d,ae.p=u,X.T=o}}n.current=s,Lt=2}}function Qv(){if(Lt===2){Lt=0;var n=Qi,s=oo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ae.p;ae.p=2;var d=Ge;Ge|=4;try{bv(n,s.alternate,s)}finally{Ge=d,ae.p=u,X.T=o}}Lt=3}}function Yv(){if(Lt===4||Lt===3){Lt=0,rc();var n=Qi,s=oo,o=hi,u=Mv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Lt=5:(Lt=0,oo=Qi=null,Jv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Ki=null),Qr(o),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,d=ae.p,ae.p=2,X.T=null;try{for(var p=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];p(T.value,{componentStack:T.stack})}}finally{X.T=s,ae.p=d}}(hi&3)!==0&&dh(),Vr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===Rm?Kl++:(Kl=0,Rm=n):Kl=0,Ql(0)}}function Jv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Il(s)))}function dh(){return Kv(),Qv(),Yv(),Wv()}function Wv(){if(Lt!==5)return!1;var n=Qi,s=Sm;Sm=0;var o=Qr(hi),u=X.T,d=ae.p;try{ae.p=32>o?32:o,X.T=null,o=Am,Am=null;var p=Qi,v=hi;if(Lt=0,oo=Qi=null,hi=0,(Ge&6)!==0)throw Error(r(331));var T=Ge;if(Ge|=4,kv(p.current),Ov(p,p.current,v,o),Ge=T,Ql(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Jn,p)}catch{}return!0}finally{ae.p=d,X.T=u,Jv(n,s)}}function Xv(n,s,o){s=jn(o,s),s=im(n.stateNode,s,2),n=Bi(n,s,2),n!==null&&(Ds(n,2),Vr(n))}function We(n,s,o){if(n.tag===3)Xv(n,n,o);else for(;s!==null;){if(s.tag===3){Xv(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ki===null||!Ki.has(u))){n=jn(o,n),o=Z_(2),u=Bi(s,o,2),u!==null&&(ev(o,u,s,n),Ds(u,2),Vr(u));break}}s=s.return}}function Om(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new bR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(wm=!0,d.add(o),n=CR.bind(null,n,s,o),s.then(n,n))}function CR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,nt===n&&(xe&o)===o&&(pt===4||pt===3&&(xe&62914560)===xe&&300>cn()-oh?(Ge&2)===0&&lo(n,0):bm|=o,ao===xe&&(ao=0)),Vr(n)}function Zv(n,s){s===0&&(s=uc()),n=Fs(n,s),n!==null&&(Ds(n,s),Vr(n))}function IR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Zv(n,o)}function OR(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Zv(n,o)}function NR(n,s){return Vt(n,s)}var mh=null,co=null,Nm=!1,gh=!1,Dm=!1,Ji=0;function Vr(n){n!==co&&n.next===null&&(co===null?mh=co=n:co=co.next=n),gh=!0,Nm||(Nm=!0,kR())}function Ql(n,s){if(!Dm&&gh){Dm=!0;do for(var o=!1,u=mh;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var v=u.suspendedLanes,T=u.pingedLanes;p=(1<<31-yt(42|n)+1)-1,p&=d&~(v&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,rE(u,p))}else p=xe,p=vr(u,u===nt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Wn(u,p)||(o=!0,rE(u,p));u=u.next}while(o);Dm=!1}}function DR(){eE()}function eE(){gh=Nm=!1;var n=0;Ji!==0&&qR()&&(n=Ji);for(var s=cn(),o=null,u=mh;u!==null;){var d=u.next,p=tE(u,s);p===0?(u.next=null,o===null?mh=d:o.next=d,d===null&&(co=o)):(o=u,(n!==0||(p&3)!==0)&&(gh=!0)),u=d}Lt!==0&&Lt!==5||Ql(n),Ji!==0&&(Ji=0)}function tE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-yt(p),T=1<<v,k=d[v];k===-1?((T&o)===0||(T&u)!==0)&&(d[v]=ad(T,s)):k<=s&&(n.expiredLanes|=T),p&=~T}if(s=nt,o=xe,o=vr(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Si(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Wn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Si(u),Qr(o)){case 2:case 8:o=il;break;case 32:o=Ai;break;case 268435456:o=ic;break;default:o=Ai}return u=nE.bind(null,n),o=Vt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Si(u),n.callbackPriority=2,n.callbackNode=null,2}function nE(n,s){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(dh()&&n.callbackNode!==o)return null;var u=xe;return u=vr(n,n===nt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Vv(n,u,s),tE(n,cn()),n.callbackNode!=null&&n.callbackNode===o?nE.bind(null,n):null)}function rE(n,s){if(dh())return null;Vv(n,s,!0)}function kR(){$R(function(){(Ge&6)!==0?Vt(rl,DR):eE()})}function km(){if(Ji===0){var n=Ya;n===0&&(n=yr,yr<<=1,(yr&261888)===0&&(yr=256)),Ji=n}return Ji}function iE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xa(""+n)}function sE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function PR(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=iE((d[qt]||null).action),v=u.submitter;v&&(s=(s=v[qt]||null)?iE(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var T=new Nr("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ji!==0){var k=v?sE(d,v):new FormData(d);Xd(o,{pending:!0,data:k,method:d.method,action:p},null,k)}}else typeof p=="function"&&(T.preventDefault(),k=v?sE(d,v):new FormData(d),Xd(o,{pending:!0,data:k,method:d.method,action:p},p,k))},currentTarget:d}]})}}for(var Pm=0;Pm<gd.length;Pm++){var xm=gd[Pm],xR=xm.toLowerCase(),MR=xm[0].toUpperCase()+xm.slice(1);sr(xR,"on"+MR)}sr(Uy,"onAnimationEnd"),sr(Vy,"onAnimationIteration"),sr(Ly,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(WA,"onTransitionRun"),sr(XA,"onTransitionStart"),sr(ZA,"onTransitionCancel"),sr(jy,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function aE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var T=u[v],k=T.instance,G=T.currentTarget;if(T=T.listener,k!==p&&d.isPropagationStopped())break e;p=T,d.currentTarget=G;try{p(d)}catch(W){Nc(W)}d.currentTarget=null,p=k}else for(v=0;v<u.length;v++){if(T=u[v],k=T.instance,G=T.currentTarget,T=T.listener,k!==p&&d.isPropagationStopped())break e;p=T,d.currentTarget=G;try{p(d)}catch(W){Nc(W)}d.currentTarget=null,p=k}}}}function Pe(n,s){var o=s[Oa];o===void 0&&(o=s[Oa]=new Set);var u=n+"__bubble";o.has(u)||(oE(s,n,2,!1),o.add(u))}function Mm(n,s,o){var u=0;s&&(u|=4),oE(o,n,u,s)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Um(n){if(!n[ph]){n[ph]=!0,ol.forEach(function(o){o!=="selectionchange"&&(UR.has(o)||Mm(o,!1,n),Mm(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ph]||(s[ph]=!0,Mm("selectionchange",!1,s))}}function oE(n,s,o,u){switch(UE(s)){case 2:var d=c1;break;case 8:d=h1;break;default:d=Wm}o=d.bind(null,s,o,n),d=void 0,!Vs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Vm(n,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=u.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=Tr(T),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){u=p=v;continue e}T=T.parentNode}}u=u.return}Di(function(){var G=p,W=Mn(o),ee=[];e:{var Q=zy.get(n);if(Q!==void 0){var J=Nr,fe=n;switch(n){case"keypress":if(js(o)===0)break e;case"keydown":case"keyup":J=Cc;break;case"focusin":fe="focus",J=Bs;break;case"focusout":fe="blur",J=Bs;break;case"beforeblur":case"afterblur":J=Bs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=El;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=_c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=y;break;case Uy:case Vy:case Ly:J=Ec;break;case jy:J=R;break;case"scroll":case"scrollend":J=vl;break;case"wheel":J=Y;break;case"copy":case"cut":case"paste":J=wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Wr;break;case"toggle":case"beforetoggle":J=Ie}var Ee=(s&4)!==0,tt=!Ee&&(n==="scroll"||n==="scrollend"),B=Ee?Q!==null?Q+"Capture":null:Q;Ee=[];for(var x=G,F;x!==null;){var Z=x;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||B===null||(Z=tr(x,B),Z!=null&&Ee.push(Jl(x,Z,F))),tt)break;x=x.return}0<Ee.length&&(Q=new J(Q,fe,null,o,W),ee.push({event:Q,listeners:Ee}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",Q&&o!==pl&&(fe=o.relatedTarget||o.fromElement)&&(Tr(fe)||fe[wr]))break e;if((J||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(fe=o.relatedTarget||o.toElement,J=G,fe=fe?Tr(fe):null,fe!==null&&(tt=l(fe),Ee=fe.tag,fe!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(J=null,fe=G),J!==fe)){if(Ee=El,Z="onMouseLeave",B="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Wr,Z="onPointerLeave",B="onPointerEnter",x="pointer"),tt=J==null?Q:bn(J),F=fe==null?Q:bn(fe),Q=new Ee(Z,x+"leave",J,o,W),Q.target=tt,Q.relatedTarget=F,Z=null,Tr(W)===G&&(Ee=new Ee(B,x+"enter",fe,o,W),Ee.target=F,Ee.relatedTarget=tt,Z=Ee),tt=Z,J&&fe)t:{for(Ee=VR,B=J,x=fe,F=0,Z=B;Z;Z=Ee(Z))F++;Z=0;for(var ye=x;ye;ye=Ee(ye))Z++;for(;0<F-Z;)B=Ee(B),F--;for(;0<Z-F;)x=Ee(x),Z--;for(;F--;){if(B===x||x!==null&&B===x.alternate){Ee=B;break t}B=Ee(B),x=Ee(x)}Ee=null}else Ee=null;J!==null&&lE(ee,Q,J,Ee,!1),fe!==null&&tt!==null&&lE(ee,tt,fe,Ee,!0)}}e:{if(Q=G?bn(G):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var He=Ay;else if(Ty(Q))if(Ry)He=QA;else{He=GA;var de=FA}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Pa(G.elementType)&&(He=Ay):He=KA;if(He&&(He=He(n,G))){Sy(ee,He,o,W);break e}de&&de(n,Q,G),n==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&dl(Q,"number",Q.value)}switch(de=G?bn(G):window,n){case"focusin":(Ty(de)||de.contentEditable==="true")&&(Ba=de,fd=G,Al=null);break;case"focusout":Al=fd=Ba=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,xy(ee,o,W);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":xy(ee,o,W)}var De;if(Fe)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else za?qs(n,o)&&(Me="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Pr&&o.locale!=="ko"&&(za||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&za&&(De=_l()):(Or=W,yl="value"in Or?Or.value:Or.textContent,za=!0)),de=yh(G,Me),0<de.length&&(Me=new kr(Me,n,null,o,W),ee.push({event:Me,listeners:de}),De?Me.data=De:(De=ja(o),De!==null&&(Me.data=De)))),(De=Vn?BA(n,o):qA(n,o))&&(Me=yh(G,"onBeforeInput"),0<Me.length&&(de=new kr("onBeforeInput","beforeinput",null,o,W),ee.push({event:de,listeners:Me}),de.data=De)),PR(ee,n,G,o,W)}aE(ee,s)})}function Jl(n,s,o){return{instance:n,listener:s,currentTarget:o}}function yh(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=tr(n,o),d!=null&&u.unshift(Jl(n,d,p)),d=tr(n,s),d!=null&&u.push(Jl(n,d,p))),n.tag===3)return u;n=n.return}return[]}function VR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function lE(n,s,o,u,d){for(var p=s._reactName,v=[];o!==null&&o!==u;){var T=o,k=T.alternate,G=T.stateNode;if(T=T.tag,k!==null&&k===u)break;T!==5&&T!==26&&T!==27||G===null||(k=G,d?(G=tr(o,p),G!=null&&v.unshift(Jl(o,G,k))):d||(G=tr(o,p),G!=null&&v.push(Jl(o,G,k)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var LR=/\r\n?/g,jR=/\u0000|\uFFFD/g;function uE(n){return(typeof n=="string"?n:""+n).replace(LR,`
`).replace(jR,"")}function cE(n,s){return s=uE(s),uE(n)===s}function et(n,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mn(n,""+u);break;case"className":Tn(n,"class",u);break;case"tabIndex":Tn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(n,o,u);break;case"style":gl(n,u,p);break;case"data":if(s!=="object"){Tn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=xa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&et(n,s,"name",d.name,d,null),et(n,s,"formEncType",d.formEncType,d,null),et(n,s,"formMethod",d.formMethod,d,null),et(n,s,"formTarget",d.formTarget,d,null)):(et(n,s,"encType",d.encType,d,null),et(n,s,"method",d.method,d,null),et(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=xa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=er);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Da(n,"popover",u);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Da(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yc.get(o)||o,Da(n,o,u))}}function Lm(n,s,o,u,d,p){switch(o){case"style":gl(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?mn(n,u):(typeof u=="number"||typeof u=="bigint")&&mn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=n[qt]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Da(n,o,u)}}}function Xt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,p,v,o,null)}}d&&et(n,s,"srcSet",o.srcSet,o,null),u&&et(n,s,"src",o.src,o,null);return;case"input":Pe("invalid",n);var T=p=v=d=null,k=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":d=W;break;case"type":v=W;break;case"checked":k=W;break;case"defaultChecked":G=W;break;case"value":p=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:et(n,s,u,W,o,null)}}mc(n,p,T,k,G,v,d,!1);return;case"select":Pe("invalid",n),u=v=p=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":p=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:et(n,s,d,T,o,null)}s=p,o=v,n.multiple=!!u,s!=null?Ci(n,!!u,s,!1):o!=null&&Ci(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),p=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":d=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:et(n,s,v,T,o,null)}Ii(n,u,d,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(n,s,k,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Yl.length;u++)Pe(Yl[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,G,u,o,null)}return;default:if(Pa(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&Lm(n,s,W,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&et(n,s,T,u,o,null))}function zR(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,v=null,T=null,k=null,G=null,W=null;for(J in o){var ee=o[J];if(o.hasOwnProperty(J)&&ee!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":k=ee;default:u.hasOwnProperty(J)||et(n,s,J,null,u,ee)}}for(var Q in u){var J=u[Q];if(ee=o[Q],u.hasOwnProperty(Q)&&(J!=null||ee!=null))switch(Q){case"type":p=J;break;case"name":d=J;break;case"checked":G=J;break;case"defaultChecked":W=J;break;case"value":v=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==ee&&et(n,s,Q,J,u,ee)}}ka(n,v,T,k,G,W,p,d);return;case"select":J=v=T=Q=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":J=k;default:u.hasOwnProperty(p)||et(n,s,p,null,u,k)}for(d in u)if(p=u[d],k=o[d],u.hasOwnProperty(d)&&(p!=null||k!=null))switch(d){case"value":Q=p;break;case"defaultValue":T=p;break;case"multiple":v=p;default:p!==k&&et(n,s,d,p,u,k)}s=T,o=v,u=J,Q!=null?Ci(n,!!o,Q,!1):!!u!=!!o&&(s!=null?Ci(n,!!o,s,!0):Ci(n,!!o,o?[]:"",!1));return;case"textarea":J=Q=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(n,s,T,null,u,d)}for(v in u)if(d=u[v],p=o[v],u.hasOwnProperty(v)&&(d!=null||p!=null))switch(v){case"value":Q=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&et(n,s,v,d,u,p)}gc(n,Q,J);return;case"option":for(var fe in o)if(Q=o[fe],o.hasOwnProperty(fe)&&Q!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:et(n,s,fe,null,u,Q)}for(k in u)if(Q=u[k],J=o[k],u.hasOwnProperty(k)&&Q!==J&&(Q!=null||J!=null))switch(k){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:et(n,s,k,Q,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)Q=o[Ee],o.hasOwnProperty(Ee)&&Q!=null&&!u.hasOwnProperty(Ee)&&et(n,s,Ee,null,u,Q);for(G in u)if(Q=u[G],J=o[G],u.hasOwnProperty(G)&&Q!==J&&(Q!=null||J!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:et(n,s,G,Q,u,J)}return;default:if(Pa(s)){for(var tt in o)Q=o[tt],o.hasOwnProperty(tt)&&Q!==void 0&&!u.hasOwnProperty(tt)&&Lm(n,s,tt,void 0,u,Q);for(W in u)Q=u[W],J=o[W],!u.hasOwnProperty(W)||Q===J||Q===void 0&&J===void 0||Lm(n,s,W,Q,u,J);return}}for(var B in o)Q=o[B],o.hasOwnProperty(B)&&Q!=null&&!u.hasOwnProperty(B)&&et(n,s,B,null,u,Q);for(ee in u)Q=u[ee],J=o[ee],!u.hasOwnProperty(ee)||Q===J||Q==null&&J==null||et(n,s,ee,Q,u,J)}function hE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BR(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,v=d.initiatorType,T=d.duration;if(p&&T&&hE(v)){for(v=0,T=d.responseEnd,u+=1;u<o.length;u++){var k=o[u],G=k.startTime;if(G>T)break;var W=k.transferSize,ee=k.initiatorType;W&&hE(ee)&&(k=k.responseEnd,v+=W*(k<T?1:(T-G)/(k-G)))}if(--u,s+=8*(p+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var jm=null,zm=null;function _h(n){return n.nodeType===9?n:n.ownerDocument}function fE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Bm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qm=null;function qR(){var n=window.event;return n&&n.type==="popstate"?n===qm?!1:(qm=n,!0):(qm=null,!1)}var mE=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,gE=typeof Promise=="function"?Promise:void 0,$R=typeof queueMicrotask=="function"?queueMicrotask:typeof gE<"u"?function(n){return gE.resolve(null).then(n).catch(FR)}:mE;function FR(n){setTimeout(function(){throw n})}function Wi(n){return n==="head"}function pE(n,s){var o=s,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),go(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Wl(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Wl(o);for(var p=o.firstChild;p;){var v=p.nextSibling,T=p.nodeName;p[br]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&Wl(n.ownerDocument.body);o=d}while(o);go(s)}function yE(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Hm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Hm(o),Na(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function GR(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[br])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=$n(n.nextSibling),n===null)break}return null}function KR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=$n(n.nextSibling),n===null))return null;return n}function _E(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=$n(n.nextSibling),n===null))return null;return n}function $m(n){return n.data==="$?"||n.data==="$~"}function Fm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function QR(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function $n(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Gm=null;function vE(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return $n(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function EE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function wE(n,s,o){switch(s=_h(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Wl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Na(n)}var Fn=new Map,bE=new Set;function vh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fi=ae.d;ae.d={f:YR,r:JR,D:WR,C:XR,L:ZR,m:e1,X:n1,S:t1,M:r1};function YR(){var n=fi.f(),s=ch();return n||s}function JR(n){var s=xn(n);s!==null&&s.tag===5&&s.type==="form"?j_(s):fi.r(n)}var ho=typeof document>"u"?null:document;function TE(n,s,o){var u=ho;if(u&&typeof s=="string"&&s){var d=dn(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),bE.has(d)||(bE.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Xt(s,"link",n),Rt(s),u.head.appendChild(s)))}}function WR(n){fi.D(n),TE("dns-prefetch",n,null)}function XR(n,s){fi.C(n,s),TE("preconnect",n,s)}function ZR(n,s,o){fi.L(n,s,o);var u=ho;if(u&&n&&s){var d='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+dn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+dn(o.imageSizes)+'"]')):d+='[href="'+dn(n)+'"]';var p=d;switch(s){case"style":p=fo(n);break;case"script":p=mo(n)}Fn.has(p)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Fn.set(p,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Xl(p))||s==="script"&&u.querySelector(Zl(p))||(s=u.createElement("link"),Xt(s,"link",n),Rt(s),u.head.appendChild(s)))}}function e1(n,s){fi.m(n,s);var o=ho;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+dn(u)+'"][href="'+dn(n)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=mo(n)}if(!Fn.has(p)&&(n=E({rel:"modulepreload",href:n},s),Fn.set(p,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Zl(p)))return}u=o.createElement("link"),Xt(u,"link",n),Rt(u),o.head.appendChild(u)}}}function t1(n,s,o){fi.S(n,s,o);var u=ho;if(u&&n){var d=Sr(u).hoistableStyles,p=fo(n);s=s||"default";var v=d.get(p);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Xl(p)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Fn.get(p))&&Km(n,o);var k=v=u.createElement("link");Rt(k),Xt(k,"link",n),k._p=new Promise(function(G,W){k.onload=G,k.onerror=W}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Eh(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(p,v)}}}function n1(n,s){fi.X(n,s);var o=ho;if(o&&n){var u=Sr(o).hoistableScripts,d=mo(n),p=u.get(d);p||(p=o.querySelector(Zl(d)),p||(n=E({src:n,async:!0},s),(s=Fn.get(d))&&Qm(n,s),p=o.createElement("script"),Rt(p),Xt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function r1(n,s){fi.M(n,s);var o=ho;if(o&&n){var u=Sr(o).hoistableScripts,d=mo(n),p=u.get(d);p||(p=o.querySelector(Zl(d)),p||(n=E({src:n,async:!0,type:"module"},s),(s=Fn.get(d))&&Qm(n,s),p=o.createElement("script"),Rt(p),Xt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function SE(n,s,o,u){var d=(d=Ne.current)?vh(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=fo(o.href),o=Sr(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=fo(o.href);var p=Sr(d).hoistableStyles,v=p.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=d.querySelector(Xl(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Fn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fn.set(n,o),p||i1(d,n,o,v.state))),s&&u===null)throw Error(r(528,""));return v}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=mo(o),o=Sr(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function fo(n){return'href="'+dn(n)+'"'}function Xl(n){return'link[rel="stylesheet"]['+n+"]"}function AE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function i1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",o),Rt(s),n.head.appendChild(s))}function mo(n){return'[src="'+dn(n)+'"]'}function Zl(n){return"script[async]"+n}function RE(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+dn(o.href)+'"]');if(u)return s.instance=u,Rt(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Rt(u),Xt(u,"style",d),Eh(u,o.precedence,n),s.instance=u;case"stylesheet":d=fo(o.href);var p=n.querySelector(Xl(d));if(p)return s.state.loading|=4,s.instance=p,Rt(p),p;u=AE(o),(d=Fn.get(d))&&Km(u,d),p=(n.ownerDocument||n).createElement("link"),Rt(p);var v=p;return v._p=new Promise(function(T,k){v.onload=T,v.onerror=k}),Xt(p,"link",u),s.state.loading|=4,Eh(p,o.precedence,n),s.instance=p;case"script":return p=mo(o.src),(d=n.querySelector(Zl(p)))?(s.instance=d,Rt(d),d):(u=o,(d=Fn.get(p))&&(u=E({},o),Qm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Rt(d),Xt(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Eh(u,o.precedence,n));return s.instance}function Eh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===s)p=T;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Km(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Qm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var wh=null;function CE(n,s,o){if(wh===null){var u=new Map,d=wh=new Map;d.set(o,u)}else d=wh,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var p=o[d];if(!(p[br]||p[At]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=n+v;var T=u.get(v);T?T.push(p):u.set(v,[p])}}return u}function IE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function s1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function OE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function a1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=fo(u.href),p=s.querySelector(Xl(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=bh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Rt(p);return}p=s.ownerDocument||s,u=AE(u),(d=Fn.get(d))&&Km(u,d),p=p.createElement("link"),Rt(p);var v=p;v._p=new Promise(function(T,k){v.onload=T,v.onerror=k}),Xt(p,"link",u),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=bh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ym=0;function o1(n,s){return n.stylesheets&&n.count===0&&Sh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Ym===0&&(Ym=62500*BR());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ym?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function bh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Th=null;function Sh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Th=new Map,s.forEach(l1,n),Th=null,bh.call(n))}function l1(n,s){if(!(s.state.loading&4)){var o=Th.get(n);if(o)var u=o.get(null);else{o=new Map,Th.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var v=d[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=s.instance,v=d.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,d),o.set(v,d),this.count++,u=bh.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var eu={$$typeof:H,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function u1(n,s,o,u,d,p,v,T,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.hiddenUpdates=Er(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function NE(n,s,o,u,d,p,v,T,k,G,W,ee){return n=new u1(n,s,o,v,k,G,W,ee,T),s=1,p===!0&&(s|=24),p=An(3,null,null,s),n.current=p,p.stateNode=n,s=Id(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},kd(p),n}function DE(n){return n?(n=$a,n):$a}function kE(n,s,o,u,d,p){d=DE(d),u.context===null?u.context=d:u.pendingContext=d,u=zi(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Bi(n,u,s),o!==null&&(vn(o,n,s),kl(o,n,s))}function PE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Jm(n,s){PE(n,s),(n=n.alternate)&&PE(n,s)}function xE(n){if(n.tag===13||n.tag===31){var s=Fs(n,67108864);s!==null&&vn(s,n,67108864),Jm(n,67108864)}}function ME(n){if(n.tag===13||n.tag===31){var s=Nn();s=Ps(s);var o=Fs(n,s);o!==null&&vn(o,n,s),Jm(n,s)}}var Ah=!0;function c1(n,s,o,u){var d=X.T;X.T=null;var p=ae.p;try{ae.p=2,Wm(n,s,o,u)}finally{ae.p=p,X.T=d}}function h1(n,s,o,u){var d=X.T;X.T=null;var p=ae.p;try{ae.p=8,Wm(n,s,o,u)}finally{ae.p=p,X.T=d}}function Wm(n,s,o,u){if(Ah){var d=Xm(u);if(d===null)Vm(n,s,u,Rh,o),VE(n,u);else if(d1(d,n,s,o,u))u.stopPropagation();else if(VE(n,u),s&4&&-1<f1.indexOf(n)){for(;d!==null;){var p=xn(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=_r(p.pendingLanes);if(v!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var k=1<<31-yt(v);T.entanglements[1]|=k,v&=~k}Vr(p),(Ge&6)===0&&(lh=cn()+500,Ql(0))}}break;case 31:case 13:T=Fs(p,2),T!==null&&vn(T,p,2),ch(),Jm(p,2)}if(p=Xm(u),p===null&&Vm(n,s,u,Rh,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Vm(n,s,u,null,o)}}function Xm(n){return n=Mn(n),Zm(n)}var Rh=null;function Zm(n){if(Rh=null,n=Tr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Rh=n,null}function UE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case rl:return 2;case il:return 8;case Ai:case sd:return 32;case ic:return 268435456;default:return 32}default:return 32}}var eg=!1,Xi=null,Zi=null,es=null,tu=new Map,nu=new Map,ts=[],f1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VE(n,s){switch(n){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":tu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(s.pointerId)}}function ru(n,s,o,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=xn(s),s!==null&&xE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function d1(n,s,o,u,d){switch(s){case"focusin":return Xi=ru(Xi,n,s,o,u,d),!0;case"dragenter":return Zi=ru(Zi,n,s,o,u,d),!0;case"mouseover":return es=ru(es,n,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return tu.set(p,ru(tu.get(p)||null,n,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,nu.set(p,ru(nu.get(p)||null,n,s,o,u,d)),!0}return!1}function LE(n){var s=Tr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Xn(n.priority,function(){ME(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Xn(n.priority,function(){ME(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Xm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);pl=u,o.target.dispatchEvent(u),pl=null}else return s=xn(o),s!==null&&xE(s),n.blockedOn=o,!1;s.shift()}return!0}function jE(n,s,o){Ch(n)&&o.delete(s)}function m1(){eg=!1,Xi!==null&&Ch(Xi)&&(Xi=null),Zi!==null&&Ch(Zi)&&(Zi=null),es!==null&&Ch(es)&&(es=null),tu.forEach(jE),nu.forEach(jE)}function Ih(n,s){n.blockedOn===s&&(n.blockedOn=null,eg||(eg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,m1)))}var Oh=null;function zE(n){Oh!==n&&(Oh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Oh===n&&(Oh=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(Zm(u||o)===null)continue;break}var p=xn(o);p!==null&&(n.splice(s,3),s-=3,Xd(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function go(n){function s(k){return Ih(k,n)}Xi!==null&&Ih(Xi,n),Zi!==null&&Ih(Zi,n),es!==null&&Ih(es,n),tu.forEach(s),nu.forEach(s);for(var o=0;o<ts.length;o++){var u=ts[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ts.length&&(o=ts[0],o.blockedOn===null);)LE(o),o.blockedOn===null&&ts.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],v=d[qt]||null;if(typeof p=="function")v||zE(o);else if(v){var T=null;if(p&&p.hasAttribute("formAction")){if(d=p,v=p[qt]||null)T=v.formAction;else if(Zm(d)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),zE(o)}}}function BE(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function tg(n){this._internalRoot=n}Nh.prototype.render=tg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Nn();kE(o,u,n,s,null,null)},Nh.prototype.unmount=tg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;kE(n.current,2,null,n,null,null),ch(),s[wr]=null}};function Nh(n){this._internalRoot=n}Nh.prototype.unstable_scheduleHydration=function(n){if(n){var s=cc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ts.length&&s!==0&&s<ts[o].priority;o++);ts.splice(o,0,n),o===0&&LE(n)}};var qE=e.version;if(qE!=="19.2.0")throw Error(r(527,qE,"19.2.0"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var g1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Jn=Dh.inject(g1),Kt=Dh}catch{}}return su.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",d=Y_,p=J_,v=W_;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=NE(n,1,!1,null,null,o,u,null,d,p,v,BE),n[wr]=s.current,Um(n),new tg(s)},su.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,d="",p=Y_,v=J_,T=W_,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),s=NE(n,1,!0,s,o??null,u,d,k,p,v,T,BE),s.context=DE(null),o=s.current,u=Nn(),u=Ps(u),d=zi(u),d.callback=null,Bi(o,d,u),o=u,s.current.lanes=o,Ds(s,o),Vr(s),n[wr]=s.current,Um(n),new Nh(s)},su.version="19.2.0",su}var XE;function I1(){if(XE)return ig.exports;XE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ig.exports=C1(),ig.exports}var O1=I1();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZE="popstate";function N1(i={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=va(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Dg("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof l=="string"?l:Au(l))}function r(a,l){Yn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return k1(e,t,r,i)}function ht(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Yn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D1(){return Math.random().toString(36).substring(2,10)}function e0(i,e){return{usr:i.state,key:i.key,idx:e}}function Dg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?va(e):e,state:t,key:e&&e.key||r||D1()}}function Au({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function va(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function k1(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,f="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){f="POP";let A=_(),j=A==null?null:A-g;g=A,m&&m({action:f,location:U.location,delta:j})}function b(A,j){f="PUSH";let z=Dg(U.location,A,j);t&&t(z,A),g=_()+1;let H=e0(z,g),re=U.createHref(z);try{c.pushState(H,"",re)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;a.location.assign(re)}l&&m&&m({action:f,location:U.location,delta:1})}function S(A,j){f="REPLACE";let z=Dg(U.location,A,j);t&&t(z,A),g=_();let H=e0(z,g),re=U.createHref(z);c.replaceState(H,"",re),l&&m&&m({action:f,location:U.location,delta:0})}function N(A){return P1(A)}let U={get action(){return f},get location(){return i(a,c)},listen(A){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(ZE,E),m=A,()=>{a.removeEventListener(ZE,E),m=null}},createHref(A){return e(a,A)},createURL:N,encodeLocation(A){let j=N(A);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:b,replace:S,go(A){return c.go(A)}};return U}function P1(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Au(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function ob(i,e,t="/"){return x1(i,e,t,!1)}function x1(i,e,t,r){let a=typeof e=="string"?va(e):e,l=_i(a.pathname||"/",t);if(l==null)return null;let c=lb(i);M1(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=G1(l);f=$1(c[m],g,r)}return f}function lb(i,e=[],t=[],r="",a=!1){let l=(c,f,m=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&m)return;ht(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let E=pi([r,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),lb(c.children,e,b,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:q1(E,c.index),routesMeta:b})};return i.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of ub(c.path))l(c,f,!0,m)}),e}function ub(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=ub(r.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>i.startsWith("/")&&m===""?"/":m)}function M1(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:H1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var U1=/^:[\w-]+$/,V1=3,L1=2,j1=1,z1=10,B1=-2,t0=i=>i==="*";function q1(i,e){let t=i.split("/"),r=t.length;return t.some(t0)&&(r+=B1),e&&(r+=L1),t.filter(a=>!t0(a)).reduce((a,l)=>a+(U1.test(l)?V1:l===""?j1:z1),r)}function H1(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function $1(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",c=[];for(let f=0;f<r.length;++f){let m=r[f],g=f===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=of({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=of({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:pi([l,E.pathname]),pathnameBase:J1(pi([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=pi([l,E.pathnameBase]))}return c}function of(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=F1(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:E},b)=>{if(_==="*"){let N=f[b]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const S=f[b];return E&&!S?g[_]=void 0:g[_]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:i}}function F1(i,e=!1,t=!0){Yn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function G1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function _i(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function K1(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?va(i):i;return{pathname:t?t.startsWith("/")?t:Q1(t,e):e,search:W1(r),hash:X1(a)}}function Q1(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function lg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y1(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yp(i){let e=Y1(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function _p(i,e,t,r=!1){let a;typeof i=="string"?a=va(i):(a={...i},ht(!a.pathname||!a.pathname.includes("?"),lg("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),lg("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),lg("#","search","hash",a)));let l=i===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}f=E>=0?e[E]:"/"}let m=K1(a,f),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var pi=i=>i.join("/").replace(/\/\/+/g,"/"),J1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),W1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,X1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Z1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cb=["POST","PUT","PATCH","DELETE"];new Set(cb);var eC=["GET",...cb];new Set(eC);var qo=K.createContext(null);qo.displayName="DataRouter";var Df=K.createContext(null);Df.displayName="DataRouterState";K.createContext(!1);var hb=K.createContext({isTransitioning:!1});hb.displayName="ViewTransition";var tC=K.createContext(new Map);tC.displayName="Fetchers";var nC=K.createContext(null);nC.displayName="Await";var gr=K.createContext(null);gr.displayName="Navigation";var qu=K.createContext(null);qu.displayName="Location";var Kr=K.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var vp=K.createContext(null);vp.displayName="RouteError";function rC(i,{relative:e}={}){ht(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(gr),{hash:a,pathname:l,search:c}=Hu(i,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:pi([t,l])),r.createHref({pathname:f,search:c,hash:a})}function Ho(){return K.useContext(qu)!=null}function Ss(){return ht(Ho(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(qu).location}var fb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function db(i){K.useContext(gr).static||K.useLayoutEffect(i)}function kf(){let{isDataRoute:i}=K.useContext(Kr);return i?pC():iC()}function iC(){ht(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let i=K.useContext(qo),{basename:e,navigator:t}=K.useContext(gr),{matches:r}=K.useContext(Kr),{pathname:a}=Ss(),l=JSON.stringify(yp(r)),c=K.useRef(!1);return db(()=>{c.current=!0}),K.useCallback((m,g={})=>{if(Yn(c.current,fb),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=_p(m,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:pi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,i])}K.createContext(null);function Hu(i,{relative:e}={}){let{matches:t}=K.useContext(Kr),{pathname:r}=Ss(),a=JSON.stringify(yp(t));return K.useMemo(()=>_p(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function sC(i,e){return mb(i,e)}function mb(i,e,t,r,a){ht(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=K.useContext(gr),{matches:c}=K.useContext(Kr),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",_=f?f.pathnameBase:"/",E=f&&f.route;{let z=E&&E.path||"";gb(g,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let b=Ss(),S;if(e){let z=typeof e=="string"?va(e):e;ht(_==="/"||z.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=b;let N=S.pathname||"/",U=N;if(_!=="/"){let z=_.replace(/^\//,"").split("/");U="/"+N.replace(/^\//,"").split("/").slice(z.length).join("/")}let A=ob(i,{pathname:U});Yn(E||A!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Yn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=cC(A&&A.map(z=>Object.assign({},z,{params:Object.assign({},m,z.params),pathname:pi([_,l.encodeLocation?l.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?_:pi([_,l.encodeLocation?l.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,t,r,a);return e&&j?K.createElement(qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},j):j}function aC(){let i=gC(),e=Z1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,c)}var oC=K.createElement(aC,null),lC=class extends K.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?K.createElement(Kr.Provider,{value:this.props.routeContext},K.createElement(vp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:i,match:e,children:t}){let r=K.useContext(qo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Kr.Provider,{value:i},t)}function cC(i,e=[],t=null,r=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,m=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:E,errors:b}=t,S=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||S){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,_,E)=>{let b,S=!1,N=null,U=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,N=_.route.errorElement||oC,f&&(m<0&&E===0?(gb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,U=null):m===E&&(S=!0,U=_.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,E+1)),j=()=>{let z;return b?z=N:S?z=U:_.route.Component?z=K.createElement(_.route.Component,null):_.route.element?z=_.route.element:z=g,K.createElement(uC,{match:_,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:z})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?K.createElement(lC,{location:t.location,revalidation:t.revalidation,component:N,error:b,children:j(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):j()},null)}function Ep(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(i){let e=K.useContext(qo);return ht(e,Ep(i)),e}function fC(i){let e=K.useContext(Df);return ht(e,Ep(i)),e}function dC(i){let e=K.useContext(Kr);return ht(e,Ep(i)),e}function wp(i){let e=dC(i),t=e.matches[e.matches.length-1];return ht(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function mC(){return wp("useRouteId")}function gC(){let i=K.useContext(vp),e=fC("useRouteError"),t=wp("useRouteError");return i!==void 0?i:e.errors?.[t]}function pC(){let{router:i}=hC("useNavigate"),e=wp("useNavigate"),t=K.useRef(!1);return db(()=>{t.current=!0}),K.useCallback(async(a,l={})=>{Yn(t.current,fb),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var n0={};function gb(i,e,t){!e&&!n0[i]&&(n0[i]=!0,Yn(!1,t))}K.memo(yC);function yC({routes:i,future:e,state:t,unstable_onError:r}){return mb(i,void 0,t,r,e)}function pb({to:i,replace:e,state:t,relative:r}){ht(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=K.useContext(gr);Yn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=K.useContext(Kr),{pathname:c}=Ss(),f=kf(),m=_p(i,yp(l),c,r==="path"),g=JSON.stringify(m);return K.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:r})},[f,g,r,e,t]),null}function ss(i){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _C({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){ht(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=va(t));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:b="default"}=t,S=K.useMemo(()=>{let N=_i(m,c);return N==null?null:{location:{pathname:N,search:g,hash:_,state:E,key:b},navigationType:r}},[c,m,g,_,E,b,r]);return Yn(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:K.createElement(gr.Provider,{value:f},K.createElement(qu.Provider,{children:e,value:S}))}function r0({children:i,location:e}){return sC(kg(i),e)}function kg(i,e=[]){let t=[];return K.Children.forEach(i,(r,a)=>{if(!K.isValidElement(r))return;let l=[...e,a];if(r.type===K.Fragment){t.push.apply(t,kg(r.props.children,l));return}ht(r.type===ss,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=kg(r.props.children,l)),t.push(c)}),t}var Qh="get",Yh="application/x-www-form-urlencoded";function Pf(i){return i!=null&&typeof i.tagName=="string"}function vC(i){return Pf(i)&&i.tagName.toLowerCase()==="button"}function EC(i){return Pf(i)&&i.tagName.toLowerCase()==="form"}function wC(i){return Pf(i)&&i.tagName.toLowerCase()==="input"}function bC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function TC(i,e){return i.button===0&&(!e||e==="_self")&&!bC(i)}var kh=null;function SC(){if(kh===null)try{new FormData(document.createElement("form"),0),kh=!1}catch{kh=!0}return kh}var AC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ug(i){return i!=null&&!AC.has(i)?(Yn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yh}"`),null):i}function RC(i,e){let t,r,a,l,c;if(EC(i)){let f=i.getAttribute("action");r=f?_i(f,e):null,t=i.getAttribute("method")||Qh,a=ug(i.getAttribute("enctype"))||Yh,l=new FormData(i)}else if(vC(i)||wC(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||f.getAttribute("action");if(r=m?_i(m,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||Qh,a=ug(i.getAttribute("formenctype"))||ug(f.getAttribute("enctype"))||Yh,l=new FormData(f,i),!SC()){let{name:g,type:_,value:E}=i;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(Pf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qh,r=null,a=Yh,c=i}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function CC(i,e,t){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&_i(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function IC(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OC(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function NC(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await IC(l,t);return c.links?c.links():[]}return[]}));return xC(r.flat(1).filter(OC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function i0(i,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function DC(i,e,{includeHydrateFallback:t}={}){return kC(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function kC(i){return[...new Set(i)]}function PC(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function xC(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(PC(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function yb(){let i=K.useContext(qo);return bp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function MC(){let i=K.useContext(Df);return bp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Tp=K.createContext(void 0);Tp.displayName="FrameworkContext";function _b(){let i=K.useContext(Tp);return bp(i,"You must render this element inside a <HydratedRouter> element"),i}function UC(i,e){let t=K.useContext(Tp),[r,a]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,b=K.useRef(null);K.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let U=j=>{j.forEach(z=>{c(z.isIntersecting)})},A=new IntersectionObserver(U,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[i]),K.useEffect(()=>{if(r){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[r]);let S=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?i!=="intent"?[l,b,{}]:[l,b,{onFocus:au(f,S),onBlur:au(m,N),onMouseEnter:au(g,S),onMouseLeave:au(_,N),onTouchStart:au(E,S)}]:[!1,b,{}]}function au(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function VC({page:i,...e}){let{router:t}=yb(),r=K.useMemo(()=>ob(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?K.createElement(jC,{page:i,matches:r,...e}):null}function LC(i){let{manifest:e,routeModules:t}=_b(),[r,a]=K.useState([]);return K.useEffect(()=>{let l=!1;return NC(i,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[i,e,t]),r}function jC({page:i,matches:e,...t}){let r=Ss(),{manifest:a,routeModules:l}=_b(),{basename:c}=yb(),{loaderData:f,matches:m}=MC(),g=K.useMemo(()=>i0(i,e,m,a,r,"data"),[i,e,m,a,r]),_=K.useMemo(()=>i0(i,e,m,a,r,"assets"),[i,e,m,a,r]),E=K.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let N=new Set,U=!1;if(e.forEach(j=>{let z=a.routes[j.route.id];!z||!z.hasLoader||(!g.some(H=>H.route.id===j.route.id)&&j.route.id in f&&l[j.route.id]?.shouldRevalidate||z.hasClientLoader?U=!0:N.add(j.route.id))}),N.size===0)return[];let A=CC(i,c,"data");return U&&N.size>0&&A.searchParams.set("_routes",e.filter(j=>N.has(j.route.id)).map(j=>j.route.id).join(",")),[A.pathname+A.search]},[c,f,r,a,g,e,i,l]),b=K.useMemo(()=>DC(_,a),[_,a]),S=LC(_);return K.createElement(K.Fragment,null,E.map(N=>K.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),b.map(N=>K.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),S.map(({key:N,link:U})=>K.createElement("link",{key:N,nonce:t.nonce,...U})))}function zC(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vb&&(window.__reactRouterVersion="7.9.5")}catch{}function BC({basename:i,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=N1({window:t,v5Compat:!0}));let a=r.current,[l,c]=K.useState({action:a.action,location:a.location}),f=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>a.listen(f),[a,f]),K.createElement(_C,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var Eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wb=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:_,viewTransition:E,...b},S){let{basename:N}=K.useContext(gr),U=typeof g=="string"&&Eb.test(g),A,j=!1;if(typeof g=="string"&&U&&(A=g,vb))try{let I=new URL(window.location.href),V=g.startsWith("//")?new URL(I.protocol+g):new URL(g),P=_i(V.pathname,N);V.origin===I.origin&&P!=null?g=P+V.search+V.hash:j=!0}catch{Yn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=rC(g,{relative:a}),[H,re,he]=UC(r,b),le=$C(g,{replace:c,state:f,target:m,preventScrollReset:_,relative:a,viewTransition:E});function O(I){e&&e(I),I.defaultPrevented||le(I)}let C=K.createElement("a",{...b,...he,href:A||z,onClick:j||l?e:O,ref:zC(S,re),target:m,"data-discover":!U&&t==="render"?"true":void 0});return H&&!U?K.createElement(K.Fragment,null,C,K.createElement(VC,{page:z})):C});wb.displayName="Link";var lu=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...g},_){let E=Hu(c,{relative:g.relative}),b=Ss(),S=K.useContext(Df),{navigator:N,basename:U}=K.useContext(gr),A=S!=null&&YC(E)&&f===!0,j=N.encodeLocation?N.encodeLocation(E).pathname:E.pathname,z=b.pathname,H=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(z=z.toLowerCase(),H=H?H.toLowerCase():null,j=j.toLowerCase()),H&&U&&(H=_i(H,U)||H);const re=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let he=z===j||!a&&z.startsWith(j)&&z.charAt(re)==="/",le=H!=null&&(H===j||!a&&H.startsWith(j)&&H.charAt(j.length)==="/"),O={isActive:he,isPending:le,isTransitioning:A},C=he?e:void 0,I;typeof r=="function"?I=r(O):I=[r,he?"active":null,le?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(O):l;return K.createElement(wb,{...g,"aria-current":C,className:I,ref:_,style:V,to:c,viewTransition:f},typeof m=="function"?m(O):m)});lu.displayName="NavLink";var qC=K.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=Qh,action:f,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:E,...b},S)=>{let N=KC(),U=QC(f,{relative:g}),A=c.toLowerCase()==="get"?"get":"post",j=typeof f=="string"&&Eb.test(f),z=H=>{if(m&&m(H),H.defaultPrevented)return;H.preventDefault();let re=H.nativeEvent.submitter,he=re?.getAttribute("formmethod")||c;N(re||H.currentTarget,{fetcherKey:e,method:he,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:E})};return K.createElement("form",{ref:S,method:A,action:U,onSubmit:r?m:z,...b,"data-discover":!j&&i==="render"?"true":void 0})});qC.displayName="Form";function HC(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bb(i){let e=K.useContext(qo);return ht(e,HC(i)),e}function $C(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=kf(),m=Ss(),g=Hu(i,{relative:l});return K.useCallback(_=>{if(TC(_,e)){_.preventDefault();let E=t!==void 0?t:Au(m)===Au(g);f(i,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,f,g,t,r,e,i,a,l,c])}var FC=0,GC=()=>`__${String(++FC)}__`;function KC(){let{router:i}=bb("useSubmit"),{basename:e}=K.useContext(gr),t=mC();return K.useCallback(async(r,a={})=>{let{action:l,method:c,encType:f,formData:m,body:g}=RC(r,e);if(a.navigate===!1){let _=a.fetcherKey||GC();await i.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function QC(i,{relative:e}={}){let{basename:t}=K.useContext(gr),r=K.useContext(Kr);ht(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Hu(i||".",{relative:e})},c=Ss();if(i==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(_=>_==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();l.search=_?`?${_}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:pi([t,l.pathname])),Au(l)}function YC(i,{relative:e}={}){let t=K.useContext(hb);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bb("useViewTransitionState"),a=Hu(i,{relative:e});if(!t.isTransitioning)return!1;let l=_i(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=_i(t.nextLocation.pathname,r)||t.nextLocation.pathname;return of(a.pathname,c)!=null||of(a.pathname,l)!=null}const JC=()=>{};var s0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},WC=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,S=g&63;m||(S=64,c||(b=64)),r.push(t[_],t[E],t[b],t[S])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Tb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):WC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const E=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||E==null)throw new XC;const b=l<<2|f>>4;if(r.push(b),g!==64){const S=f<<4&240|g>>2;if(r.push(S),E!==64){const N=g<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZC=function(i){const e=Tb(i);return Sb.encodeByteArray(e,!0)},lf=function(i){return ZC(i).replace(/\./g,"")},Ab=function(i){try{return Sb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=()=>eI().__FIREBASE_DEFAULTS__,nI=()=>{if(typeof process>"u"||typeof s0>"u")return;const i=s0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},rI=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ab(i[1]);return e&&JSON.parse(e)},xf=()=>{try{return JC()||tI()||nI()||rI()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Rb=i=>xf()?.emulatorHosts?.[i],iI=i=>{const e=Rb(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cb=()=>xf()?.config,Ib=i=>xf()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sI=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ob(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[lf(JSON.stringify(t)),lf(JSON.stringify(c)),""].join(".")}const pu={};function oI(){const i={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?i.emulator.push(e):i.prod.push(e);return i}function lI(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let a0=!1;function Nb(i,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||pu[i]===e||pu[i]||a0)return;pu[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=oI().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,S){b.setAttribute("width","24"),b.setAttribute("id",S),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{a0=!0,c()},b}function _(b,S){b.setAttribute("id",S),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=lI(r),S=t("text"),N=document.getElementById(S)||document.createElement("span"),U=t("learnmore"),A=document.getElementById(U)||document.createElement("a"),j=t("preprendIcon"),z=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const H=b.element;f(H),_(A,U);const re=g();m(z,j),H.append(z,N,A,re),document.body.appendChild(H)}l?(N.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function cI(){const i=xf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fI(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function dI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mI(){const i=un();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function gI(){return!cI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pI(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="FirebaseError";class Ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_I,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?vI(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ti(a,f,r)}}function vI(i,e){return i.replace(EI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const EI=/\{\$([^}]+)}/g;function wI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ma(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(o0(l)&&o0(c)){if(!ma(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function o0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function cu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function bI(i,e){const t=new TI(i,e);return t.subscribe.bind(t)}class TI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");SI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=cg),a.error===void 0&&(a.error=cg),a.complete===void 0&&(a.complete=cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SI(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(i){return i&&i._delegate?i._delegate:i}class ga{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CI(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RI(i){return i===aa?void 0:i}function CI(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new AI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const OI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},NI=Ue.INFO,DI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},kI=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=DI[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=NI,this._logHandler=kI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const PI=(i,e)=>e.some(t=>i instanceof t);let l0,u0;function xI(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MI(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Db=new WeakMap,Pg=new WeakMap,kb=new WeakMap,hg=new WeakMap,Ap=new WeakMap;function UI(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(fs(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Db.set(t,i)}).catch(()=>{}),Ap.set(e,i),e}function VI(i){if(Pg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Pg.set(i,e)}let xg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Pg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||kb.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function LI(i){xg=i(xg)}function jI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(fg(this),e,...t);return kb.set(r,e.sort?e.sort():[e]),fs(r)}:MI().includes(i)?function(...e){return i.apply(fg(this),e),fs(Db.get(this))}:function(...e){return fs(i.apply(fg(this),e))}}function zI(i){return typeof i=="function"?jI(i):(i instanceof IDBTransaction&&VI(i),PI(i,xI())?new Proxy(i,xg):i)}function fs(i){if(i instanceof IDBRequest)return UI(i);if(hg.has(i))return hg.get(i);const e=zI(i);return e!==i&&(hg.set(i,e),Ap.set(e,i)),e}const fg=i=>Ap.get(i);function BI(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=fs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(fs(c.result),m.oldVersion,m.newVersion,fs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const qI=["get","getKey","getAll","getAllKeys","count"],HI=["put","add","delete","clear"],dg=new Map;function c0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(dg.get(e))return dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=HI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||qI.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return dg.set(e,l),l}LI(i=>({...i,get:(e,t,r)=>c0(e,t)||i.get(e,t,r),has:(e,t)=>!!c0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function FI(i){return i.getComponent()?.type==="VERSION"}const Mg="@firebase/app",h0="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Sp("@firebase/app"),GI="@firebase/app-compat",KI="@firebase/analytics-compat",QI="@firebase/analytics",YI="@firebase/app-check-compat",JI="@firebase/app-check",WI="@firebase/auth",XI="@firebase/auth-compat",ZI="@firebase/database",eO="@firebase/data-connect",tO="@firebase/database-compat",nO="@firebase/functions",rO="@firebase/functions-compat",iO="@firebase/installations",sO="@firebase/installations-compat",aO="@firebase/messaging",oO="@firebase/messaging-compat",lO="@firebase/performance",uO="@firebase/performance-compat",cO="@firebase/remote-config",hO="@firebase/remote-config-compat",fO="@firebase/storage",dO="@firebase/storage-compat",mO="@firebase/firestore",gO="@firebase/ai",pO="@firebase/firestore-compat",yO="firebase",_O="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="[DEFAULT]",vO={[Mg]:"fire-core",[GI]:"fire-core-compat",[QI]:"fire-analytics",[KI]:"fire-analytics-compat",[JI]:"fire-app-check",[YI]:"fire-app-check-compat",[WI]:"fire-auth",[XI]:"fire-auth-compat",[ZI]:"fire-rtdb",[eO]:"fire-data-connect",[tO]:"fire-rtdb-compat",[nO]:"fire-fn",[rO]:"fire-fn-compat",[iO]:"fire-iid",[sO]:"fire-iid-compat",[aO]:"fire-fcm",[oO]:"fire-fcm-compat",[lO]:"fire-perf",[uO]:"fire-perf-compat",[cO]:"fire-rc",[hO]:"fire-rc-compat",[fO]:"fire-gcs",[dO]:"fire-gcs-compat",[mO]:"fire-fst",[pO]:"fire-fst-compat",[gO]:"fire-vertex","fire-js":"fire-js",[yO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,EO=new Map,Vg=new Map;function f0(i,e){try{i.container.addComponent(e)}catch(t){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Po(i){const e=i.name;if(Vg.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,i);for(const t of Ru.values())f0(t,i);for(const t of EO.values())f0(t,i);return!0}function Rp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function hr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new $u("app","Firebase",wO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=_O;function Pb(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Ug,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ds.create("bad-app-name",{appName:String(a)});if(t||(t=Cb()),!t)throw ds.create("no-options");const l=Ru.get(a);if(l){if(ma(t,l.options)&&ma(r,l.config))return l;throw ds.create("duplicate-app",{appName:a})}const c=new II(a);for(const m of Vg.values())c.addComponent(m);const f=new bO(t,r,c);return Ru.set(a,f),f}function xb(i=Ug){const e=Ru.get(i);if(!e&&i===Ug&&Cb())return Pb();if(!e)throw ds.create("no-app",{appName:i});return e}function d0(){return Array.from(Ru.values())}function ms(i,e,t){let r=vO[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(c.join(" "));return}Po(new ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="firebase-heartbeat-database",SO=1,Cu="firebase-heartbeat-store";let mg=null;function Mb(){return mg||(mg=BI(TO,SO,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Cu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ds.create("idb-open",{originalErrorMessage:i.message})})),mg}async function AO(i){try{const t=(await Mb()).transaction(Cu),r=await t.objectStore(Cu).get(Ub(i));return await t.done,r}catch(e){if(e instanceof Ti)vi.warn(e.message);else{const t=ds.create("idb-get",{originalErrorMessage:e?.message});vi.warn(t.message)}}}async function m0(i,e){try{const r=(await Mb()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,Ub(i)),await r.done}catch(t){if(t instanceof Ti)vi.warn(t.message);else{const r=ds.create("idb-set",{originalErrorMessage:t?.message});vi.warn(r.message)}}}function Ub(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=1024,CO=30;class IO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=g0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>CO){const a=DO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=g0(),{heartbeatsToSend:t,unsentEntries:r}=OO(this._heartbeatsCache.heartbeats),a=lf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return vi.warn(e),""}}}function g0(){return new Date().toISOString().substring(0,10)}function OO(i,e=RO){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),p0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),p0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pI()?yI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function p0(i){return lf(JSON.stringify({version:2,heartbeats:i})).length}function DO(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(i){Po(new ga("platform-logger",e=>new $I(e),"PRIVATE")),Po(new ga("heartbeat",e=>new IO(e),"PRIVATE")),ms(Mg,h0,i),ms(Mg,h0,"esm2020"),ms("fire-js","")}kO("");var PO="firebase",xO="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(PO,xO,"app");function Vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MO=Vb,Lb=new $u("auth","Firebase",Vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Sp("@firebase/auth");function UO(i,...e){uf.logLevel<=Ue.WARN&&uf.warn(`Auth (${Fo}): ${i}`,...e)}function Jh(i,...e){uf.logLevel<=Ue.ERROR&&uf.error(`Auth (${Fo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(i,...e){throw Cp(i,...e)}function jr(i,...e){return Cp(i,...e)}function jb(i,e,t){const r={...MO(),[e]:t};return new $u("auth","Firebase",r).create(e,{appName:i.name})}function gs(i){return jb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Lb.create(i,...e)}function we(i,e,...t){if(!i)throw Cp(e,...t)}function mi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Jh(e),new Error(e)}function Ei(i,e){i||mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){return typeof self<"u"&&self.location?.href||""}function VO(){return y0()==="http:"||y0()==="https:"}function y0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VO()||fI()||"connection"in navigator)?navigator.onLine:!0}function jO(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=uI()||dI()}get(){return LO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(i,e){Ei(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qO=new Gu(3e4,6e4);function Ea(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function As(i,e,t,r,a={}){return Bb(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const f=Fu({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return hI()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&$o(i.emulatorConfig.host)&&(g.credentials="include"),zb.fetch()(await qb(i,i.config.apiHost,t,f),g)})}async function Bb(i,e,t){i._canInitEmulator=!1;const r={...zO,...e};try{const a=new $O(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ph(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Ph(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Ph(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw jb(i,_,g);mr(i,_)}}catch(a){if(a instanceof Ti)throw a;mr(i,"network-request-failed",{message:String(a)})}}async function Mf(i,e,t,r,a={}){const l=await As(i,e,t,r,a);return"mfaPendingCredential"in l&&mr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function qb(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?Ip(i.config,a):`${i.config.apiScheme}://${a}`;return BO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function HO(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $O{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),qO.get())})}}function Ph(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=jr(i,e,r);return a.customData._tokenResponse=t,a}function _0(i){return i!==void 0&&i.enterprise!==void 0}class FO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GO(i,e){return As(i,"GET","/v2/recaptchaConfig",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(i,e){return As(i,"POST","/v1/accounts:delete",e)}async function cf(i,e){return As(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QO(i,e=!1){const t=wn(i),r=await t.getIdToken(e),a=Op(r);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:yu(gg(a.auth_time)),issuedAtTime:yu(gg(a.iat)),expirationTime:yu(gg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function gg(i){return Number(i)*1e3}function Op(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ab(t);return a?JSON.parse(a):(Jh("Failed to decode base64 JWT payload"),null)}catch(a){return Jh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function v0(i){const e=Op(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ti&&YO(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function YO({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(i){const e=i.auth,t=await i.getIdToken(),r=await Iu(i,cf(e,{idToken:t}));we(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?Hb(a.providerUserInfo):[],c=XO(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!c?.length,g=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new jg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function WO(i){const e=wn(i);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XO(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function Hb(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(i,e){const t=await Bb(i,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await qb(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return i.emulatorConfig&&$o(i.emulatorConfig.host)&&(m.credentials="include"),zb.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eN(i,e){return As(i,"POST","/v2/accounts:revokeToken",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=v0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await ZO(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Io;return r&&(we(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(we(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new JO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QO(this,e)}reload(){return WO(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Iu(this,KO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:S,providerData:N,stsTokenManager:U}=t;we(E&&U,e,"internal-error");const A=Io.fromJSON(this.name,U);we(typeof E=="string",e,"internal-error"),rs(r,e.name),rs(a,e.name),we(typeof b=="boolean",e,"internal-error"),we(typeof S=="boolean",e,"internal-error"),rs(l,e.name),rs(c,e.name),rs(f,e.name),rs(m,e.name),rs(g,e.name),rs(_,e.name);const j=new fr({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:A,createdAt:g,lastLoginAt:_});return N&&Array.isArray(N)&&(j.providerData=N.map(z=>({...z}))),m&&(j._redirectEventId=m),j}static async _fromIdTokenResponse(e,t,r=!1){const a=new Io;a.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await hf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Hb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new Io;f.updateFromIdToken(r);const m=new fr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new jg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;function gi(i){Ei(i instanceof Function,"Expected a class definition");let e=E0.get(i);return e?(Ei(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,E0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$b.type="NONE";const w0=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(i,e,t){return`firebase:${i}:${e}:${t}`}class Oo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Wh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Wh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cf(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Oo(gi(w0),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||gi(w0);const c=Wh(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await cf(e,{idToken:_}).catch(()=>{});if(!b)break;E=await fr._fromGetAccountInfoResponse(e,b,_)}else E=fr._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Oo(l,e,r):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Oo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Wb(e))return"Webos";if(Gb(e))return"Safari";if((e.includes("chrome/")||Kb(e))&&!e.includes("edge/"))return"Chrome";if(Yb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function Fb(i=un()){return/firefox\//i.test(i)}function Gb(i=un()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kb(i=un()){return/crios\//i.test(i)}function Qb(i=un()){return/iemobile/i.test(i)}function Yb(i=un()){return/android/i.test(i)}function Jb(i=un()){return/blackberry/i.test(i)}function Wb(i=un()){return/webos/i.test(i)}function Np(i=un()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function tN(i=un()){return Np(i)&&!!window.navigator?.standalone}function nN(){return mI()&&document.documentMode===10}function Xb(i=un()){return Np(i)||Yb(i)||Wb(i)||Jb(i)||/windows phone/i.test(i)||Qb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(i,e=[]){let t;switch(i){case"Browser":t=b0(un());break;case"Worker":t=`${b0(un())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(i,e={}){return As(i,"GET","/v2/passwordPolicy",Ea(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=6;class aN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T0(this),this.idTokenSubscription=new T0(this),this.beforeStateQueue=new rN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cf(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(r=f.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(gs(this));const t=e?wn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iN(this),t=new aN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $u("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await eN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&UO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Go(i){return wn(i)}class T0{constructor(e){this.auth=e,this.observer=null,this.addObserver=bI(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lN(i){Uf=i}function eT(i){return Uf.loadJS(i)}function uN(){return Uf.recaptchaEnterpriseScript}function cN(){return Uf.gapiScript}function hN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class fN{constructor(){this.enterprise=new dN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mN="recaptcha-enterprise",tT="NO_RECAPTCHA";class gN{constructor(e){this.type=mN,this.auth=Go(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{GO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new FO(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;_0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(tT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(f=>{if(!t&&_0(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=uN();m.length!==0&&(m+=f),eT(m).then(()=>{a(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function S0(i,e,t,r=!1,a=!1){const l=new gN(i);let c;if(a)c=tT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function A0(i,e,t,r,a){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await S0(i,e,t,t==="getOobCode");return r(i,l)}else return r(i,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await S0(i,e,t,t==="getOobCode");return r(i,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i,e){const t=Rp(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ma(l,e??{}))return a;mr(a,"already-initialized")}return t.initialize({options:e})}function yN(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function _N(i,e,t){const r=Go(i);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=nT(e),{host:c,port:f}=vN(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(ma(g,r.config.emulator)&&ma(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,$o(c)?(Ob(`${l}//${c}${m}`),Nb("Auth",!0)):EN()}function nT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function vN(i){const e=nT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:R0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:R0(c)}}}function R0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function EN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,t){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function wN(i,e){return As(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(i,e){return Mf(i,"POST","/v1/accounts:signInWithPassword",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(i,e){return Mf(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}async function SN(i,e){return Mf(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Dp{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ou(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ou(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,t,"signInWithPassword",bN);case"emailLink":return TN(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,r,"signUpPassword",wN);case"emailLink":return SN(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(i,e){return Mf(i,"POST","/v1/accounts:signInWithIdp",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="http://localhost";class pa extends Dp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new pa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,No(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:AN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CN(i){const e=uu(cu(i)).link,t=e?uu(cu(e)).deep_link_id:null,r=uu(cu(i)).deep_link_id;return(r?uu(cu(r)).link:null)||r||t||e||i}class kp{constructor(e){const t=uu(cu(e)),r=t.apiKey??null,a=t.oobCode??null,l=RN(t.mode??null);we(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=CN(e);try{return new kp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return Ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=kp.parseLink(t);return we(r,"argument-error"),Ou._fromEmailAndCode(e,r.code,r.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends rT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Ku{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return os.credential(t,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Ku{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Ku{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return us.credential(t,r)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await fr._fromIdTokenResponse(e,r,a),c=C0(r);return new xo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=C0(r);return new xo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function C0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Ti{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new ff(e,t,r,a)}}function iT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(i,l,e,r):l})}async function IN(i,e,t=!1){const r=await Iu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return xo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(i,e,t=!1){const{auth:r}=i;if(hr(r.app))return Promise.reject(gs(r));const a="reauthenticate";try{const l=await Iu(i,iT(r,a,e,i),t);we(l.idToken,r,"internal-error");const c=Op(l.idToken);we(c,r,"internal-error");const{sub:f}=c;return we(i.uid===f,r,"user-mismatch"),xo._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&mr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(i,e,t=!1){if(hr(i.app))return Promise.reject(gs(i));const r="signIn",a=await iT(i,r,e),l=await xo._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function NN(i,e){return sT(Go(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(i){const e=Go(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function kN(i,e,t){return hr(i.app)?Promise.reject(gs(i)):NN(wn(i),Ko.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DN(i),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(i,e){return wn(i).setPersistence(e)}function xN(i,e,t,r){return wn(i).onIdTokenChanged(e,t,r)}function MN(i,e,t){return wn(i).beforeAuthStateChanged(e,t)}function UN(i,e,t,r){return wn(i).onAuthStateChanged(e,t,r)}function I0(i){return wn(i).signOut()}const df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(df,"1"),this.storage.removeItem(df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=1e3,LN=10;class oT extends aT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);nN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,LN):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oT.type="LOCAL";const lT=oT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT extends aT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uT.type="SESSION";const cT=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Vf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await jN(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Pp("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function BN(i){zr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function qN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HN(){return navigator?.serviceWorker?.controller||null}function $N(){return hT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebaseLocalStorageDb",FN=1,mf="firebaseLocalStorage",dT="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lf(i,e){return i.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function GN(){const i=indexedDB.deleteDatabase(fT);return new Qu(i).toPromise()}function zg(){const i=indexedDB.open(fT,FN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(mf,{keyPath:dT})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),await GN(),e(await zg()))})})}async function O0(i,e,t){const r=Lf(i,!0).put({[dT]:e,value:t});return new Qu(r).toPromise()}async function KN(i,e){const t=Lf(i,!1).get(e),r=await new Qu(t).toPromise();return r===void 0?null:r.value}function N0(i,e){const t=Lf(i,!0).delete(e);return new Qu(t).toPromise()}const QN=800,YN=3;class mT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>YN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vf._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qN(),!this.activeServiceWorker)return;this.sender=new zN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await O0(e,df,"1"),await N0(e,df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>O0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>KN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Lf(a,!1).getAll();return new Qu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mT.type="LOCAL";const JN=mT;new Gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(i,e){return e?gi(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends Dp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XN(i){return sT(i.auth,new xp(i),i.bypassAuthState)}function ZN(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),ON(t,new xp(i),i.bypassAuthState)}async function eD(i){const{auth:e,user:t}=i;return we(t,e,"internal-error"),IN(t,new xp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XN;case"linkViaPopup":case"linkViaRedirect":return eD;case"reauthViaPopup":case"reauthViaRedirect":return ZN;default:mr(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Gu(2e3,1e4);class Co extends gT{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tD.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="pendingRedirect",Xh=new Map;class rD extends gT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const r=await iD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iD(i,e){const t=oD(e),r=aD(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function sD(i,e){Xh.set(i._key(),e)}function aD(i){return gi(i._redirectPersistence)}function oD(i){return Wh(nD,i.config.apiKey,i.name)}async function lD(i,e,t=!1){if(hr(i.app))return Promise.reject(gs(i));const r=Go(i),a=WN(r,e),c=await new rD(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=600*1e3;class cD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uD&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function pT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function hD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(i,e={}){return As(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(i){if(i.config.emulator)return;const{authorizedDomains:e}=await fD(i);for(const t of e)try{if(pD(t))return}catch{}mr(i,"unauthorized-domain")}function pD(i){const e=Lg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!mD.test(t))return!1;if(dD.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Gu(3e4,6e4);function k0(){const i=zr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function _D(i){return new Promise((e,t)=>{function r(){k0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k0(),t(jr(i,"network-request-failed"))},timeout:yD.get()})}if(zr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zr().gapi?.load)r();else{const a=hN("iframefcb");return zr()[a]=()=>{gapi.load?r():t(jr(i,"network-request-failed"))},eT(`${cN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function vD(i){return Zh=Zh||_D(i),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Gu(5e3,15e3),wD="__/auth/iframe",bD="emulator/auth/iframe",TD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AD(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Ip(e,bD):`https://${i.config.authDomain}/${wD}`,r={apiKey:e.apiKey,appName:i.name,v:Fo},a=SD.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Fu(r).slice(1)}`}async function RD(i){const e=await vD(i),t=zr().gapi;return we(t,i,"internal-error"),e.open({where:document.body,url:AD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TD,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=jr(i,"network-request-failed"),f=zr().setTimeout(()=>{l(c)},ED.get());function m(){zr().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ID=500,OD=600,ND="_blank",DD="http://localhost";class P0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kD(i,e,t,r=ID,a=OD){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...CD,width:r.toString(),height:a.toString(),top:l,left:c},g=un().toLowerCase();t&&(f=Kb(g)?ND:t),Fb(g)&&(e=e||DD,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[S,N])=>`${b}${S}=${N},`,"");if(tN(g)&&f!=="_self")return PD(e||"",f),new P0(null);const E=window.open(e||"",f,_);we(E,i,"popup-blocked");try{E.focus()}catch{}return new P0(E)}function PD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="__/auth/handler",MD="emulator/auth/handler",UD=encodeURIComponent("fac");async function x0(i,e,t,r,a,l){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Fo,eventId:a};if(e instanceof rT){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",wI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Ku){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await i._getAppCheckToken(),g=m?`#${UD}=${encodeURIComponent(m)}`:"";return`${VD(i)}?${Fu(f).slice(1)}${g}`}function VD({config:i}){return i.emulator?Ip(i,MD):`https://${i.authDomain}/${xD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="webStorageSupport";class LD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cT,this._completeRedirectFn=lD,this._overrideRedirectResult=sD}async _openPopup(e,t,r,a){Ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await x0(e,t,r,Lg(),a);return kD(e,l,Pp())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await x0(e,t,r,Lg(),a);return BN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ei(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await RD(e),r=new cD(e);return t.register("authEvent",a=>(we(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},a=>{const l=a?.[0]?.[pg];l!==void 0&&t(!!l),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xb()||Gb()||Np()}}const jD=LD;var M0="@firebase/auth",U0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qD(i){Po(new ga("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zb(i)},g=new oN(r,a,l,m);return yN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Po(new ga("auth-internal",e=>{const t=Go(e.getProvider("auth").getImmediate());return(r=>new zD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(M0,U0,BD(i)),ms(M0,U0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=300,$D=Ib("authIdTokenMaxAge")||HD;let V0=null;const FD=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$D)return;const a=t?.token;V0!==a&&(V0=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function GD(i=xb()){const e=Rp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=pN(i,{popupRedirectResolver:jD,persistence:[JN,lT,cT]}),r=Ib("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=FD(l.toString());MN(t,c,()=>c(t.currentUser)),xN(t,f=>c(f))}}const a=Rb("auth");return a&&_N(t,`http://${a}`),t}function KD(){return document.getElementsByTagName("head")?.[0]??document}lN({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=jr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",KD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qD("Browser");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,yT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,C){function I(){}I.prototype=C.prototype,O.F=C.prototype,O.prototype=new I,O.prototype.constructor=O,O.D=function(V,P,q){for(var D=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)D[ot-2]=arguments[ot];return C.prototype[P].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)V[P]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(P=0;P<16;++P)V[P]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=O.g[0],I=O.g[1],P=O.g[2];let q=O.g[3],D;D=C+(q^I&(P^q))+V[0]+3614090360&4294967295,C=I+(D<<7&4294967295|D>>>25),D=q+(P^C&(I^P))+V[1]+3905402710&4294967295,q=C+(D<<12&4294967295|D>>>20),D=P+(I^q&(C^I))+V[2]+606105819&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(C^P&(q^C))+V[3]+3250441966&4294967295,I=P+(D<<22&4294967295|D>>>10),D=C+(q^I&(P^q))+V[4]+4118548399&4294967295,C=I+(D<<7&4294967295|D>>>25),D=q+(P^C&(I^P))+V[5]+1200080426&4294967295,q=C+(D<<12&4294967295|D>>>20),D=P+(I^q&(C^I))+V[6]+2821735955&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(C^P&(q^C))+V[7]+4249261313&4294967295,I=P+(D<<22&4294967295|D>>>10),D=C+(q^I&(P^q))+V[8]+1770035416&4294967295,C=I+(D<<7&4294967295|D>>>25),D=q+(P^C&(I^P))+V[9]+2336552879&4294967295,q=C+(D<<12&4294967295|D>>>20),D=P+(I^q&(C^I))+V[10]+4294925233&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(C^P&(q^C))+V[11]+2304563134&4294967295,I=P+(D<<22&4294967295|D>>>10),D=C+(q^I&(P^q))+V[12]+1804603682&4294967295,C=I+(D<<7&4294967295|D>>>25),D=q+(P^C&(I^P))+V[13]+4254626195&4294967295,q=C+(D<<12&4294967295|D>>>20),D=P+(I^q&(C^I))+V[14]+2792965006&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(C^P&(q^C))+V[15]+1236535329&4294967295,I=P+(D<<22&4294967295|D>>>10),D=C+(P^q&(I^P))+V[1]+4129170786&4294967295,C=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(C^I))+V[6]+3225465664&4294967295,q=C+(D<<9&4294967295|D>>>23),D=P+(C^I&(q^C))+V[11]+643717713&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^C&(P^q))+V[0]+3921069994&4294967295,I=P+(D<<20&4294967295|D>>>12),D=C+(P^q&(I^P))+V[5]+3593408605&4294967295,C=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(C^I))+V[10]+38016083&4294967295,q=C+(D<<9&4294967295|D>>>23),D=P+(C^I&(q^C))+V[15]+3634488961&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^C&(P^q))+V[4]+3889429448&4294967295,I=P+(D<<20&4294967295|D>>>12),D=C+(P^q&(I^P))+V[9]+568446438&4294967295,C=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(C^I))+V[14]+3275163606&4294967295,q=C+(D<<9&4294967295|D>>>23),D=P+(C^I&(q^C))+V[3]+4107603335&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^C&(P^q))+V[8]+1163531501&4294967295,I=P+(D<<20&4294967295|D>>>12),D=C+(P^q&(I^P))+V[13]+2850285829&4294967295,C=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(C^I))+V[2]+4243563512&4294967295,q=C+(D<<9&4294967295|D>>>23),D=P+(C^I&(q^C))+V[7]+1735328473&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^C&(P^q))+V[12]+2368359562&4294967295,I=P+(D<<20&4294967295|D>>>12),D=C+(I^P^q)+V[5]+4294588738&4294967295,C=I+(D<<4&4294967295|D>>>28),D=q+(C^I^P)+V[8]+2272392833&4294967295,q=C+(D<<11&4294967295|D>>>21),D=P+(q^C^I)+V[11]+1839030562&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^C)+V[14]+4259657740&4294967295,I=P+(D<<23&4294967295|D>>>9),D=C+(I^P^q)+V[1]+2763975236&4294967295,C=I+(D<<4&4294967295|D>>>28),D=q+(C^I^P)+V[4]+1272893353&4294967295,q=C+(D<<11&4294967295|D>>>21),D=P+(q^C^I)+V[7]+4139469664&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^C)+V[10]+3200236656&4294967295,I=P+(D<<23&4294967295|D>>>9),D=C+(I^P^q)+V[13]+681279174&4294967295,C=I+(D<<4&4294967295|D>>>28),D=q+(C^I^P)+V[0]+3936430074&4294967295,q=C+(D<<11&4294967295|D>>>21),D=P+(q^C^I)+V[3]+3572445317&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^C)+V[6]+76029189&4294967295,I=P+(D<<23&4294967295|D>>>9),D=C+(I^P^q)+V[9]+3654602809&4294967295,C=I+(D<<4&4294967295|D>>>28),D=q+(C^I^P)+V[12]+3873151461&4294967295,q=C+(D<<11&4294967295|D>>>21),D=P+(q^C^I)+V[15]+530742520&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^C)+V[2]+3299628645&4294967295,I=P+(D<<23&4294967295|D>>>9),D=C+(P^(I|~q))+V[0]+4096336452&4294967295,C=I+(D<<6&4294967295|D>>>26),D=q+(I^(C|~P))+V[7]+1126891415&4294967295,q=C+(D<<10&4294967295|D>>>22),D=P+(C^(q|~I))+V[14]+2878612391&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~C))+V[5]+4237533241&4294967295,I=P+(D<<21&4294967295|D>>>11),D=C+(P^(I|~q))+V[12]+1700485571&4294967295,C=I+(D<<6&4294967295|D>>>26),D=q+(I^(C|~P))+V[3]+2399980690&4294967295,q=C+(D<<10&4294967295|D>>>22),D=P+(C^(q|~I))+V[10]+4293915773&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~C))+V[1]+2240044497&4294967295,I=P+(D<<21&4294967295|D>>>11),D=C+(P^(I|~q))+V[8]+1873313359&4294967295,C=I+(D<<6&4294967295|D>>>26),D=q+(I^(C|~P))+V[15]+4264355552&4294967295,q=C+(D<<10&4294967295|D>>>22),D=P+(C^(q|~I))+V[6]+2734768916&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~C))+V[13]+1309151649&4294967295,I=P+(D<<21&4294967295|D>>>11),D=C+(P^(I|~q))+V[4]+4149444226&4294967295,C=I+(D<<6&4294967295|D>>>26),D=q+(I^(C|~P))+V[11]+3174756917&4294967295,q=C+(D<<10&4294967295|D>>>22),D=P+(C^(q|~I))+V[2]+718787259&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~C))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+q&4294967295}r.prototype.v=function(O,C){C===void 0&&(C=O.length);const I=C-this.blockSize,V=this.C;let P=this.h,q=0;for(;q<C;){if(P==0)for(;q<=I;)a(this,O,q),q+=this.blockSize;if(typeof O=="string"){for(;q<C;)if(V[P++]=O.charCodeAt(q++),P==this.blockSize){a(this,V),P=0;break}}else for(;q<C;)if(V[P++]=O[q++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;C=this.o*8;for(var I=O.length-8;I<O.length;++I)O[I]=C&255,C/=256;for(this.v(O),O=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)O[C++]=this.g[I]>>>V&255;return O};function l(O,C){var I=f;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=C(O)}function c(O,C){this.h=C;const I=[];let V=!0;for(let P=O.length-1;P>=0;P--){const q=O[P]|0;V&&q==C||(I[P]=q,V=!1)}this.g=I}var f={};function m(O){return-128<=O&&O<128?l(O,function(C){return new c([C|0],C<0?-1:0)}):new c([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return E;if(O<0)return A(g(-O));const C=[];let I=1;for(let V=0;O>=I;V++)C[V]=O/I|0,I*=4294967296;return new c(C,0)}function _(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return A(_(O.substring(1),C));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(C,8));let V=E;for(let q=0;q<O.length;q+=8){var P=Math.min(8,O.length-q);const D=parseInt(O.substring(q,q+P),C);P<8?(P=g(Math.pow(C,P)),V=V.j(P).add(g(D))):(V=V.j(I),V=V.add(g(D)))}return V}var E=m(0),b=m(1),S=m(16777216);i=c.prototype,i.m=function(){if(U(this))return-A(this).m();let O=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);O+=(V>=0?V:4294967296+V)*C,C*=4294967296}return O},i.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(U(this))return"-"+A(this).toString(O);const C=g(Math.pow(O,6));var I=this;let V="";for(;;){const P=re(I,C).g;I=j(I,P.j(C));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(O);if(I=P,N(I))return q+V;for(;q.length<6;)q="0"+q;V=q+V}},i.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(let C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function U(O){return O.h==-1}i.l=function(O){return O=j(this,O),U(O)?-1:N(O)?0:1};function A(O){const C=O.g.length,I=[];for(let V=0;V<C;V++)I[V]=~O.g[V];return new c(I,~O.h).add(b)}i.abs=function(){return U(this)?A(this):this},i.add=function(O){const C=Math.max(this.g.length,O.g.length),I=[];let V=0;for(let P=0;P<=C;P++){let q=V+(this.i(P)&65535)+(O.i(P)&65535),D=(q>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);V=D>>>16,q&=65535,D&=65535,I[P]=D<<16|q}return new c(I,I[I.length-1]&-2147483648?-1:0)};function j(O,C){return O.add(A(C))}i.j=function(O){if(N(this)||N(O))return E;if(U(this))return U(O)?A(this).j(A(O)):A(A(this).j(O));if(U(O))return A(this.j(A(O)));if(this.l(S)<0&&O.l(S)<0)return g(this.m()*O.m());const C=this.g.length+O.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<O.g.length;P++){const q=this.i(V)>>>16,D=this.i(V)&65535,ot=O.i(P)>>>16,Mt=O.i(P)&65535;I[2*V+2*P]+=D*Mt,z(I,2*V+2*P),I[2*V+2*P+1]+=q*Mt,z(I,2*V+2*P+1),I[2*V+2*P+1]+=D*ot,z(I,2*V+2*P+1),I[2*V+2*P+2]+=q*ot,z(I,2*V+2*P+2)}for(O=0;O<C;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=C;O<2*C;O++)I[O]=0;return new c(I,0)};function z(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function H(O,C){this.g=O,this.h=C}function re(O,C){if(N(C))throw Error("division by zero");if(N(O))return new H(E,E);if(U(O))return C=re(A(O),C),new H(A(C.g),A(C.h));if(U(C))return C=re(O,A(C)),new H(A(C.g),C.h);if(O.g.length>30){if(U(O)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var I=b,V=C;V.l(O)<=0;)I=he(I),V=he(V);var P=le(I,1),q=le(V,1);for(V=le(V,2),I=le(I,2);!N(V);){var D=q.add(V);D.l(O)<=0&&(P=P.add(I),q=D),V=le(V,1),I=le(I,1)}return C=j(O,P.j(C)),new H(P,C)}for(P=E;O.l(C)>=0;){for(I=Math.max(1,Math.floor(O.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),q=g(I),D=q.j(C);U(D)||D.l(O)>0;)I-=V,q=g(I),D=q.j(C);N(q)&&(q=b),P=P.add(q),O=j(O,D)}return new H(P,O)}i.B=function(O){return re(this,O).h},i.and=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&O.i(V);return new c(I,this.h&O.h)},i.or=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|O.i(V);return new c(I,this.h|O.h)},i.xor=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^O.i(V);return new c(I,this.h^O.h)};function he(O){const C=O.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new c(I,O.h)}function le(O,C){const I=C>>5;C%=32;const V=O.g.length-I,P=[];for(let q=0;q<V;q++)P[q]=C>0?O.i(q+I)>>>C|O.i(q+I+1)<<32-C:O.i(q+I);return new c(P,O.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ps=c}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _T,hu,vT,ef,Bg,ET,wT,bT;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var w=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var $=h[R];if(!($ in w))break e;w=w[$]}h=h[h.length-1],R=w[h],y=y(R),y!=R&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&w.push([R,y[R]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,w){return h.call.apply(h.bind,arguments)}function g(h,y,w){return g=m,g.apply(null,arguments)}function _(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(R,$,Y){for(var se=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)se[Ie-2]=arguments[Ie];return y.prototype[$].apply(R,se)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const y=h.length;if(y>0){const w=Array(y);for(let R=0;R<y;R++)w[R]=h[R];return w}return[]}function N(h,y){for(let R=1;R<arguments.length;R++){const $=arguments[R];var w=typeof $;if(w=w!="object"?w:$?Array.isArray($)?"array":w:"null",w=="array"||w=="object"&&typeof $.length=="number"){w=h.length||0;const Y=$.length||0;h.length=w+Y;for(let se=0;se<Y;se++)h[w+se]=$[se]}else h.push($)}}class U{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function A(h){c.setTimeout(()=>{throw h},0)}function j(){var h=O;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,w){const R=H.get();R.set(y,w),this.h?this.h.next=R:this.g=R,this.h=R}}var H=new U(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let he,le=!1,O=new z,C=()=>{const h=Promise.resolve(void 0);he=()=>{h.then(I)}};function I(){for(var h;h=j();){try{h.h.call(h.g)}catch(w){A(w)}var y=H;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ot(h,y){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(ot,P),ot.prototype.init=function(h,y){const w=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ot.Z.h.call(this)},ot.prototype.h=function(){ot.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Mt="closure_listenable_"+(Math.random()*1e6|0),X=0;function ae(h,y,w,R,$){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!R,this.ha=$,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qe(h,y,w){for(const R in h)y.call(w,h[R],R,h)}function Qe(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function M(h){const y={};for(const w in h)y[w]=h[w];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let w,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(w in R)h[w]=R[w];for(let Y=0;Y<te.length;Y++)w=te[Y],Object.prototype.hasOwnProperty.call(R,w)&&(h[w]=R[w])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,w,R,$){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const se=Ne(h,y,R,$);return se>-1?(y=h[se],w||(y.fa=!1)):(y=new ae(y,this.src,Y,!!R,$),y.fa=w,h.push(y)),y};function Se(h,y){const w=y.type;if(w in h.g){var R=h.g[w],$=Array.prototype.indexOf.call(R,y,void 0),Y;(Y=$>=0)&&Array.prototype.splice.call(R,$,1),Y&&(_e(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ne(h,y,w,R){for(let $=0;$<h.length;++$){const Y=h[$];if(!Y.da&&Y.listener==y&&Y.capture==!!w&&Y.ha==R)return $}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Ut={};function lt(h,y,w,R,$){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)lt(h,y[Y],w,R,$);return null}return w=nl(w),h&&h[Mt]?h.J(y,w,f(R)?!!R.capture:!1,$):Cs(h,y,w,!1,R,$)}function Cs(h,y,w,R,$,Y){if(!y)throw Error("Invalid event type");const se=f($)?!!$.capture:!!$;let Ie=Is(h);if(Ie||(h[ze]=Ie=new ce(h)),w=Ie.add(y,w,R,se,Y),w.proxy)return w;if(R=Aa(),w.proxy=R,R.src=h,R.listener=w,h.addEventListener)q||($=se),$===void 0&&($=!1),h.addEventListener(y.toString(),R,$);else if(h.attachEvent)h.attachEvent(pr(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Aa(){function h(w){return y.call(h.src,h.listener,w)}const y=el;return h}function Ra(h,y,w,R,$){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Ra(h,y[Y],w,R,$);else R=f(R)?!!R.capture:!!R,w=nl(w),h&&h[Mt]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],w=Ne(y,w,R,$),w>-1&&(_e(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Is(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ne(y,w,R,$)),(w=h>-1?y[h]:null)&&Ca(w))}function Ca(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Mt])Se(y.i,h);else{var w=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(w,R,h.capture):y.detachEvent?y.detachEvent(pr(w),R):y.addListener&&y.removeListener&&y.removeListener(R),(w=Is(y))?(Se(w,h),w.h==0&&(w.src=null,y[ze]=null)):_e(h)}}}function pr(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function el(h,y){if(h.da)h=!0;else{y=new ot(y,this);const w=h.listener,R=h.ha||h.src;h.fa&&Ca(h),h=w.call(R,y)}return h}function Is(h){return h=h[ze],h instanceof ce?h:null}var tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function nl(h){return typeof h=="function"?h:(h[tl]||(h[tl]=function(y){return h.handleEvent(y)}),h[tl])}function Tt(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}E(Tt,V),Tt.prototype[Mt]=!0,Tt.prototype.removeEventListener=function(h,y,w,R){Ra(this,h,y,w,R)};function Vt(h,y){var w,R=h.G;if(R)for(w=[];R;R=R.G)w.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new P(y,h);else if(y instanceof P)y.target=y.target||h;else{var $=y;y=new P(R,h),oe(y,$)}$=!0;let Y,se;if(w)for(se=w.length-1;se>=0;se--)Y=y.g=w[se],$=Si(Y,R,!0,y)&&$;if(Y=y.g=h,$=Si(Y,R,!0,y)&&$,$=Si(Y,R,!1,y)&&$,w)for(se=0;se<w.length;se++)Y=y.g=w[se],$=Si(Y,R,!1,y)&&$}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let R=0;R<w.length;R++)_e(w[R]);delete h.g[y],h.h--}}this.G=null},Tt.prototype.J=function(h,y,w,R){return this.i.add(String(h),y,!1,w,R)},Tt.prototype.K=function(h,y,w,R){return this.i.add(String(h),y,!0,w,R)};function Si(h,y,w,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let Y=0;Y<y.length;++Y){const se=y[Y];if(se&&!se.da&&se.capture==w){const Ie=se.listener,_t=se.ha||se.src;se.fa&&Se(h.i,se),$=Ie.call(_t,R)!==!1&&$}}return $&&!R.defaultPrevented}function id(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function rc(h){h.g=id(()=>{h.g=null,h.i&&(h.i=!1,rc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class cn extends V{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(h){V.call(this),this.h=h,this.g={}}E(Os,V);var rl=[];function il(h){qe(h.g,function(y,w){this.g.hasOwnProperty(w)&&Ca(y)},h),h.g={}}Os.prototype.N=function(){Os.Z.N.call(this),il(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ai=c.JSON.stringify,sd=c.JSON.parse,ic=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function sc(){}function ac(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){P.call(this,"d")}E(Kt,P);function Pn(){P.call(this,"c")}E(Pn,P);var yt={},oc=null;function Ia(){return oc=oc||new Tt}yt.Ia="serverreachability";function lc(h){P.call(this,yt.Ia,h)}E(lc,P);function yr(h){const y=Ia();Vt(y,new lc(y))}yt.STAT_EVENT="statevent";function Ns(h,y){P.call(this,yt.STAT_EVENT,h),this.stat=y}E(Ns,P);function St(h){const y=Ia();Vt(y,new Ns(y,h))}yt.Ja="timingevent";function _r(h,y){P.call(this,yt.Ja,h),this.size=y}E(_r,P);function vr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function ad(h,y,w,R,$,Y){h.info(function(){if(h.g)if(Y){var se="",Ie=Y.split("&");for(let Fe=0;Fe<Ie.length;Fe++){var _t=Ie[Fe].split("=");if(_t.length>1){const ut=_t[0];_t=_t[1];const Vn=ut.split("_");se=Vn.length>=2&&Vn[1]=="type"?se+(ut+"="+_t+"&"):se+(ut+"=redacted&")}}}else se=null;else se=Y;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+y+`
`+w+`
`+se})}function uc(h,y,w,R,$,Y,se){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+y+`
`+w+`
`+Y+" "+se})}function Er(h,y,w,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+od(h,w)+(R?" "+R:"")})}function Ds(h,y){h.info(function(){return"TIMEOUT: "+y})}Wn.prototype.info=function(){};function od(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var w=Y[h];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var $=R[0];if($!="noop"&&$!="stop"&&$!="close")for(let se=1;se<R.length;se++)R[se]=""}}}}return Ai(Y)}catch{return y}}var ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},al;function Ps(){}E(Ps,sc),Ps.prototype.g=function(){return new XMLHttpRequest},al=new Ps;function Qr(h){return encodeURIComponent(String(h))}function cc(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Xn(h,y,w,R){this.j=h,this.i=y,this.l=w,this.S=R||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var At={},qt={};function wr(h,y,w){h.M=1,h.A=xs(Ct(y)),h.u=w,h.R=!0,Oa(h,null)}function Oa(h,y){h.F=Date.now(),br(h),h.B=Ct(h.A);var w=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Pa(w.i,"t",R),h.C=0,w=h.j.L,h.h=new Zn,h.g=Ac(h.j,w?y:null,!h.u),h.P>0&&(h.O=new cn(g(h.Y,h,h.g),h.P)),y=h.V,w=h.g,R=h.ba;var $="readystatechange";Array.isArray($)||($&&(rl[0]=$.toString()),$=rl);for(let Y=0;Y<$.length;Y++){const se=lt(w,$[Y],R||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),yr(),ad(h.i,h.v,h.B,h.l,h.S,h.u)}Xn.prototype.ba=function(h){h=h.target;const y=this.O;y&&nr(h)==3?y.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=nr(this.g),_t=this.g.ya(),Fe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||_t==7||(_t==8||Fe<=0?yr(3):yr(2)),Tr(this);var y=this.g.ca();this.X=y;var w=ld(this);if(this.o=y==200,uc(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,$=this.g;if((R=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Y=R;break t}}Y=null}if(h=Y)Er(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Sr(this,h);else{this.o=!1,this.m=3,St(12),bn(this),xn(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<w.length;)if(ut=fc(this,w),ut==qt){Ie==4&&(this.m=4,St(14),h=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==At){this.m=4,St(15),Er(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Er(this.i,this.l,ut,null),Sr(this,ut);if(hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)Er(this.i,this.l,w,"[Invalid Chunked Response]"),bn(this),xn(this);else if(w.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),wl(se),se.P=!0,St(11))}}else Er(this.i,this.l,w,null),Sr(this,w);Ie==4&&bn(this),this.o&&!this.K&&(Ie==4?wc(this.j,this):(this.o=!1,br(this)))}else Jr(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),bn(this),xn(this)}}}catch{}finally{}};function ld(h){if(!hc(h))return h.g.la();const y=Qt(h.g);if(y==="")return"";let w="";const R=y.length,$=nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bn(h),xn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<R;Y++)h.h.h=!0,w+=h.h.i.decode(y[Y],{stream:!($&&Y==R-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function hc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function fc(h,y){var w=h.C,R=y.indexOf(`
`,w);return R==-1?qt:(w=Number(y.substring(w,R)),isNaN(w)?At:(R+=1,R+w>y.length?qt:(y=y.slice(R,R+w),h.C=R+w,y)))}Xn.prototype.cancel=function(){this.K=!0,bn(this)};function br(h){h.T=Date.now()+h.H,Na(h,h.H)}function Na(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vr(g(h.aa,h),y)}function Tr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Xn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(yr(),St(17)),bn(this),this.m=2,xn(this)):Na(this,this.T-h)};function xn(h){h.j.I==0||h.K||wc(h.j,h)}function bn(h){Tr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,il(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Sr(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Rr(w.h,h))){if(!h.L&&Rr(w.h,h)&&w.I==3){try{var R=w.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)La(w),Pi(w);else break e;Bs(w),St(18)}}else w.xa=$[1],0<w.xa-w.K&&$[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=vr(g(w.Va,w),6e3));Ar(w.h)<=1&&w.ta&&(w.ta=void 0)}else kr(w,11)}else if((h.L||w.g==h)&&La(w),!D(y))for($=w.Ba.g.parse(y),y=0;y<$.length;y++){let Fe=$[y];const ut=Fe[0];if(!(ut<=w.K))if(w.K=ut,Fe=Fe[1],w.I==2)if(Fe[0]=="c"){w.M=Fe[1],w.ba=Fe[2];const Vn=Fe[3];Vn!=null&&(w.ka=Vn,w.j.info("VER="+w.ka));const Pr=Fe[4];Pr!=null&&(w.za=Pr,w.j.info("SVER="+w.za));const rr=Fe[5];rr!=null&&typeof rr=="number"&&rr>0&&(R=1.5*rr,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const ir=h.g;if(ir){const qs=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var Y=R.h;Y.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ul(Y,Y.h),Y.h=null))}if(R.G){const ja=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(R.wa=ja,Ye(R.J,R.G,ja))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var se=h;if(R.na=Sc(R,R.L?R.ba:null,R.W),se.L){cl(R.h,se);var Ie=se,_t=R.O;_t&&(Ie.H=_t),Ie.D&&(Tr(Ie),br(Ie)),R.g=se}else vc(R);w.i.length>0&&Dr(w)}else Fe[0]!="stop"&&Fe[0]!="close"||kr(w,7);else w.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?kr(w,7):vl(w):Fe[0]!="noop"&&w.l&&w.l.qa(Fe),w.A=0)}}yr(4)}catch{}}var Rt=class{constructor(h,y){this.g=h,this.map=y}};function ol(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ar(h){return h.h?1:h.g?h.g.size:0}function Rr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ul(h,y){h.g?h.g.add(y):h.h=y}function cl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ol.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function hl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return S(h.i)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Da(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const R=h[w].indexOf("=");let $,Y=null;R>=0?($=h[w].substring(0,R),Y=h[w].substring(R+1)):$=h[w],y($,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Tn?(this.l=h.l,Ht(this,h.j),this.o=h.o,this.g=h.g,Ri(this,h.u),this.h=h.h,fl(this,yc(h.i)),this.m=h.m):h&&(y=String(h).match(dc))?(this.l=!1,Ht(this,y[1]||"",!0),this.o=Cr(y[2]||""),this.g=Cr(y[3]||"",!0),Ri(this,y[4]),this.h=Cr(y[5]||"",!0),fl(this,y[6]||"",!0),this.m=Cr(y[7]||"")):(this.l=!1,this.i=new Ii(null,this.l))}Tn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ms(y,ka,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ms(y,ka,!0),"@"),h.push(Qr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ms(w,w.charAt(0)=="/"?dl:mc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ms(w,gc)),h.join("")},Tn.prototype.resolve=function(h){const y=Ct(this);let w=!!h.j;w?Ht(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var R=h.h;if(w)Ri(y,h.u);else if(w=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var $=y.h.lastIndexOf("/");$!=-1&&(R=y.h.slice(0,$+1)+R)}if($=R,$==".."||$==".")R="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){R=$.lastIndexOf("/",0)==0,$=$.split("/");const Y=[];for(let se=0;se<$.length;){const Ie=$[se++];Ie=="."?R&&se==$.length&&Y.push(""):Ie==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&se==$.length&&Y.push("")):(Y.push(Ie),R=!0)}R=Y.join("/")}else R=$}return w?y.h=R:w=h.i.toString()!=="",w?fl(y,yc(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Ct(h){return new Tn(h)}function Ht(h,y,w){h.j=w?Cr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ri(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function fl(h,y,w){y instanceof Ii?(h.i=y,xa(h.i,h.l)):(w||(y=Ms(y,Ci)),h.i=new Ii(y,h.l))}function Ye(h,y,w){h.i.set(y,w)}function xs(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Cr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ms(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,dn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ka=/[#\/\?@]/g,mc=/[#\?:]/g,dl=/[#\?]/g,Ci=/[#\?@]/g,gc=/#/g;function Ii(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&Da(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}i=Ii.prototype,i.add=function(h,y){mn(this),this.i=null,h=Oi(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function pc(h,y){mn(h),y=Oi(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ml(h,y){return mn(h),y=Oi(h,y),h.g.has(y)}i.forEach=function(h,y){mn(this),this.g.forEach(function(w,R){w.forEach(function($){h.call(y,$,R,this)},this)},this)};function gl(h,y){mn(h);let w=[];if(typeof y=="string")ml(h,y)&&(w=w.concat(h.g.get(Oi(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}i.set=function(h,y){return mn(this),this.i=null,h=Oi(this,h),ml(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=gl(this,h),h.length>0?String(h[0]):y):y};function Pa(h,y,w){pc(h,y),w.length>0&&(h.i=null,h.g.set(Oi(h,y),S(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var w=y[R];const $=Qr(w);w=gl(this,w);for(let Y=0;Y<w.length;Y++){let se=$;w[Y]!==""&&(se+="="+Qr(w[Y])),h.push(se)}}return this.i=h.join("&")};function yc(h){const y=new Ii;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Oi(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function xa(h,y){y&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(w,R){const $=R.toLowerCase();R!=$&&(pc(this,R),Pa(this,$,w))},h)),h.j=y}function er(h,y){const w=new Wn;if(c.Image){const R=new Image;R.onload=_(Mn,w,"TestLoadImage: loaded",!0,y,R),R.onerror=_(Mn,w,"TestLoadImage: error",!1,y,R),R.onabort=_(Mn,w,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(Mn,w,"TestLoadImage: timeout",!1,y,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function pl(h,y){const w=new Wn,R=new AbortController,$=setTimeout(()=>{R.abort(),Mn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(Y=>{clearTimeout($),Y.ok?Mn(w,"TestPingServer: ok",!0,y):Mn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Mn(w,"TestPingServer: error",!1,y)})}function Mn(h,y,w,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(w)}catch{}}function Ni(){this.g=new ic}function Ir(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ir,sc),Ir.prototype.g=function(){return new Us(this.i,this.h)};function Us(h,y){Tt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Us,Tt),i=Us.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,tr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Di(this):tr(this),this.readyState==3&&Ma(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Di(this))},i.Na=function(h){this.g&&(this.response=h,Di(this))},i.ga=function(){this.g&&Di(this)};function Di(h){h.readyState=4,h.l=null,h.j=null,h.B=null,tr(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let y="";return qe(h,function(w,R){y+=R,y+=":",y+=w,y+=`\r
`}),y}function Vs(h,y,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=Un(w),typeof h=="string"?w!=null&&Qr(w):Ye(h,y,w))}function Xe(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,Tt);var Or=/^https?$/i,yl=["POST","PUT"];i=Xe.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():al.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Ls(this,Y);return}if(h=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)w.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())w.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(yl,y,void 0)>=0)||R||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,se]of w)this.g.setRequestHeader(Y,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Ls(this,Y)}};function Ls(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,_l(h),Yr(h)}function _l(h){h.A||(h.A=!0,Vt(h,"complete"),Vt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Vt(this,"complete"),Vt(this,"abort"),Yr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),Xe.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},i.Xa=function(){js(this)};function js(h){if(h.h&&typeof l<"u"){if(h.v&&nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Vt(h,"readystatechange"),nr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var R;if(R=Y===0){let se=String(h.D).match(dc)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),R=!Or.test(se?se.toLowerCase():"")}w=R}if(w)Vt(h,"complete"),Vt(h,"success");else{h.o=6;try{var $=nr(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",_l(h)}}finally{Yr(h)}}}}function Yr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||Vt(h,"ready");try{w.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}i.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),sd(y)}};function Qt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jr(h){const y={};h=(h.g&&nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(D(h[R]))continue;var w=cc(h[R]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=y[$]||[];y[$]=Y,Y.push(w)}Qe(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nr(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function ki(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nr("baseRetryDelayMs",5e3,h),this.Za=Nr("retryDelaySeedMs",1e4,h),this.Ta=Nr("forwardChannelMaxRetries",2,h),this.va=Nr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(h&&h.concurrentRequestLimit),this.Ba=new Ni,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ki.prototype,i.ka=8,i.I=1,i.connect=function(h,y,w,R){St(0),this.W=h,this.H=y||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=Sc(this,null,this.W),Dr(this)};function vl(h){if(Ua(h),h.I==3){var y=h.V++,w=Ct(h.J);if(Ye(w,"SID",h.M),Ye(w,"RID",y),Ye(w,"TYPE","terminate"),zs(h,w),y=new Xn(h,h.j,y),y.M=2,y.A=xs(Ct(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=Ac(y.j,null),y.g.ea(y.A)),y.F=Date.now(),br(y)}Tc(h)}function Pi(h){h.g&&(wl(h),h.g.cancel(),h.g=null)}function Ua(h){Pi(h),h.v&&(c.clearTimeout(h.v),h.v=null),La(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Dr(h){if(!ll(h.h)&&!h.m){h.m=!0;var y=h.Ea;he||C(),le||(he(),le=!0),O.add(y,h),h.D=0}}function Va(h,y){return Ar(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vr(g(h.Ea,h,y),bc(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new Xn(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=M(Y),oe(Y,this.U)):Y=this.U),this.u!==null||this.R||($.J=Y,Y=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=_c(this,$,y),w=Ct(this.J),Ye(w,"RID",h),Ye(w,"CVER",22),this.G&&Ye(w,"X-HTTP-Session-Id",this.G),zs(this,w),Y&&(this.R?y="headers="+Qr(Un(Y))+"&"+y:this.u&&Vs(w,this.u,Y)),ul(this.h,$),this.Ra&&Ye(w,"TYPE","init"),this.S?(Ye(w,"$req",y),Ye(w,"SID","null"),$.U=!0,wr($,w,null)):wr($,w,y),this.I=2}}else this.I==3&&(h?El(this,h):this.i.length==0||ll(this.h)||El(this))};function El(h,y){var w;y?w=y.l:w=h.V++;const R=Ct(h.J);Ye(R,"SID",h.M),Ye(R,"RID",w),Ye(R,"AID",h.K),zs(h,R),h.u&&h.o&&Vs(R,h.u,h.o),w=new Xn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=_c(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ul(h.h,w),wr(w,R,y)}function zs(h,y){h.H&&qe(h.H,function(w,R){Ye(y,R,w)}),h.l&&qe({},function(w,R){Ye(y,R,w)})}function _c(h,y,w){w=Math.min(h.i.length,w);const R=h.l?g(h.l.Ka,h.l,h):null;e:{var $=h.i;let Ie=-1;for(;;){const _t=["count="+w];Ie==-1?w>0?(Ie=$[0].g,_t.push("ofs="+Ie)):Ie=0:_t.push("ofs="+Ie);let Fe=!0;for(let ut=0;ut<w;ut++){var Y=$[ut].g;const Vn=$[ut].map;if(Y-=Ie,Y<0)Ie=Math.max(0,$[ut].g-100),Fe=!1;else try{Y="req"+Y+"_"||"";try{var se=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Pr,rr]of se){let ir=rr;f(rr)&&(ir=Ai(rr)),_t.push(Y+Pr+"="+encodeURIComponent(ir))}}catch(Pr){throw _t.push(Y+"type="+encodeURIComponent("_badmap")),Pr}}catch{R&&R(Vn)}}if(Fe){se=_t.join("&");break e}}se=void 0}return h=h.i.splice(0,w),y.G=h,se}function vc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;he||C(),le||(he(),le=!0),O.add(y,h),h.A=0}}function Bs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vr(g(h.Da,h),bc(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,Ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vr(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Pi(this),Ec(this))};function wl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ec(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);Ye(y,"RID","rpc"),Ye(y,"SID",h.M),Ye(y,"AID",h.K),Ye(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(y,"TO",h.ia),Ye(y,"TYPE","xmlhttp"),zs(h,y),h.u&&h.o&&Vs(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=xs(Ct(y)),w.u=null,w.R=!0,Oa(w,h)}i.Va=function(){this.C!=null&&(this.C=null,Pi(this),Bs(this),St(19))};function La(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function wc(h,y){var w=null;if(h.g==y){La(h),wl(h),h.g=null;var R=2}else if(Rr(h.h,y))w=y.G,cl(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var $=h.D;R=Ia(),Vt(R,new _r(R,w)),Dr(h)}else vc(h);else if($=y.m,$==3||$==0&&y.X>0||!(R==1&&Va(h,y)||R==2&&Bs(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),$){case 1:kr(h,5);break;case 4:kr(h,10);break;case 3:kr(h,6);break;default:kr(h,2)}}}function bc(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function kr(h,y){if(h.j.info("Error code "+y),y==2){var w=g(h.bb,h),R=h.Ua;const $=!R;R=new Tn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(R,"https"),xs(R),$?er(R.toString(),w):pl(R.toString(),w)}else St(2);h.I=0,h.l&&h.l.pa(y),Tc(h),Ua(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Tc(h){if(h.I=0,h.ja=[],h.l){const y=hl(h.h);(y.length!=0||h.i.length!=0)&&(N(h.ja,y),N(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function Sc(h,y,w){var R=w instanceof Tn?Ct(w):new Tn(w);if(R.g!="")y&&(R.g=y+"."+R.g),Ri(R,R.u);else{var $=c.location;R=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const Y=new Tn(null);R&&Ht(Y,R),y&&(Y.g=y),$&&Ri(Y,$),w&&(Y.h=w),R=Y}return w=h.G,y=h.wa,w&&y&&Ye(R,w,y),Ye(R,"VER",h.ka),zs(h,R),R}function Ac(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Xe(new Ir({ab:w})):new Xe(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}i=Rc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function xi(){}xi.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){Tt.call(this),this.g=new ki(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Wr(this)}E(hn,Tt),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){vl(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Ai(h),h=w);y.i.push(new Rt(y.Ya++,h)),y.I==3&&Dr(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,hn.Z.N.call(this)};function Cc(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Cc,Kt);function Ic(){Pn.call(this),this.status=1}E(Ic,Pn);function Wr(h){this.g=h}E(Wr,Rc),Wr.prototype.ra=function(){Vt(this.g,"a")},Wr.prototype.qa=function(h){Vt(this.g,new Cc(h))},Wr.prototype.pa=function(h){Vt(this.g,new Ic)},Wr.prototype.oa=function(){Vt(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,bT=function(){return new xi},wT=function(){return Ia()},ET=yt,Bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,ef=ks,sl.COMPLETE="complete",vT=sl,ac.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,hu=ac,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,_T=Xe}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore",z0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Sp("@firebase/firestore");function wo(){return ya.logLevel}function ue(i,...e){if(ya.logLevel<=Ue.DEBUG){const t=e.map(Mp);ya.debug(`Firestore (${Qo}): ${i}`,...t)}}function wi(i,...e){if(ya.logLevel<=Ue.ERROR){const t=e.map(Mp);ya.error(`Firestore (${Qo}): ${i}`,...t)}}function Mo(i,...e){if(ya.logLevel<=Ue.WARN){const t=e.map(Mp);ya.warn(`Firestore (${Qo}): ${i}`,...t)}}function Mp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TT(i,r,t)}function TT(i,e,t){let r=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wi(r),new Error(r)}function Ke(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||TT(e,a,r)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class YD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class JD{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ys,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ys)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new ST(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class WD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const r=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=ek(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ve(i,e){return i<e?-1:i>e?1:0}function qg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return yg(a)===yg(l)?Ve(a,l):yg(a)?1:-1}return Ve(i.length,e.length)}const tk=55296,nk=57343;function yg(i){const e=i.charCodeAt(0);return e>=tk&&e<=nk}function Uo(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="__name__";class Lr{constructor(e,t,r){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Lr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const r=Lr.isNumericId(e),a=Lr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class dt extends Lr{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Lr{construct(e,t,r){return new tn(e,t,r)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q0}static keyField(){return new tn([q0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(dt.fromString(e))}static fromName(e){return new ve(dt.fromString(e).popFirst(5))}static empty(){return new ve(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(i,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function sk(i,e,t,r){if(e===!0&&r===!0)throw new ge(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function H0(i){if(!ve.isDocumentKey(i))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function AT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Vp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function Nu(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vp(i);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Yu(i,e){if(!AT(i))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=-62135596800,F0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*F0);return new at(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:xt("string",at._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new at(0,0))}static max(){return new Ae(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function ak(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(r===1e9?new at(t+1,0):new at(t,r));return new _s(a,ve.empty(),e)}function ok(i){return new _s(i.readTime,i.key,Du)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Ae.min(),ve.empty(),Du)}static max(){return new _s(Ae.max(),ve.empty(),Du)}}function lk(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(i.documentKey,e.documentKey),t!==0?t:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ck{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==uk)throw i;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((a=>a?ne.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++f,f===l&&r(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new ne(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function hk(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Jo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=-1;function zf(i){return i==null}function gf(i){return i===0&&1/i==-1/0}function fk(i){return typeof i=="number"&&Number.isInteger(i)&&!gf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="";function dk(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=G0(e)),e=mk(i.get(t),e);return G0(e)}function mk(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case RT:t+="";break;default:t+=l}}return t}function G0(i){return i+RT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function wa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function CT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mh(this.root,e,this.comparator,!0)}}class Mh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new en(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new Bt(tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new IT("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(i){if(Ke(!!i,39018),typeof i=="string"){let e=0;const t=gk.exec(i);if(Ke(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Es(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="server_timestamp",NT="__type__",DT="__previous_value__",kT="__local_write_time__";function jp(i){return(i?.mapValue?.fields||{})[NT]?.stringValue===OT}function Bf(i){const e=i.mapValue.fields[DT];return jp(e)?Bf(e):e}function ku(i){const e=vs(i.mapValue.fields[kT].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t,r,a,l,c,f,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const pf="(default)";class Pu{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__type__",yk="__max__",Uh={mapValue:{}},xT="__vector__",yf="value";function ws(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?jp(i)?4:vk(i)?9007199254740991:_k(i)?10:11:be(28295,{value:i})}function Fr(i,e){if(i===e)return!0;const t=ws(i);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ku(i).isEqual(ku(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=vs(a.timestampValue),f=vs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return Es(a.bytesValue).isEqual(Es(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return wt(a.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return wt(a.integerValue)===wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=wt(a.doubleValue),f=wt(l.doubleValue);return c===f?gf(c)===gf(f):isNaN(c)&&isNaN(f)}return!1})(i,e);case 9:return Uo(i.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(K0(c)!==K0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Fr(c[m],f[m])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function xu(i,e){return(i.values||[]).find((t=>Fr(t,e)))!==void 0}function Vo(i,e){if(i===e)return 0;const t=ws(i),r=ws(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=wt(l.integerValue||l.doubleValue),m=wt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return Y0(i.timestampValue,e.timestampValue);case 4:return Y0(ku(i),ku(e));case 5:return qg(i.stringValue,e.stringValue);case 6:return(function(l,c){const f=Es(l),m=Es(c);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=Ve(f[g],m[g]);if(_!==0)return _}return Ve(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ve(wt(l.latitude),wt(c.latitude));return f!==0?f:Ve(wt(l.longitude),wt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return J0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},m=c.fields||{},g=f[yf]?.arrayValue,_=m[yf]?.arrayValue,E=Ve(g?.values?.length||0,_?.values?.length||0);return E!==0?E:J0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Uh.mapValue&&c===Uh.mapValue)return 0;if(l===Uh.mapValue)return 1;if(c===Uh.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const b=qg(m[E],_[E]);if(b!==0)return b;const S=Vo(f[m[E]],g[_[E]]);if(S!==0)return S}return Ve(m.length,_.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function Y0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const t=vs(i),r=vs(e),a=Ve(t.seconds,r.seconds);return a!==0?a:Ve(t.nanos,r.nanos)}function J0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Vo(t[a],r[a]);if(l)return l}return Ve(t.length,r.length)}function Lo(i){return Hg(i)}function Hg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=vs(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Es(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ve.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Hg(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Hg(t.fields[c])}`;return a+"}"})(i.mapValue):be(61005,{value:i})}function tf(i){switch(ws(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bf(i);return e?16+tf(e):16;case 5:return 2*i.stringValue.length;case 6:return Es(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+tf(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return wa(r.fields,((l,c)=>{a+=l.length+tf(c)})),a})(i.mapValue);default:throw be(13486,{value:i})}}function $g(i){return!!i&&"integerValue"in i}function zp(i){return!!i&&"arrayValue"in i}function W0(i){return!!i&&"nullValue"in i}function X0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function nf(i){return!!i&&"mapValue"in i}function _k(i){return(i?.mapValue?.fields||{})[PT]?.stringValue===xT}function _u(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return wa(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=_u(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(i.arrayValue.values[t]);return e}return{...i}}function vk(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===yk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=tn.emptyPath(),r={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}c?r[f.lastSegment()]=_u(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];nf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){wa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Kn(_u(this.value))}}function MT(i){const e=[];return wa(i.fields,((t,r)=>{const a=new tn([t]);if(nf(r)){const l=MT(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,r,a,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ln(e,0,Ae.min(),Ae.min(),Ae.min(),Kn.empty(),0)}static newFoundDocument(e,t,r,a){return new ln(e,1,t,Ae.min(),r,a,0)}static newNoDocument(e,t){return new ln(e,2,t,Ae.min(),Ae.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Ae.min(),Ae.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.position=e,this.inclusive=t}}function Z0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(c.referenceValue),t.key):r=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ew(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Fr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ek(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{}class zt extends UT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bk(e,t,r):t==="array-contains"?new Ak(e,r):t==="in"?new Rk(e,r):t==="not-in"?new Ck(e,r):t==="array-contains-any"?new Ik(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Tk(e,r):new Sk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends UT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gr(e,t)}matches(e){return VT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VT(i){return i.op==="and"}function LT(i){return wk(i)&&VT(i)}function wk(i){for(const e of i.filters)if(e instanceof Gr)return!1;return!0}function Fg(i){if(i instanceof zt)return i.field.canonicalString()+i.op.toString()+Lo(i.value);if(LT(i))return i.filters.map((e=>Fg(e))).join(",");{const e=i.filters.map((t=>Fg(t))).join(",");return`${i.op}(${e})`}}function jT(i,e){return i instanceof zt?(function(r,a){return a instanceof zt&&r.op===a.op&&r.field.isEqual(a.field)&&Fr(r.value,a.value)})(i,e):i instanceof Gr?(function(r,a){return a instanceof Gr&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&jT(c,a.filters[f])),!0):!1})(i,e):void be(19439)}function zT(i){return i instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`})(i):i instanceof Gr?(function(t){return t.op.toString()+" {"+t.getFilters().map(zT).join(" ,")+"}"})(i):"Filter"}class bk extends zt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tk extends zt{constructor(e,t){super(e,"in",t),this.keys=BT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sk extends zt{constructor(e,t){super(e,"not-in",t),this.keys=BT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BT(i,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class Ak extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&xu(t.arrayValue,this.value)}}class Rk extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class Ck extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class Ik extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>xu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t=null,r=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function tw(i,e=null,t=[],r=[],a=null,l=null,c=null){return new Ok(i,e,t,r,a,l,c)}function Bp(i){const e=Ce(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Fg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Lo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Lo(r))).join(",")),e.Te=t}return e.Te}function qp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Ek(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!jT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ew(i.startAt,e.startAt)&&ew(i.endAt,e.endAt)}function Gg(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t=null,r=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Nk(i,e,t,r,a,l,c,f){return new qf(i,e,t,r,a,l,c,f)}function Hp(i){return new qf(i)}function nw(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Dk(i){return i.collectionGroup!==null}function vu(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Bt(tn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vf(l,r))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new vf(tn.keyField(),r))}return e.Ie}function Br(i){const e=Ce(i);return e.Ee||(e.Ee=kk(e,vu(i))),e.Ee}function kk(i,e){if(i.limitType==="F")return tw(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new vf(a.field,l)}));const t=i.endAt?new _f(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new _f(i.startAt.position,i.startAt.inclusive):null;return tw(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Kg(i,e,t){return new qf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Hf(i,e){return qp(Br(i),Br(e))&&i.limitType===e.limitType}function qT(i){return`${Bp(Br(i))}|lt:${i.limitType}`}function bo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>zT(a))).join(", ")}]`),zf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Lo(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Lo(a))).join(",")),`Target(${r})`})(Br(i))}; limitType=${i.limitType})`}function $f(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of vu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(c,f,m){const g=Z0(c,f,m);return c.inclusive?g<=0:g<0})(r.startAt,vu(r),a)||r.endAt&&!(function(c,f,m){const g=Z0(c,f,m);return c.inclusive?g>=0:g>0})(r.endAt,vu(r),a))})(i,e)}function Pk(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function HT(i){return(e,t)=>{let r=!1;for(const a of vu(i)){const l=xk(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function xk(i,e,t){const r=i.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?Vo(m,g):be(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new mt(ve.comparator);function bi(){return Mk}const $T=new mt(ve.comparator);function fu(...i){let e=$T;for(const t of i)e=e.insert(t.key,t);return e}function FT(i){let e=$T;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ha(){return Eu()}function GT(){return Eu()}function Eu(){return new ba((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Uk=new mt(ve.comparator),Vk=new Bt(ve.comparator);function Le(...i){let e=Vk;for(const t of i)e=e.add(t);return e}const Lk=new Bt(Ve);function jk(){return Lk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gf(e)?"-0":e}}function KT(i){return{integerValue:""+i}}function zk(i,e){return fk(e)?KT(e):$p(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function Bk(i,e,t){return i instanceof Mu?(function(a,l){const c={fields:{[NT]:{stringValue:OT},[kT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&jp(l)&&(l=Bf(l)),l&&(c.fields[DT]=l),{mapValue:c}})(t,e):i instanceof Uu?YT(i,e):i instanceof Vu?JT(i,e):(function(a,l){const c=QT(a,l),f=rw(c)+rw(a.Ae);return $g(c)&&$g(a.Ae)?KT(f):$p(a.serializer,f)})(i,e)}function qk(i,e,t){return i instanceof Uu?YT(i,e):i instanceof Vu?JT(i,e):t}function QT(i,e){return i instanceof Ef?(function(r){return $g(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Mu extends Ff{}class Uu extends Ff{constructor(e){super(),this.elements=e}}function YT(i,e){const t=WT(e);for(const r of i.elements)t.some((a=>Fr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Vu extends Ff{constructor(e){super(),this.elements=e}}function JT(i,e){let t=WT(e);for(const r of i.elements)t=t.filter((a=>!Fr(a,r)));return{arrayValue:{values:t}}}class Ef extends Ff{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rw(i){return wt(i.integerValue||i.doubleValue)}function WT(i){return zp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.field=e,this.transform=t}}function $k(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof Uu&&a instanceof Uu||r instanceof Vu&&a instanceof Vu?Uo(r.elements,a.elements,Fr):r instanceof Ef&&a instanceof Ef?Fr(r.Ae,a.Ae):r instanceof Mu&&a instanceof Mu})(i.transform,e.transform)}class Fk{constructor(e,t){this.version=e,this.transformResults=t}}class yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Gf{}function XT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new eS(i.key,yi.none()):new Ju(i.key,i.data,yi.none());{const t=i.data,r=Kn.empty();let a=new Bt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ta(i.key,r,new dr(a.toArray()),yi.none())}}function Gk(i,e,t){i instanceof Ju?(function(a,l,c){const f=a.value.clone(),m=sw(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(i,e,t):i instanceof Ta?(function(a,l,c){if(!rf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=sw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(ZT(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function wu(i,e,t,r){return i instanceof Ju?(function(l,c,f,m){if(!rf(l.precondition,c))return f;const g=l.value.clone(),_=aw(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof Ta?(function(l,c,f,m){if(!rf(l.precondition,c))return f;const g=aw(l.fieldTransforms,m,c),_=c.data;return _.setAll(ZT(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,f){return rf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(i,e,t)}function Kk(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=QT(r.transform,a||null);l!=null&&(t===null&&(t=Kn.empty()),t.set(r.field,l))}return t||null}function iw(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Uo(r,a,((l,c)=>$k(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ju extends Gf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ta extends Gf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function sw(i,e,t){const r=new Map;Ke(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);r.set(l.field,qk(c,f,t[a]))}return r}function aw(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Bk(l,c,e))}return r}class eS extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qk extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Gk(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=XT(c,f);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,r)=>iw(t,r)))&&Uo(this.baseMutations,e.baseMutations,((t,r)=>iw(t,r)))}}class Fp{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Uk})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Fp(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Be;function Xk(i){switch(i){case ie.OK:return be(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function tS(i){if(i===void 0)return wi("GRPC error has no .code"),ie.UNKNOWN;switch(i){case kt.OK:return ie.OK;case kt.CANCELLED:return ie.CANCELLED;case kt.UNKNOWN:return ie.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ie.INTERNAL;case kt.UNAVAILABLE:return ie.UNAVAILABLE;case kt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case kt.NOT_FOUND:return ie.NOT_FOUND;case kt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case kt.ABORTED:return ie.ABORTED;case kt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case kt.DATA_LOSS:return ie.DATA_LOSS;default:return be(39323,{code:i})}}(Be=kt||(kt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new ps([4294967295,4294967295],0);function ow(i){const e=Zk().encode(i),t=new yT;return t.update(e),new Uint8Array(t.digest())}function lw(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ps([t,r],0),new ps([a,l],0)]}class Gp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new du(`Invalid padding: ${t}`);if(r<0)throw new du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ps.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ps.fromNumber(r)));return a.compare(e2)===1&&(a=new ps([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ow(e),[r,a]=lw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Gp(l,a,t);return r.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=ow(e),[r,a]=lw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kf(Ae.min(),a,new mt(Ve),bi(),Le())}}class Wu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wu(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class nS{constructor(e,t){this.targetId=e,this.Ce=t}}class rS{constructor(e,t,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class uw{constructor(){this.ve=0,this.Fe=cw(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),r=Le();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:be(38017,{changeType:l})}})),new Wu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=cw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class t2{constructor(e){this.Ge=e,this.ze=new Map,this.je=bi(),this.Je=Vh(),this.He=Vh(),this.Ye=new mt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Gg(l))if(r===0){const c=new ve(l.path);this.et(t,c,ln.newNoDocument(c,Ae.min()))}else Ke(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Es(r).toUint8Array()}catch(m){if(m instanceof IT)return Mo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Gp(c,a,l)}catch(m){return Mo(m instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Gg(f.target)){const m=new ve(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,ln.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Le();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Kf(e,t,this.Ye,this.je,r);return this.je=bi(),this.Je=Vh(),this.He=Vh(),this.Ye=new mt(Ve),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vh(){return new mt(ve.comparator)}function cw(){return new mt(ve.comparator)}const n2={asc:"ASCENDING",desc:"DESCENDING"},r2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i2={and:"AND",or:"OR"};class s2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qg(i,e){return i.useProto3Json||zf(e)?e:{value:e}}function wf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function a2(i,e){return wf(i,e.toTimestamp())}function qr(i){return Ke(!!i,49232),Ae.fromTimestamp((function(t){const r=vs(t);return new at(r.seconds,r.nanos)})(i))}function Kp(i,e){return Yg(i,e).canonicalString()}function Yg(i,e){const t=(function(a){return new dt(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function sS(i){const e=dt.fromString(i);return Ke(cS(e),10190,{key:e.toString()}),e}function Jg(i,e){return Kp(i.databaseId,e.path)}function _g(i,e){const t=sS(e);if(t.get(1)!==i.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ve(oS(t))}function aS(i,e){return Kp(i.databaseId,e)}function o2(i){const e=sS(i);return e.length===4?dt.emptyPath():oS(e)}function Wg(i){return new dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function oS(i){return Ke(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function hw(i,e,t){return{name:Jg(i,e),fields:t.value.mapValue.fields}}function l2(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(Ke(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?ie.UNKNOWN:tS(g.code);return new ge(_,g.message||"")})(c);t=new rS(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=_g(i,r.document.name),l=qr(r.document.updateTime),c=r.document.createTime?qr(r.document.createTime):Ae.min(),f=new Kn({mapValue:{fields:r.document.fields}}),m=ln.newFoundDocument(a,l,c,f),g=r.targetIds||[],_=r.removedTargetIds||[];t=new sf(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=_g(i,r.document),l=r.readTime?qr(r.readTime):Ae.min(),c=ln.newNoDocument(a,l),f=r.removedTargetIds||[];t=new sf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=_g(i,r.document),l=r.removedTargetIds||[];t=new sf([],l,a,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new Wk(a,l),f=r.targetId;t=new nS(f,c)}}return t}function u2(i,e){let t;if(e instanceof Ju)t={update:hw(i,e.key,e.value)};else if(e instanceof eS)t={delete:Jg(i,e.key)};else if(e instanceof Ta)t={update:hw(i,e.key,e.data),updateMask:_2(e.fieldMask)};else{if(!(e instanceof Qk))return be(16599,{Vt:e.type});t={verify:Jg(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof Mu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ef)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw be(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:a2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(i,e.precondition)),t}function c2(i,e){return i&&i.length>0?(Ke(e!==void 0,14353),i.map((t=>(function(a,l){let c=a.updateTime?qr(a.updateTime):qr(l);return c.isEqual(Ae.min())&&(c=qr(l)),new Fk(c,a.transformResults||[])})(t,e)))):[]}function h2(i,e){return{documents:[aS(i,e.path)]}}function f2(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aS(i,a);const l=(function(g){if(g.length!==0)return uS(Gr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:To(b.field),direction:g2(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Qg(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function d2(i){let e=o2(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ke(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=lS(E);return b instanceof Gr&&LT(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(N){return new vf(So(N.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,zf(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,S=E.values||[];return new _f(S,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,S=E.values||[];return new _f(S,b)})(t.endAt)),Nk(e,a,c,l,f,"F",m,g)}function m2(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lS(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=So(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=So(t.unaryFilter.field);return zt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=So(t.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(t){return zt.create(So(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Gr.create(t.compositeFilter.filters.map((r=>lS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(i):be(30097,{filter:i})}function g2(i){return n2[i]}function p2(i){return r2[i]}function y2(i){return i2[i]}function To(i){return{fieldPath:i.canonicalString()}}function So(i){return tn.fromServerFormat(i.fieldPath)}function uS(i){return i instanceof zt?(function(t){if(t.op==="=="){if(X0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(W0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(X0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(W0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:p2(t.op),value:t.value}}})(i):i instanceof Gr?(function(t){const r=t.getFilters().map((a=>uS(a)));return r.length===1?r[0]:{compositeFilter:{op:y2(t.op),filters:r}}})(i):be(54877,{filter:i})}function _2(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r,a,l=Ae.min(),c=Ae.min(),f=nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.yt=e}}function E2(i){const e=d2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Cn=new b2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(_s.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class b2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Bt(dt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Bt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hS=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(hS,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="LruGarbageCollector",T2=1048576;function mw([i,e],[t,r]){const a=Ve(i,t);return a===0?Ve(e,r):a}class S2{constructor(e){this.Ir=e,this.buffer=new Bt(mw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(dw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Jo(t)?ue(dw,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.Vr(3e5)}))}}class R2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(jf.ce);const r=new S2(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(fw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,f=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),wo()<=Ue.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function C2(i,e){return new R2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&wu(r.mutation,a,dr.empty(),at.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Le()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Le()){const a=ha();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=fu();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Le())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,r,a){let l=bi();const c=Eu(),f=(function(){return Eu()})();return t.forEach(((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ta)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),wu(_.mutation,g,_.mutation.getFieldMask(),at.now())):c.set(g.key,dr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new O2(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const r=Eu();let a=new mt(((c,f)=>c-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||dr.empty();_=f.applyToLocalView(g,_),r.set(m,_);const E=(a.get(f.batchId)||Le()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,E=GT();_.forEach((b=>{if(!l.has(b)){const S=XT(t.get(b),r.get(b));S!==null&&E.set(b,S),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ne.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):ne.resolve(ha());let f=Du,m=l;return c.next((g=>ne.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Le()))).next((_=>({batchId:f,changes:FT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((r=>{let a=fu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=fu();return this.indexManager.getCollectionParents(e,l).next((f=>ne.forEach(f,(m=>{const g=(function(E,b){return new qf(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,ln.newInvalidDocument(_)))}));let f=fu();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&wu(_.mutation,g,dr.empty(),at.now()),$f(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:qr(a.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:E2(a.bundledQuery),readTime:qr(a.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.overlays=new mt(ve.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return ne.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const a=ha(),l=t.length+1,c=new ve(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new mt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=ha(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=ha(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=a)););return ne.resolve(f)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jk(t,r));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.Qr=new Bt(Ft.$r),this.Ur=new Bt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ve(new dt([])),r=new Ft(t,e),a=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new dt([])),r=new Ft(t,e),a=new Ft(t,e+1);let l=Le();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ft(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Ft.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yk(l,t,r,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Lp:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),a=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Ve);return t.forEach((a=>{const l=new Ft(a,0),c=new Ft(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{r=r.add(f.Yr)}))})),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new ve(l),0);let f=new Bt(Ve);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)}),c),ne.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(t.mutations,(a=>{const l=new Ft(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ft(t,0),a=this.Zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.ri=e,this.docs=(function(){return new mt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ln.newInvalidDocument(a))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=bi();const c=t.path,f=new ve(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||lk(ok(_),r)<=0||(a.has(_.key)||$f(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,r,a){be(9500)}ii(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new U2(this)}getSize(e){return ne.resolve(this.size)}}class U2 extends I2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.persistence=e,this.si=new ba((t=>Bp(t)),qp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Qp,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ne.waitFor(l).next((()=>a))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t){this.ui={},this.overlays={},this.ci=new jf(0),this.li=!1,this.li=!0,this.hi=new P2,this.referenceDelegate=e(this),this.Pi=new V2(this),this.indexManager=new w2,this.remoteDocumentCache=(function(a){return new M2(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new v2(t),this.Ii=new D2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new x2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const a=new L2(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class L2 extends ck{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Ri=new Qp,this.Vi=null}static mi(e){return new Yp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(r=>{const a=ve.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bf{constructor(e,t){this.persistence=e,this.pi=new ba((r=>dk(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=C2(this,t)}static mi(e,t){return new bf(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?ne.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(r++,l.removeEntry(c,Ae.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tf(e.data.value)),t}br(e,t,r){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ne.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Jp(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gI()?8:hk(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new j2;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(wo()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(wo()<=Ue.DEBUG&&ue("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(wo()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):ne.resolve())}ys(e,t){if(nw(t))return ne.resolve(null);let r=Br(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Kg(t,null,"F"),r=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Le(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,c,m.readTime)?this.ys(e,Kg(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,a){return nw(t)||a.isEqual(Ae.min())?ne.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?ne.resolve(null):(wo()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bo(t)),this.vs(e,c,t,ak(a,Du)).next((f=>f)))}))}Ds(e,t){let r=new Bt(HT(e));return t.forEach(((a,l)=>{$f(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return wo()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,_s.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",B2=3e8;class q2{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new mt(Ve),this.xs=new ba((l=>Bp(l)),qp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function H2(i,e,t,r){return new q2(i,e,t,r)}async function dS(i,e){const t=Ce(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let m=Le();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function $2(i,e){const t=Ce(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,_){const E=g.batch,b=E.keys();let S=ne.resolve();return b.forEach((N=>{S=S.next((()=>_.getEntry(m,N))).next((U=>{const A=g.docVersions.get(N);Ke(A!==null,48541),U.version.compareTo(A)<0&&(E.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))}))})),S.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Le();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function mS(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function F2(i,e){const t=Ce(i),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const b=a.get(E);if(!b)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let S=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(nn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),a=a.insert(E,S),(function(U,A,j){return U.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=B2?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(b,S,_)&&f.push(t.Pi.updateTargetData(l,S))}));let m=bi(),g=Le();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(G2(l,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!r.isEqual(Ae.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(_)}return ne.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function G2(i,e,t){let r=Le(),a=Le();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=bi();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ue(Wp,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function K2(i,e){const t=Ce(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Lp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Q2(i,e){const t=Ce(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,ne.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new hs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Xg(i,e,t){const r=Ce(i),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Jo(c))throw c;ue(Wp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function gw(i,e,t){const r=Ce(i);let a=Ae.min(),l=Le();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const E=Ce(m),b=E.xs.get(_);return b!==void 0?ne.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,_)})(r,c,Br(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ae.min(),t?l:Le()))).next((f=>(Y2(r,Pk(e),f),{documents:f,Qs:l})))))}function Y2(i,e,t){let r=i.Os.get(e)||Ae.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.Os.set(e,r)}class pw{constructor(){this.activeTargetIds=jk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J2{constructor(){this.Mo=new pw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="ConnectivityMonitor";class _w{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(yw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function Zg(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="RestConnection",X2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===pf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=Zg(),f=this.zo(e,t.toUriEncodedString());ue(vg,`Sending RPC '${e}' ${c}:`,f,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(f),_=$o(g);return this.Jo(e,f,m,r,_).then((E=>(ue(vg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Mo(vg,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=X2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class tP extends Z2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=Zg();return new Promise(((f,m)=>{const g=new _T;g.setWithCredentials(!0),g.listenOnce(vT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ef.NO_ERROR:const E=g.getResponseJson();ue(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case ef.TIMEOUT:ue(sn,`RPC '${e}' ${c} timed out`),m(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const b=g.getStatus();if(ue(sn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const U=(function(j){const z=j.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(z)>=0?z:ie.UNKNOWN})(N.status);m(new ge(U,N.message))}else m(new ge(ie.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(sn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ue(sn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)}))}T_(e,t,r){const a=Zg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bT(),f=wT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");ue(sn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const E=c.createWebChannel(_,m);this.I_(E);let b=!1,S=!1;const N=new eP({Yo:A=>{S?ue(sn,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(b||(ue(sn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),b=!0),ue(sn,`RPC '${e}' stream ${a} sending:`,A),E.send(A))},Zo:()=>E.close()}),U=(A,j,z)=>{A.listen(j,(H=>{try{z(H)}catch(re){setTimeout((()=>{throw re}),0)}}))};return U(E,hu.EventType.OPEN,(()=>{S||(ue(sn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),U(E,hu.EventType.CLOSE,(()=>{S||(S=!0,ue(sn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(E))})),U(E,hu.EventType.ERROR,(A=>{S||(S=!0,Mo(sn,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),N.a_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),U(E,hu.EventType.MESSAGE,(A=>{if(!S){const j=A.data[0];Ke(!!j,16349);const z=j,H=z?.error||z[0]?.error;if(H){ue(sn,`RPC '${e}' stream ${a} received error:`,H);const re=H.status;let he=(function(C){const I=kt[C];if(I!==void 0)return tS(I)})(re),le=H.message;he===void 0&&(he=ie.INTERNAL,le="Unknown error status: "+re+" with message "+H.message),S=!0,N.a_(new ge(he,le)),E.close()}else ue(sn,`RPC '${e}' stream ${a} received:`,j),N.u_(j)}})),U(f,ET.STAT_EVENT,(A=>{A.stat===Bg.PROXY?ue(sn,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===Bg.NOPROXY&&ue(sn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(i){return new s2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="PersistentStream";class pS{constructor(e,t,r,a,l,c,f,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new ge(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(vw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(vw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nP extends pS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=l2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?qr(c.readTime):Ae.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Gg(m)?{documents:h2(l,m)}:{query:f2(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=iS(l,c.resumeToken);const g=Qg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){f.readTime=wf(l,c.snapshotVersion.toTimestamp());const g=Qg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=m2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.q_(t)}}class rP extends pS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=c2(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>u2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{}class sP extends iP{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Yg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ie.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Yg(t,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class oP{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Sa(this)&&(ue(_a,"Restarting streams for network reachability change."),await(async function(m){const g=Ce(m);g.Ea.add(4),await Xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Yf(g)})(this))}))})),this.Ra=new aP(r,a)}}async function Yf(i){if(Sa(i))for(const e of i.da)await e(!0)}async function Xu(i){for(const e of i.da)await e(!1)}function yS(i,e){const t=Ce(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ty(t)?ey(t):Wo(t).O_()&&Zp(t,e))}function Xp(i,e){const t=Ce(i),r=Wo(t);t.Ia.delete(e),r.O_()&&_S(t,e),t.Ia.size===0&&(r.O_()?r.L_():Sa(t)&&t.Ra.set("Unknown"))}function Zp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(i).Y_(e)}function _S(i,e){i.Va.Ue(e),Wo(i).Z_(e)}function ey(i){i.Va=new t2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Wo(i).start(),i.Ra.ua()}function ty(i){return Sa(i)&&!Wo(i).x_()&&i.Ia.size>0}function Sa(i){return Ce(i).Ea.size===0}function vS(i){i.Va=void 0}async function lP(i){i.Ra.set("Online")}async function uP(i){i.Ia.forEach(((e,t)=>{Zp(i,e)}))}async function cP(i,e){vS(i),ty(i)?(i.Ra.ha(e),ey(i)):i.Ra.set("Unknown")}async function hP(i,e,t){if(i.Ra.set("Online"),e instanceof rS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(i,e)}catch(r){ue(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tf(i,r)}else if(e instanceof sf?i.Va.Ze(e):e instanceof nS?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ae.min()))try{const r=await mS(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),_S(l,m);const E=new hs(_.target,m,g,_.sequenceNumber);Zp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){ue(_a,"Failed to raise snapshot:",r),await Tf(i,r)}}async function Tf(i,e,t){if(!Jo(e))throw e;i.Ea.add(1),await Xu(i),i.Ra.set("Offline"),t||(t=()=>mS(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ue(_a,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Yf(i)}))}function ES(i,e){return e().catch((t=>Tf(i,t,e)))}async function Jf(i){const e=Ce(i),t=bs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lp;for(;fP(e);)try{const a=await K2(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,dP(e,a)}catch(a){await Tf(e,a)}wS(e)&&bS(e)}function fP(i){return Sa(i)&&i.Ta.length<10}function dP(i,e){i.Ta.push(e);const t=bs(i);t.O_()&&t.X_&&t.ea(e.mutations)}function wS(i){return Sa(i)&&!bs(i).x_()&&i.Ta.length>0}function bS(i){bs(i).start()}async function mP(i){bs(i).ra()}async function gP(i){const e=bs(i);for(const t of i.Ta)e.ea(t.mutations)}async function pP(i,e,t){const r=i.Ta.shift(),a=Fp.from(r,e,t);await ES(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Jf(i)}async function yP(i,e){e&&bs(i).X_&&await(async function(r,a){if((function(c){return Xk(c)&&c!==ie.ABORTED})(a.code)){const l=r.Ta.shift();bs(r).B_(),await ES(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Jf(r)}})(i,e),wS(i)&&bS(i)}async function Ew(i,e){const t=Ce(i);t.asyncQueue.verifyOperationInProgress(),ue(_a,"RemoteStore received new credentials");const r=Sa(t);t.Ea.add(3),await Xu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yf(t)}async function _P(i,e){const t=Ce(i);e?(t.Ea.delete(2),await Yf(t)):e||(t.Ea.add(2),await Xu(t),t.Ra.set("Unknown"))}function Wo(i){return i.ma||(i.ma=(function(t,r,a){const l=Ce(t);return l.sa(),new nP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:lP.bind(null,i),t_:uP.bind(null,i),r_:cP.bind(null,i),H_:hP.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),ty(i)?ey(i):i.Ra.set("Unknown")):(await i.ma.stop(),vS(i))}))),i.ma}function bs(i){return i.fa||(i.fa=(function(t,r,a){const l=Ce(t);return l.sa(),new rP(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:mP.bind(null,i),r_:yP.bind(null,i),ta:gP.bind(null,i),na:pP.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Jf(i)):(await i.fa.stop(),i.Ta.length>0&&(ue(_a,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,f=new ny(e,t,c,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(i,e){if(wi("AsyncQueue",`${e}: ${i}`),Jo(i))return new ge(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=fu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Do;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.ga=new mt(ve.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class zo{constructor(e,t,r,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new zo(e,t,Do.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class EP{constructor(){this.queries=bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Ce(t),l=a.queries;a.queries=bw(),l.forEach(((c,f)=>{for(const m of f.Sa)m.onError(r)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function bw(){return new ba((i=>qT(i)),Hf)}async function wP(i,e){const t=Ce(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new vP,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=ry(c,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&iy(t)}async function bP(i,e){const t=Ce(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function TP(i,e){const t=Ce(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(r=!0);c.wa=a}}r&&iy(t)}function SP(i,e,t){const r=Ce(i),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function iy(i){i.Ca.forEach((e=>{e.next()}))}var ep,Tw;(Tw=ep||(ep={})).Ma="default",Tw.Cache="cache";class AP{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.key=e}}class SS{constructor(e){this.key=e}}class RP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=HT(e),this.tu=new Do(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new ww,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const b=a.get(_),S=$f(this.query,E)?E:null,N=!!b&&this.mutatedKeys.has(b.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let A=!1;b&&S?b.data.isEqual(S.data)?N!==U&&(r.track({type:3,doc:S}),A=!0):this.su(b,S)||(r.track({type:2,doc:S}),A=!0,(m&&this.eu(S,m)>0||g&&this.eu(S,g)<0)&&(f=!0)):!b&&S?(r.track({type:0,doc:S}),A=!0):b&&!S&&(r.track({type:1,doc:b}),A=!0,(m||g)&&(f=!0)),A&&(S?(c=c.add(S),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(S,N){const U=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:A})}};return U(S)-U(N)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new zo(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ww,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new SS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new TS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sy="SyncEngine";class CP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IP{constructor(e){this.key=e,this.hu=!1}}class OP{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ba((f=>qT(f)),Hf),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ve.comparator),this.Au=new Map,this.Ru=new Qp,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NP(i,e,t=!0){const r=NS(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await AS(r,e,t,!0),a}async function DP(i,e){const t=NS(i);await AS(t,e,!0,!1)}async function AS(i,e,t,r){const a=await Q2(i.localStore,Br(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await kP(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&yS(i.remoteStore,a),f}async function kP(i,e,t,r,a){i.pu=(E,b,S)=>(async function(U,A,j,z){let H=A.view.ru(j);H.Cs&&(H=await gw(U.localStore,A.query,!1).then((({documents:O})=>A.view.ru(O,H))));const re=z&&z.targetChanges.get(A.targetId),he=z&&z.targetMismatches.get(A.targetId)!=null,le=A.view.applyChanges(H,U.isPrimaryClient,re,he);return Aw(U,A.targetId,le.au),le.snapshot})(i,E,b,S);const l=await gw(i.localStore,e,!0),c=new RP(e,l.Qs),f=c.ru(l.documents),m=Wu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);Aw(i,t,g.au);const _=new CP(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function PP(i,e,t){const r=Ce(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Hf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Xg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Xp(r.remoteStore,a.targetId),tp(r,a.targetId)})).catch(Yo)):(tp(r,a.targetId),await Xg(r.localStore,a.targetId,!0))}async function xP(i,e){const t=Ce(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xp(t.remoteStore,r.targetId))}async function MP(i,e,t){const r=qP(i);try{const a=await(function(c,f){const m=Ce(c),g=at.now(),_=f.reduce(((S,N)=>S.add(N.key)),Le());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=bi(),U=Le();return m.Ns.getEntries(S,_).next((A=>{N=A,N.forEach(((j,z)=>{z.isValidDocument()||(U=U.add(j))}))})).next((()=>m.localDocuments.getOverlayedDocuments(S,N))).next((A=>{E=A;const j=[];for(const z of f){const H=Kk(z,E.get(z.key).overlayedDocument);H!=null&&j.push(new Ta(z.key,H,MT(H.value.mapValue),yi.exists(!0)))}return m.mutationQueue.addMutationBatch(S,g,j,f)})).next((A=>{b=A;const j=A.applyToLocalDocumentSet(E,U);return m.documentOverlayCache.saveOverlays(S,A.batchId,j)}))})).then((()=>({batchId:b.batchId,changes:FT(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new mt(Ve)),g=g.insert(f,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await Zu(r,a.changes),await Jf(r.remoteStore)}catch(a){const l=ry(a,"Failed to persist write");t.reject(l)}}async function RS(i,e){const t=Ce(i);try{const r=await F2(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ke(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ke(c.hu,14607):a.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await Zu(t,r,e)}catch(r){await Yo(r)}}function Sw(i,e,t){const r=Ce(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Ce(c);m.onlineState=f;let g=!1;m.queries.forEach(((_,E)=>{for(const b of E.Sa)b.va(f)&&(g=!0)})),g&&iy(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UP(i,e,t){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new mt(ve.comparator);c=c.insert(l,ln.newNoDocument(l,Ae.min()));const f=Le().add(l),m=new Kf(Ae.min(),new Map,new mt(Ve),c,f);await RS(r,m),r.du=r.du.remove(l),r.Au.delete(e),ay(r)}else await Xg(r.localStore,e,!1).then((()=>tp(r,e,t))).catch(Yo)}async function VP(i,e){const t=Ce(i),r=e.batch.batchId;try{const a=await $2(t.localStore,e);IS(t,r,null),CS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Zu(t,a)}catch(a){await Yo(a)}}async function LP(i,e,t){const r=Ce(i);try{const a=await(function(c,f){const m=Ce(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(Ke(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);IS(r,e,t),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Zu(r,a)}catch(a){await Yo(a)}}function CS(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function IS(i,e,t){const r=Ce(i);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function tp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||OS(i,r)}))}function OS(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Xp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),ay(i))}function Aw(i,e,t){for(const r of t)r instanceof TS?(i.Ru.addReference(r.key,e),jP(i,r)):r instanceof SS?(ue(sy,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||OS(i,r.key)):be(19791,{wu:r})}function jP(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(ue(sy,"New document in limbo: "+t),i.Eu.add(r),ay(i))}function ay(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ve(dt.fromString(e)),r=i.fu.next();i.Au.set(r,new IP(t)),i.du=i.du.insert(t,r),yS(i.remoteStore,new hs(Br(Hp(t.path)),r,"TargetPurposeLimboResolution",jf.ce))}}async function Zu(i,e,t){const r=Ce(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=Jp.As(m.targetId,g);l.push(_)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const _=Ce(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ne.forEach(g,(b=>ne.forEach(b.Es,(S=>_.persistence.referenceDelegate.addReference(E,b.targetId,S))).next((()=>ne.forEach(b.ds,(S=>_.persistence.referenceDelegate.removeReference(E,b.targetId,S)))))))))}catch(E){if(!Jo(E))throw E;ue(Wp,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const S=_.Ms.get(b),N=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(N);_.Ms=_.Ms.insert(b,U)}}})(r.localStore,l))}async function zP(i,e){const t=Ce(i);if(!t.currentUser.isEqual(e)){ue(sy,"User change. New user:",e.toKey());const r=await dS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new ge(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zu(t,r.Ls)}}function BP(i,e){const t=Ce(i),r=t.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let a=Le();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function NS(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=RS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UP.bind(null,e),e.Pu.H_=TP.bind(null,e.eventManager),e.Pu.yu=SP.bind(null,e.eventManager),e}function qP(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return H2(this.persistence,new z2,e.initialUser,this.serializer)}Cu(e){return new fS(Yp.mi,this.serializer)}Du(e){return new J2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class HP extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof bf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new fS((r=>bf.mi(r,t)),this.serializer)}}class np{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zP.bind(null,this.syncEngine),await _P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EP})()}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),r=(function(l){return new tP(l)})(e.databaseInfo);return(function(l,c,f,m){return new sP(l,c,f,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,f){return new oP(r,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Sw(this.syncEngine,t,0)),(function(){return _w.v()?new _w:new W2})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,_){const E=new OP(a,l,c,f,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ce(t);ue(_a,"RemoteStore shutting down."),r.Ea.add(5),await Xu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class FP{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=Up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ue(Ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ue(Ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ry(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wg(i,e){i.asyncQueue.verifyOperationInProgress(),ue(Ts,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await dS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Rw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await GP(i);ue(Ts,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Ew(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>Ew(e.remoteStore,a))),i._onlineComponents=e}async function GP(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue(Ts,"Using user provided OfflineComponentProvider");try{await wg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await wg(i,new Sf)}}else ue(Ts,"Using default OfflineComponentProvider"),await wg(i,new HP(void 0));return i._offlineComponents}async function DS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue(Ts,"Using user provided OnlineComponentProvider"),await Rw(i,i._uninitializedComponentsProvider._online)):(ue(Ts,"Using default OnlineComponentProvider"),await Rw(i,new np))),i._onlineComponents}function KP(i){return DS(i).then((e=>e.syncEngine))}async function QP(i){const e=await DS(i),t=e.eventManager;return t.onListen=NP.bind(null,e.syncEngine),t.onUnlisten=PP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xP.bind(null,e.syncEngine),t}function YP(i,e,t={}){const r=new ys;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const _=new $P({next:b=>{_.Nu(),c.enqueueAndForget((()=>bP(l,E)));const S=b.docs.has(f);!S&&b.fromCache?g.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&b.fromCache&&m&&m.source==="server"?g.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new AP(Hp(f.path),_,{includeMetadataChanges:!0,qa:!0});return wP(l,E)})(await QP(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="firestore.googleapis.com",Iw=!0;class Ow{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PS,this.ssl=Iw}else this.host=e.host,this.ssl=e.ssl??Iw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oy{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QD;switch(r.type){case"firstParty":return new XD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Cw.get(t);r&&(ue("ComponentProvider","Removing Datastore"),Cw.delete(t),r.terminate())})(this),Promise.resolve()}}function JP(i,e,t,r={}){i=Nu(i,oy);const a=$o(e),l=i._getSettings(),c={...l,emulatorOptions:i._getEmulatorOptions()},f=`${e}:${t}`;a&&(Ob(`https://${f}`),Nb("Firestore",!0)),l.host!==PS&&l.host!==f&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:r};if(!ma(m,c)&&(i._setSettings(m),r.mockUserToken)){let g,_;if(typeof r.mockUserToken=="string")g=r.mockUserToken,_=on.MOCK_USER;else{g=aI(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new on(E)}i._authCredentials=new YD(new ST(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ly(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yu(t,Gt._jsonSchema))return new Gt(e,r||null,new ve(dt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:xt("string",Gt._jsonSchemaVersion),referencePath:xt("string")};class Lu extends ly{constructor(e,t,r){super(e,t,Hp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new Lu(this.firestore,e,this._path)}}function xS(i,e,...t){if(i=wn(i),arguments.length===1&&(e=Up.newId()),ik("doc","path",e),i instanceof oy){const r=dt.fromString(e,...t);return H0(r),new Gt(i,null,new ve(r))}{if(!(i instanceof Gt||i instanceof Lu))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(dt.fromString(e,...t));return H0(r),new Gt(i.firestore,i instanceof Lu?i.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="AsyncQueue";class Dw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gS(this,"async_queue_retry"),this._c=()=>{const r=Eg();r&&ue(Nw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ys;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jo(e))throw e;ue(Nw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",kw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ny.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:kw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function kw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class uy extends oy{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Dw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dw(e),this._firestoreClient=void 0,await e}}}function WP(i,e){const t=typeof i=="object"?i:xb(),r=typeof i=="string"?i:pf,a=Rp(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=iI("firestore");l&&JP(a,...l)}return a}function MS(i){if(i._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||XP(i),i._firestoreClient}function XP(i){const e=i._freezeSettings(),t=(function(a,l,c,f){return new pk(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,kS(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new FP(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(nn.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yu(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:xt("string",Qn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Yu(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:xt("string",Hr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yu(e,$r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $r(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$r._jsonSchemaVersion="firestore/vectorValue/1.0",$r._jsonSchema={type:xt("string",$r._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^__.*__$/;class ex{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}function US(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class fy{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(US(this.Ac)&&ZP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qf(e)}Cc(e,t,r,a=!1){return new fy({Ac:e,methodName:t,Dc:r,path:tn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nx(i){const e=i._freezeSettings(),t=Qf(i._databaseId);return new tx(i._databaseId,!!e.ignoreUndefinedProperties,t)}function rx(i,e,t,r,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);zS("Data must be an object, but it was:",c,r);const f=LS(r,c);let m,g;if(l.merge)m=new dr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=ix(e,E,t);if(!c.contains(b))throw new ge(ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ax(_,b)||_.push(b)}m=new dr(_),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new ex(new Kn(f),m,g)}class dy extends hy{_toFieldTransform(e){return new Hk(e.path,new Mu)}isEqual(e){return e instanceof dy}}function VS(i,e){if(jS(i=wn(i)))return zS("Unsupported field value:",e,i),LS(i,e);if(i instanceof hy)return(function(r,a){if(!US(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let m=VS(f,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zk(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=at.fromDate(r);return{timestampValue:wf(a.serializer,l)}}if(r instanceof at){const l=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wf(a.serializer,l)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:iS(a.serializer,r._byteString)};if(r instanceof Gt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof $r)return(function(c,f){return{mapValue:{fields:{[PT]:{stringValue:xT},[yf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return $p(f.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Vp(r)}`)})(i,e)}function LS(i,e){const t={};return CT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(i,((r,a)=>{const l=VS(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function jS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof at||i instanceof Hr||i instanceof Qn||i instanceof Gt||i instanceof hy||i instanceof $r)}function zS(i,e,t){if(!jS(t)||!AT(t)){const r=Vp(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function ix(i,e,t){if((e=wn(e))instanceof cy)return e._internalPath;if(typeof e=="string")return BS(i,e);throw Af("Field path arguments must be of type string or ",i,!1,void 0,t)}const sx=new RegExp("[~\\*/\\[\\]]");function BS(i,e,t){if(e.search(sx)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new cy(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Af(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ge(ie.INVALID_ARGUMENT,f+i+m)}function ax(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ox(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ox extends qS{data(){return super.data()}}function HS(i,e){return typeof e=="string"?BS(i,e):e instanceof cy?e._internalPath:e._delegate._internalPath}class lx{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[yf].arrayValue?.values?.map((r=>wt(r.doubleValue)));return new $r(t)}convertGeoPoint(e){return new Hr(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const t=vs(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Ke(cS(r),9688,{name:e});const a=new Pu(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return a.isEqual(t)||wi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends qS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:xt("string",da._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class af extends da{data(e={}){return super.data(e)}}class bu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new mu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new af(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new af(a._firestore,a._userDataWriter,f.doc.key,f.doc,new mu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new af(a._firestore,a._userDataWriter,f.doc.key,f.doc,new mu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:cx(f.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(i){i=Nu(i,Gt);const e=Nu(i.firestore,uy);return YP(MS(e),i._key).then((t=>mx(e,i,t)))}bu._jsonSchemaVersion="firestore/querySnapshot/1.0",bu._jsonSchema={type:xt("string",bu._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class hx extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function fx(i,e,t){i=Nu(i,Gt);const r=Nu(i.firestore,uy),a=ux(i.converter,e,t);return dx(r,[rx(nx(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,yi.none())])}function dx(i,e){return(function(r,a){const l=new ys;return r.asyncQueue.enqueueAndForget((async()=>MP(await KP(r),a,l))),l.promise})(MS(i),e)}function mx(i,e,t){const r=t.docs.get(e._key),a=new hx(i);return new da(i,a,e._key,r,new mu(t.hasPendingWrites,t.fromCache),e.converter)}function gx(){return new dy("serverTimestamp")}(function(e,t=!0){(function(a){Qo=a})(Fo),Po(new ga("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new uy(new JD(r.getProvider("auth-internal")),new ZD(c,r.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ms(j0,z0,e),ms(j0,z0,"esm2020")})();const px={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},FS=d0().length?d0()[0]:Pb(px),ou=GD(FS),GS=WP(FS),KS=K.createContext(null);function yx({children:i}){const[e,t]=K.useState(!1),[r,a]=K.useState("");K.useEffect(()=>{PN(ou,lT).finally(()=>{const m=UN(ou,g=>{g?(t(!0),a(g.email||"")):(t(!1),a(""))});return()=>m()})},[]);const l=async({email:m,password:g})=>{if(!m||!g)throw new Error("Email and password are required");const E=((await kN(ou,m,g)).user.email||"").toLowerCase(),b=xS(GS,"admins",E);if(!(await $S(b)).exists())throw await I0(ou),new Error("Not authorized: this account is not in the admin allowlist");a(E),t(!0)},c=async()=>{await I0(ou)},f=K.useMemo(()=>({isAuthenticated:e,adminName:r,login:l,logout:c}),[e,r]);return L.jsx(KS.Provider,{value:f,children:i})}function Wf(){const i=K.useContext(KS);if(!i)throw new Error("useAuth must be used within AuthProvider");return i}function _x(){const{adminName:i}=Wf(),[e,t]=K.useState(""),[r,a]=K.useState(null),l=async()=>{try{t("Testing Firestore"),a(null);const c=xS(GS,"admin_healthchecks","web_admin_test");await fx(c,{ping:"ok",at:gx()},{merge:!0});const f=await $S(c);a(f.exists()?f.data():null),t("Firestore OK")}catch(c){console.error(c),t("Firestore error: "+(c?.message||"Unknown"))}};return L.jsxs("div",{children:[L.jsx("h1",{children:"Admin Dashboard"}),L.jsx("p",{children:"Welcome to Kamaynikasyon Admin."}),L.jsxs("p",{children:["Signed in as: ",L.jsx("strong",{children:i||"unknown"})]}),L.jsx("div",{style:{marginTop:16},children:L.jsx("button",{className:"btn btn-primary",onClick:l,children:"Test Firebase (Firestore)"})}),e?L.jsx("p",{style:{marginTop:12},children:e}):null,r?L.jsx("pre",{style:{textAlign:"left",background:"#f8fafc",padding:12,borderRadius:8,border:"1px solid #e5e7eb"},children:JSON.stringify(r,null,2)}):null]})}function vx(){return L.jsxs("div",{children:[L.jsx("h1",{children:"Users"}),L.jsx("p",{children:"Manage user accounts here."})]})}var rp=function(i,e){return rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},rp(i,e)};function QS(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");rp(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rf=function(){return Rf=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Rf.apply(this,arguments)};function Xo(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function YS(i,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,t,r);else for(var f=i.length-1;f>=0;f--)(c=i[f])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function JS(i,e){return function(t,r){e(t,r,i)}}function WS(i,e,t,r,a,l){function c(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var f=r.kind,m=f==="getter"?"get":f==="setter"?"set":"value",g=!e&&i?r.static?i:i.prototype:null,_=e||(g?Object.getOwnPropertyDescriptor(g,r.name):{}),E,b=!1,S=t.length-1;S>=0;S--){var N={};for(var U in r)N[U]=U==="access"?{}:r[U];for(var U in r.access)N.access[U]=r.access[U];N.addInitializer=function(j){if(b)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(j||null))};var A=(0,t[S])(f==="accessor"?{get:_.get,set:_.set}:_[m],N);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(E=c(A.get))&&(_.get=E),(E=c(A.set))&&(_.set=E),(E=c(A.init))&&a.unshift(E)}else(E=c(A))&&(f==="field"?a.unshift(E):_[m]=E)}g&&Object.defineProperty(g,r.name,_),b=!0}function XS(i,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(i,t):e[a].call(i);return r?t:void 0}function ZS(i){return typeof i=="symbol"?i:"".concat(i)}function eA(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function tA(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function me(i,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(_){try{g(r.next(_))}catch(E){c(E)}}function m(_){try{g(r.throw(_))}catch(E){c(E)}}function g(_){_.done?l(_.value):a(_.value).then(f,m)}g((r=r.apply(i,e||[])).next())})}function nA(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(g){return function(_){return m([g,_])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(_){g=[6,_],a=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var Xf=Object.create?(function(i,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,r,a)}):(function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]});function rA(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Xf(e,i,t)}function Cf(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function my(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var r=t.call(i),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function iA(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(my(arguments[e]));return i}function sA(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var r=Array(i),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,a++)r[a]=l[c];return r}function aA(i,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return i.concat(l||Array.prototype.slice.call(e))}function Bo(i){return this instanceof Bo?(this.v=i,this):new Bo(i)}function oA(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(N){return Promise.resolve(N).then(S,E)}}function f(S,N){r[S]&&(a[S]=function(U){return new Promise(function(A,j){l.push([S,U,A,j])>1||m(S,U)})},N&&(a[S]=N(a[S])))}function m(S,N){try{g(r[S](N))}catch(U){b(l[0][3],U)}}function g(S){S.value instanceof Bo?Promise.resolve(S.value.v).then(_,E):b(l[0][2],S)}function _(S){m("next",S)}function E(S){m("throw",S)}function b(S,N){S(N),l.shift(),l.length&&m(l[0][0],l[0][1])}}function lA(i){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=i[a]?function(c){return(t=!t)?{value:Bo(i[a](c)),done:!1}:l?l(c):c}:l}}function uA(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Cf=="function"?Cf(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=i[l]&&function(c){return new Promise(function(f,m){c=i[l](c),a(f,m,c.done,c.value)})}}function a(l,c,f,m){Promise.resolve(m).then(function(g){l({value:g,done:f})},c)}}function cA(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var Ex=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},ip=function(i){return ip=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},ip(i)};function hA(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=ip(i),r=0;r<t.length;r++)t[r]!=="default"&&Xf(e,i,t[r]);return Ex(e,i),e}function fA(i){return i&&i.__esModule?i:{default:i}}function dA(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)}function mA(i,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(i,t):a?a.value=t:e.set(i,t),t}function gA(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function pA(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:e,dispose:r,async:t})}else t&&i.stack.push({async:!0});return e}var wx=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};function yA(i){function e(l){i.error=i.hasError?new wx(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var t,r=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&r===1)return r=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function _A(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):i}const bx={__extends:QS,__assign:Rf,__rest:Xo,__decorate:YS,__param:JS,__esDecorate:WS,__runInitializers:XS,__propKey:ZS,__setFunctionName:eA,__metadata:tA,__awaiter:me,__generator:nA,__createBinding:Xf,__exportStar:rA,__values:Cf,__read:my,__spread:iA,__spreadArrays:sA,__spreadArray:aA,__await:Bo,__asyncGenerator:oA,__asyncDelegator:lA,__asyncValues:uA,__makeTemplateObject:cA,__importStar:hA,__importDefault:fA,__classPrivateFieldGet:dA,__classPrivateFieldSet:mA,__classPrivateFieldIn:gA,__addDisposableResource:pA,__disposeResources:yA,__rewriteRelativeImportExtension:_A},Tx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pA,get __assign(){return Rf},__asyncDelegator:lA,__asyncGenerator:oA,__asyncValues:uA,__await:Bo,__awaiter:me,__classPrivateFieldGet:dA,__classPrivateFieldIn:gA,__classPrivateFieldSet:mA,__createBinding:Xf,__decorate:YS,__disposeResources:yA,__esDecorate:WS,__exportStar:rA,__extends:QS,__generator:nA,__importDefault:fA,__importStar:hA,__makeTemplateObject:cA,__metadata:tA,__param:JS,__propKey:ZS,__read:my,__rest:Xo,__rewriteRelativeImportExtension:_A,__runInitializers:XS,__setFunctionName:eA,__spread:iA,__spreadArray:aA,__spreadArrays:sA,__values:Cf,default:bx},Symbol.toStringTag,{value:"Module"})),Sx=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class gy extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Ax extends gy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pw extends gy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xw extends gy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sp;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(sp||(sp={}));class Rx{constructor(e,{headers:t={},customFetch:r,region:a=sp.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=Sx(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return me(this,arguments,void 0,function*(t,r={}){var a;let l,c;try{const{headers:f,method:m,body:g,signal:_,timeout:E}=r;let b={},{region:S}=r;S||(S=this.region);const N=new URL(`${this.url}/${t}`);S&&S!=="any"&&(b["x-region"]=S,N.searchParams.set("forceFunctionRegion",S));let U;g&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",U=g):typeof g=="string"?(b["Content-Type"]="text/plain",U=g):typeof FormData<"u"&&g instanceof FormData?U=g:(b["Content-Type"]="application/json",U=JSON.stringify(g)):U=g;let A=_;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),_?(A=c.signal,_.addEventListener("abort",()=>c.abort())):A=c.signal);const j=yield this.fetch(N.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:U,signal:A}).catch(he=>{throw new Ax(he)}),z=j.headers.get("x-relay-error");if(z&&z==="true")throw new Pw(j);if(!j.ok)throw new xw(j);let H=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),re;return H==="application/json"?re=yield j.json():H==="application/octet-stream"||H==="application/pdf"?re=yield j.blob():H==="text/event-stream"?re=j:H==="multipart/form-data"?re=yield j.formData():re=yield j.text(),{data:re,error:null,response:j}}catch(f){return{data:null,error:f,response:f instanceof xw||f instanceof Pw?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var an={};const Zo=v1(Tx);var jh={},zh={},Bh={},qh={},Hh={},$h={},Mw;function vA(){if(Mw)return $h;Mw=1,Object.defineProperty($h,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return $h.default=i,$h}var Uw;function EA(){if(Uw)return Hh;Uw=1,Object.defineProperty(Hh,"__esModule",{value:!0});const e=Zo.__importDefault(vA());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,_,E,b;let S=null,N=null,U=null,A=m.status,j=m.statusText;if(m.ok){if(this.method!=="HEAD"){const he=await m.text();he===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?N=he:N=JSON.parse(he))}const H=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),re=(E=m.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");H&&re&&re.length>1&&(U=parseInt(re[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(S={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,U=null,A=406,j="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const H=await m.text();try{S=JSON.parse(H),Array.isArray(S)&&m.status===404&&(N=[],S=null,A=200,j="OK")}catch{m.status===404&&H===""?(A=204,j="No Content"):S={message:H}}if(S&&this.isMaybeSingle&&(!((b=S?.details)===null||b===void 0)&&b.includes("0 rows"))&&(S=null,A=200,j="OK"),S&&this.shouldThrowOnError)throw new e.default(S)}return{error:S,data:N,count:U,status:A,statusText:j}});return this.shouldThrowOnError||(f=f.catch(m=>{var g,_,E;return{error:{message:`${(g=m?.name)!==null&&g!==void 0?g:"FetchError"}: ${m?.message}`,details:`${(_=m?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(E=m?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return Hh.default=t,Hh}var Vw;function wA(){if(Vw)return qh;Vw=1,Object.defineProperty(qh,"__esModule",{value:!0});const e=Zo.__importDefault(EA());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:m=f}={}){const g=m?`${m}.order`:"order",_=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${_?`${_},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const m=typeof f>"u"?"offset":`${f}.offset`,g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:m=!1,format:g="text"}={}){var _;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),b=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${E};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return qh.default=t,qh}var Lw;function py(){if(Lw)return Bh;Lw=1,Object.defineProperty(Bh,"__esModule",{value:!0});const e=Zo.__importDefault(wA()),t=new RegExp("[,()]");class r extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(m=>typeof m=="string"&&t.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const _=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${g}fts${_}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return Bh.default=r,Bh}var jw;function bA(){if(jw)return zh;jw=1,Object.defineProperty(zh,"__esModule",{value:!0});const e=Zo.__importDefault(py());class t{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},m=c?"HEAD":"GET";let g=!1;const _=(a??"*").split("").map(E=>/\s/.test(E)&&!g?"":(E==='"'&&(g=!g),E)).join("");return this.url.searchParams.set("select",_),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(g.length>0){const _=[...new Set(g)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:m=!0}={}){var g;const _="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((b,S)=>b.concat(Object.keys(S)),[]);if(E.length>0){const b=[...new Set(E)].map(S=>`"${S}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return zh.default=t,zh}var zw;function Cx(){if(zw)return jh;zw=1,Object.defineProperty(jh,"__esModule",{value:!0});const i=Zo,e=i.__importDefault(bA()),t=i.__importDefault(py());class r{constructor(l,{headers:c={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=m}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:m=!1,count:g}={}){var _;let E;const b=new URL(`${this.url}/rpc/${l}`);let S;f||m?(E=f?"HEAD":"GET",Object.entries(c).filter(([U,A])=>A!==void 0).map(([U,A])=>[U,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([U,A])=>{b.searchParams.append(U,A)})):(E="POST",S=c);const N=new Headers(this.headers);return g&&N.set("Prefer",`count=${g}`),new t.default({method:E,url:b,headers:N,schema:this.schemaName,body:S,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return jh.default=r,jh}var Bw;function Ix(){if(Bw)return an;Bw=1,Object.defineProperty(an,"__esModule",{value:!0}),an.PostgrestError=an.PostgrestBuilder=an.PostgrestTransformBuilder=an.PostgrestFilterBuilder=an.PostgrestQueryBuilder=an.PostgrestClient=void 0;const i=Zo,e=i.__importDefault(Cx());an.PostgrestClient=e.default;const t=i.__importDefault(bA());an.PostgrestQueryBuilder=t.default;const r=i.__importDefault(py());an.PostgrestFilterBuilder=r.default;const a=i.__importDefault(wA());an.PostgrestTransformBuilder=a.default;const l=i.__importDefault(EA());an.PostgrestBuilder=l.default;const c=i.__importDefault(vA());return an.PostgrestError=c.default,an.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},an}var TA=Ix();const SA=_1(TA),Ox=y1({__proto__:null,default:SA},[TA]),{PostgrestClient:Nx,PostgrestQueryBuilder:tV,PostgrestFilterBuilder:nV,PostgrestTransformBuilder:rV,PostgrestBuilder:iV,PostgrestError:sV}=SA||Ox;class Dx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const kx="2.81.1",Px=`realtime-js/${kx}`,AA="1.0.0",xx="2.0.0",qw=AA,ap=1e4,Mx=1e3,Ux=100;var la;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(la||(la={}));var jt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(jt||(jt={}));var Gn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Gn||(Gn={}));var op;(function(i){i.websocket="websocket"})(op||(op={}));var ua;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(ua||(ua={}));class Vx{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:t,ref:r,event:a,topic:l,payload:c}=e,f=this.META_LENGTH+t.length+r.length+l.length+a.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(m),_=0;g.setUint8(_++,this.KINDS.push),g.setUint8(_++,t.length),g.setUint8(_++,r.length),g.setUint8(_++,l.length),g.setUint8(_++,a.length),Array.from(t,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(r,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(l,b=>g.setUint8(_++,b.charCodeAt(0))),Array.from(a,b=>g.setUint8(_++,b.charCodeAt(0)));var E=new Uint8Array(m.byteLength+c.byteLength);return E.set(new Uint8Array(m),0),E.set(new Uint8Array(c),m.byteLength),E.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const{join_ref:a,ref:l,topic:c}=e,f=e.payload.event,m=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),g=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+f.length,_=new ArrayBuffer(this.HEADER_LENGTH+g);let E=new DataView(_),b=0;E.setUint8(b++,this.KINDS.userBroadcastPush),E.setUint8(b++,a.length),E.setUint8(b++,l.length),E.setUint8(b++,c.length),E.setUint8(b++,f.length),E.setUint8(b++,this.BINARY_ENCODING),Array.from(a,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(l,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(c,N=>E.setUint8(b++,N.charCodeAt(0))),Array.from(f,N=>E.setUint8(b++,N.charCodeAt(0)));var S=new Uint8Array(_.byteLength+m.byteLength);return S.set(new Uint8Array(_),0),S.set(new Uint8Array(m),_.byteLength),S.buffer}_encodeJsonUserBroadcastPush(e){var t,r;const{join_ref:a,ref:l,topic:c}=e,f=e.payload.event,m=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},_=new TextEncoder().encode(JSON.stringify(m)).buffer,E=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+f.length,b=new ArrayBuffer(this.HEADER_LENGTH+E);let S=new DataView(b),N=0;S.setUint8(N++,this.KINDS.userBroadcastPush),S.setUint8(N++,a.length),S.setUint8(N++,l.length),S.setUint8(N++,c.length),S.setUint8(N++,f.length),S.setUint8(N++,this.JSON_ENCODING),Array.from(a,A=>S.setUint8(N++,A.charCodeAt(0))),Array.from(l,A=>S.setUint8(N++,A.charCodeAt(0))),Array.from(c,A=>S.setUint8(N++,A.charCodeAt(0))),Array.from(f,A=>S.setUint8(N++,A.charCodeAt(0)));var U=new Uint8Array(b.byteLength+_.byteLength);return U.set(new Uint8Array(b),0),U.set(new Uint8Array(_),b.byteLength),U.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,f,m]=r;return t({join_ref:a,ref:l,topic:c,event:f,payload:m})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,a);case this.KINDS.reply:return this._decodeReply(e,t,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodePush(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3);let f=this.HEADER_LENGTH+this.META_LENGTH-1;const m=r.decode(e.slice(f,f+a));f=f+a;const g=r.decode(e.slice(f,f+l));f=f+l;const _=r.decode(e.slice(f,f+c));f=f+c;const E=JSON.parse(r.decode(e.slice(f,e.byteLength)));return{join_ref:m,ref:null,topic:g,event:_,payload:E}}_decodeReply(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let m=this.HEADER_LENGTH+this.META_LENGTH;const g=r.decode(e.slice(m,m+a));m=m+a;const _=r.decode(e.slice(m,m+l));m=m+l;const E=r.decode(e.slice(m,m+c));m=m+c;const b=r.decode(e.slice(m,m+f));m=m+f;const S=JSON.parse(r.decode(e.slice(m,e.byteLength))),N={status:b,response:S};return{join_ref:g,ref:_,topic:E,event:Gn.reply,payload:N}}_decodeBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2);let c=this.HEADER_LENGTH+2;const f=r.decode(e.slice(c,c+a));c=c+a;const m=r.decode(e.slice(c,c+l));c=c+l;const g=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{join_ref:null,ref:null,topic:f,event:m,payload:g}}_decodeUserBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let m=this.HEADER_LENGTH+4;const g=r.decode(e.slice(m,m+a));m=m+a;const _=r.decode(e.slice(m,m+l));m=m+l;const E=r.decode(e.slice(m,m+c));m=m+c;const b=e.slice(m,e.byteLength),S=f===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,N={type:this.BROADCAST,event:_,payload:S};return c>0&&(N.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class RA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(rt||(rt={}));const Hw=(i,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=Lx(c,i,e,a),l),{}):{}},Lx=(i,e,t,r)=>{const a=e.find(f=>f.name===i),l=a?.type,c=t[i];return l&&!r.includes(l)?CA(l,c):lp(c)},CA=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return qx(e,t)}switch(i){case rt.bool:return jx(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return zx(e);case rt.json:case rt.jsonb:return Bx(e);case rt.timestamp:return Hx(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return lp(e);default:return lp(e)}},lp=i=>i,jx=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},zx=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Bx=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},qx=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let l;const c=i.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>CA(e,f))}return i},Hx=i=>typeof i=="string"?i.replace(" ","T"):i,IA=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class bg{constructor(e,t,r={},a=ap){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $w;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})($w||($w={}));class Tu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(m=>{this.state=Tu.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Tu.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const l=this.cloneDeep(e),c=this.transformState(t),f={},m={};return this.map(l,(g,_)=>{c[g]||(m[g]=_)}),this.map(c,(g,_)=>{const E=l[g];if(E){const b=_.map(A=>A.presence_ref),S=E.map(A=>A.presence_ref),N=_.filter(A=>S.indexOf(A.presence_ref)<0),U=E.filter(A=>b.indexOf(A.presence_ref)<0);N.length>0&&(f[g]=N),U.length>0&&(m[g]=U)}else f[g]=_}),this.syncDiff(l,{joins:f,leaves:m},r,a)}static syncDiff(e,t,r,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(f,m)=>{var g;const _=(g=e[f])!==null&&g!==void 0?g:[];if(e[f]=this.cloneDeep(m),_.length>0){const E=e[f].map(S=>S.presence_ref),b=_.filter(S=>E.indexOf(S.presence_ref)<0);e[f].unshift(...b)}r(f,_,m)}),this.map(c,(f,m)=>{let g=e[f];if(!g)return;const _=m.map(E=>E.presence_ref);g=g.filter(E=>_.indexOf(E.presence_ref)<0),e[f]=g,a(f,g,m),g.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fw;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Fw||(Fw={}));var Su;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Su||(Su={}));var di;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(di||(di={}));class yy{constructor(e,t={config:{}},r){var a,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bg(this,Gn.join,this.params,this.timeout),this.rejoinTimer=new RA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gn.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Tu(this),this.broadcastEndpointURL=IA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:c,presence:f,private:m}}=this.params,g=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&a!==void 0?a:[],_=!!this.bindings[Su.PRESENCE]&&this.bindings[Su.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},b={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:_}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(di.CHANNEL_ERROR,S)),this._onClose(()=>e?.(di.CLOSED)),this.updateJoinPayload(Object.assign({config:b},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:S})=>{var N;if(this.socket.setAuth(),S===void 0){e?.(di.SUBSCRIBED);return}else{const U=this.bindings.postgres_changes,A=(N=U?.length)!==null&&N!==void 0?N:0,j=[];for(let z=0;z<A;z++){const H=U[z],{filter:{event:re,schema:he,table:le,filter:O}}=H,C=S&&S[z];if(C&&C.event===re&&C.schema===he&&C.table===le&&C.filter===O)j.push(Object.assign(Object.assign({},H),{id:C.id}));else{this.unsubscribe(),this.state=jt.errored,e?.(di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(di.SUBSCRIBED);return}}).receive("error",S=>{this.state=jt.errored,e?.(di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===jt.joined&&e===Su.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const g=await f.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,m;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new bg(this,Gn.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new bg(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ux){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:m,leave:g,join:_}=Gn;if(r&&[f,m,g,_].indexOf(c)>=0&&r!==this._joinRef())return;let b=this._onMessage(c,t,r);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var N,U,A;return((N=S.filter)===null||N===void 0?void 0:N.event)==="*"||((A=(U=S.filter)===null||U===void 0?void 0:U.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===c}).map(S=>S.callback(b,r)):(l=this.bindings[c])===null||l===void 0||l.filter(S=>{var N,U,A,j,z,H;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in S){const re=S.id,he=(N=S.filter)===null||N===void 0?void 0:N.event;return re&&((U=t.ids)===null||U===void 0?void 0:U.includes(re))&&(he==="*"||he?.toLocaleLowerCase()===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const re=(z=(j=S?.filter)===null||j===void 0?void 0:j.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return re==="*"||re===((H=t?.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===c}).map(S=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:U,table:A,commit_timestamp:j,type:z,errors:H}=N;b=Object.assign(Object.assign({},{schema:U,table:A,commit_timestamp:j,eventType:z,new:{},old:{},errors:H}),this._getPayloadRecords(N))}S.callback(b,r)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&yy.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Gn.close,{},e)}_onError(e){this._on(Gn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Hw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Hw(e.columns,e.old_record)),t}}const Tg=()=>{},Fh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$x=[1e3,2e3,5e3,1e4],Fx=1e4,Gx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kx{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ap,this.transport=null,this.heartbeatIntervalMs=Fh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tg,this.ref=0,this.reconnectTimer=null,this.vsn=qw,this.logger=Tg,this.conn=null,this.sendBuffer=[],this.serializer=new Vx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${op.websocket}`,this.httpEndpoint=IA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case la.connecting:return ua.Connecting;case la.open:return ua.Open;case la.closing:return ua.Closing;default:return ua.Closed}}isConnected(){return this.connectionState()===ua.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new yy(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${t} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Mx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Fh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=t,f=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${r} ${a} ${f}`.trim(),l),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===la.open||this.conn.readyState===la.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Gn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Gx],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:Px};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Gn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new RA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,l,c,f,m,g,_,E,b,S;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:ap,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Fh.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e?.heartbeatCallback)!==null&&f!==void 0?f:Tg,this.vsn=(m=e?.vsn)!==null&&m!==void 0?m:qw,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:(N=>$x[N-1]||Fx),this.vsn){case AA:this.encode=(_=e?.encode)!==null&&_!==void 0?_:((N,U)=>U(JSON.stringify(N))),this.decode=(E=e?.decode)!==null&&E!==void 0?E:((N,U)=>U(JSON.parse(N)));break;case xx:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class _y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Qx extends _y{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class up extends _y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const vy=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),Yx=()=>Response,cp=i=>{if(Array.isArray(i))return i.map(t=>cp(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=cp(r)}),e},Jx=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Sg=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},Wx=(i,e,t)=>me(void 0,void 0,void 0,function*(){const r=yield Yx();i instanceof r&&!t?.noResolveJson?i.json().then(a=>{const l=i.status||500,c=a?.statusCode||l+"";e(new Qx(Sg(a),l,c))}).catch(a=>{e(new up(Sg(a),a))}):e(new up(Sg(i),i))}),Xx=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"||!r?a:(Jx(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function ec(i,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(t,Xx(e,r,a,l)).then(m=>{if(!m.ok)throw m;return r?.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>Wx(m,f,r))})})}function ju(i,e,t,r){return me(this,void 0,void 0,function*(){return ec(i,"GET",e,t,r)})}function cr(i,e,t,r,a){return me(this,void 0,void 0,function*(){return ec(i,"POST",e,r,a,t)})}function hp(i,e,t,r,a){return me(this,void 0,void 0,function*(){return ec(i,"PUT",e,r,a,t)})}function Zx(i,e,t,r){return me(this,void 0,void 0,function*(){return ec(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Ey(i,e,t,r,a){return me(this,void 0,void 0,function*(){return ec(i,"DELETE",e,r,a,t)})}class eM{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return me(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}var OA;class tM{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[OA]="BlobDownloadBuilder",this.promise=null}asStream(){return new eM(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return me(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}OA=Symbol.toStringTag;const nM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rM{constructor(e,t={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=vy(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,a){return me(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Gw),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=r,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(f=Object.assign(Object.assign({},f),a.headers));const g=this._removeEmptyFolders(t),_=this._getFinalPath(g),E=yield(e=="PUT"?hp:cr)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:f},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return me(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let m;const g=Object.assign({upsert:Gw.upsert},a),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",g.cacheControl)):(m=r,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType);const E=yield hp(this.fetch,f.toString(),m,{headers:_});return{data:{path:l,fullPath:E.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(ft(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const l=yield cr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new _y("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}copy(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield cr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const a=yield cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),m=()=>ju(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new tM(m,this.shouldThrowOnError)}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ju(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Zx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r)&&r instanceof up){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof t?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(t?.transform||{});m!==""&&a.push(m);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${r}${g}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield Ey(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},nM),t),{prefix:e||""});return{data:yield cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield cr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const NA="2.81.1",DA={"X-Client-Info":`storage-js/${NA}`};class iM{constructor(e,t={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DA),t),this.fetch=vy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield ju(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}createBucket(e){return me(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}emptyBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Ey(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class sM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},DA),t),this.fetch=vy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ju(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Ey(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}}const wy={"X-Client-Info":`storage-js/${NA}`,"Content-Type":"application/json"};class kA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Dn(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class Ag extends kA{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class aM extends kA{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Kw;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Kw||(Kw={}));const by=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),oM=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Qw=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),lM=(i,e,t)=>me(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const a=i.status||500,l=i;if(typeof l.json=="function")l.json().then(c=>{const f=c?.statusCode||c?.code||a+"";e(new Ag(Qw(c),a,f))}).catch(()=>{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new Ag(f,a,c))});else{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new Ag(f,a,c))}}else e(new aM(Qw(i),i))}),uM=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return r?(oM(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),t)):a};function cM(i,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(t,uM(e,r,a,l)).then(m=>{if(!m.ok)throw m;if(r?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>c(m)).catch(m=>lM(m,f,r))})})}function kn(i,e,t,r,a){return me(this,void 0,void 0,function*(){return cM(i,"POST",e,r,a,t)})}class hM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wy),t),this.fetch=by(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}listIndexes(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}}class fM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wy),t),this.fetch=by(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return me(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}listVectors(e){return me(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield kn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}queryVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return me(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}class dM{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wy),t),this.fetch=by(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}listBuckets(){return me(this,arguments,void 0,function*(e={}){try{return{data:yield kn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}class mM extends dM{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new gM(this.url,this.headers,e,this.fetch)}}class gM extends hM{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return me(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return me(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return me(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return me(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new pM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class pM extends fM{constructor(e,t,r,a,l){super(e,t,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return me(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return me(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return me(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return me(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return me(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class yM extends iM{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new rM(this.url,this.headers,e,this.fetch)}get vectors(){return new mM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sM(this.url+"/iceberg",this.headers,this.fetch)}}const _M="2.81.1";let gu="";typeof Deno<"u"?gu="deno":typeof document<"u"?gu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gu="react-native":gu="node";const vM={"X-Client-Info":`supabase-js-${gu}/${_M}`},EM={headers:vM},wM={schema:"public"},bM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TM={},SM=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),AM=()=>Headers,RM=(i,e,t)=>{const r=SM(t),a=AM();return async(l,c)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:i;let g=new a(c?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),r(l,Object.assign(Object.assign({},c),{headers:g}))}};function CM(i){return i.endsWith("/")?i:i+"/"}function IM(i,e){var t,r;const{db:a,auth:l,realtime:c,global:f}=i,{db:m,auth:g,realtime:_,global:E}=e,b={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},_),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(t=E?.headers)!==null&&t!==void 0?t:{}),(r=f?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function OM(i){const e=i?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CM(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const PA="2.81.1",Ao=30*1e3,fp=3,Rg=fp*Ao,NM="http://localhost:9999",DM="supabase.auth.token",kM={"X-Client-Info":`gotrue-js/${PA}`},dp="X-Supabase-Api-Version",xA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xM=600*1e3;class zu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function pe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class MM extends zu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function UM(i){return pe(i)&&i.name==="AuthApiError"}class ca extends zu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Rs extends zu{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class lr extends Rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function VM(i){return pe(i)&&i.name==="AuthSessionMissingError"}class po extends Rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gh extends Rs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Kh extends Rs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LM(i){return pe(i)&&i.name==="AuthImplicitGrantRedirectError"}class Yw extends Rs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mp extends Rs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Cg(i){return pe(i)&&i.name==="AuthRetryableFetchError"}class Jw extends Rs{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class gp extends Rs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ww=` 	
\r=`.split(""),jM=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Ww.length;e+=1)i[Ww[e].charCodeAt(0)]=-2;for(let e=0;e<If.length;e+=1)i[If[e].charCodeAt(0)]=e;return i})();function Xw(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(If[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(If[r]),e.queuedBits-=6}}function MA(i,e,t){const r=jM[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Zw(i){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{qM(c,r,t)};for(let c=0;c<i.length;c+=1)MA(i.charCodeAt(c),a,l);return e.join("")}function zM(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function BM(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}zM(r,e)}}function qM(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ko(i){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<i.length;a+=1)MA(i.charCodeAt(a),t,r);return new Uint8Array(e)}function HM(i){const e=[];return BM(i,t=>e.push(t)),new Uint8Array(e)}function fa(i){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return i.forEach(a=>Xw(a,t,r)),Xw(null,t,r),e.join("")}function $M(i){return Math.round(Date.now()/1e3)+i}function FM(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},UA=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function GM(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const VA=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),KM=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ro=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},sa=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},is=async(i,e)=>{await i.removeItem(e)};class Zf{constructor(){this.promise=new Zf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Zf.promiseConstructor=Promise;function Ig(i){const e=i.split(".");if(e.length!==3)throw new gp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!PM.test(e[r]))throw new gp("JWT not in base64url format");return{header:JSON.parse(Zw(e[0])),payload:JSON.parse(Zw(e[1])),signature:ko(e[2]),raw:{header:e[0],payload:e[1]}}}async function QM(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function YM(i,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await i(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function JM(i){return("0"+i.toString(16)).substr(-2)}function WM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,JM).join("")}async function XM(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function ZM(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await XM(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yo(i,e,t=!1){const r=WM();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await Ro(i,`${e}-code-verifier`,a);const l=await ZM(r);return[l,r===l?"plain":"s256"]}const eU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tU(i){const e=i.headers.get(dp);if(!e||!e.match(eU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nU(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function rU(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _o(i){if(!iU.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Og(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sU(i,e){return new Proxy(i,{get:(t,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,a)}})}function eb(i){return JSON.parse(JSON.stringify(i))}const oa=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),aU=[502,503,504];async function tb(i){var e;if(!KM(i))throw new mp(oa(i),0);if(aU.includes(i.status))throw new mp(oa(i),i.status);let t;try{t=await i.json()}catch(l){throw new ca(oa(l),l)}let r;const a=tU(i);if(a&&a.getTime()>=xA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Jw(oa(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new lr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Jw(oa(t),i.status,t.weak_password.reasons);throw new MM(oa(t),i.status||500,r)}const oU=(i,e,t,r)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function Te(i,e,t,r){var a;const l=Object.assign({},r?.headers);l[dp]||(l[dp]=xA["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(c.redirect_to=r.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await lU(i,e,t+f,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(m):{data:Object.assign({},m),error:null}}async function lU(i,e,t,r,a,l){const c=oU(e,r,a,l);let f;try{f=await i(t,Object.assign({},c))}catch(m){throw console.error(m),new mp(oa(m),0)}if(f.ok||await tb(f),r?.noResolveJson)return f;try{return await f.json()}catch(m){await tb(m)}}function ur(i){var e;let t=null;hU(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=$M(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function nb(i){const e=ur(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function cs(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function uU(i){return{data:i,error:null}}function cU(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l}=i,c=Xo(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l},m=Object.assign({},c);return{data:{properties:f,user:m},error:null}}function rb(i){return i}function hU(i){return i.access_token&&i.refresh_token&&i.expires_in}const Ng=["global","local","others"];class fU{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=VA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ng[0]){if(Ng.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ng.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:cs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Xo(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:cU,redirectTo:t?.redirectTo})}catch(t){if(pe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:cs})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,l,c,f,m;try{const g={nextPage:null,lastPage:0,total:0},_=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:rb});if(_.error)throw _.error;const E=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(m=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(N=>{const U=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);g[`${A}Page`]=U}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(pe(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){_o(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:cs})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){_o(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:cs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){_o(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:cs})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_o(e.userId);try{const{data:t,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){_o(e.userId),_o(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,a,l,c,f,m;try{const g={nextPage:null,lastPage:0,total:0},_=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:rb});if(_.error)throw _.error;const E=await _.json(),b=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(m=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(N=>{const U=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);g[`${A}Page`]=U}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(pe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}}function ib(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const vo={debug:!!(globalThis&&UA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dU extends LA{}async function mU(i,e,t){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await t()}finally{vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new dU(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(vo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function gU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jA(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function pU(i){return parseInt(i,16)}function yU(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function _U(i){var e;const{chainId:t,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:m,resources:g,scheme:_,uri:E,version:b}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const S=jA(i.address),N=_?`${_}://${r}`:r,U=i.statement?`${i.statement}
`:"",A=`${N} wants you to sign in with your Ethereum account:
${S}

${U}`;let j=`URI: ${E}
Version: ${b}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),f&&(j+=`
Not Before: ${f.toISOString()}`),m&&(j+=`
Request ID: ${m}`),g){let z=`
Resources:`;for(const H of g){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);z+=`
- ${H}`}j+=z}return`${A}
${j}`}class Pt extends Error{constructor({message:e,code:t,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Of extends Pt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function vU({error:i,options:e}){var t,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Pt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(zA(c)){if(l.rp.id!==c)return new Pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function EU({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Pt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(zA(r)){if(t.rpId!==r)return new Pt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class wU{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const bU=new wU;function TU(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:r}=i,a=Xo(i,["challenge","user","excludeCredentials"]),l=ko(e).buffer,c=Object.assign(Object.assign({},t),{id:ko(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){f.excludeCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const g=r[m];f.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:ko(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function SU(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,r=Xo(i,["challenge","allowCredentials"]),a=ko(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const f=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function AU(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:fa(new Uint8Array(i.response.attestationObject)),clientDataJSON:fa(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function RU(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,r=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:fa(new Uint8Array(a.authenticatorData)),clientDataJSON:fa(new Uint8Array(a.clientDataJSON)),signature:fa(new Uint8Array(a.signature)),userHandle:a.userHandle?fa(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zA(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function sb(){var i,e;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function CU(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Of("Browser returned unexpected credential type",e)}:{data:null,error:new Of("Empty credential response",e)}}catch(e){return{data:null,error:vU({error:e,options:i})}}}async function IU(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Of("Browser returned unexpected credential type",e)}:{data:null,error:new Of("Empty credential response",e)}}catch(e){return{data:null,error:EU({error:e,options:i})}}}const OU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nf(...i){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of i)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const f=r[l];e(f)?r[l]=Nf(f,c):r[l]=Nf(c)}else r[l]=c}return r}function DU(i,e){return Nf(OU,i,e||{})}function kU(i,e){return Nf(NU,i,e||{})}class PU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:f};const m=a??bU.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=DU(c.webauthn.credential_options.publicKey,l?.create),{data:_,error:E}=await CU({publicKey:g,signal:m});return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}case"request":{const g=kU(c.webauthn.credential_options.publicKey,l?.request),{data:_,error:E}=await IU(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:m}));return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ca("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new zu("rpId is required for WebAuthn authentication")};try{if(!sb())return{data:null,error:new ca("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:m}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:m.type,rpId:t,rpOrigins:r,credential_response:m.credential_response}})}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ca("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new zu("rpId is required for WebAuthn registration")};try{if(!sb())return{data:null,error:new ca("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(_=>{var E;return(E=_.data)===null||E===void 0?void 0:E.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:f};const{data:m,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:a},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:t,rpOrigins:r,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ca("Unexpected error in register",c)}}}}gU();const xU={url:NM,storageKey:DM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ab(i,e,t){return await t()}const Eo={};class Bu{get jwks(){var e,t;return(t=(e=Eo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Eo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},xU),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Bu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Bu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Zt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new fU({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=VA(l.fetch),this.lock=l.lock||ab,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Zt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=mU:this.lock=ab,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:UA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ib(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=ib(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${PA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(Zt()&&(t=GM(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Zt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),LM(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return pe(t)?this._returnResult({error:t}):this._returnResult({error:new ca("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ur}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,a;try{let l;if("email"in e){const{email:_,password:E,options:b}=e;let S=null,N=null;this.flowType==="pkce"&&([S,N]=await yo(this.storage,this.storageKey)),l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:_,password:E,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:N},xform:ur})}else if("phone"in e){const{phone:_,password:E,options:b}=e;l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:E,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:ur})}else throw new Gh("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:nb})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:nb})}else throw new Gh("You must provide either an email or phone number and a password");const{data:r,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new po;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,a,l,c,f,m,g,_,E,b;let S,N;if("message"in e)S=e.message,N=e.signature;else{const{chain:U,wallet:A,statement:j,options:z}=e;let H;if(Zt())if(typeof A=="object")H=A;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")H=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=A}const re=new URL((t=z?.url)!==null&&t!==void 0?t:window.location.href),he=await H.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!he||he.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=jA(he[0]);let O=(r=z?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const I=await H.request({method:"eth_chainId"});O=pU(I)}const C={domain:re.host,address:le,statement:j,uri:re.href,version:"1",chainId:O,nonce:(a=z?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=z?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=z?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=z?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=z?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(_=z?.signInWithEthereum)===null||_===void 0?void 0:_.resources};S=_U(C),N=await H.request({method:"personal_sign",params:[yU(S),le]})}try{const{data:U,error:A}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:N},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ur});if(A)throw A;if(!U||!U.session||!U.user){const j=new po;return this._returnResult({data:{user:null,session:null},error:j})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:A})}catch(U){if(pe(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async signInWithSolana(e){var t,r,a,l,c,f,m,g,_,E,b,S;let N,U;if("message"in e)N=e.message,U=e.signature;else{const{chain:A,wallet:j,statement:z,options:H}=e;let re;if(Zt())if(typeof j=="object")re=j;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))re=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");re=j}const he=new URL((t=H?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in re&&re.signIn){const le=await re.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H?.signInWithSolana),{version:"1",domain:he.host,uri:he.href}),z?{statement:z}:null));let O;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")O=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)O=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)N=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),U=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in re)||typeof re.signMessage!="function"||!("publicKey"in re)||typeof re!="object"||!re.publicKey||!("toBase58"in re.publicKey)||typeof re.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${he.host} wants you to sign in with your Solana account:`,re.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${he.href}`,`Issued At: ${(a=(r=H?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=H?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((c=H?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((f=H?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((m=H?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((g=H?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((E=(_=H?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||E===void 0)&&E.length?["Resources",...H.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const le=await re.signMessage(new TextEncoder().encode(N),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=le}}try{const{data:A,error:j}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:fa(U)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ur});if(j)throw j;if(!A||!A.session||!A.user){const z=new po;return this._returnResult({data:{user:null,session:null},error:z})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:j})}catch(A){if(pe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const t=await sa(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:l,error:c}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ur});if(await is(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new po;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:l,nonce:c}=e,f=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ur}),{data:m,error:g}=f;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const _=new po;return this._returnResult({data:{user:null,session:null},error:_})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,a,l,c;try{if("email"in e){const{email:f,options:m}=e;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await yo(this.storage,this.storageKey));const{error:E}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=m?.data)!==null&&t!==void 0?t:{},create_user:(r=m?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:_},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:m}=e,{data:g,error:_}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:_})}throw new Gh("You must provide either an email or phone number.")}catch(f){if(pe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var t,r;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:f}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:ur});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,g=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,r,a,l,c;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await yo(this.storage,this.storageKey));const g=await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:uU});return!((l=g.data)===null||l===void 0)&&l.url&&Zt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(f){if(pe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new lr;const{error:a}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:f}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:f})}throw new Gh("You must provide either an email or phone number and a type")}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await sa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Rg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await sa(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Og()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=sU(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:cs}):await this._useSession(async t=>{var r,a,l;const{data:c,error:f}=t;if(f)throw f;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new lr}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:cs})})}catch(t){if(pe(t))return VM(t)&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new lr;const c=a.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await yo(this.storage,this.storageKey));const{data:g,error:_}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:c.access_token,xform:cs});if(_)throw _;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(pe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lr;const t=Date.now()/1e3;let r=t,a=!0,l=null;const{payload:c}=Ig(e.access_token);if(c.exp&&(r=c.exp,a=r<=t),a){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(pe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new lr;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Zt())throw new Kh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Kh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Yw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yw("No code detected.");const{data:z,error:H}=await this._exchangeCodeForSession(e.code);if(H)throw H;const re=new URL(window.location.href);return re.searchParams.delete("code"),window.history.replaceState(window.history.state,"",re.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:m,token_type:g}=e;if(!l||!f||!c||!g)throw new Kh("No session defined in URL");const _=Math.round(Date.now()/1e3),E=parseInt(f);let b=_+E;m&&(b=parseInt(m));const S=b-_;S*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${E}s`);const N=b-E;_-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,_):_-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,_);const{data:U,error:A}=await this._getUser(l);if(A)throw A;const j={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:b,refresh_token:c,token_type:g,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:e.type},error:null})}catch(r){if(pe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(UM(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=FM(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await yo(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(pe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:a}=await this._useSession(async l=>{var c,f,m,g,_;const{data:E,error:b}=l;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",S,{headers:this.headers,jwt:(_=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return Zt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(pe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:f,token:m,access_token:g,nonce:_}=e,E=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:f,id_token:m,access_token:g,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ur}),{data:b,error:S}=E;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new po}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)throw c;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await YM(async a=>(a>0&&await QM(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ur})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Cg(l)&&Date.now()+c-r<Ao})}catch(r){if(this._debug(t,"error",r),pe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Zt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await sa(this.storage,this.storageKey);if(a&&this.userStorage){let c=await sa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Ro(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Og()}else if(a&&!a.user&&!a.user){const c=await sa(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await is(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,a)):a.user=Og()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Rg;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Rg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Cg(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new lr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Zf;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new lr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),pe(l)){const c={data:null,error:l};return Cg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=eb(a);await Ro(this.storage,this.storageKey,l)}else{const a=eb(t);await Ro(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await is(this.storage,this.storageKey),await is(this.storage,this.storageKey+"-code-verifier"),await is(this.storage,this.storageKey+"-user"),this.userStorage&&await is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ao}ms, refresh threshold is ${fp} ticks`),a<=fp&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await yo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:g}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&m.type==="totp"&&(!((a=m?.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?AU(e.webauthn.credential_response):RU(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:TU(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:SU(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ig(r.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(f="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new lr})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new lr});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new lr});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Zt()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(f=>f.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(f=>f.kid===e),r&&this.jwks_cached_at+xM>a)return r;const{data:l,error:c}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(f=>f.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:S,error:N}=await this.getSession();if(N||!S.session)return this._returnResult({data:null,error:N});r=S.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:m}}=Ig(r);t?.allowExpired||nU(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:l,header:a,signature:c},error:null}}const _=rU(a.alg),E=await crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!await crypto.subtle.verify(_,E,c,HM(`${f}.${m}`)))throw new gp("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(pe(r))return this._returnResult({data:null,error:r});throw r}}}Bu.nextInstanceID={};const MU=Bu;class UU extends MU{constructor(e){super(e)}}class VU{constructor(e,t,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const f=OM(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const m=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:wM,realtime:TM,auth:Object.assign(Object.assign({},bM),{storageKey:m}),global:EM},_=IM(r??{},g);this.storageKey=(a=_.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(E,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=_.auth)!==null&&c!==void 0?c:{},this.headers,_.global.fetch),this.fetch=RM(t,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new Nx(new URL("rest/v1",f).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new yM(this.storageUrl.href,this.headers,this.fetch,r?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new Rx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:f,lock:m,debug:g,throwOnError:_},E,b){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UU({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,flowType:f,lock:m,debug:g,throwOnError:_,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Kx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LU=(i,e,t)=>new VU(i,e,t);function jU(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zU="https://zcsedyougupagxksbxmq.supabase.co",BU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpjc2VkeW91Z3VwYWd4a3NieG1xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NjMyNDYsImV4cCI6MjA3ODUzOTI0Nn0.E0ElsJsAjD476SKOfPlt9Yw7AzkUqYu_G0yQ_O28rXM",tc=LU(zU,BU),bt={LESSONS:"lessons",QUIZZES:"quizzes",DICTIONARY:"dictionary",MINIGAMES:"minigames",MEDIA:"media"};async function nc(i,e,t,r={}){try{const{data:a,error:l}=await tc.storage.from(i).upload(e,t,{cacheControl:"3600",upsert:!0,...r});if(l)throw l;return a}catch(a){throw console.error("Error uploading file:",a),a}}function qU(i,e){const{data:t}=tc.storage.from(i).getPublicUrl(e);return t.publicUrl}async function ed(i,e){try{const{data:t,error:r}=await tc.storage.from(i).download(e);if(r)throw r;return await t.text()}catch(t){throw console.error("Error downloading file:",t),t}}async function td(i,e=""){try{const{data:t,error:r}=await tc.storage.from(i).list(e);if(r)throw r;return t}catch(t){throw console.error("Error listing files:",t),t}}async function nd(i,e){try{const{data:t,error:r}=await tc.storage.from(i).remove([e]);if(r)throw r;return t}catch(t){throw console.error("Error deleting file:",t),t}}function rd({bucket:i,onUploadComplete:e,accept:t="*/*",label:r="Upload File"}){const[a,l]=K.useState(!1),[c,f]=K.useState(0),[m,g]=K.useState(null),_=async E=>{const b=E.target.files?.[0];if(b){l(!0),g(null),f(0);try{let S=b.name;i===bt.MEDIA&&(b.type.startsWith("video/")?S=`vid/${b.name}`:b.type.startsWith("image/")&&(S=`img/${b.name}`)),await nc(i,S,b,{onUploadProgress:U=>{f(U)}});const N=qU(i,S);e&&e({path:S,url:N,name:b.name,size:b.size,type:b.type}),f(100),E.target.value=""}catch(S){g(S.message||"Upload failed"),console.error("Upload error:",S)}finally{l(!1),setTimeout(()=>f(0),2e3)}}};return L.jsxs("div",{className:"file-uploader",children:[L.jsxs("label",{className:"file-uploader__label",children:[r,L.jsx("input",{type:"file",onChange:_,accept:t,disabled:a,className:"file-uploader__input"})]}),a&&L.jsxs("div",{className:"file-uploader__progress",children:[L.jsx("progress",{value:c,max:100}),L.jsxs("span",{children:[c,"%"]})]}),m&&L.jsx("div",{className:"file-uploader__error",children:m})]})}function HU(){const[i,e]=K.useState([]),[t,r]=K.useState(!1),[a,l]=K.useState(null),[c,f]=K.useState(""),[m,g]=K.useState(null);K.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await td(bt.LESSONS);e(A.filter(j=>j.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load lessons"),console.error("Error loading lessons:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const j=await ed(bt.LESSONS,A);f(j),l(A)}catch(j){g(j.message||"Failed to load lesson"),console.error("Error loading lesson:",j)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a lesson first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await nc(bt.LESSONS,a,A),alert("Lesson saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save lesson"),console.error("Error saving lesson:",A)}finally{r(!1)}},S=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await nd(bt.LESSONS,A),a===A&&(l(null),f("")),_()}catch(j){g(j.message||"Failed to delete lesson"),console.error("Error deleting lesson:",j)}finally{r(!1)}}},N=()=>{const A={id:`l_new_${Date.now()}`,title:"New Lesson",description:"Lesson description",difficulty:"Easy",pages:[]};f(JSON.stringify(A,null,2)),l("new_lesson.json")},U=({path:A})=>{l(A),E(A)};return L.jsxs("div",{className:"content-manager",children:[L.jsxs("div",{className:"content-manager__header",children:[L.jsx("h2",{children:"Lessons"}),L.jsxs("div",{className:"content-manager__actions",children:[L.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Lesson"}),L.jsx(rd,{bucket:bt.LESSONS,onUploadComplete:U,accept:".json",label:"Upload Lesson JSON"})]})]}),m&&L.jsx("div",{className:"alert alert-error",children:m}),L.jsxs("div",{className:"content-manager__body",children:[L.jsxs("div",{className:"content-manager__sidebar",children:[L.jsx("h3",{children:"Existing Lessons"}),t&&L.jsx("p",{children:"Loading..."}),L.jsx("ul",{className:"file-list",children:i.map(A=>L.jsxs("li",{className:"file-list__item",children:[L.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),L.jsx("button",{onClick:()=>S(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),L.jsx("div",{className:"content-manager__editor",children:a?L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"editor-header",children:[L.jsxs("div",{className:"editor-header__title",children:[L.jsx("h3",{children:a}),a!=="new_lesson.json"&&L.jsx("button",{onClick:()=>S(a),className:"btn btn-sm btn-danger",title:"Delete this lesson",disabled:t,children:"Delete"})]}),L.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),L.jsx("textarea",{value:c,onChange:A=>f(A.target.value),className:"editor-textarea",placeholder:"Lesson JSON content..."})]}):L.jsx("div",{className:"editor-placeholder",children:L.jsx("p",{children:"Select a lesson from the list or create a new one"})})})]})]})}function $U(){const[i,e]=K.useState([]),[t,r]=K.useState(!1),[a,l]=K.useState(null),[c,f]=K.useState(""),[m,g]=K.useState(null);K.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await td(bt.QUIZZES);e(A.filter(j=>j.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load quizzes"),console.error("Error loading quizzes:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const j=await ed(bt.QUIZZES,A);f(j),l(A)}catch(j){g(j.message||"Failed to load quiz"),console.error("Error loading quiz:",j)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a quiz first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await nc(bt.QUIZZES,a,A),alert("Quiz saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save quiz"),console.error("Error saving quiz:",A)}finally{r(!1)}},S=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await nd(bt.QUIZZES,A),a===A&&(l(null),f("")),_()}catch(j){g(j.message||"Failed to delete quiz"),console.error("Error deleting quiz:",j)}finally{r(!1)}}},N=()=>{const A={id:`q_new_${Date.now()}`,title:"New Quiz",description:"Quiz description",difficulty:"Easy",questions:[]};f(JSON.stringify(A,null,2)),l("new_quiz.json")},U=({path:A})=>{l(A),E(A)};return L.jsxs("div",{className:"content-manager",children:[L.jsxs("div",{className:"content-manager__header",children:[L.jsx("h2",{children:"Quizzes"}),L.jsxs("div",{className:"content-manager__actions",children:[L.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Quiz"}),L.jsx(rd,{bucket:bt.QUIZZES,onUploadComplete:U,accept:".json",label:"Upload Quiz JSON"})]})]}),m&&L.jsx("div",{className:"alert alert-error",children:m}),L.jsxs("div",{className:"content-manager__body",children:[L.jsxs("div",{className:"content-manager__sidebar",children:[L.jsx("h3",{children:"Existing Quizzes"}),t&&L.jsx("p",{children:"Loading..."}),L.jsx("ul",{className:"file-list",children:i.map(A=>L.jsxs("li",{className:"file-list__item",children:[L.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),L.jsx("button",{onClick:()=>S(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),L.jsx("div",{className:"content-manager__editor",children:a?L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"editor-header",children:[L.jsxs("div",{className:"editor-header__title",children:[L.jsx("h3",{children:a}),a!=="new_quiz.json"&&L.jsx("button",{onClick:()=>S(a),className:"btn btn-sm btn-danger",title:"Delete this quiz",disabled:t,children:"Delete"})]}),L.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),L.jsx("textarea",{value:c,onChange:A=>f(A.target.value),className:"editor-textarea",placeholder:"Quiz JSON content..."})]}):L.jsx("div",{className:"editor-placeholder",children:L.jsx("p",{children:"Select a quiz from the list or create a new one"})})})]})]})}function FU(){const[i,e]=K.useState([]),[t,r]=K.useState(!1),[a,l]=K.useState(null),[c,f]=K.useState(""),[m,g]=K.useState(null);K.useEffect(()=>{_()},[]);const _=async()=>{r(!0),g(null);try{const A=await td(bt.DICTIONARY);e(A.filter(j=>j.name.endsWith(".json")))}catch(A){g(A.message||"Failed to load dictionary files"),console.error("Error loading dictionary files:",A)}finally{r(!1)}},E=async A=>{r(!0),g(null);try{const j=await ed(bt.DICTIONARY,A);f(j),l(A)}catch(j){g(j.message||"Failed to load file"),console.error("Error loading file:",j)}finally{r(!1)}},b=async()=>{if(!a){g("Please select or create a file first");return}r(!0),g(null);try{JSON.parse(c);const A=new Blob([c],{type:"application/json"});await nc(bt.DICTIONARY,a,A),alert("File saved successfully!"),_()}catch(A){A instanceof SyntaxError?g("Invalid JSON format: "+A.message):g(A.message||"Failed to save file"),console.error("Error saving file:",A)}finally{r(!1)}},S=async A=>{if(confirm(`Are you sure you want to delete ${A}?`)){r(!0),g(null);try{await nd(bt.DICTIONARY,A),a===A&&(l(null),f("")),_()}catch(j){g(j.message||"Failed to delete file"),console.error("Error deleting file:",j)}finally{r(!1)}}},N=()=>{f(JSON.stringify({category:"New Category",words:[]},null,2)),l("new_category.json")},U=({path:A})=>{l(A),E(A)};return L.jsxs("div",{className:"content-manager",children:[L.jsxs("div",{className:"content-manager__header",children:[L.jsx("h2",{children:"Dictionary"}),L.jsxs("div",{className:"content-manager__actions",children:[L.jsx("button",{onClick:N,className:"btn btn-primary",children:"New Category"}),L.jsx(rd,{bucket:bt.DICTIONARY,onUploadComplete:U,accept:".json",label:"Upload Dictionary JSON"})]})]}),m&&L.jsx("div",{className:"alert alert-error",children:m}),L.jsxs("div",{className:"content-manager__body",children:[L.jsxs("div",{className:"content-manager__sidebar",children:[L.jsx("h3",{children:"Dictionary Files"}),t&&L.jsx("p",{children:"Loading..."}),L.jsx("ul",{className:"file-list",children:i.map(A=>L.jsxs("li",{className:"file-list__item",children:[L.jsx("button",{onClick:()=>E(A.name),className:`file-list__link ${a===A.name?"active":""}`,children:A.name}),L.jsx("button",{onClick:()=>S(A.name),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},A.name))})]}),L.jsx("div",{className:"content-manager__editor",children:a?L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"editor-header",children:[L.jsxs("div",{className:"editor-header__title",children:[L.jsx("h3",{children:a}),a!=="new_category.json"&&L.jsx("button",{onClick:()=>S(a),className:"btn btn-sm btn-danger",title:"Delete this file",disabled:t,children:"Delete"})]}),L.jsx("button",{onClick:b,className:"btn btn-primary",disabled:t,children:t?"Saving...":"Save"})]}),L.jsx("textarea",{value:c,onChange:A=>f(A.target.value),className:"editor-textarea",placeholder:"Dictionary JSON content..."})]}):L.jsx("div",{className:"editor-placeholder",children:L.jsx("p",{children:"Select a file from the list or create a new one"})})})]})]})}function GU(){const[i,e]=K.useState([]),[t,r]=K.useState(null),[a,l]=K.useState(null),[c,f]=K.useState(""),[m,g]=K.useState(!1),[_,E]=K.useState(null);K.useEffect(()=>{b()},[]);const b=async()=>{g(!0),E(null);try{const z=await td(bt.MINIGAMES),H=new Map;z.forEach(re=>{const he=re.name.split("/");if(he.length>1){const le=he[0];H.has(le)||H.set(le,[]),H.get(le).push({...re,relativePath:re.name})}else H.has("root")||H.set("root",[]),H.get("root").push({...re,relativePath:re.name})}),e(Array.from(H.entries()).map(([re,he])=>({name:re,files:he})))}catch(z){E(z.message||"Failed to load minigames"),console.error("Error loading minigames:",z)}finally{g(!1)}},S=async z=>{g(!0),E(null);try{const H=await ed(bt.MINIGAMES,z);f(H),l(z)}catch(H){E(H.message||"Failed to load level"),console.error("Error loading level:",H)}finally{g(!1)}},N=async()=>{if(!a){E("Please select or create a level first");return}g(!0),E(null);try{JSON.parse(c);const z=new Blob([c],{type:"application/json"});await nc(bt.MINIGAMES,a,z),alert("Level saved successfully!"),b()}catch(z){z instanceof SyntaxError?E("Invalid JSON format: "+z.message):E(z.message||"Failed to save level"),console.error("Error saving level:",z)}finally{g(!1)}},U=async z=>{if(confirm(`Are you sure you want to delete ${z}?`)){g(!0),E(null);try{await nd(bt.MINIGAMES,z),a===z&&(l(null),f("")),b()}catch(H){E(H.message||"Failed to delete level"),console.error("Error deleting level:",H)}finally{g(!1)}}},A=z=>{const H={id:`level_${Date.now()}`,title:"New Level",questions:[]};f(JSON.stringify(H,null,2));const re=z?`${z}/new_level.json`:"new_level.json";l(re)},j=({path:z})=>{l(z),S(z)};return L.jsxs("div",{className:"content-manager",children:[L.jsxs("div",{className:"content-manager__header",children:[L.jsx("h2",{children:"Minigames"}),L.jsx("div",{className:"content-manager__actions",children:L.jsx(rd,{bucket:bt.MINIGAMES,onUploadComplete:j,accept:".json",label:"Upload Level JSON"})})]}),_&&L.jsx("div",{className:"alert alert-error",children:_}),L.jsxs("div",{className:"content-manager__body",children:[L.jsxs("div",{className:"content-manager__sidebar",children:[L.jsx("h3",{children:"Minigame Levels"}),m&&L.jsx("p",{children:"Loading..."}),i.map(({name:z,files:H})=>L.jsxs("div",{className:"minigame-group",children:[L.jsx("h4",{children:z==="root"?"Root":z}),L.jsx("ul",{className:"file-list",children:H.filter(re=>re.name.endsWith(".json")).map(re=>L.jsxs("li",{className:"file-list__item",children:[L.jsx("button",{onClick:()=>S(re.relativePath),className:`file-list__link ${a===re.relativePath?"active":""}`,children:re.name.split("/").pop()}),L.jsx("button",{onClick:()=>U(re.relativePath),className:"btn btn-sm btn-danger",title:"Delete",children:""})]},re.relativePath))}),z!=="root"&&L.jsx("button",{onClick:()=>A(z),className:"btn btn-sm btn-primary",children:"New Level"})]},z))]}),L.jsx("div",{className:"content-manager__editor",children:a?L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"editor-header",children:[L.jsxs("div",{className:"editor-header__title",children:[L.jsx("h3",{children:a}),a&&!a.startsWith("new_")&&L.jsx("button",{onClick:()=>U(a),className:"btn btn-sm btn-danger",title:"Delete this level",disabled:m,children:"Delete"})]}),L.jsx("button",{onClick:N,className:"btn btn-primary",disabled:m,children:m?"Saving...":"Save"})]}),L.jsx("textarea",{value:c,onChange:z=>f(z.target.value),className:"editor-textarea",placeholder:"Level JSON content..."})]}):L.jsx("div",{className:"editor-placeholder",children:L.jsx("p",{children:"Select a level from the list or upload a new one"})})})]})]})}function KU(){const[i,e]=K.useState("lessons"),t=[{id:"lessons",label:"Lessons"},{id:"quizzes",label:"Quizzes"},{id:"dictionary",label:"Dictionary"},{id:"minigames",label:"Minigames"}];return L.jsxs("div",{className:"content-page",children:[L.jsx("div",{className:"content-page__tabs",children:t.map(r=>L.jsx("button",{onClick:()=>e(r.id),className:`tab-button ${i===r.id?"active":""}`,children:r.label},r.id))}),L.jsxs("div",{className:"content-page__content",children:[i==="lessons"&&L.jsx(HU,{}),i==="quizzes"&&L.jsx($U,{}),i==="dictionary"&&L.jsx(FU,{}),i==="minigames"&&L.jsx(GU,{})]})]})}function QU(){return L.jsxs("div",{children:[L.jsx("h1",{children:"Settings"}),L.jsx("p",{children:"Configure admin preferences."})]})}function YU(){const{login:i}=Wf(),e=kf(),[t,r]=K.useState(""),[a,l]=K.useState(""),[c,f]=K.useState(!1),[m,g]=K.useState(""),_=async E=>{E.preventDefault(),g(""),f(!0);try{await i({email:t,password:a}),e("/",{replace:!0})}catch(b){g(b?.message||"Login failed")}finally{f(!1)}};return L.jsx("div",{className:"login-root",children:L.jsxs("div",{className:"login-card",children:[L.jsx("h1",{className:"login-title",children:"Admin Sign in"}),L.jsxs("form",{onSubmit:_,className:"login-form",children:[m?L.jsx("div",{className:"alert error",children:m}):null,L.jsxs("label",{className:"field",children:[L.jsx("span",{className:"field__label",children:"Email"}),L.jsx("input",{type:"email",className:"field__input",value:t,onChange:E=>r(E.target.value),placeholder:"admin@example.com",required:!0,autoFocus:!0})]}),L.jsxs("label",{className:"field",children:[L.jsx("span",{className:"field__label",children:"Password"}),L.jsx("input",{type:"password",className:"field__input",value:a,onChange:E=>l(E.target.value),placeholder:"",required:!0})]}),L.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?"Signing in":"Sign in"})]})]})})}function JU({children:i}){const{adminName:e,logout:t}=Wf(),r=kf(),a=()=>{t(),r("/login",{replace:!0})};return L.jsxs("div",{className:"app-root",children:[L.jsxs("header",{className:"app-bar",children:[L.jsx("div",{className:"app-bar__title",children:"Kamaynikasyon Admin"}),L.jsxs("div",{className:"app-bar__actions",children:[L.jsx("span",{className:"app-bar__user",children:e}),L.jsx("button",{className:"btn btn-text",onClick:a,children:"Logout"})]})]}),L.jsxs("div",{className:"app-shell",children:[L.jsx("aside",{className:"nav-rail",children:L.jsxs("nav",{className:"nav-rail__nav",children:[L.jsx(lu,{to:"/",end:!0,className:"nav-rail__link",children:"Dashboard"}),L.jsx(lu,{to:"/users",className:"nav-rail__link",children:"Users"}),L.jsx(lu,{to:"/content",className:"nav-rail__link",children:"Content"}),L.jsx(lu,{to:"/settings",className:"nav-rail__link",children:"Settings"})]})}),L.jsx("main",{className:"app-content",children:i})]})]})}function WU({children:i}){const{isAuthenticated:e}=Wf();return e?i:L.jsx(pb,{to:"/login",replace:!0})}function XU(){return L.jsx(BC,{children:L.jsx(yx,{children:L.jsxs(r0,{children:[L.jsx(ss,{path:"/login",element:L.jsx(YU,{})}),L.jsx(ss,{path:"/*",element:L.jsx(WU,{children:L.jsx(JU,{children:L.jsxs(r0,{children:[L.jsx(ss,{path:"/",element:L.jsx(_x,{})}),L.jsx(ss,{path:"/users",element:L.jsx(vx,{})}),L.jsx(ss,{path:"/content",element:L.jsx(KU,{})}),L.jsx(ss,{path:"/settings",element:L.jsx(QU,{})}),L.jsx(ss,{path:"*",element:L.jsx(pb,{to:"/",replace:!0})})]})})})})]})})})}O1.createRoot(document.getElementById("root")).render(L.jsx(K.StrictMode,{children:L.jsx(XU,{})}));
